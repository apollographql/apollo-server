<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.4416d3c7f2735fbdaee5.css" data-identity="gatsby-global-css">@import url(https://cdn.jsdelivr.net/npm/@algolia/autocomplete-theme-classic);
/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}@font-face{font-family:Source Code Pro;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/sourcecodepro/v14/HI_SiYsKILxRpg3hIP6sJ7fM7PqlPevT.ttf) format("truetype")}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:400;src:url(https://fonts.gstatic.com/s/sourcesanspro/v14/6xK3dSBYKcSV-LCoeQqfX1RYOo3qOK7g.ttf) format("truetype")}@font-face{font-family:Source Sans Pro;font-style:normal;font-weight:600;src:url(https://fonts.gstatic.com/s/sourcesanspro/v14/6xKydSBYKcSV-LCoeQqfX1RYOo3i54rwlxdr.ttf) format("truetype")}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}body{font-family:Source Sans Pro,sans-serif}code,pre{font-family:Source Code Pro,monospace}html{font-size:100%;line-height:1.45;overflow-y:auto}body{color:#5a6270}div.mermaid,h1,h2,h3,h4,h5,h6,img,ol,p,ul{margin:0 0 24px}h4,h5{margin-bottom:1.0875rem}h1,h2,h3,h4,h5,h6{color:#2f353f;line-height:1.1}h1,h2,h3,h4,h6{font-weight:400}h1{font-size:2.5rem}h2{font-size:1.73286rem}h3{font-size:1.4427rem}h4,li,p{font-size:1.125rem}h5{font-size:1rem}h6{font-size:.875rem}li,p{line-height:1.7}li li{font-size:1.05rem;line-height:1.4}ol,ul{margin-left:24px;padding:0}li{margin-bottom:12px}li>ol,li>ul{margin-top:12px}blockquote{border-left:2px solid #3f20ba;margin-left:0;padding:12px 20px}blockquote>ol,blockquote>p,blockquote>ul{font-size:inherit}blockquote>ol:last-child,blockquote>p:last-child,blockquote>ul:last-child{margin-bottom:0}blockquote li,td li{font-size:inherit;line-height:1.1}form{margin-bottom:0}hr{background-color:#dee2e7;border:none;height:1px;margin-bottom:23px}img.screenshot{border-radius:8px;box-shadow:0 0 0 1px rgba(18,21,26,.04),0 1px 4px 0 rgba(0,0,0,.08)}.gatsby-code-title{align-items:center;color:#5a6270;display:flex;font-family:Source Code Pro,monospace;font-size:15px;height:37px;margin-bottom:-37px;padding-left:19px}.gatsby-highlight-code-line{background-color:#ebeef0;display:block;margin-left:-3.5em;margin-right:-1em;padding-left:3.5em;padding-right:1em}.gatsby-highlight pre[class*=language-]{background-color:transparent;float:left;margin:0;min-width:100%;overflow:initial;padding:0}.gatsby-highlight pre[class*=language-].line-numbers{padding-left:2.5em}.gatsby-highlight pre[class*=language-].line-numbers .line-numbers-rows{border-right:none}.gatsby-highlight pre[class*=language-].line-numbers .line-numbers-rows>span:before{color:#cad0d8}code[class*=language-],pre[class*=language-]{color:#2f353f;direction:ltr;font-family:Source Code Pro,monospace;font-size:15px;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;text-shadow:none;white-space:pre;word-break:normal;word-spacing:normal}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{background:#f4f6f8;margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-]{background:#ebeef0;border-radius:.3em;color:#832363;font-size:.9em;padding:.1em .15em}.namespace{opacity:.7}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#b46626}.token.punctuation{color:#5a6270}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#832363}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#1d7b78}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:transparent;color:inherit}.token.atrule,.token.attr-value,.token.keyword{color:#3f20ba}.token.class-name,.token.function{color:#832363}.token.important,.token.regex,.token.variable{color:#84671d}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[class*=language-]>code[class*=language-],pre[data-line]{position:relative}@media (detachedmediaquery:""){:root{--aa-detached-modal-max-height:600px}}:root{--aa-detached-modal-max-width:1000px;--aa-detached-modal-max-height:600px;--aa-item-content-title-font-size:1.125rem;--aa-item-content-title-line-height:1.25em}.app-container{margin:0 auto;max-width:1000px;width:100%}.aa-Autocomplete[aria-expanded=true]{visibility:hidden}.aa-Input{font-size:1.125rem}.aa-Container{height:100%;position:relative}.aa-Grid{-webkit-column-gap:calc(var(--aa-spacing-half)/2);column-gap:calc(var(--aa-spacing-half)/2);display:grid}.aa-DetachedContainer .aa-Grid{grid-template-columns:1fr}.aa-DetachedContainer--modal .aa-Grid{grid-template-columns:repeat(2,50%)}.aa-MultiGrid{-webkit-column-gap:calc(var(--aa-spacing-half)/2);column-gap:calc(var(--aa-spacing-half)/2);display:grid;grid-template-columns:1fr 1fr 1fr}.aa-AlgoliaAttribution{bottom:6px;display:flex;height:16px;position:absolute;right:6px}.aa-AlgoliaAttribution svg{height:100%}.aa-DocsetIcon{align-items:center;align-self:flex-start;color:#3e34d3;display:flex;font-size:var(--aa-item-content-title-font-size);height:var(--aa-item-content-title-line-height);justify-content:center}.aa-PreviewType .aa-DocsetIcon{height:auto}.aa-PreviewType .aa-DocsetIcon svg{height:24px;width:24px}.aa-DocsetIcon svg{fill:currentColor;height:1em;width:1em}.aa-PanelLayout{overflow-x:hidden;padding:0}.aa-Detached .aa-DetachedContainer{background:none}.aa-DetachedContainer .aa-DetachedFormContainer{background:rgba(var(--aa-background-color-rgb),var(--aa-background-color-alpha));padding:calc(var(--aa-spacing-half)*1.5)}.aa-DetachedContainer:not(.aa-DetachedContainer--modal) .aa-AlgoliaAttribution,.aa-DetachedContainer:not(.aa-DetachedContainer--modal) .aa-Preview.aa-Column{display:none}.aa-DetachedSearchButton{border-radius:4px;overflow:hidden;white-space:nowrap}.aa-DetachedSearchButtonIcon{flex-shrink:0}.aa-DetachedSearchButtonPlaceholder{flex-grow:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;width:0}.aa-NoResults{grid-column:span 2}.aa-SourceNoResults{align-items:center;display:flex;justify-content:center;padding:0}.aa-NoResults .aa-Source~.aa-Source{display:none}.aa-SourceHeaderTitle{font-size:.9rem;padding-left:calc(var(--aa-spacing-half)/2)}.aa-Preview.aa-Column{align-items:center;display:flex;flex-direction:column;padding:40px 20px;text-align:center}.aa-PreviewType{align-items:center;display:flex;justify-content:center;margin-bottom:20px}.aa-PreviewType .aa-DocsetIcon{margin-right:8px}.aa-PreviewImage{background:var(--aa-background-color);border:1px solid var(--aa-selected-color);border-radius:3px;display:flex;height:150px;justify-content:center;margin-bottom:var(--aa-spacing-half);padding:var(--aa-spacing-half)}.aa-PreviewImage img{max-width:100%;-o-object-fit:contain;object-fit:contain}.aa-PreviewBreacrumbs{align-items:center;color:#696969;display:flex;font-size:14px;justify-content:center;line-height:1.5;margin-bottom:var(--aa-spacing-half);white-space:nowrap;width:100%}.aa-PreviewBreacrumbs a{color:inherit;text-decoration:none}.aa-PreviewBreacrumbs a:hover{text-decoration:underline}.aa-PreviewBreacrumbs .aa-Chevron{background-color:#f4f6f8}.aa-PreviewBreacrumbs .aa-PreviewBreadcrumbsContent{background-color:#f4f6f8;padding:0 8px}.aa-PreviewBreacrumbs .aa-PreviewBreadcrumbsContent:first-child{border-bottom-left-radius:9999px;border-top-left-radius:9999px}.aa-PreviewBreacrumbs .aa-PreviewBreadcrumbsContent:last-child{border-bottom-right-radius:9999px;border-top-right-radius:9999px}.aa-PreviewBreacrumbs .aa-PreviewBreadcrumbsContent:hover~.aa-PreviewBreadcrumbsContent,.aa-PreviewBreacrumbs .aa-PreviewBreadcrumbsContent:not(:last-child):not(:hover){overflow:hidden;text-overflow:ellipsis}.aa-PreviewTitle{font-size:28px;font-weight:700;line-height:1;margin-bottom:var(--aa-spacing-half)}.aa-PreviewTitleWrapper{align-items:center;display:flex}.aa-PreviewTitleWrapper a{color:inherit;text-decoration:none}.aa-PreviewTitleWrapper a:hover{text-decoration:underline}.aa-PreviewDescription{color:var(--aa-content-text-color);font-size:1rem;line-height:1.5;max-width:100%}.aa-PreviewDescription mark,.aa-PreviewTitle mark{background:none;color:#3e34d3;font-weight:700}.aa-Item{border-radius:0;margin:0;padding:6px 4px}.aa-Item a{text-decoration:none}.aa-Item[aria-selected=true] mark{text-decoration:underline}.aa-ItemLink{grid-template-columns:1fr}.aa-ItemContent{grid-template-columns:28px 1fr 20px}.aa-ItemContentBody{grid-gap:0;white-space:nowrap}.aa-ItemContent mark{color:#3e34d3}.aa-ItemContentTitle{font-size:var(--aa-item-content-title-font-size)}.aa-ItemContentSnippet{color:rgba(46,46,47,.7);font-size:.875rem;overflow:hidden;text-overflow:ellipsis}.aa-ItemContentEnterKey{color:rgba(46,46,47,.7);justify-self:flex-end}.aa-Item[aria-selected=false] .aa-ItemContentEnterKey{display:none}[data-autocomplete-source-id=hits]{margin-bottom:var(--aa-spacing-half)}[data-autocomplete-source-id=suggestions] .aa-List{display:flex;flex-wrap:wrap;margin:0 calc(var(--aa-spacing-half)/2*-1px)}[data-autocomplete-source-id=suggestions] .aa-Item[aria-selected=true]{background:none}.aa-CategoriesContainer{margin-top:16px}.aa-CategoriesContainer .aa-QuerySuggestion{border:1px solid #d9cfff;border-radius:4px;color:#3f20ba;font-family:Source Code Pro,Menlo,monospace;font-size:13px;line-height:18px;margin:4px;padding:1px 6px;text-transform:uppercase}.aa-QuerySuggestion{background:none;border:1px solid rgba(var(--aa-panel-border-color-rgb),var(--aa-panel-border-color-alpha));border-radius:3px;color:rgba(var(--aa-icon-color-rgb),var(--aa-icon-color-alpha));cursor:pointer;display:inline-block;font-size:.85em;font-weight:700;margin:calc(var(--aa-spacing-half)/2/2);padding:var(--aa-spacing-half) var(--aa-spacing)}.aa-QuerySuggestion:hover{background:rgba(var(--aa-selected-color-rgb),var(--aa-selected-color-alpha))}.aa-QuerySuggestion mark{background:none;color:currentColor;font-weight:400}[data-autocomplete-source-id=suggestions] .aa-Item[aria-selected=true] .aa-QuerySuggestion{background:rgba(var(--aa-selected-color-rgb),var(--aa-selected-color-alpha));border-color:transparent}pre[class*=language-].line-numbers{counter-reset:linenumber;padding-left:3.8em;position:relative}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{border-right:1px solid #999;font-size:100%;left:-3.8em;letter-spacing:-1px;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;-ms-user-select:none;user-select:none;width:3em}.line-numbers-rows>span{counter-increment:linenumber;display:block}.line-numbers-rows>span:before{color:#999;content:counter(linenumber);display:block;padding-right:.8em;text-align:right}</style><meta name="generator" content="Gatsby 3.14.6"/><title data-react-helmet="true">Server-side caching - Apollo Server - Apollo GraphQL Docs</title><link data-react-helmet="true" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css"/><link data-react-helmet="true" rel="icon" href="https://www.apollographql.com/favicon.ico"/><link data-react-helmet="true" rel="icon" href="https://odyssey.apollographql.com/favicon.svg"/><link data-react-helmet="true" rel="canonical" href="https://www.apollographql.com/docs/apollo-server/*"/><meta data-react-helmet="true" name="description" content="A guide to using Apollo Server"/><meta data-react-helmet="true" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/><meta data-react-helmet="true" property="og:title" content="Server-side caching"/><meta data-react-helmet="true" property="og:site_name" content="Apollo GraphQL Docs"/><meta data-react-helmet="true" property="og:description" content="Configure caching behavior on a per-field basis"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:title" content="Server-side caching"/><meta data-react-helmet="true" name="twitter:description" content="Configure caching behavior on a per-field basis"/><meta data-react-helmet="true" property="og:image" content="https://res.cloudinary.com/apollographql/image/upload/w_1280,h_669,c_fill,q_auto,f_auto/w_1120,c_fit,co_rgb:FFFFFF,g_south_west,x_80,y_254,l_text:Source%20Sans%20Pro_80_bold:Server-side%20caching/w_1120,c_fit,co_rgb:FFFFFF,g_north_west,x_80,y_445,l_text:Source%20Sans%20Pro_48:Apollo%20Server%20%E2%80%BA%20Performance/apollo-docs-template2_dohzxt"/><meta data-react-helmet="true" name="twitter:site" content="@apollographql"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 72)
          }), 0)
        }
      }
    })
  </script><link rel="preconnect" href="https://www.googletagmanager.com"/><link rel="dns-prefetch" href="https://www.googletagmanager.com"/><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start': new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0], j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src= 'https://www.googletagmanager.com/gtm.js?id='+i+dl+'';f.parentNode.insertBefore(j,f); })(window,document,'script','dataLayer', 'GTM-M964NS9');</script><script></script><script type="text/javascript" charset="UTF-8"></script><script type="text/javascript">function OptanonWrapper() {}</script><script>
          var ffWidgetId = '3131c43c-bfb5-44e6-9a72-b4094f7ec028';
          var ffWidgetScript = document.createElement("script");
          ffWidgetScript.type = "text/javascript";
          ffWidgetScript.src = 'https://freddyfeedback.com/widget/freddyfeedback.js';
          document.head.appendChild(ffWidgetScript);
        </script><script src="https://www.apollographql.com/utm-grabber.js"></script><link as="script" rel="preload" href="/webpack-runtime-1e0d3b6f0e0e2f3ff88f.js"/><link as="script" rel="preload" href="/framework-bd32e92195540dc9b6da.js"/><link as="script" rel="preload" href="/79ac12c6-689c070edc40661ddeb0.js"/><link as="script" rel="preload" href="/app-a55f8575680208f4298f.js"/><link as="fetch" rel="preload" href="/page-data/performance/caching/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1511030359.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2468095761.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-M964NS9" height="0" width="0" style="display: none; visibility: hidden" aria-hidden="true"></iframe></noscript><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css 1vsoxt3">.css-1vsoxt3{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;min-height:100vh;max-width:1440px;margin:0 auto;}</style><div class="css-1vsoxt3 exdt29b0"><style data-emotion="css 1bs7gxh">.css-1bs7gxh{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:312px;height:100vh;padding:24px;border-right:1px solid #DEE2E7;overflow-y:auto;position:-webkit-sticky;position:sticky;top:0;}@media (max-width: 850px){.css-1bs7gxh{height:100%;background-color:white;box-shadow:0 0 48px rgba(0,0,0,0.25);position:fixed;z-index:2;opacity:0;visibility:hidden;-webkit-transform:translateX(-100%);-moz-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%);transition-property:transform,opacity,visibility;transition-duration:150ms;transition-timing-function:ease-in-out;}}</style><aside class="css-1bs7gxh ezgpdot2"><style data-emotion="css 1p14ewn">.css-1p14ewn{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:24px;}</style><div class="css-1p14ewn ezgpdot1"><style data-emotion="css gbkvvb">.css-gbkvvb{color:#2F353F;-webkit-text-decoration:none;text-decoration:none;}</style><a href="https://www.apollographql.com/docs/" class="css-gbkvvb ezgpdot0"><style data-emotion="css 135j8ps">.css-135j8ps{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:24px;}</style><div class="css-135j8ps eetev6l2"><style data-emotion="css djsuo">.css-djsuo{margin-right:0.2857142857em;}</style><style data-emotion-css="dzwxe8">.css-dzwxe8{overflow:visible;height:293px;}.css-dzwxe8 *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 979 293" style="height:1em" class="css-djsuo eetev6l1 css-dzwxe8"><g fill="currentColor" fill-rule="nonzero"><path d="M159.4 83.1H130L87.5 195.4h26.6l6.9-19h40.1l-7.3-21h-26.4l17.2-48.3 30.6 88.4h26.6zM606.3 195.3V83.1H630v91.2h46.6v21zM742.6 195.3V83.1h23.6v91.2h46.6v21zM475.4 103.2c19.5 0 35.5 16.2 35.5 36.1 0 19.9-15.9 36.1-35.5 36.1-19.5 0-35.4-16.2-35.4-36.1 0-19.9 15.9-36.1 35.4-36.1zm0-22c-31.5 0-57 26-57 58.1s25.5 58.1 57 58.1 57-26 57-58.1-25.5-58.1-57-58.1zM921.5 103.2c19.6 0 35.5 16.2 35.5 36.1 0 19.9-15.9 36.1-35.5 36.1-19.5 0-35.4-16.2-35.4-36.1-.1-19.9 15.8-36.1 35.4-36.1zm0-22c-31.5 0-57 26-57 58.1s25.5 58.1 57 58.1 57-26 57-58.1-25.5-58.1-57-58.1zM322 83.1h-51.4v112.3h23.5v-38.6H322c19.6 0 35.5-16.9 35.5-36.8 0-20.1-15.9-36.9-35.5-36.9zm0 51.6h-27.9V105H322c7.7 0 13.9 7 13.9 14.8 0 7.9-6.2 14.9-13.9 14.9z"></path><path d="M250.4 229.4c-2 0-3.8 1-4.9 2.6 0 0-5.3 6.2-8.2 9.1-12.1 12.3-26.1 21.9-41.8 28.7-16.2 7-33.4 10.5-51.2 10.5-17.8 0-35-3.5-51.2-10.5-15.6-6.8-29.7-16.5-41.8-28.8-12.1-12.3-21.6-26.6-28.2-42.6-6.9-16.5-10.3-34-10.3-52.1s3.5-35.6 10.3-52.1c6.6-15.9 16.1-30.3 28.2-42.6 12.1-12.3 26.1-22 41.8-28.7 16.2-7 33.4-10.5 51.2-10.5 17.8 0 35 3.5 51.2 10.5 11.4 4.9 22 11.4 31.5 19.3-.5 1.5-.8 3.2-.8 4.9 0 8.3 6.6 15.1 14.8 15.1 8.2 0 14.8-6.8 14.8-15.1S249.2 32 241 32c-2 0-4 .4-5.7 1.2C210.5 12.5 178.8.1 144.3.1 65 .2.7 65.6.7 146.4c0 80.8 64.3 146.2 143.6 146.2 44.4 0 84-20.5 110.4-52.7 1.1-1.1 1.8-2.7 1.8-4.4-.1-3.4-2.8-6.1-6.1-6.1z"></path></g></svg><style data-emotion="css 1dhgfy6">.css-1dhgfy6{height:0.7857142857em;margin-top:0.07142857143em;}</style><svg viewBox="0 0 48 16" xmlns="http://www.w3.org/2000/svg" class="css-1dhgfy6 eetev6l0"><path d="M2.564 0h42.192c.892 0 1.215.093 1.54.267.327.174.583.43.757.756.174.326.267.65.267 1.54v10.873c0 .892-.093 1.215-.267 1.54-.174.327-.43.583-.756.757-.326.174-.65.267-1.54.267H2.563c-.892 0-1.215-.093-1.54-.267a1.817 1.817 0 01-.757-.756C.093 14.65 0 14.327 0 13.437V2.563c0-.892.093-1.215.267-1.54.174-.327.43-.583.756-.757C1.35.093 1.673 0 2.563 0z" fill="#ebe6ff"></path><g fill="#3f20ba"><path d="M6.893 4.363c2.299 0 3.894 1.463 3.894 3.663 0 2.222-1.595 3.674-3.883 3.674H4V4.363zm.011 1.375H5.562v4.587h1.331c1.452 0 2.299-1.045 2.299-2.299 0-1.287-.792-2.288-2.288-2.288zM30.477 11.832c1.606 0 2.541-.891 3.058-1.804l-1.342-.649c-.308.594-.968 1.067-1.716 1.067-1.342 0-2.31-1.023-2.31-2.409s.968-2.409 2.31-2.409c.748 0 1.408.473 1.716 1.067l1.342-.66c-.517-.924-1.452-1.793-3.058-1.793-2.211 0-3.916 1.529-3.916 3.795 0 2.255 1.705 3.795 3.916 3.795zM40.388 11.832c1.969 0 2.937-1.012 2.937-2.354 0-2.739-4.213-1.958-4.213-3.113 0-.44.374-.726 1.034-.726.748 0 1.54.253 2.134.803l.869-1.166c-.726-.671-1.694-1.023-2.86-1.023-1.727 0-2.783 1.012-2.783 2.233 0 2.761 4.224 1.87 4.224 3.146 0 .429-.407.814-1.276.814a3.224 3.224 0 01-2.332-1.001l-.858 1.221c.693.693 1.705 1.166 3.124 1.166zM18.715 5.682c1.278 0 2.314 1.061 2.314 2.365 0 1.304-1.036 2.366-2.314 2.366-1.27 0-2.307-1.062-2.307-2.366-.007-1.304 1.03-2.365 2.307-2.365zm0-1.442C16.662 4.24 15 5.944 15 8.047c0 2.104 1.662 3.807 3.715 3.807s3.715-1.703 3.715-3.807c0-2.103-1.662-3.807-3.715-3.807z"></path></g></svg></div></a></div><div class="sidebar"><style data-emotion="css 18y74nd">.css-18y74nd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-bottom:32px;}</style><span class="css-18y74nd efh8xek2"><style data-emotion="css 1ff36h2">.css-1ff36h2{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;}</style><div class="css-1ff36h2 efh8xek6"><style data-emotion="css 3lqork">.css-3lqork{width:100%;}.css-3lqork:not(:hover){background-color:#F4F6F8;}</style><style data-emotion-css="y0nxrj">.css-y0nxrj{background-color:transparent;border-radius:4px;border-width:0;color:#3f20ba;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:28px;min-width:76px;padding:0 12px;font-family:'Source Sans Pro',sans-serif;font-size:13px;line-height:1.54;font-weight:600;outline:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;}.css-y0nxrj[disabled],.css-y0nxrj[disabled]:hover{background-color:transparent;box-shadow:none;color:#959DAA;}.css-y0nxrj:hover,.css-y0nxrj[data-force-hover-state]{background-color:#ebe6ff;color:#3f20ba;}.css-y0nxrj:focus,.css-y0nxrj[data-force-focus-state]{background-color:#ffffff;color:#2075d6;box-shadow:0 1px 4px 0 rgba(18,21,26,0.08),0 0 0 2px #bbdbff,inset 0 0 0 1px #311c87,inset 0 -1px 0 0 rgba(18,21,26,0.05);}.css-y0nxrj:active,.css-y0nxrj[data-force-active-state],.css-y0nxrj[aria-expanded=true]{color:#3f20ba;background-color:#ad9bf6;box-shadow:none;outline:0;}</style><button style="display:flex" class="css-3lqork efh8xek5 css-y0nxrj"><span class="title-sidebar">Apollo Server</span><style data-emotion="css 1fs6g1o">.css-1fs6g1o{height:16px;width:16px;margin-left:auto;}</style><style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-1fs6g1o efh8xek4 css-1a134qk"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path d="M2.25.747h6a1.5 1.5 0 0 1 1.5 1.5v6a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1-1.5-1.5v-6a1.5 1.5 0 0 1 1.5-1.5zM2.25 14.247h6a1.5 1.5 0 0 1 1.5 1.5v6a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1-1.5-1.5v-6a1.5 1.5 0 0 1 1.5-1.5zM15.75.747h6a1.5 1.5 0 0 1 1.5 1.5v6a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1-1.5-1.5v-6a1.5 1.5 0 0 1 1.5-1.5zM15.75 14.247h6a1.5 1.5 0 0 1 1.5 1.5v6a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1-1.5-1.5v-6a1.5 1.5 0 0 1 1.5-1.5z"></path></g></svg></button></div><style data-emotion="css bjn8wh">.css-bjn8wh{position:relative;}</style><div class="css-bjn8wh e1azhpec6" style="margin-left:8px"><style data-emotion-css="hga22n">.css-hga22n{background-color:transparent;border-radius:4px;border-width:0;color:#424855;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:28px;min-width:76px;padding:0 12px;font-family:'Source Sans Pro',sans-serif;font-size:13px;line-height:1.54;font-weight:600;outline:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;}.css-hga22n[disabled],.css-hga22n[disabled]:hover{background-color:transparent;box-shadow:none;color:#959DAA;}.css-hga22n:hover,.css-hga22n[data-force-hover-state]{background-color:#F4F6F8;color:#424855;}.css-hga22n:focus,.css-hga22n[data-force-focus-state]{background-color:#ffffff;color:#2075d6;box-shadow:0 1px 4px 0 rgba(18,21,26,0.08),0 0 0 2px #bbdbff,inset 0 0 0 1px #2075d6,inset 0 -1px 0 0 rgba(18,21,26,0.05);}.css-hga22n:active,.css-hga22n[data-force-active-state],.css-hga22n[aria-expanded=true]{color:#424855;background-color:#EBEEF0;box-shadow:none;outline:0;}</style><button class="css-hga22n"><div style="height:20px" class="css-bjn8wh e1azhpec2"><style data-emotion="css 6dhm9o">.css-6dhm9o{visibility:hidden;}</style><div class="css-6dhm9o e1azhpec1">v3</div><div class="css-6dhm9o e1azhpec1">v2</div><style data-emotion="css 14fvduy">.css-14fvduy{position:absolute;top:0;left:0;}</style><div class="css-14fvduy e1azhpec0">v3</div></div><style data-emotion="css jubejm">.css-jubejm{height:1em;width:1em;margin-left:12px;}</style><style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-jubejm e1azhpec5 css-1a134qk"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M23.25 7.311L12.53 18.03a.749.749 0 0 1-1.059.001l-.001-.001L.75 7.311"></path></svg></button></div></span><style data-emotion="css o9l0yd">.css-o9l0yd{margin-left:0;margin-bottom:32px;list-style:none;}</style><ul class="css-o9l0yd ea7mcww6"><style data-emotion="css 1pbhkjy">.css-1pbhkjy{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-size:1rem;line-height:1.5;margin-bottom:13px;}.css-1pbhkjy a{color:inherit;-webkit-text-decoration:none;text-decoration:none;padding:3px 10px;margin:-3px -10px;border-radius:4px;}.css-1pbhkjy a:hover{opacity:0.8;}.css-1pbhkjy a.active{color:#3f20ba;pointer-events:none;font-weight:600;background:#F4F6F8;}</style><li class="css-1pbhkjy ea7mcww5"><a href="/">Introduction</a></li><li class="css-1pbhkjy ea7mcww5"><a href="/getting-started/">Get started</a></li><li class="css-1pbhkjy ea7mcww5"><a title="Use the right package for your project" href="/integrations/middleware/">Choosing which package to use</a></li><li class="css-1pbhkjy ea7mcww5"><a href="https://www.apollographql.com/docs/federation/" target="_blank" rel="noopener noreferrer">Apollo Federation<style data-emotion="css 1dl06o9">.css-1dl06o9{height:14px;width:14px;vertical-align:-1px;margin-left:8px;color:#959DAA;}</style><style data-emotion-css="qic6h7">.css-qic6h7{overflow:visible;height:25px;}.css-qic6h7 *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 25 25" style="height:14px" class="css-1dl06o9 ea7mcww0 css-qic6h7"><path fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12.141 4.894H3.576A1.977 1.977 0 0 0 1.6 6.871v14.494c0 1.09.885 1.976 1.976 1.976h14.495a1.977 1.977 0 0 0 1.976-1.976V12.8M17.412 1.6h4.94a.99.99 0 0 1 .99.988V7.53m-10.883 4.952L23.05 1.89"></path></svg></a></li></ul><style data-emotion="css 136sss4">.css-136sss4{letter-spacing:0.142em;text-transform:uppercase;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-bottom:12px;padding:4px 0;border:0;font-size:12px;font-weight:600;line-height:1;background:none;outline:none;cursor:pointer;color:inherit;}.css-136sss4:hover{opacity:0.8;}.css-136sss4 svg{height:12px;width:12px;margin-right:8px;}</style><button class="css-136sss4 ea7mcww7"><style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-1a134qk"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path d="M3.75.748l7.72 7.72a.749.749 0 0 0 1.059.001l.001-.001 7.72-7.72M3.75 23.248l7.72-7.719a.749.749 0 0 1 1.059-.001l.001.001 7.72 7.719"></path></g></svg>Collapse<!-- --> all</button><div><style data-emotion="css 18f7tla">.css-18f7tla{position:relative;z-index:0;}.css-18f7tla .ea7mcww6{position:relative;z-index:2;}</style><div class="css-18f7tla ea7mcww4"><style data-emotion="css 17ml9b3">.css-17ml9b3{height:100%;width:100%;cursor:pointer;position:absolute;top:0;left:0;opacity:0;z-index:1;}.css-17ml9b3:hover~.ea7mcww3{opacity:0.8;}.css-17ml9b3:not(:checked)~ .ea7mcww3 svg{-webkit-transform:scaleY(-1);-moz-transform:scaleY(-1);-ms-transform:scaleY(-1);transform:scaleY(-1);}.css-17ml9b3:not(:checked)~ .ea7mcww6{display:none;}</style><input type="checkbox" value="New in v3" class="css-17ml9b3 ea7mcww1" checked=""/><style data-emotion="css 1q5wncs">.css-1q5wncs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:12px 0;color:#2F353F;font-weight:bold;font-size:14px;line-height:15px;letter-spacing:0.142em;text-transform:uppercase;}.css-1q5wncs svg{height:10px;width:10px;}.css-1q5wncs.active{color:#3f20ba;}</style><div class="css-1q5wncs ea7mcww3">New in v3<style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-1a134qk"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M.75 17.189L11.47 6.47a.749.749 0 0 1 1.059-.001l.001.001 10.72 10.719"></path></svg></div><ul class="css-o9l0yd ea7mcww6"><li class="css-1pbhkjy ea7mcww5"><a href="/migration/">Migrating to Apollo Server 3</a></li><li class="css-1pbhkjy ea7mcww5"><a href="https://github.com/apollographql/apollo-server/blob/main/CHANGELOG.md" target="_blank" rel="noopener noreferrer">Changelog<style data-emotion-css="qic6h7">.css-qic6h7{overflow:visible;height:25px;}.css-qic6h7 *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 25 25" style="height:14px" class="css-1dl06o9 ea7mcww0 css-qic6h7"><path fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12.141 4.894H3.576A1.977 1.977 0 0 0 1.6 6.871v14.494c0 1.09.885 1.976 1.976 1.976h14.495a1.977 1.977 0 0 0 1.976-1.976V12.8M17.412 1.6h4.94a.99.99 0 0 1 .99.988V7.53m-10.883 4.952L23.05 1.89"></path></svg></a></li></ul></div><div class="css-18f7tla ea7mcww4"><input type="checkbox" value="Defining a Schema" class="css-17ml9b3 ea7mcww1" checked=""/><div class="css-1q5wncs ea7mcww3">Defining a Schema<style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-1a134qk"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M.75 17.189L11.47 6.47a.749.749 0 0 1 1.059-.001l.001.001 10.72 10.719"></path></svg></div><ul class="css-o9l0yd ea7mcww6"><li class="css-1pbhkjy ea7mcww5"><a href="/schema/schema/">Schema basics</a></li><li class="css-1pbhkjy ea7mcww5"><a title="Abstract schema types" href="/schema/unions-interfaces/">Unions and interfaces</a></li><li class="css-1pbhkjy ea7mcww5"><a href="/schema/custom-scalars/">Custom scalars</a></li><li class="css-1pbhkjy ea7mcww5"><a title="Configure GraphQL types, fields, and arguments" href="/schema/directives/">Directives</a></li><li class="css-1pbhkjy ea7mcww5"><a title="Apply custom logic to GraphQL types, fields, and arguments" href="/schema/creating-directives/">Creating directives</a></li></ul></div><div class="css-18f7tla ea7mcww4"><input type="checkbox" value="Fetching Data" class="css-17ml9b3 ea7mcww1" checked=""/><div class="css-1q5wncs ea7mcww3">Fetching Data<style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-1a134qk"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M.75 17.189L11.47 6.47a.749.749 0 0 1 1.059-.001l.001.001 10.72 10.719"></path></svg></div><ul class="css-o9l0yd ea7mcww6"><li class="css-1pbhkjy ea7mcww5"><a title="How Apollo Server processes GraphQL operations" href="/data/resolvers/">Resolvers</a></li><li class="css-1pbhkjy ea7mcww5"><a title="Manage connections to databases and REST APIs" href="/data/data-sources/">Data sources</a></li><li class="css-1pbhkjy ea7mcww5"><a title="Making errors actionable on the client and server" href="/data/errors/">Error handling</a></li><li class="css-1pbhkjy ea7mcww5"><a title="Enabling file uploads in Apollo Server" href="/data/file-uploads/">File uploads</a></li><li class="css-1pbhkjy ea7mcww5"><a title="Persistent GraphQL read operations" href="/data/subscriptions/">Subscriptions</a></li></ul></div><div class="css-18f7tla ea7mcww4"><input type="checkbox" value="Development Workflow" class="css-17ml9b3 ea7mcww1" checked=""/><div class="css-1q5wncs ea7mcww3">Development Workflow<style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-1a134qk"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M.75 17.189L11.47 6.47a.749.749 0 0 1 1.059-.001l.001.001 10.72 10.719"></path></svg></div><ul class="css-o9l0yd ea7mcww6"><li class="css-1pbhkjy ea7mcww5"><a href="/testing/build-run-queries/">Build and run queries</a></li><li class="css-1pbhkjy ea7mcww5"><a title="How to send requests to Apollo Server over HTTP" href="/requests/">Request format</a></li><li class="css-1pbhkjy ea7mcww5"><a title="Mock your GraphQL data based on a schema." href="/testing/mocking/">Mocking</a></li><li class="css-1pbhkjy ea7mcww5"><a title="Utilities for testing Apollo Server" href="/testing/testing/">Integration testing</a></li><li class="css-1pbhkjy ea7mcww5"><a href="https://www.apollographql.com/docs/studio/explorer/" target="_blank" rel="noopener noreferrer">Apollo Studio Explorer<style data-emotion-css="qic6h7">.css-qic6h7{overflow:visible;height:25px;}.css-qic6h7 *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 25 25" style="height:14px" class="css-1dl06o9 ea7mcww0 css-qic6h7"><path fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12.141 4.894H3.576A1.977 1.977 0 0 0 1.6 6.871v14.494c0 1.09.885 1.976 1.976 1.976h14.495a1.977 1.977 0 0 0 1.976-1.976V12.8M17.412 1.6h4.94a.99.99 0 0 1 .99.988V7.53m-10.883 4.952L23.05 1.89"></path></svg></a></li></ul></div><div class="css-18f7tla ea7mcww4"><input type="checkbox" value="Performance" class="css-17ml9b3 ea7mcww1" checked=""/><div class="active css-1q5wncs ea7mcww3">Performance<style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-1a134qk"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M.75 17.189L11.47 6.47a.749.749 0 0 1 1.059-.001l.001.001 10.72 10.719"></path></svg></div><ul class="css-o9l0yd ea7mcww6"><li class="css-1pbhkjy ea7mcww5"><a aria-current="page" class="active" title="Configure caching behavior on a per-field basis" href="/performance/caching/">Caching</a></li><li class="css-1pbhkjy ea7mcww5"><a title="Improve network performance by sending smaller requests" href="/performance/apq/">Automatic persisted queries</a></li></ul></div><div class="css-18f7tla ea7mcww4"><input type="checkbox" value="Security" class="css-17ml9b3 ea7mcww1" checked=""/><div class="css-1q5wncs ea7mcww3">Security<style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-1a134qk"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M.75 17.189L11.47 6.47a.749.749 0 0 1 1.059-.001l.001.001 10.72 10.719"></path></svg></div><ul class="css-o9l0yd ea7mcww6"><li class="css-1pbhkjy ea7mcww5"><a title="Control access to your GraphQL API" href="/security/authentication/">Auth</a></li><li class="css-1pbhkjy ea7mcww5"><a href="/security/terminating-ssl/">Terminating SSL</a></li><li class="css-1pbhkjy ea7mcww5"><a title="Configuring proxy settings for outgoing requests" href="/proxy-configuration/">Proxy configuration</a></li></ul></div><div class="css-18f7tla ea7mcww4"><input type="checkbox" value="Deployment" class="css-17ml9b3 ea7mcww1" checked=""/><div class="css-1q5wncs ea7mcww3">Deployment<style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-1a134qk"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M.75 17.189L11.47 6.47a.749.749 0 0 1 1.059-.001l.001.001 10.72 10.719"></path></svg></div><ul class="css-o9l0yd ea7mcww6"><li class="css-1pbhkjy ea7mcww5"><a href="/deployment/heroku/">Heroku</a></li><li class="css-1pbhkjy ea7mcww5"><a title="How to deploy Apollo Server with AWS Lambda" href="/deployment/lambda/">Lambda</a></li><li class="css-1pbhkjy ea7mcww5"><a title="Deploying your GraphQL server to Azure Functions" href="/deployment/azure-functions/">Azure Functions</a></li><li class="css-1pbhkjy ea7mcww5"><a href="/deployment/gcp-functions/">Google Cloud Functions</a></li></ul></div><div class="css-18f7tla ea7mcww4"><input type="checkbox" value="Monitoring" class="css-17ml9b3 ea7mcww1" checked=""/><div class="css-1q5wncs ea7mcww3">Monitoring<style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-1a134qk"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M.75 17.189L11.47 6.47a.749.749 0 0 1 1.059-.001l.001.001 10.72 10.719"></path></svg></div><ul class="css-o9l0yd ea7mcww6"><li class="css-1pbhkjy ea7mcww5"><a title="How to monitor Apollo Server&#x27;s performance" href="/monitoring/metrics/">Metrics and logging</a></li><li class="css-1pbhkjy ea7mcww5"><a title="Determining the health status of the Apollo Server" href="/monitoring/health-checks/">Health checks</a></li></ul></div><div class="css-18f7tla ea7mcww4"><input type="checkbox" value="API Reference" class="css-17ml9b3 ea7mcww1" checked=""/><div class="css-1q5wncs ea7mcww3">API Reference<style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-1a134qk"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M.75 17.189L11.47 6.47a.749.749 0 0 1 1.059-.001l.001.001 10.72 10.719"></path></svg></div><ul class="css-o9l0yd ea7mcww6"><li class="css-1pbhkjy ea7mcww5"><a href="/api/apollo-server/">ApolloServer</a></li><li class="css-1pbhkjy ea7mcww5"><a href="https://www.apollographql.com/docs/federation/api/apollo-federation/" target="_blank" rel="noopener noreferrer">@apollo/federation<style data-emotion-css="qic6h7">.css-qic6h7{overflow:visible;height:25px;}.css-qic6h7 *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 25 25" style="height:14px" class="css-1dl06o9 ea7mcww0 css-qic6h7"><path fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12.141 4.894H3.576A1.977 1.977 0 0 0 1.6 6.871v14.494c0 1.09.885 1.976 1.976 1.976h14.495a1.977 1.977 0 0 0 1.976-1.976V12.8M17.412 1.6h4.94a.99.99 0 0 1 .99.988V7.53m-10.883 4.952L23.05 1.89"></path></svg></a></li><li class="css-1pbhkjy ea7mcww5"><a href="https://www.apollographql.com/docs/federation/api/apollo-gateway/" target="_blank" rel="noopener noreferrer">@apollo/gateway<style data-emotion-css="qic6h7">.css-qic6h7{overflow:visible;height:25px;}.css-qic6h7 *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 25 25" style="height:14px" class="css-1dl06o9 ea7mcww0 css-qic6h7"><path fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12.141 4.894H3.576A1.977 1.977 0 0 0 1.6 6.871v14.494c0 1.09.885 1.976 1.976 1.976h14.495a1.977 1.977 0 0 0 1.976-1.976V12.8M17.412 1.6h4.94a.99.99 0 0 1 .99.988V7.53m-10.883 4.952L23.05 1.89"></path></svg></a></li></ul></div><div class="css-18f7tla ea7mcww4"><input type="checkbox" value="Built-in Plugins" class="css-17ml9b3 ea7mcww1" checked=""/><div class="css-1q5wncs ea7mcww3">Built-in Plugins<style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-1a134qk"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M.75 17.189L11.47 6.47a.749.749 0 0 1 1.059-.001l.001.001 10.72 10.719"></path></svg></div><ul class="css-o9l0yd ea7mcww6"><li class="css-1pbhkjy ea7mcww5"><a href="/builtin-plugins/">Overview</a></li><li class="css-1pbhkjy ea7mcww5"><a href="/api/plugin/usage-reporting/">Usage reporting</a></li><li class="css-1pbhkjy ea7mcww5"><a href="/api/plugin/schema-reporting/">Schema reporting</a></li><li class="css-1pbhkjy ea7mcww5"><a href="/api/plugin/inline-trace/">Inline trace</a></li><li class="css-1pbhkjy ea7mcww5"><a href="/api/plugin/drain-http-server/">Drain HTTP server</a></li><li class="css-1pbhkjy ea7mcww5"><a href="/api/plugin/cache-control/">Cache control</a></li><li class="css-1pbhkjy ea7mcww5"><a href="/api/plugin/landing-pages/">Landing pages</a></li></ul></div><div class="css-18f7tla ea7mcww4"><input type="checkbox" value="Custom Plugins" class="css-17ml9b3 ea7mcww1" checked=""/><div class="css-1q5wncs ea7mcww3">Custom Plugins<style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-1a134qk"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M.75 17.189L11.47 6.47a.749.749 0 0 1 1.059-.001l.001.001 10.72 10.719"></path></svg></div><ul class="css-o9l0yd ea7mcww6"><li class="css-1pbhkjy ea7mcww5"><a title="Extend Apollo Server with custom functionality" href="/integrations/plugins/">Creating plugins</a></li><li class="css-1pbhkjy ea7mcww5"><a href="/integrations/plugins-event-reference/">Event reference</a></li></ul></div></div></div></aside><main class="css-1ff36h2 efh8xek7"><style data-emotion="css 1ip6okp">.css-1ip6okp{position:-webkit-sticky;position:sticky;top:0;left:0;z-index:1;}</style><header class="css-1ip6okp edldhn51"><style data-emotion="css oaxw1r">.css-oaxw1r{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:72px;padding:0 56px;background-color:white;}@media (max-width: 850px){.css-oaxw1r{padding:0 24px;}}</style><div class="css-oaxw1r edldhn50"><style data-emotion="css 8jbk1d">.css-8jbk1d{display:none;}@media (max-width: 850px){.css-8jbk1d{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:32px;color:#2F353F;}}</style><div class="css-8jbk1d efh8xek3"><style data-emotion="css 1m6zll5">.css-1m6zll5{padding:20px;margin-left:-20px;color:inherit;border:none;background:none;outline:none;cursor:pointer;}</style><button class="css-1m6zll5 e1qf1exz1"><style data-emotion="css 1ihqbbj">.css-1ihqbbj{height:24px;width:24px;display:block;fill:currentColor;}</style><style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-1ihqbbj e1qf1exz0 css-1a134qk"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path d="M2.25 18.003h19.5M2.25 12.003h19.5M2.25 6.003h19.5"></path></g></svg></button><svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" width="32" fill="currentColor"><path d="M112.246 49H88.003L53 139.848h21.927l5.721-15.393h33.076l-5.989-17.024H85.961l14.164-39.091 25.199 71.508h21.928z"></path><path d="M196.313 73.038a4.991 4.991 0 00-.256-.897c-.027-.1-.12-.285-.12-.285a4.993 4.993 0 00-4.538-2.914 5 5 0 00-5 5c0 .562.098 1.1.268 1.603l-.014.005a90.354 90.354 0 013.346 24.451c0 24.039-9.362 46.641-26.359 63.64-16.999 17-39.6 26.36-63.64 26.36-24.039 0-46.642-9.362-63.639-26.36C19.36 146.642 10 124.04 10 100.001c0-24.04 9.362-46.641 26.361-63.64 16.997-17 39.6-26.36 63.639-26.36 21.466 0 41.781 7.47 57.987 21.173a12.218 12.218 0 00-.848 4.474c0 6.751 5.472 12.221 12.224 12.221 6.75 0 12.223-5.47 12.223-12.221s-5.473-12.224-12.223-12.224c-1.473 0-2.884.26-4.192.737C147.666 9.107 124.9 0 100 0 44.771 0 0 44.772 0 100.001c0 55.229 44.771 100.001 100 100.001s100-44.771 100-100.001c0-9.342-1.291-18.384-3.687-26.963z"></path></svg></div><style data-emotion="css 3gq4g2">.css-3gq4g2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:240px;}@media (max-width: 1120px){.css-3gq4g2{width:auto;margin-right:0;}}@media (max-width: 850px){.css-3gq4g2{display:none;}}</style><div class="css-3gq4g2 e1nk4tvb2"><style data-emotion="css 1aihuhw">.css-1aihuhw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#3f20ba;line-height:2;-webkit-text-decoration:none;text-decoration:none;}.css-1aihuhw:hover{color:#311c87;}</style><a href="https://studio.apollographql.com?referrer=docs" target="_blank" rel="noopener noreferrer" class="css-1aihuhw e1nk4tvb1">Launch Apollo Studio<style data-emotion="css gv5qlm">.css-gv5qlm{height:0.75em;width:0.75em;margin-left:0.5em;}</style><style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-gv5qlm e1nk4tvb0 css-1a134qk"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"><path d="M.75 12h22.5M12.75 1.5L23.25 12l-10.5 10.5"></path></g></svg></a></div></div></header><style data-emotion-css="1r1dph0">html{-webkit-scroll-padding-top:92px;-moz-scroll-padding-top:92px;-ms-scroll-padding-top:92px;scroll-padding-top:92px;}</style><style data-emotion="css ip9jqt">.css-ip9jqt{padding:40px 56px;padding-bottom:0;}@media (max-width: 850px){.css-ip9jqt{padding:32px 48px;}}@media (max-width: 600px){.css-ip9jqt{padding:24px 32px;}}</style><div class="css-ip9jqt ernxcdh2"><div class="header-wrapper"><style data-emotion="css cz947x">.css-cz947x:not(:last-child){margin-bottom:8px;}</style><h1 class="css-cz947x ei8t6h41">Server-side caching</h1><style data-emotion="css 19uyoe7">.css-19uyoe7{color:#5A6270;font-size:1.4427rem;}</style><h2 class="css-19uyoe7 ei8t6h40">Configure caching behavior on a per-field basis</h2></div><hr/><style data-emotion="css 1o129hd">.css-1o129hd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}</style><div class="css-1o129hd e694h6z7"><style data-emotion="css a181dj">.css-a181dj{-webkit-box-flex:1;-webkit-flex-grow:1;-ms-flex-positive:1;flex-grow:1;width:0;}.css-a181dj .api-ref h4 code{font-size:1.1em;}.css-a181dj .api-ref *:not(pre)>code[class*="language-"]{padding:0;background:none;}</style><div class="css-a181dj e694h6z6"><style data-emotion="css nxch3i">.css-nxch3i a[href]:not([class]){color:#3f20ba;-webkit-text-decoration:none;text-decoration:none;}.css-nxch3i a[href]:not([class]):hover{-webkit-text-decoration:underline;text-decoration:underline;}.css-nxch3i a[href]:not([class]) code{color:inherit;}.css-nxch3i h1 code,.css-nxch3i h2 code,.css-nxch3i h3 code,.css-nxch3i h4 code,.css-nxch3i h5 code,.css-nxch3i h6 code{white-space:normal;}.css-nxch3i h1 a,.css-nxch3i h2 a,.css-nxch3i h3 a,.css-nxch3i h4 a,.css-nxch3i h5 a,.css-nxch3i h6 a{color:inherit;-webkit-text-decoration:none;text-decoration:none;}.css-nxch3i h1 a:hover,.css-nxch3i h2 a:hover,.css-nxch3i h3 a:hover,.css-nxch3i h4 a:hover,.css-nxch3i h5 a:hover,.css-nxch3i h6 a:hover{color:#5A6270;}.css-nxch3i *:not(style)+ h2,.css-nxch3i *:not(style)+ h3,.css-nxch3i *:not(style)+ h4,.css-nxch3i *:not(style)+ h5{margin-top:64px;}.css-nxch3i img{display:block;max-width:100%;}.css-nxch3i .mermaid svg{max-width:100%;-webkit-filter:drop-shadow(2px 2px 2px #ddd);filter:drop-shadow(2px 2px 2px #ddd);}.css-nxch3i .three-columns .line-numbers-rows{display:none;}.css-nxch3i .three-columns .gatsby-highlight pre[class*="language-"].line-numbers{padding-left:0;line-height:1.3;}.css-nxch3i .three-columns .gatsby-highlight pre[class*="language-"].line-numbers code{font-size:14px;line-height:1;}</style><div class="content-wrapper css-nxch3i e694h6z5"><div><blockquote>
<p><strong>New in Apollo Server 3</strong>: You must manually define the <code class="language-text">@cacheControl</code> directive in your schema to use static cache hints. <a href="#in-your-schema-static">See below.</a></p>
</blockquote>
<p>Apollo Server enables you to define cache control settings (<code class="language-text">maxAge</code> and <code class="language-text">scope</code>) for each field in your schema:</p>
<div class="gatsby-highlight has-highlighted-lines" data-language="graphql"><style data-emotion="css 1gcd36t">.css-1gcd36t{margin-bottom:1.45rem;border:1px solid #DEE2E7;border-radius:4px;}</style><div class="css-1gcd36t e1ulzjg73"><style data-emotion="css 1y4makq">.css-1y4makq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;padding:4px;border-bottom:1px solid #DEE2E7;}</style><div class="css-1y4makq e1ulzjg72"><style data-emotion-css="hga22n">.css-hga22n{background-color:transparent;border-radius:4px;border-width:0;color:#424855;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:28px;min-width:76px;padding:0 12px;font-family:'Source Sans Pro',sans-serif;font-size:13px;line-height:1.54;font-weight:600;outline:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;}.css-hga22n[disabled],.css-hga22n[disabled]:hover{background-color:transparent;box-shadow:none;color:#959DAA;}.css-hga22n:hover,.css-hga22n[data-force-hover-state]{background-color:#F4F6F8;color:#424855;}.css-hga22n:focus,.css-hga22n[data-force-focus-state]{background-color:#ffffff;color:#2075d6;box-shadow:0 1px 4px 0 rgba(18,21,26,0.08),0 0 0 2px #bbdbff,inset 0 0 0 1px #2075d6,inset 0 -1px 0 0 rgba(18,21,26,0.05);}.css-hga22n:active,.css-hga22n[data-force-active-state],.css-hga22n[aria-expanded=true]{color:#424855;background-color:#EBEEF0;box-shadow:none;outline:0;}</style><button class="css-hga22n">Copy</button></div><style data-emotion="css r8v8pb">.css-r8v8pb{padding:15px;background-color:#F4F6F8;overflow:auto;}</style><div class="css-r8v8pb e1ulzjg70"><pre style="counter-reset:linenumber NaN" class="language-graphql line-numbers"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Post</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token class-name">Author</span>
<span class="gatsby-highlight-code-line">  <span class="token attr-name">votes</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@cacheControl</span><span class="token punctuation">(</span><span class="token attr-name">maxAge</span><span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">)</span></span>  <span class="token attr-name">comments</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Comment</span><span class="token punctuation">]</span>
<span class="gatsby-highlight-code-line">  <span class="token attr-name">readByCurrentUser</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span><span class="token operator">!</span> <span class="token directive function">@cacheControl</span><span class="token punctuation">(</span><span class="token attr-name">maxAge</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token attr-name">scope</span><span class="token punctuation">:</span> <span class="token constant">PRIVATE</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div></div>
<p>When Apollo Server resolves an operation, it calculates the result&#x27;s correct cache behavior based on the <a href="#calculating-cache-behavior"><em>most restrictive</em> settings</a> among the result&#x27;s fields. You can then use this calculation to support any form of cache implementation you want, such as by providing it to your CDN via a <code class="language-text">Cache-Control</code> header.</p>
<h2 id="setting-cache-hints" style="position:relative"><a class="headingLink" href="#setting-cache-hints">Setting cache hints</a></h2>
<p>You can define field-level cache hints <a href="#in-your-schema-static">statically</a>  in your schema definition or <a href="#in-your-resolvers-dynamic">dynamically</a> in your resolvers (or both).</p>
<p>Note that when setting cache hints, it&#x27;s important to understand:</p>
<ul>
<li>Which fields of your schema can be cached safely</li>
<li>How long a cached value should remain valid</li>
<li>Whether a cached value is global or user-specific</li>
</ul>
<p>These details can vary significantly, even among the fields of a single object type.</p>
<h3 id="in-your-schema-static" style="position:relative"><a class="headingLink" href="#in-your-schema-static">In your schema (static)</a></h3>
<p>Apollo Server recognizes the <code class="language-text">@cacheControl</code> directive, which you can use in your schema to define caching behavior either for a <a href="#field-level-definitions">single field</a>, or for <em>all</em> fields that return a particular <a href="#type-level-definitions">type</a>.</p>
<p><strong>To use the <code class="language-text">@cacheControl</code> directive, you must add the following definitions to your server&#x27;s schema:</strong></p>
<div class="gatsby-highlight" data-language="graphql"><div class="css-1gcd36t e1ulzjg73"><div class="css-1y4makq e1ulzjg72"><style data-emotion-css="hga22n">.css-hga22n{background-color:transparent;border-radius:4px;border-width:0;color:#424855;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:28px;min-width:76px;padding:0 12px;font-family:'Source Sans Pro',sans-serif;font-size:13px;line-height:1.54;font-weight:600;outline:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;}.css-hga22n[disabled],.css-hga22n[disabled]:hover{background-color:transparent;box-shadow:none;color:#959DAA;}.css-hga22n:hover,.css-hga22n[data-force-hover-state]{background-color:#F4F6F8;color:#424855;}.css-hga22n:focus,.css-hga22n[data-force-focus-state]{background-color:#ffffff;color:#2075d6;box-shadow:0 1px 4px 0 rgba(18,21,26,0.08),0 0 0 2px #bbdbff,inset 0 0 0 1px #2075d6,inset 0 -1px 0 0 rgba(18,21,26,0.05);}.css-hga22n:active,.css-hga22n[data-force-active-state],.css-hga22n[aria-expanded=true]{color:#424855;background-color:#EBEEF0;box-shadow:none;outline:0;}</style><button class="css-hga22n">Copy</button></div><div class="css-r8v8pb e1ulzjg70"><pre style="counter-reset:linenumber NaN" class="language-graphql line-numbers"><code class="language-graphql"><span class="token keyword">enum</span> <span class="token class-name">CacheControlScope</span> <span class="token punctuation">{</span>
  <span class="token constant">PUBLIC</span>
  <span class="token constant">PRIVATE</span>
<span class="token punctuation">}</span>

<span class="token keyword">directive</span> <span class="token directive function">@cacheControl</span><span class="token punctuation">(</span>
  <span class="token attr-name">maxAge</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">scope</span><span class="token punctuation">:</span> <span class="token class-name">CacheControlScope</span>
  <span class="token attr-name">inheritMaxAge</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span>
<span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span> <span class="token operator">|</span> <span class="token constant">OBJECT</span> <span class="token operator">|</span> <span class="token constant">INTERFACE</span> <span class="token operator">|</span> <span class="token constant">UNION</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div></div>
<p>If you don&#x27;t add these definitions, Apollo Server throws an <code class="language-text">Unknown directive &quot;@cacheControl&quot;</code> error on startup.</p>
<p>The <code class="language-text">@cacheControl</code> directive accepts the following arguments:</p>





















<style data-emotion="css 10rhg34">.css-10rhg34{overflow:auto;margin-bottom:1.45rem;}</style><div class="css-10rhg34 ernxcdh1"><style data-emotion="css 1smwn2j">.css-1smwn2j{border:1px solid #DEE2E7;border-spacing:0;border-radius:4px;}.css-1smwn2j th,.css-1smwn2j td{padding:16px;border-bottom:1px solid #DEE2E7;}.css-1smwn2j tbody tr:last-child td{border:0;}.css-1smwn2j th{letter-spacing:0.142em;text-transform:uppercase;font-size:13px;font-weight:normal;color:#5A6270;text-align:inherit;}.css-1smwn2j td{vertical-align:top;}.css-1smwn2j td p{font-size:inherit;line-height:inherit;}.css-1smwn2j td code{white-space:normal;}.css-1smwn2j td >:last-child{margin-bottom:0;}.css-1smwn2j.field-table td h6{font-size:inherit;line-height:inherit;font-weight:bold;margin-bottom:5px;}.css-1smwn2j.field-table td:first-child p{font-size:14px;}.css-1smwn2j.field-table td:first-child p code{color:#1d7b78;}.css-1smwn2j.field-table tr.required td{background:#F4F6F8;}</style><table class="css-1smwn2j ernxcdh0"><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td><code class="language-text">maxAge</code></td><td>The maximum amount of time the field&#x27;s cached value is valid, in seconds. The default value is <code class="language-text">0</code>, but you can <a href="#setting-a-different-default-maxage">set a different default</a>.</td></tr><tr><td><code class="language-text">scope</code></td><td>If <code class="language-text">PRIVATE</code>, the field&#x27;s value is specific to a single user. The default value is <code class="language-text">PUBLIC</code>. See also <a href="#identifying-users-for-private-responses">Identifying users for <code class="language-text">PRIVATE</code> responses</a>.</td></tr><tr><td><code class="language-text">inheritMaxAge</code></td><td>If <code class="language-text">true</code>, this field inherits the <code class="language-text">maxAge</code> of its parent field instead of using the <a href="#setting-a-different-default-maxage">default <code class="language-text">maxAge</code></a>. Do not provide <code class="language-text">maxAge</code> if you provide this argument.</td></tr></tbody></table></div>
<p>Use <code class="language-text">@cacheControl</code> for fields that should usually be cached with the same settings. If caching settings might change at runtime, you can use the <a href="#in-your-resolvers-dynamic">dynamic method</a>.</p>
<blockquote>
<p><strong>Important:</strong> Apollo Server assigns each GraphQL response a <code class="language-text">maxAge</code> equal to the <em>lowest</em> <code class="language-text">maxAge</code> among included fields. If any field has a <code class="language-text">maxAge</code> of <code class="language-text">0</code>, the response will not be cached at all.</p>
<p>Similarly, Apollo Server sets a response&#x27;s <code class="language-text">scope</code> to <code class="language-text">PRIVATE</code> if <em>any</em> included field is <code class="language-text">PRIVATE</code>.</p>
</blockquote>
<h4 id="field-level-definitions" style="position:relative"><a class="headingLink" href="#field-level-definitions">Field-level definitions</a></h4>
<p>This example defines cache control settings for two fields of the <code class="language-text">Post</code> type: <code class="language-text">votes</code> and <code class="language-text">readByCurrentUser</code>:</p>
<div class="gatsby-code-title">schema.graphql</div>
<div class="gatsby-highlight has-highlighted-lines" data-language="graphql"><div class="css-1gcd36t e1ulzjg73"><div class="css-1y4makq e1ulzjg72"><style data-emotion-css="hga22n">.css-hga22n{background-color:transparent;border-radius:4px;border-width:0;color:#424855;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:28px;min-width:76px;padding:0 12px;font-family:'Source Sans Pro',sans-serif;font-size:13px;line-height:1.54;font-weight:600;outline:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;}.css-hga22n[disabled],.css-hga22n[disabled]:hover{background-color:transparent;box-shadow:none;color:#959DAA;}.css-hga22n:hover,.css-hga22n[data-force-hover-state]{background-color:#F4F6F8;color:#424855;}.css-hga22n:focus,.css-hga22n[data-force-focus-state]{background-color:#ffffff;color:#2075d6;box-shadow:0 1px 4px 0 rgba(18,21,26,0.08),0 0 0 2px #bbdbff,inset 0 0 0 1px #2075d6,inset 0 -1px 0 0 rgba(18,21,26,0.05);}.css-hga22n:active,.css-hga22n[data-force-active-state],.css-hga22n[aria-expanded=true]{color:#424855;background-color:#EBEEF0;box-shadow:none;outline:0;}</style><button class="css-hga22n">Copy</button></div><div class="css-r8v8pb e1ulzjg70"><pre style="counter-reset:linenumber NaN" class="language-graphql line-numbers"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Post</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token class-name">Author</span>
<span class="gatsby-highlight-code-line">  <span class="token attr-name">votes</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@cacheControl</span><span class="token punctuation">(</span><span class="token attr-name">maxAge</span><span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">)</span></span>  <span class="token attr-name">comments</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Comment</span><span class="token punctuation">]</span>
<span class="gatsby-highlight-code-line">  <span class="token attr-name">readByCurrentUser</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span><span class="token operator">!</span> <span class="token directive function">@cacheControl</span><span class="token punctuation">(</span><span class="token attr-name">maxAge</span><span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token attr-name">scope</span><span class="token punctuation">:</span> <span class="token constant">PRIVATE</span><span class="token punctuation">)</span></span><span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div></div>
<p>In this example:</p>
<ul>
<li>The value of the <code class="language-text">votes</code> field is cached for a maximum of 30 seconds.</li>
<li>The value of the <code class="language-text">readByCurrentUser</code> field is cached for a maximum of 10 seconds, and its visibility is restricted to a single user.</li>
</ul>
<h4 id="type-level-definitions" style="position:relative"><a class="headingLink" href="#type-level-definitions">Type-level definitions</a></h4>
<p>This example defines cache control settings for <em>all</em> schema fields that return a <code class="language-text">Post</code> object:</p>
<div class="gatsby-code-title">schema.graphql</div>
<div class="gatsby-highlight has-highlighted-lines" data-language="graphql"><div class="css-1gcd36t e1ulzjg73"><div class="css-1y4makq e1ulzjg72"><style data-emotion-css="hga22n">.css-hga22n{background-color:transparent;border-radius:4px;border-width:0;color:#424855;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:28px;min-width:76px;padding:0 12px;font-family:'Source Sans Pro',sans-serif;font-size:13px;line-height:1.54;font-weight:600;outline:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;}.css-hga22n[disabled],.css-hga22n[disabled]:hover{background-color:transparent;box-shadow:none;color:#959DAA;}.css-hga22n:hover,.css-hga22n[data-force-hover-state]{background-color:#F4F6F8;color:#424855;}.css-hga22n:focus,.css-hga22n[data-force-focus-state]{background-color:#ffffff;color:#2075d6;box-shadow:0 1px 4px 0 rgba(18,21,26,0.08),0 0 0 2px #bbdbff,inset 0 0 0 1px #2075d6,inset 0 -1px 0 0 rgba(18,21,26,0.05);}.css-hga22n:active,.css-hga22n[data-force-active-state],.css-hga22n[aria-expanded=true]{color:#424855;background-color:#EBEEF0;box-shadow:none;outline:0;}</style><button class="css-hga22n">Copy</button></div><div class="css-r8v8pb e1ulzjg70"><pre style="counter-reset:linenumber NaN" class="language-graphql line-numbers"><code class="language-graphql"><span class="gatsby-highlight-code-line"><span class="token keyword">type</span> <span class="token class-name">Post</span> <span class="token directive function">@cacheControl</span><span class="token punctuation">(</span><span class="token attr-name">maxAge</span><span class="token punctuation">:</span> <span class="token number">240</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token class-name">Author</span>
  <span class="token attr-name">votes</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">comments</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Comment</span><span class="token punctuation">]</span>
  <span class="token attr-name">readByCurrentUser</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span><span class="token operator">!</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div></div>
<p>If another object type in this schema includes a field of type <code class="language-text">Post</code> (or a list of <code class="language-text">Post</code>s), that field&#x27;s value is cached for a maximum of 240 seconds:</p>
<div class="gatsby-code-title">schema.graphql</div>
<div class="gatsby-highlight" data-language="graphql"><div class="css-1gcd36t e1ulzjg73"><div class="css-1y4makq e1ulzjg72"><style data-emotion-css="hga22n">.css-hga22n{background-color:transparent;border-radius:4px;border-width:0;color:#424855;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:28px;min-width:76px;padding:0 12px;font-family:'Source Sans Pro',sans-serif;font-size:13px;line-height:1.54;font-weight:600;outline:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;}.css-hga22n[disabled],.css-hga22n[disabled]:hover{background-color:transparent;box-shadow:none;color:#959DAA;}.css-hga22n:hover,.css-hga22n[data-force-hover-state]{background-color:#F4F6F8;color:#424855;}.css-hga22n:focus,.css-hga22n[data-force-focus-state]{background-color:#ffffff;color:#2075d6;box-shadow:0 1px 4px 0 rgba(18,21,26,0.08),0 0 0 2px #bbdbff,inset 0 0 0 1px #2075d6,inset 0 -1px 0 0 rgba(18,21,26,0.05);}.css-hga22n:active,.css-hga22n[data-force-active-state],.css-hga22n[aria-expanded=true]{color:#424855;background-color:#EBEEF0;box-shadow:none;outline:0;}</style><button class="css-hga22n">Copy</button></div><div class="css-r8v8pb e1ulzjg70"><pre style="counter-reset:linenumber NaN" class="language-graphql line-numbers"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Comment</span> <span class="token punctuation">{</span>
  <span class="token attr-name">post</span><span class="token punctuation">:</span> <span class="token class-name">Post</span><span class="token operator">!</span> <span class="token comment"># Cached for up to 240 seconds</span>
  <span class="token attr-name">body</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span></span></pre></div></div></div>
<p><strong>Note that <a href="#field-level-definitions">field-level settings</a> override type-level settings.</strong> In the following case, <code class="language-text">Comment.post</code> is cached for a maximum of 120 seconds, <em>not</em> 240 seconds:</p>
<div class="gatsby-code-title">schema.graphql</div>
<div class="gatsby-highlight" data-language="graphql"><div class="css-1gcd36t e1ulzjg73"><div class="css-1y4makq e1ulzjg72"><style data-emotion-css="hga22n">.css-hga22n{background-color:transparent;border-radius:4px;border-width:0;color:#424855;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:28px;min-width:76px;padding:0 12px;font-family:'Source Sans Pro',sans-serif;font-size:13px;line-height:1.54;font-weight:600;outline:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;}.css-hga22n[disabled],.css-hga22n[disabled]:hover{background-color:transparent;box-shadow:none;color:#959DAA;}.css-hga22n:hover,.css-hga22n[data-force-hover-state]{background-color:#F4F6F8;color:#424855;}.css-hga22n:focus,.css-hga22n[data-force-focus-state]{background-color:#ffffff;color:#2075d6;box-shadow:0 1px 4px 0 rgba(18,21,26,0.08),0 0 0 2px #bbdbff,inset 0 0 0 1px #2075d6,inset 0 -1px 0 0 rgba(18,21,26,0.05);}.css-hga22n:active,.css-hga22n[data-force-active-state],.css-hga22n[aria-expanded=true]{color:#424855;background-color:#EBEEF0;box-shadow:none;outline:0;}</style><button class="css-hga22n">Copy</button></div><div class="css-r8v8pb e1ulzjg70"><pre style="counter-reset:linenumber NaN" class="language-graphql line-numbers"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Comment</span> <span class="token punctuation">{</span>
  <span class="token attr-name">post</span><span class="token punctuation">:</span> <span class="token class-name">Post</span><span class="token operator">!</span> <span class="token directive function">@cacheControl</span><span class="token punctuation">(</span><span class="token attr-name">maxAge</span><span class="token punctuation">:</span> <span class="token number">120</span><span class="token punctuation">)</span>
  <span class="token attr-name">body</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span></span></pre></div></div></div>
<h3 id="in-your-resolvers-dynamic" style="position:relative"><a class="headingLink" href="#in-your-resolvers-dynamic">In your resolvers (dynamic)</a></h3>
<p>You can decide how to cache a particular field&#x27;s result <em>while</em> you&#x27;re resolving it. To support this, Apollo Server provides a <code class="language-text">cacheControl</code> object in the <a href="/data/resolvers/#resolver-arguments"><code class="language-text">info</code> parameter</a> that&#x27;s passed to every resolver.</p>
<blockquote>
<p>If you set a field&#x27;s cache hint in its resolver, it <strong>overrides</strong> any cache hint you <a href="#in-your-schema-static">provided in your schema</a>.</p>
</blockquote>
<h4 id="cachecontrolsetcachehint" style="position:relative"><a class="headingLink" href="#cachecontrolsetcachehint"><code class="language-text">cacheControl.setCacheHint</code></a></h4>
<p>The <code class="language-text">cacheControl</code> object includes a <code class="language-text">setCacheHint</code> method, which you call like so:</p>
<div class="gatsby-highlight has-highlighted-lines" data-language="js"><div class="css-1gcd36t e1ulzjg73"><div class="css-1y4makq e1ulzjg72"><style data-emotion-css="hga22n">.css-hga22n{background-color:transparent;border-radius:4px;border-width:0;color:#424855;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:28px;min-width:76px;padding:0 12px;font-family:'Source Sans Pro',sans-serif;font-size:13px;line-height:1.54;font-weight:600;outline:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;}.css-hga22n[disabled],.css-hga22n[disabled]:hover{background-color:transparent;box-shadow:none;color:#959DAA;}.css-hga22n:hover,.css-hga22n[data-force-hover-state]{background-color:#F4F6F8;color:#424855;}.css-hga22n:focus,.css-hga22n[data-force-focus-state]{background-color:#ffffff;color:#2075d6;box-shadow:0 1px 4px 0 rgba(18,21,26,0.08),0 0 0 2px #bbdbff,inset 0 0 0 1px #2075d6,inset 0 -1px 0 0 rgba(18,21,26,0.05);}.css-hga22n:active,.css-hga22n[data-force-active-state],.css-hga22n[aria-expanded=true]{color:#424855;background-color:#EBEEF0;box-shadow:none;outline:0;}</style><button class="css-hga22n">Copy</button></div><div class="css-r8v8pb e1ulzjg70"><pre style="counter-reset:linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">const</span> resolvers <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">Query</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">post</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span><span class="token punctuation">,</span> _<span class="token punctuation">,</span> info</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
<span class="gatsby-highlight-code-line">      info<span class="token punctuation">.</span>cacheControl<span class="token punctuation">.</span><span class="token function">setCacheHint</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">maxAge</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token literal-property property">scope</span><span class="token operator">:</span> <span class="token string">&#x27;PRIVATE&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>      <span class="token keyword">return</span> <span class="token function">find</span><span class="token punctuation">(</span>posts<span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div></div>
<p>The <code class="language-text">setCacheHint</code> method accepts an object with <code class="language-text">maxAge</code> and <code class="language-text">scope</code> fields.</p>
<h4 id="cachecontrolcachehint" style="position:relative"><a class="headingLink" href="#cachecontrolcachehint"><code class="language-text">cacheControl.cacheHint</code></a></h4>
<p>This object represents the field&#x27;s current cache hint. Its fields include the following:</p>
<ul>
<li>
<p>The field&#x27;s current <code class="language-text">maxAge</code> and <code class="language-text">scope</code> (which might have been set <a href="#in-your-schema-static">statically</a>)</p>
</li>
<li>
<p>A <code class="language-text">restrict</code> method, which is similar to <code class="language-text">setCacheHint</code> but it can&#x27;t <em>relax</em> existing hint settings:</p>
<div class="gatsby-highlight" data-language="js"><div class="css-1gcd36t e1ulzjg73"><div class="css-1y4makq e1ulzjg72"><style data-emotion-css="hga22n">.css-hga22n{background-color:transparent;border-radius:4px;border-width:0;color:#424855;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:28px;min-width:76px;padding:0 12px;font-family:'Source Sans Pro',sans-serif;font-size:13px;line-height:1.54;font-weight:600;outline:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;}.css-hga22n[disabled],.css-hga22n[disabled]:hover{background-color:transparent;box-shadow:none;color:#959DAA;}.css-hga22n:hover,.css-hga22n[data-force-hover-state]{background-color:#F4F6F8;color:#424855;}.css-hga22n:focus,.css-hga22n[data-force-focus-state]{background-color:#ffffff;color:#2075d6;box-shadow:0 1px 4px 0 rgba(18,21,26,0.08),0 0 0 2px #bbdbff,inset 0 0 0 1px #2075d6,inset 0 -1px 0 0 rgba(18,21,26,0.05);}.css-hga22n:active,.css-hga22n[data-force-active-state],.css-hga22n[aria-expanded=true]{color:#424855;background-color:#EBEEF0;box-shadow:none;outline:0;}</style><button class="css-hga22n">Copy</button></div><div class="css-r8v8pb e1ulzjg70"><pre style="counter-reset:linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token comment">// If we call this first...</span>
info<span class="token punctuation">.</span>cacheControl<span class="token punctuation">.</span><span class="token function">setCacheHint</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">maxAge</span><span class="token operator">:</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token literal-property property">scope</span><span class="token operator">:</span> <span class="token string">&#x27;PRIVATE&#x27;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ...then this changes maxAge (more restrictive) but NOT scope (less restrictive)</span>
info<span class="token punctuation">.</span>cacheControl<span class="token punctuation">.</span>cacheHint<span class="token punctuation">.</span><span class="token function">restrict</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">maxAge</span><span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token literal-property property">scope</span><span class="token operator">:</span> <span class="token string">&#x27;PUBLIC&#x27;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span></span></pre></div></div></div>
</li>
</ul>
<h4 id="cachecontrolcachehintfromtype" style="position:relative"><a class="headingLink" href="#cachecontrolcachehintfromtype"><code class="language-text">cacheControl.cacheHintFromType</code></a></h4>
<p>This method enables you to get the default cache hint for a particular object type. This can be useful when resolving a union or interface field, which might return one of multiple object types.</p>
<h3 id="calculating-cache-behavior" style="position:relative"><a class="headingLink" href="#calculating-cache-behavior">Calculating cache behavior</a></h3>
<p>For security, each operation response&#x27;s cache behavior is calculated based on the <em>most restrictive</em> cache hints among the result&#x27;s fields:</p>
<ul>
<li>The response&#x27;s <code class="language-text">maxAge</code> equals the lowest <code class="language-text">maxAge</code> among all fields. If that value is <code class="language-text">0</code>, the entire result is <em>not</em> cached.</li>
<li>The response&#x27;s <code class="language-text">scope</code> is <code class="language-text">PRIVATE</code> if <em>any</em> field&#x27;s <code class="language-text">scope</code> is <code class="language-text">PRIVATE</code>.</li>
</ul>
<h3 id="default-maxage" style="position:relative"><a class="headingLink" href="#default-maxage">Default <code class="language-text">maxAge</code></a></h3>
<p>By default, the following schema fields have a <code class="language-text">maxAge</code> of <code class="language-text">0</code> <em>if you don&#x27;t specify one</em>:</p>
<ul>
<li><strong>Root fields</strong> (i.e., the fields of the <code class="language-text">Query</code>, <code class="language-text">Mutation</code>, and <code class="language-text">Subscription</code> types)
<ul>
<li>Because <em>every</em> GraphQL operation includes a root field, this means that by default, <strong>no operation results are cached unless you set cache hints!</strong></li>
</ul>
</li>
<li><strong>Fields that return a non-scalar type</strong> (object, interface, or union) or a list of non-scalar types.</li>
</ul>
<p>You can <a href="#setting-a-different-default-maxage">customize this default</a>.</p>
<p>All other schema fields (i.e., <strong>non-root fields that return scalar types</strong>) instead inherit their default <code class="language-text">maxAge</code> from their parent field.</p>
<h4 id="why-are-these-the-maxage-defaults" style="position:relative"><a class="headingLink" href="#why-are-these-the-maxage-defaults">Why are these the <code class="language-text">maxAge</code> defaults?</a></h4>
<p>Our philosophy behind Apollo Server caching is that a response should only be considered cacheable if every part of that response <em>opts in</em> to being cacheable. At the same time, we don&#x27;t think developers should have to specify cache hints for every single field in their schema.</p>
<p>So, we follow these heuristics:</p>
<ul>
<li>Root field resolvers are extremely likely to fetch data (because these fields have no parent), so we set their default <code class="language-text">maxAge</code> to <code class="language-text">0</code> to avoid automatically caching data that <em>shouldn&#x27;t</em> be cached.</li>
<li>Resolvers for other non-scalar fields (objects, interfaces, and unions) <em>also</em> commonly fetch data because they contain arbitrarily many fields. Consequently, we also set their default <code class="language-text">maxAge</code> to <code class="language-text">0</code>.</li>
<li>Resolvers for scalar, non-root fields <em>rarely</em> fetch data and instead usually populate data via the <code class="language-text">parent</code> argument. Consequently, these fields inherit their default <code class="language-text">maxAge</code> from their parent to reduce schema clutter.</li>
</ul>
<p>Of course, these heuristics aren&#x27;t always correct! For example, the resolver for a non-root scalar field might indeed fetch remote data. You can always set your own cache hint for any field with an undesirable default behavior.</p>
<p>Ideally, you can provide a <code class="language-text">maxAge</code> for every field with a resolver that actually fetches data from a data source (such as a database or REST API). <em>Most</em> other fields can then inherit their cache hint from their parent (fields with resolvers that <em>don&#x27;t</em> fetch data less commonly have specific caching needs). For more on this, see <a href="#recommended-starting-usage">Recommended starting usage</a>.</p>
<h4 id="setting-a-different-default-maxage" style="position:relative"><a class="headingLink" href="#setting-a-different-default-maxage">Setting a different default <code class="language-text">maxAge</code></a></h4>
<p>You can set a default <code class="language-text">maxAge</code> that&#x27;s applied to fields that otherwise receive the <a href="#default-maxage">default <code class="language-text">maxAge</code> of <code class="language-text">0</code></a>.</p>
<blockquote>
<p>You should identify and address all exceptions to your default <code class="language-text">maxAge</code> before you enable it in production, but this is a great way to get started with cache control.</p>
</blockquote>
<p>Set your default <code class="language-text">maxAge</code> by passing the cache control plugin to the <code class="language-text">ApolloServer</code> constructor, like so:</p>
<div class="gatsby-highlight" data-language="javascript"><div class="css-1gcd36t e1ulzjg73"><div class="css-1y4makq e1ulzjg72"><style data-emotion-css="hga22n">.css-hga22n{background-color:transparent;border-radius:4px;border-width:0;color:#424855;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:28px;min-width:76px;padding:0 12px;font-family:'Source Sans Pro',sans-serif;font-size:13px;line-height:1.54;font-weight:600;outline:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;}.css-hga22n[disabled],.css-hga22n[disabled]:hover{background-color:transparent;box-shadow:none;color:#959DAA;}.css-hga22n:hover,.css-hga22n[data-force-hover-state]{background-color:#F4F6F8;color:#424855;}.css-hga22n:focus,.css-hga22n[data-force-focus-state]{background-color:#ffffff;color:#2075d6;box-shadow:0 1px 4px 0 rgba(18,21,26,0.08),0 0 0 2px #bbdbff,inset 0 0 0 1px #2075d6,inset 0 -1px 0 0 rgba(18,21,26,0.05);}.css-hga22n:active,.css-hga22n[data-force-active-state],.css-hga22n[aria-expanded=true]{color:#424855;background-color:#EBEEF0;box-shadow:none;outline:0;}</style><button class="css-hga22n">Copy</button></div><div class="css-r8v8pb e1ulzjg70"><pre style="counter-reset:linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> ApolloServerPluginCacheControl <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;apollo-server-core&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApolloServer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...other options...</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ApolloServerPluginCacheControl</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">defaultMaxAge</span><span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>  <span class="token comment">// 5 seconds</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div></div>
<h3 id="recommended-starting-usage" style="position:relative"><a class="headingLink" href="#recommended-starting-usage">Recommended starting usage</a></h3>
<p>You usually don&#x27;t need to specify cache hints for every field in your schema. Instead, we recommend doing the following as a starting point:</p>
<ul>
<li>
<p>For fields that should <em>never</em> be cached, explicitly set <code class="language-text">maxAge</code> to <code class="language-text">0</code>.</p>
</li>
<li>
<p>Set a <code class="language-text">maxAge</code> for every field with a resolver that <em>actually fetches data from a data source</em> (such as a database or REST API). You can base the value of <code class="language-text">maxAge</code> on the frequency of updates that are made to the relevant data.</p>
</li>
<li>
<p>Set <code class="language-text">inheritMaxAge: true</code> for each other non-root field that returns a non-scalar type.</p>
<ul>
<li>Note that you can only set <code class="language-text">inheritMaxAge</code> <a href="#in-your-schema-static">statically</a>.</li>
</ul>
</li>
</ul>
<h3 id="example-maxage-calculations" style="position:relative"><a class="headingLink" href="#example-maxage-calculations">Example <code class="language-text">maxAge</code> calculations</a></h3>
<p>Consider the following schema:</p>
<div class="gatsby-highlight" data-language="graphql"><div class="css-1gcd36t e1ulzjg73"><div class="css-1y4makq e1ulzjg72"><style data-emotion-css="hga22n">.css-hga22n{background-color:transparent;border-radius:4px;border-width:0;color:#424855;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:28px;min-width:76px;padding:0 12px;font-family:'Source Sans Pro',sans-serif;font-size:13px;line-height:1.54;font-weight:600;outline:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;}.css-hga22n[disabled],.css-hga22n[disabled]:hover{background-color:transparent;box-shadow:none;color:#959DAA;}.css-hga22n:hover,.css-hga22n[data-force-hover-state]{background-color:#F4F6F8;color:#424855;}.css-hga22n:focus,.css-hga22n[data-force-focus-state]{background-color:#ffffff;color:#2075d6;box-shadow:0 1px 4px 0 rgba(18,21,26,0.08),0 0 0 2px #bbdbff,inset 0 0 0 1px #2075d6,inset 0 -1px 0 0 rgba(18,21,26,0.05);}.css-hga22n:active,.css-hga22n[data-force-active-state],.css-hga22n[aria-expanded=true]{color:#424855;background-color:#EBEEF0;box-shadow:none;outline:0;}</style><button class="css-hga22n">Copy</button></div><div class="css-r8v8pb e1ulzjg70"><pre style="counter-reset:linenumber NaN" class="language-graphql line-numbers"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">book</span><span class="token punctuation">:</span> <span class="token class-name">Book</span>
  <span class="token attr-name">cachedBook</span><span class="token punctuation">:</span> <span class="token class-name">Book</span> <span class="token directive function">@cacheControl</span><span class="token punctuation">(</span><span class="token attr-name">maxAge</span><span class="token punctuation">:</span> <span class="token number">60</span><span class="token punctuation">)</span>
  <span class="token attr-name">reader</span><span class="token punctuation">:</span> <span class="token class-name">Reader</span> <span class="token directive function">@cacheControl</span><span class="token punctuation">(</span><span class="token attr-name">maxAge</span><span class="token punctuation">:</span> <span class="token number">40</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">cachedTitle</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@cacheControl</span><span class="token punctuation">(</span><span class="token attr-name">maxAge</span><span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Reader</span> <span class="token punctuation">{</span>
  <span class="token attr-name">book</span><span class="token punctuation">:</span> <span class="token class-name">Book</span> <span class="token directive function">@cacheControl</span><span class="token punctuation">(</span><span class="token attr-name">inheritMaxAge</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div></div>
<p>Let&#x27;s look at some queries and their resulting <code class="language-text">maxAge</code> values:</p>
<div class="gatsby-highlight" data-language="graphql"><div class="css-1gcd36t e1ulzjg73"><div class="css-1y4makq e1ulzjg72"><style data-emotion-css="hga22n">.css-hga22n{background-color:transparent;border-radius:4px;border-width:0;color:#424855;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:28px;min-width:76px;padding:0 12px;font-family:'Source Sans Pro',sans-serif;font-size:13px;line-height:1.54;font-weight:600;outline:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;}.css-hga22n[disabled],.css-hga22n[disabled]:hover{background-color:transparent;box-shadow:none;color:#959DAA;}.css-hga22n:hover,.css-hga22n[data-force-hover-state]{background-color:#F4F6F8;color:#424855;}.css-hga22n:focus,.css-hga22n[data-force-focus-state]{background-color:#ffffff;color:#2075d6;box-shadow:0 1px 4px 0 rgba(18,21,26,0.08),0 0 0 2px #bbdbff,inset 0 0 0 1px #2075d6,inset 0 -1px 0 0 rgba(18,21,26,0.05);}.css-hga22n:active,.css-hga22n[data-force-active-state],.css-hga22n[aria-expanded=true]{color:#424855;background-color:#EBEEF0;box-shadow:none;outline:0;}</style><button class="css-hga22n">Copy</button></div><div class="css-r8v8pb e1ulzjg70"><pre style="counter-reset:linenumber NaN" class="language-graphql line-numbers"><code class="language-graphql"><span class="token comment"># maxAge: 0</span>
<span class="token comment"># Query.book doesn&#x27;t set a maxAge and it&#x27;s a root field (default 0).</span>
<span class="token keyword">query</span> <span class="token definition-query function">GetBookTitle</span> <span class="token punctuation">{</span>
  <span class="token object">book</span> <span class="token punctuation">{</span>        <span class="token comment"># 0</span>
    <span class="token property">cachedTitle</span> <span class="token comment"># 30</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment"># maxAge: 60</span>
<span class="token comment"># Query.cachedBook has a maxAge of 60, and Book.title is a scalar, so it</span>
<span class="token comment"># inherits maxAge from its parent by default.</span>
<span class="token keyword">query</span> <span class="token definition-query function">GetCachedBookTitle</span> <span class="token punctuation">{</span>
  <span class="token object">cachedBook</span> <span class="token punctuation">{</span> <span class="token comment"># 60</span>
    <span class="token property">title</span>      <span class="token comment"># inherits</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment"># maxAge: 30</span>
<span class="token comment"># Query.cachedBook has a maxAge of 60, but Book.cachedTitle has</span>
<span class="token comment"># a maxAge of 30.</span>
<span class="token keyword">query</span> <span class="token definition-query function">GetCachedBookCachedTitle</span> <span class="token punctuation">{</span>
  <span class="token object">cachedBook</span> <span class="token punctuation">{</span>  <span class="token comment"># 60</span>
    <span class="token property">cachedTitle</span> <span class="token comment"># 30</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment"># maxAge: 40</span>
<span class="token comment"># Query.reader has a maxAge of 40. Reader.Book is set to</span>
<span class="token comment"># inheritMaxAge from its parent, and Book.title is a scalar</span>
<span class="token comment"># that inherits maxAge from its parent by default.</span>
<span class="token keyword">query</span> <span class="token definition-query function">GetReaderBookTitle</span> <span class="token punctuation">{</span>
  <span class="token object">reader</span> <span class="token punctuation">{</span>  <span class="token comment"># 40</span>
    <span class="token object">book</span> <span class="token punctuation">{</span>  <span class="token comment"># inherits</span>
      <span class="token property">title</span> <span class="token comment"># inherits</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div></div>
<h2 id="using-with-federation" style="position:relative"><a class="headingLink" href="#using-with-federation">Using with federation</a></h2>
<blockquote>
<p>Using cache control with Apollo Federation requires v0.28 of <code class="language-text">@apollo/federation</code> in your subgraph, v0.36 of <code class="language-text">@apollo/gateway</code> in your router, and v3.0.2 of Apollo Server in both servers.</p>
</blockquote>
<p>When using <a href="https://www.apollographql.com/docs/federation">Apollo Federation</a>, the <code class="language-text">@cacheControl</code> directive and <code class="language-text">CacheControlScope</code> enum may be defined in a subgraph&#x27;s schema. An Apollo Server-based subgraph will calculate and set the cache hint for the response that it sends to the gateway as it would for a non-federated Apollo Server sending a response to a client. The gateway will then calculate the cache hint for the overall response based on the most restrictive settings among all of the responses received from the subgraphs involved in query plan execution.</p>
<h3 id="setting-entity-cache-hints" style="position:relative"><a class="headingLink" href="#setting-entity-cache-hints">Setting entity cache hints</a></h3>
<p>Subgraph schemas contain an <code class="language-text">_entities</code> root field on the <code class="language-text">Query</code> type, so all query plans that require entity resolution will have a <a href="#default-maxage"><code class="language-text">maxAge</code> of <code class="language-text">0</code> set by default</a>. To override this default behavior, you can add a <code class="language-text">@cacheControl</code> directive to an entity&#x27;s definition:</p>
<div class="gatsby-highlight" data-language="graphql"><div class="css-1gcd36t e1ulzjg73"><div class="css-1y4makq e1ulzjg72"><style data-emotion-css="hga22n">.css-hga22n{background-color:transparent;border-radius:4px;border-width:0;color:#424855;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:28px;min-width:76px;padding:0 12px;font-family:'Source Sans Pro',sans-serif;font-size:13px;line-height:1.54;font-weight:600;outline:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;}.css-hga22n[disabled],.css-hga22n[disabled]:hover{background-color:transparent;box-shadow:none;color:#959DAA;}.css-hga22n:hover,.css-hga22n[data-force-hover-state]{background-color:#F4F6F8;color:#424855;}.css-hga22n:focus,.css-hga22n[data-force-focus-state]{background-color:#ffffff;color:#2075d6;box-shadow:0 1px 4px 0 rgba(18,21,26,0.08),0 0 0 2px #bbdbff,inset 0 0 0 1px #2075d6,inset 0 -1px 0 0 rgba(18,21,26,0.05);}.css-hga22n:active,.css-hga22n[data-force-active-state],.css-hga22n[aria-expanded=true]{color:#424855;background-color:#EBEEF0;box-shadow:none;outline:0;}</style><button class="css-hga22n">Copy</button></div><div class="css-r8v8pb e1ulzjg70"><pre style="counter-reset:linenumber NaN" class="language-graphql line-numbers"><code class="language-graphql"><span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">&quot;isbn&quot;</span><span class="token punctuation">)</span> <span class="token directive function">@cacheControl</span><span class="token punctuation">(</span><span class="token attr-name">maxAge</span><span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">isbn</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span></span></pre></div></div></div>
<p>When the <code class="language-text">_entities</code> field is resolved it will check the applicable concrete type for a cache hint (which would be the <code class="language-text">Book</code> type in the example above) and apply that hint instead.</p>
<p>To set cache hints dynamically, the <a href="#in-your-resolvers-dynamic"><code class="language-text">cacheControl</code> object and its methods</a> are also available in the <code class="language-text">info</code> parameter of the <code class="language-text">__resolveReference</code> resolver.</p>
<h3 id="overriding-subgraph-cache-hints-in-the-gateway" style="position:relative"><a class="headingLink" href="#overriding-subgraph-cache-hints-in-the-gateway">Overriding subgraph cache hints in the gateway</a></h3>
<p>If a subgraph does not specify a <code class="language-text">max-age</code>, the gateway will assume its response (and
in turn, the overall response) cannot be cached. To override this behavior, you can set the <code class="language-text">Cache-Control</code> header in the <code class="language-text">didReceiveResponse</code> method of a <code class="language-text">RemoteGraphQLDataSource</code>.</p>
<p>Additionally, if the gateway should ignore <code class="language-text">Cache-Control</code> response headers from subgraphs that will affect the operation&#x27;s cache policy, then you can set the <code class="language-text">honorSubgraphCacheControlHeader</code> property of a <code class="language-text">RemoteGraphQLDataSource</code> to <code class="language-text">false</code> (this value is <code class="language-text">true</code> by default):</p>
<div class="gatsby-highlight" data-language="javascript"><div class="css-1gcd36t e1ulzjg73"><div class="css-1y4makq e1ulzjg72"><style data-emotion-css="hga22n">.css-hga22n{background-color:transparent;border-radius:4px;border-width:0;color:#424855;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:28px;min-width:76px;padding:0 12px;font-family:'Source Sans Pro',sans-serif;font-size:13px;line-height:1.54;font-weight:600;outline:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;}.css-hga22n[disabled],.css-hga22n[disabled]:hover{background-color:transparent;box-shadow:none;color:#959DAA;}.css-hga22n:hover,.css-hga22n[data-force-hover-state]{background-color:#F4F6F8;color:#424855;}.css-hga22n:focus,.css-hga22n[data-force-focus-state]{background-color:#ffffff;color:#2075d6;box-shadow:0 1px 4px 0 rgba(18,21,26,0.08),0 0 0 2px #bbdbff,inset 0 0 0 1px #2075d6,inset 0 -1px 0 0 rgba(18,21,26,0.05);}.css-hga22n:active,.css-hga22n[data-force-active-state],.css-hga22n[aria-expanded=true]{color:#424855;background-color:#EBEEF0;box-shadow:none;outline:0;}</style><button class="css-hga22n">Copy</button></div><div class="css-r8v8pb e1ulzjg70"><pre style="counter-reset:linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">const</span> gateway <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApolloGateway</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token function">buildService</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> url <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">RemoteGraphQLDataSource</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      url<span class="token punctuation">,</span>
      <span class="token literal-property property">honorSubgraphCacheControlHeader</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div></div>
<p>The effect of setting <code class="language-text">honorSubgraphCacheControlHeader</code> to <code class="language-text">false</code> is to have no impact on the cacheability of the response in either direction. In other words, this property won’t determine whether the response can be cached, but it does exclude a subgraph&#x27;s <code class="language-text">Cache-Control</code> header from consideration in the gateway&#x27;s calculation. If all subgraphs are excluded from consideration when calculating the overall <code class="language-text">Cache-Control</code> header, the response sent to the client will not be cached.</p>
<h2 id="caching-with-a-cdn" style="position:relative"><a class="headingLink" href="#caching-with-a-cdn">Caching with a CDN</a></h2>
<p>Whenever Apollo Server sends an operation response that has a non-zero <code class="language-text">maxAge</code>, it includes a <code class="language-text">Cache-Control</code> HTTP header that describes the response&#x27;s cache policy.</p>
<p>The header has this format:</p>
<div class="gatsby-highlight" data-language="text"><div class="css-1gcd36t e1ulzjg73"><div class="css-r8v8pb e1ulzjg70"><pre style="counter-reset:linenumber NaN" class="language-text line-numbers"><code class="language-text">Cache-Control: max-age=60, private</code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span></span></pre></div></div></div>
<p>If you run Apollo Server behind a CDN or another caching proxy, you can configure it to use this header&#x27;s value to cache responses appropriately. See your CDN&#x27;s documentation for details (for example, here&#x27;s the <a href="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/Expiration.html#expiration-individual-objects" target="_blank" rel="noopener noreferrer">documentation for Amazon CloudFront</a>).</p>
<h3 id="using-get-requests" style="position:relative"><a class="headingLink" href="#using-get-requests">Using GET requests</a></h3>
<p>Because CDNs and caching proxies only cache GET requests (not POST requests, which Apollo Client sends for all operations by default), we recommend enabling <a href="/performance/apq/">automatic persisted queries</a> and the <a href="/performance/apq/"><code class="language-text">useGETForHashedQueries</code> option</a> in Apollo Client.</p>
<p>Alternatively, you can set the <code class="language-text">useGETForQueries</code> option of <a href="https://www.apollographql.com/docs/react/api/link/apollo-link-http">HttpLink</a> in your <code class="language-text">ApolloClient</code> instance. However, most browsers enforce a size limit on GET requests, and large query strings might exceed this limit.</p>
<h2 id="disabling-cache-control" style="position:relative"><a class="headingLink" href="#disabling-cache-control">Disabling cache control</a></h2>
<p>You can prevent Apollo Server from setting <code class="language-text">Cache-Control</code> headers by installing the <code class="language-text">ApolloServerPluginCacheControl</code> plugin yourself and setting <code class="language-text">calculateHttpHeaders</code> to <code class="language-text">false</code>:</p>
<div class="gatsby-highlight" data-language="js"><div class="css-1gcd36t e1ulzjg73"><div class="css-1y4makq e1ulzjg72"><style data-emotion-css="hga22n">.css-hga22n{background-color:transparent;border-radius:4px;border-width:0;color:#424855;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:28px;min-width:76px;padding:0 12px;font-family:'Source Sans Pro',sans-serif;font-size:13px;line-height:1.54;font-weight:600;outline:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;}.css-hga22n[disabled],.css-hga22n[disabled]:hover{background-color:transparent;box-shadow:none;color:#959DAA;}.css-hga22n:hover,.css-hga22n[data-force-hover-state]{background-color:#F4F6F8;color:#424855;}.css-hga22n:focus,.css-hga22n[data-force-focus-state]{background-color:#ffffff;color:#2075d6;box-shadow:0 1px 4px 0 rgba(18,21,26,0.08),0 0 0 2px #bbdbff,inset 0 0 0 1px #2075d6,inset 0 -1px 0 0 rgba(18,21,26,0.05);}.css-hga22n:active,.css-hga22n[data-force-active-state],.css-hga22n[aria-expanded=true]{color:#424855;background-color:#EBEEF0;box-shadow:none;outline:0;}</style><button class="css-hga22n">Copy</button></div><div class="css-r8v8pb e1ulzjg70"><pre style="counter-reset:linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> ApolloServerPluginCacheControl <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;apollo-server-core&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApolloServer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...other options...</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ApolloServerPluginCacheControl</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">calculateHttpHeaders</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div></div>
<p>If you do this, the cache control plugin still calculates caching behavior for each operation response. You can then use this information with other plugins (like the <a href="#caching-with-responsecacheplugin-advanced">response cache plugin</a>).</p>
<p>To disable cache control calculations entirely, instead install the <code class="language-text">ApolloServerPluginCacheControlDisabled</code> plugin (this plugin has no effect other than preventing the cache control plugin from being installed):</p>
<div class="gatsby-highlight" data-language="js"><div class="css-1gcd36t e1ulzjg73"><div class="css-1y4makq e1ulzjg72"><style data-emotion-css="hga22n">.css-hga22n{background-color:transparent;border-radius:4px;border-width:0;color:#424855;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:28px;min-width:76px;padding:0 12px;font-family:'Source Sans Pro',sans-serif;font-size:13px;line-height:1.54;font-weight:600;outline:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;}.css-hga22n[disabled],.css-hga22n[disabled]:hover{background-color:transparent;box-shadow:none;color:#959DAA;}.css-hga22n:hover,.css-hga22n[data-force-hover-state]{background-color:#F4F6F8;color:#424855;}.css-hga22n:focus,.css-hga22n[data-force-focus-state]{background-color:#ffffff;color:#2075d6;box-shadow:0 1px 4px 0 rgba(18,21,26,0.08),0 0 0 2px #bbdbff,inset 0 0 0 1px #2075d6,inset 0 -1px 0 0 rgba(18,21,26,0.05);}.css-hga22n:active,.css-hga22n[data-force-active-state],.css-hga22n[aria-expanded=true]{color:#424855;background-color:#EBEEF0;box-shadow:none;outline:0;}</style><button class="css-hga22n">Copy</button></div><div class="css-r8v8pb e1ulzjg70"><pre style="counter-reset:linenumber NaN" class="language-js line-numbers"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> ApolloServerPluginCacheControlDisabled <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#x27;apollo-server-core&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApolloServer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...other options...</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ApolloServerPluginCacheControlDisabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div></div>
<h2 id="caching-with-responsecacheplugin-advanced" style="position:relative"><a class="headingLink" href="#caching-with-responsecacheplugin-advanced">Caching with <code class="language-text">responseCachePlugin</code> (advanced)</a></h2>
<p>You can cache Apollo Server query responses in stores like Redis, Memcached, or Apollo Server&#x27;s in-memory cache.</p>
<h3 id="in-memory-cache-setup" style="position:relative"><a class="headingLink" href="#in-memory-cache-setup">In-memory cache setup</a></h3>
<p>To set up your in-memory response cache, you first import the <code class="language-text">responseCachePlugin</code> and provide it to the <code class="language-text">ApolloServer</code> constructor:</p>
<div class="gatsby-highlight" data-language="javascript"><div class="css-1gcd36t e1ulzjg73"><div class="css-1y4makq e1ulzjg72"><style data-emotion-css="hga22n">.css-hga22n{background-color:transparent;border-radius:4px;border-width:0;color:#424855;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:28px;min-width:76px;padding:0 12px;font-family:'Source Sans Pro',sans-serif;font-size:13px;line-height:1.54;font-weight:600;outline:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;}.css-hga22n[disabled],.css-hga22n[disabled]:hover{background-color:transparent;box-shadow:none;color:#959DAA;}.css-hga22n:hover,.css-hga22n[data-force-hover-state]{background-color:#F4F6F8;color:#424855;}.css-hga22n:focus,.css-hga22n[data-force-focus-state]{background-color:#ffffff;color:#2075d6;box-shadow:0 1px 4px 0 rgba(18,21,26,0.08),0 0 0 2px #bbdbff,inset 0 0 0 1px #2075d6,inset 0 -1px 0 0 rgba(18,21,26,0.05);}.css-hga22n:active,.css-hga22n[data-force-active-state],.css-hga22n[aria-expanded=true]{color:#424855;background-color:#EBEEF0;box-shadow:none;outline:0;}</style><button class="css-hga22n">Copy</button></div><div class="css-r8v8pb e1ulzjg70"><pre style="counter-reset:linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">import</span> responseCachePlugin <span class="token keyword">from</span> <span class="token string">&#x27;apollo-server-plugin-response-cache&#x27;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApolloServer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...other options...</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">responseCachePlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div></div>
<p>On initialization, this plugin automatically begins caching responses according to <a href="#in-your-schema-static">field settings</a>.</p>
<p>The plugin uses the same in-memory LRU cache as Apollo Server&#x27;s other features. For environments with multiple server instances, you might instead want to use a shared cache backend, such as <a href="#memcachedredis-setup">Memcached or Redis</a>.</p>
<blockquote>
<p>In addition to the <a href="#caching-with-a-cdn"><code class="language-text">Cache-Control</code> HTTP header</a>, the <code class="language-text">responseCachePlugin</code> also sets the <code class="language-text">Age</code> HTTP header to the number of seconds the returned value has been in the cache.</p>
</blockquote>
<h3 id="memcachedredis-setup" style="position:relative"><a class="headingLink" href="#memcachedredis-setup">Memcached/Redis setup</a></h3>
<p>See <a href="/data/data-sources/#using-memcachedredis-as-a-cache-storage-backend">Using Memcached/Redis as a cache storage backend</a>.</p>
<blockquote>
<p>You can also <a href="/data/data-sources/#implementing-your-own-cache-backend">implement your own cache backend</a>.</p>
</blockquote>
<h3 id="identifying-users-for-private-responses" style="position:relative"><a class="headingLink" href="#identifying-users-for-private-responses">Identifying users for <code class="language-text">PRIVATE</code> responses</a></h3>
<p>If a cached response has a <a href="#in-your-schema-static"><code class="language-text">PRIVATE</code> scope</a>, its value is accessible by only a single user. To enforce this restriction, the cache needs to know how to <em>identify</em> that user.</p>
<p>To enable this identification, you provide a <code class="language-text">sessionId</code> function to your <code class="language-text">responseCachePlugin</code>, like so:</p>
<div class="gatsby-highlight" data-language="javascript"><div class="css-1gcd36t e1ulzjg73"><div class="css-1y4makq e1ulzjg72"><style data-emotion-css="hga22n">.css-hga22n{background-color:transparent;border-radius:4px;border-width:0;color:#424855;cursor:pointer;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;height:28px;min-width:76px;padding:0 12px;font-family:'Source Sans Pro',sans-serif;font-size:13px;line-height:1.54;font-weight:600;outline:0;-webkit-text-decoration:none;text-decoration:none;white-space:nowrap;}.css-hga22n[disabled],.css-hga22n[disabled]:hover{background-color:transparent;box-shadow:none;color:#959DAA;}.css-hga22n:hover,.css-hga22n[data-force-hover-state]{background-color:#F4F6F8;color:#424855;}.css-hga22n:focus,.css-hga22n[data-force-focus-state]{background-color:#ffffff;color:#2075d6;box-shadow:0 1px 4px 0 rgba(18,21,26,0.08),0 0 0 2px #bbdbff,inset 0 0 0 1px #2075d6,inset 0 -1px 0 0 rgba(18,21,26,0.05);}.css-hga22n:active,.css-hga22n[data-force-active-state],.css-hga22n[aria-expanded=true]{color:#424855;background-color:#EBEEF0;box-shadow:none;outline:0;}</style><button class="css-hga22n">Copy</button></div><div class="css-r8v8pb e1ulzjg70"><pre style="counter-reset:linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">import</span> responseCachePlugin <span class="token keyword">from</span> <span class="token string">&#x27;apollo-server-plugin-response-cache&#x27;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApolloServer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// ...other settings...</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">responseCachePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function-variable function">sessionId</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">requestContext</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>requestContext<span class="token punctuation">.</span>request<span class="token punctuation">.</span>http<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#x27;session-id&#x27;</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space:normal;width:auto;left:0"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div></div></div>
<blockquote>
<p><strong>Important:</strong> If you don&#x27;t define a <code class="language-text">sessionId</code> function, <code class="language-text">PRIVATE</code> responses are not cached at all.</p>
</blockquote>
<p>The cache uses the return value of this function to identify the user who can later access the cached <code class="language-text">PRIVATE</code> response. In the example above, the function uses a <code class="language-text">session-id</code> header from the original operation request.</p>
<p>If a client later executes the exact same query <em>and</em> has the same identifier, Apollo Server returns the <code class="language-text">PRIVATE</code> cached response if it&#x27;s still available.</p>
<h3 id="separating-responses-for-logged-in-and-logged-out-users" style="position:relative"><a class="headingLink" href="#separating-responses-for-logged-in-and-logged-out-users">Separating responses for logged-in and logged-out users</a></h3>
<p>By default, <code class="language-text">PUBLIC</code> cached responses are accessible by all users. However, if you define a <code class="language-text">sessionId</code> function (<a href="#identifying-users-for-private-responses">as shown above</a>), Apollo Server caches up to <em>two versions</em> of each <code class="language-text">PUBLIC</code> response:</p>
<ul>
<li>One version for users with a <strong>null <code class="language-text">sessionId</code></strong></li>
<li>One version for users with a <strong>non-null <code class="language-text">sessionId</code></strong></li>
</ul>
<p>This enables you to cache different responses for logged-in and logged-out users. For example, you might want your page header to display different menu items depending on a user&#x27;s logged-in status.</p>
<h3 id="configuring-reads-and-writes" style="position:relative"><a class="headingLink" href="#configuring-reads-and-writes">Configuring reads and writes</a></h3>
<p>In addition to <a href="#identifying-users-for-private-responses">the <code class="language-text">sessionId</code> function</a>, you can provide the following functions to your <code class="language-text">responseCachePlugin</code> to configure cache reads and writes. Each of these functions takes a <code class="language-text">GraphQLRequestContext</code> (representing the incoming operation) as a parameter.</p>





















<div class="css-10rhg34 ernxcdh1"><table class="css-1smwn2j ernxcdh0"><thead><tr><th>Function</th><th>Description</th></tr></thead><tbody><tr><td><code class="language-text">extraCacheKeyData</code></td><td>This function&#x27;s return value (any JSON-stringifiable object) is added to the key for the cached response. For example, if your API includes translatable text, this function can return a string derived from <code class="language-text">requestContext.request.http.headers.get(&#x27;Accept-Language&#x27;)</code>.</td></tr><tr><td><code class="language-text">shouldReadFromCache</code></td><td>If this function returns <code class="language-text">false</code>, Apollo Server <em>skips</em> the cache for the incoming operation, even if a valid response is available.</td></tr><tr><td><code class="language-text">shouldWriteToCache</code></td><td>If this function returns <code class="language-text">false</code>, Apollo Server doesn&#x27;t cache its response for the incoming operation, even if the response&#x27;s <code class="language-text">maxAge</code> is greater than <code class="language-text">0</code>.</td></tr></tbody></table></div></div></div><style data-emotion="css 1f6gfyy">.css-1f6gfyy{display:none;margin-top:48px;-webkit-box-pack:end;-ms-flex-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end;}@media (max-width: 1120px){.css-1f6gfyy{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}}@media (max-width: 850px){.css-1f6gfyy{display:none;}}@media (max-width: 600px){.css-1f6gfyy{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-top:24px;}}</style><div class="css-1f6gfyy e694h6z0"><style data-emotion="css rntvij">.css-rntvij{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-bottom:0;}.css-rntvij:not(:last-child){margin-bottom:16px;}</style><h5 class="css-rntvij e694h6z2"><style data-emotion="css 1keuqhy">.css-1keuqhy{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:#5A6270;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}.css-1keuqhy:hover{color:#959DAA;}.css-1keuqhy svg{width:20px;height:20px;margin-right:6px;fill:currentColor;}</style><a target="_blank" rel="noopener noreferrer" href="https://github.com/apollographql/apollo-server/tree/main/docs/source/performance/caching.md" class="css-1keuqhy e694h6z1"><style data-emotion-css="k9tv6n">.css-k9tv6n{overflow:visible;height:26px;}.css-k9tv6n *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 26 26" class="css-k9tv6n"><g fill="none" fill-rule="evenodd" transform="translate(1 1)"><path fill="currentColor" fill-rule="nonzero" d="M15.425 22.985V20.95c0-1.081-.371-1.876-1.112-2.385.465-.045.891-.107 1.279-.188a9.967 9.967 0 0 0 1.233-.348 6.039 6.039 0 0 0 1.166-.543c.344-.21.674-.482.991-.817.317-.335.583-.715.797-1.139.215-.424.384-.933.509-1.527a9.543 9.543 0 0 0 .188-1.963c0-1.384-.451-2.563-1.353-3.537.411-1.072.366-2.237-.134-3.497l-.335-.04c-.232-.027-.65.071-1.253.295-.603.224-1.279.589-2.03 1.098a12.317 12.317 0 0 0-3.309-.442c-1.152 0-2.251.147-3.296.442a11.41 11.41 0 0 0-1.346-.797 6.948 6.948 0 0 0-1.018-.429 3.503 3.503 0 0 0-1.132-.154.844.844 0 0 0-.134.027c-.5 1.268-.545 2.434-.134 3.497-.902.973-1.353 2.152-1.353 3.537 0 .715.063 1.369.188 1.963.125.594.295 1.103.509 1.527.214.424.48.804.797 1.139.317.335.647.607.991.817.344.21.732.391 1.166.543a9.54 9.54 0 0 0 1.233.348c.389.08.815.143 1.279.188-.732.5-1.098 1.295-1.098 2.385v2.075C10.5 24 14 24 15.425 22.985z"></path><circle cx="12" cy="12" r="12" stroke="currentColor" stroke-width="1.5"></circle></g></svg> Edit on GitHub</a></h5></div><style data-emotion="css 9ckfit">.css-9ckfit{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;padding:64px 0;}@media (max-width: 850px){.css-9ckfit{padding:32px 0;}}</style><nav class="css-9ckfit e1sfxy7w4"><style data-emotion="css spe9v1">.css-spe9v1{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:inherit;-webkit-text-decoration:none;text-decoration:none;}.css-spe9v1 svg{height:16px;width:16px;}.css-spe9v1:hover{opacity:0.8;}</style><a class="css-spe9v1 e1sfxy7w3" href="/testing/testing/"><style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 14 24" class="css-1a134qk"><path fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12.5.75L1.78 11.47a.749.749 0 0 0-.001 1.059l.001.001L12.5 23.25"></path></svg><style data-emotion="css 16mhdhi">.css-16mhdhi{margin-left:24px;text-align:left;}@media (max-width: 850px){.css-16mhdhi{margin-left:16px;}}</style><div class="css-16mhdhi e1sfxy7w2"><style data-emotion="css 1vhhq4p">.css-1vhhq4p{letter-spacing:0.142em;text-transform:uppercase;font-size:12px;}</style><div class="css-1vhhq4p e1sfxy7w1">Previous</div><style data-emotion="css mtbysh">.css-mtbysh{color:#2F353F;}</style><div class="css-mtbysh e1sfxy7w0">Integration testing</div></div></a><a style="margin-left:auto" class="css-spe9v1 e1sfxy7w3" href="/performance/apq/"><style data-emotion="css 18eg9eb">.css-18eg9eb{margin-right:24px;text-align:right;}@media (max-width: 850px){.css-18eg9eb{margin-right:16px;}}</style><div class="css-18eg9eb e1sfxy7w2"><div class="css-1vhhq4p e1sfxy7w1">Next</div><div class="css-mtbysh e1sfxy7w0">Automatic persisted queries</div></div><style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-1a134qk"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M5.5.75l10.72 10.72a.749.749 0 0 1 .001 1.059l-.001.001L5.5 23.25"></path></svg></a></nav></div><style data-emotion="css u6jpbo">.css-u6jpbo{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:240px;max-height:calc(100vh - 72px);margin-top:-36px;padding:40px 0;margin-left:40px;position:-webkit-sticky;position:sticky;top:72px;}@media (max-width: 1120px){.css-u6jpbo{display:none;}}@media (max-width: 850px){.css-u6jpbo{display:block;}}@media (max-width: 600px){.css-u6jpbo{display:none;}}</style><aside class="css-u6jpbo e694h6z4"><style data-emotion="css 16ceglb">.css-16ceglb{font-weight:600;}</style><h4 class="css-16ceglb e694h6z3">Server-side caching</h4><style data-emotion="css gmdgof">.css-gmdgof{margin-left:0;margin-bottom:48px;overflow:auto;}</style><ul class="css-gmdgof e1wyoreh1"><style data-emotion="css 1h656g5">.css-1h656g5{list-style:none;font-size:1rem;line-height:inherit;}.css-1h656g5.active{color:#3f20ba;font-weight:bold;}.css-1h656g5 a{color:inherit;-webkit-text-decoration:none;text-decoration:none;}.css-1h656g5 a:hover{opacity:0.8;}</style><li class=" css-1h656g5 e1wyoreh0" style="padding-left:"><a href="#setting-cache-hints">Setting cache hints</a></li><li class=" css-1h656g5 e1wyoreh0" style="padding-left:16px"><a href="#in-your-schema-static">In your schema (static)</a></li><li class=" css-1h656g5 e1wyoreh0" style="padding-left:16px"><a href="#in-your-resolvers-dynamic">In your resolvers (dynamic)</a></li><li class=" css-1h656g5 e1wyoreh0" style="padding-left:16px"><a href="#calculating-cache-behavior">Calculating cache behavior</a></li><li class=" css-1h656g5 e1wyoreh0" style="padding-left:16px"><a href="#default-maxage">Default maxAge</a></li><li class=" css-1h656g5 e1wyoreh0" style="padding-left:16px"><a href="#recommended-starting-usage">Recommended starting usage</a></li><li class=" css-1h656g5 e1wyoreh0" style="padding-left:16px"><a href="#example-maxage-calculations">Example maxAge calculations</a></li><li class=" css-1h656g5 e1wyoreh0" style="padding-left:"><a href="#using-with-federation">Using with federation</a></li><li class=" css-1h656g5 e1wyoreh0" style="padding-left:16px"><a href="#setting-entity-cache-hints">Setting entity cache hints</a></li><li class=" css-1h656g5 e1wyoreh0" style="padding-left:16px"><a href="#overriding-subgraph-cache-hints-in-the-gateway">Overriding subgraph cache hints in the gateway</a></li><li class=" css-1h656g5 e1wyoreh0" style="padding-left:"><a href="#caching-with-a-cdn">Caching with a CDN</a></li><li class=" css-1h656g5 e1wyoreh0" style="padding-left:16px"><a href="#using-get-requests">Using GET requests</a></li><li class=" css-1h656g5 e1wyoreh0" style="padding-left:"><a href="#disabling-cache-control">Disabling cache control</a></li><li class=" css-1h656g5 e1wyoreh0" style="padding-left:"><a href="#caching-with-responsecacheplugin-advanced">Caching with responseCachePlugin (advanced)</a></li><li class=" css-1h656g5 e1wyoreh0" style="padding-left:16px"><a href="#in-memory-cache-setup">In-memory cache setup</a></li><li class=" css-1h656g5 e1wyoreh0" style="padding-left:16px"><a href="#memcachedredis-setup">Memcached/Redis setup</a></li><li class=" css-1h656g5 e1wyoreh0" style="padding-left:16px"><a href="#identifying-users-for-private-responses">Identifying users for PRIVATE responses</a></li><li class=" css-1h656g5 e1wyoreh0" style="padding-left:16px"><a href="#separating-responses-for-logged-in-and-logged-out-users">Separating responses for logged-in and logged-out users</a></li><li class=" css-1h656g5 e1wyoreh0" style="padding-left:16px"><a href="#configuring-reads-and-writes">Configuring reads and writes</a></li></ul><h5 class="css-rntvij e694h6z2"><a class="css-1keuqhy e694h6z1"><style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" style="margin-top:-2px" class="css-1a134qk"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12.729 1.2l3.346 6.629 6.44.638a.806.806 0 0 1 .5 1.374l-5.3 5.253 1.965 7.138a.813.813 0 0 1-1.151.935L12 19.934l-6.52 3.229a.813.813 0 0 1-1.151-.935l1.965-7.138L.99 9.837a.804.804 0 0 1 .5-1.374l6.44-.638L11.271 1.2a.819.819 0 0 1 1.458 0z"></path></svg> Rate article</a></h5><h5 class="css-rntvij e694h6z2"><a target="_blank" rel="noopener noreferrer" href="https://github.com/apollographql/apollo-server/tree/main/docs/source/performance/caching.md" class="css-1keuqhy e694h6z1"><style data-emotion-css="k9tv6n">.css-k9tv6n{overflow:visible;height:26px;}.css-k9tv6n *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 26 26" class="css-k9tv6n"><g fill="none" fill-rule="evenodd" transform="translate(1 1)"><path fill="currentColor" fill-rule="nonzero" d="M15.425 22.985V20.95c0-1.081-.371-1.876-1.112-2.385.465-.045.891-.107 1.279-.188a9.967 9.967 0 0 0 1.233-.348 6.039 6.039 0 0 0 1.166-.543c.344-.21.674-.482.991-.817.317-.335.583-.715.797-1.139.215-.424.384-.933.509-1.527a9.543 9.543 0 0 0 .188-1.963c0-1.384-.451-2.563-1.353-3.537.411-1.072.366-2.237-.134-3.497l-.335-.04c-.232-.027-.65.071-1.253.295-.603.224-1.279.589-2.03 1.098a12.317 12.317 0 0 0-3.309-.442c-1.152 0-2.251.147-3.296.442a11.41 11.41 0 0 0-1.346-.797 6.948 6.948 0 0 0-1.018-.429 3.503 3.503 0 0 0-1.132-.154.844.844 0 0 0-.134.027c-.5 1.268-.545 2.434-.134 3.497-.902.973-1.353 2.152-1.353 3.537 0 .715.063 1.369.188 1.963.125.594.295 1.103.509 1.527.214.424.48.804.797 1.139.317.335.647.607.991.817.344.21.732.391 1.166.543a9.54 9.54 0 0 0 1.233.348c.389.08.815.143 1.279.188-.732.5-1.098 1.295-1.098 2.385v2.075C10.5 24 14 24 15.425 22.985z"></path><circle cx="12" cy="12" r="12" stroke="currentColor" stroke-width="1.5"></circle></g></svg> Edit on GitHub</a></h5><h5 class="css-rntvij e694h6z2"><a target="_blank" rel="noopener noreferrer" href="https://community.apollographql.com/" class="css-1keuqhy e694h6z1"><style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-1a134qk"><g fill="none" fill-rule="evenodd" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"><path d="M11.25 18.75a1.5 1.5 0 0 1-1.5-1.5v-7.5a1.5 1.5 0 0 1 1.5-1.5h10.5a1.5 1.5 0 0 1 1.5 1.5v7.5a1.5 1.5 0 0 1-1.5 1.5h-1.5v4.5l-4.5-4.5h-4.5z"></path><path d="M6.75 12.75l-3 3v-4.5h-1.5a1.5 1.5 0 0 1-1.5-1.5v-7.5a1.5 1.5 0 0 1 1.5-1.5h10.5a1.5 1.5 0 0 1 1.5 1.5v3"></path></g></svg> Discuss in forums</a></h5></aside></div></div></main></div><style data-emotion="css 12zcwkl">.css-12zcwkl{width:100%;height:100%;background-color:rgba(90,98,112,0.5);overflow:auto;position:fixed;top:0;left:0;z-index:3;perspective:1000px;transition-property:opacity,visibility;transition-duration:150ms;transition-timing-function:ease-in-out;}</style><div style="opacity:0;visibility:hidden" class="css-12zcwkl em9i7t214"><style data-emotion="css 10dh5mk">.css-10dh5mk{margin-bottom:24px;border-radius:4px;box-shadow:rgba(0,0,0,0.1) 0 2px 12px;background-color:white;overflow:hidden;position:absolute;transform-origin:25% 25%;-webkit-transition:-webkit-transform 150ms ease-in-out;transition:transform 150ms ease-in-out;outline:none;}</style><div tabindex="-1" style="transform:translate3d(0,-24px,-16px) rotate3d(1,0,0.1,8deg)" class="css-10dh5mk em9i7t213"><style data-emotion="css 1d3ruj1">.css-1d3ruj1{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-flow:row wrap;-webkit-flex-flow:row wrap;-ms-flex-flow:row wrap;flex-flow:row wrap;-webkit-writing-mode:vertical-lr;-ms-writing-mode:tb;writing-mode:vertical-lr;margin:12px;height:240px;padding-top:15px;}@media (max-width: 850px){.css-1d3ruj1{height:auto;width:300px;}}</style><nav class="css-1d3ruj1 em9i7t27"><style data-emotion="css 120ki2j">.css-120ki2j{display:block;width:220px;-webkit-writing-mode:horizontal-tb;-ms-writing-mode:lr;writing-mode:horizontal-tb;}@media (max-width: 850px){.css-120ki2j{width:100%;}}</style><div class="css-120ki2j em9i7t26"><style data-emotion="css bm3qgz">.css-bm3qgz{letter-spacing:0.142em;text-transform:uppercase;margin-left:12px;margin-bottom:0;font-size:13px;font-weight:600;color:#959DAA;}</style><h6 class="css-bm3qgz em9i7t212">Core</h6><style data-emotion="css 1959pia">.css-1959pia{margin:0;margin-bottom:20px;}</style><ul class="css-1959pia em9i7t211"><style data-emotion="css bhdh8d">.css-bhdh8d{list-style:none;margin:2px;margin-left:3px;}</style><li class="css-bhdh8d em9i7t210"><style data-emotion="css mne644">.css-mne644{display:block;height:100%;padding:8px;border-radius:4px;-webkit-text-decoration:none;text-decoration:none;background-color:transparent;transition-property:color,background-color;transition-duration:150ms;transition-timing-function:ease-in-out;}@media (hover: hover){.css-mne644:hover{background-color:#d9cfff;}.css-mne644:hover h4{color:#3f20ba;}}</style><a href="https://www.apollographql.com/docs" title="Learn about each part of the Apollo platform and how they all work together." class="css-mne644 em9i7t29"><style data-emotion="css 12yi4b2">.css-12yi4b2{margin-bottom:0;font-weight:600;color:#2F353F;}</style><h4 class="css-12yi4b2 em9i7t28">Apollo Basics</h4></a></li></ul></div><div class="css-120ki2j em9i7t26"><h6 class="css-bm3qgz em9i7t212">Apollo Client</h6><ul class="css-1959pia em9i7t211"><li class="css-bhdh8d em9i7t210"><a href="https://www.apollographql.com/docs/react" title="Manage your React app&#x27;s state and seamlessly execute GraphQL operations." class="css-mne644 em9i7t29"><h4 class="css-12yi4b2 em9i7t28">JS / React</h4></a></li><li class="css-bhdh8d em9i7t210"><a href="https://www.apollographql.com/docs/ios" title="Manage your iOS app&#x27;s state and seamlessly execute GraphQL operations." class="css-mne644 em9i7t29"><h4 class="css-12yi4b2 em9i7t28">iOS</h4></a></li><li class="css-bhdh8d em9i7t210"><a href="https://www.apollographql.com/docs/kotlin" title="Manage your Kotlin app&#x27;s state and seamlessly execute GraphQL operations." class="css-mne644 em9i7t29"><h4 class="css-12yi4b2 em9i7t28">Kotlin / Android</h4></a></li></ul></div><div class="css-120ki2j em9i7t26"><h6 class="css-bm3qgz em9i7t212">Backend</h6><ul class="css-1959pia em9i7t211"><li class="css-bhdh8d em9i7t210"><a href="https://www.apollographql.com/docs/apollo-server" title="Configure a production-ready GraphQL server to fetch and combine data from multiple sources." class="css-mne644 em9i7t29"><h4 class="css-12yi4b2 em9i7t28">Apollo Server</h4></a></li><li class="css-bhdh8d em9i7t210"><a href="https://www.apollographql.com/docs/federation" title="Implement a single unified graph across multiple subgraphs." class="css-mne644 em9i7t29"><h4 class="css-12yi4b2 em9i7t28">Apollo Federation</h4></a></li><li class="css-bhdh8d em9i7t210"><a href="https://www.apollographql.com/docs/router" title="Optimize your federated graph with a high-performance graph router written in Rust." class="css-mne644 em9i7t29"><h4 class="css-12yi4b2 em9i7t28">Apollo Router (alpha)</h4></a></li></ul></div><div class="css-120ki2j em9i7t26"><h6 class="css-bm3qgz em9i7t212">Tools</h6><ul class="css-1959pia em9i7t211"><li class="css-bhdh8d em9i7t210"><a href="https://www.apollographql.com/docs/graph-manager" title="Build your graph with your team, evolve it safely, and keep it running smoothly." class="css-mne644 em9i7t29"><h4 class="css-12yi4b2 em9i7t28">Apollo Studio</h4></a></li><li class="css-bhdh8d em9i7t210"><a href="https://www.apollographql.com/docs/rover" title="Manage your Studio graphs and schemas from the command line." class="css-mne644 em9i7t29"><h4 class="css-12yi4b2 em9i7t28">Rover CLI</h4></a></li></ul></div></nav><style data-emotion="css 1we5kcv">.css-1we5kcv{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:16px 24px;background-color:#F4F6F8;}@media (max-width: 850px){.css-1we5kcv{display:block;}}</style><nav class="css-1we5kcv em9i7t23"><style data-emotion="css 16cjsrx">.css-16cjsrx{color:#5A6270;-webkit-text-decoration:none;text-decoration:none;}.css-16cjsrx:hover{color:#959DAA;}.css-16cjsrx:not(:last-child){margin-right:24px;}</style><a href="https://community.apollographql.com/" target="_blank" rel="noopener noreferrer" class="css-16cjsrx em9i7t22">Forums</a><a href="https://blog.apollographql.com/" target="_blank" rel="noopener noreferrer" class="css-16cjsrx em9i7t22">Blog</a><a href="https://www.apollographql.com/docs/community/" class="css-16cjsrx em9i7t22">Contribute</a><a href="https://summit.graphql.com/" target="_blank" rel="noopener noreferrer" class="css-16cjsrx em9i7t22">Summit</a><style data-emotion="css gdccfg">.css-gdccfg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-left:auto;}@media (max-width: 850px){.css-gdccfg{margin-top:8px;}}</style><div class="css-gdccfg em9i7t21"><style data-emotion="css 1u52uy1">.css-1u52uy1{color:#5A6270;}.css-1u52uy1:hover{color:#959DAA;}.css-1u52uy1:not(:last-child){margin-right:24px;}.css-1u52uy1 svg{height:24px;width:24px;display:block;fill:currentColor;}</style><a href="https://twitter.com/apollographql" title="Twitter" target="_blank" class="css-1u52uy1 em9i7t20"><style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-1a134qk"><path fill="currentColor" d="M23.32 6.44a.5.5 0 0 0-.2-.87l-.79-.2a.5.5 0 0 1-.33-.7l.44-.89a.501.501 0 0 0-.58-.7l-2 .56a.502.502 0 0 1-.44-.08 5 5 0 0 0-8 4v.36a.25.25 0 0 1-.22.25c-2.81.33-5.5-1.1-8.4-4.44a.508.508 0 0 0-.51-.15A.5.5 0 0 0 2 4a7.575 7.575 0 0 0 .46 4.92.25.25 0 0 1-.26.36l-1.12-.22a.5.5 0 0 0-.57.59 5.15 5.15 0 0 0 2.37 3.78.25.25 0 0 1 0 .45l-.53.21a.5.5 0 0 0-.26.69 4.36 4.36 0 0 0 3.2 2.48.25.25 0 0 1 0 .47c-1.36.562-2.819.845-4.29.83a.51.51 0 0 0-.2 1 20.063 20.063 0 0 0 8.14 1.93 12.58 12.58 0 0 0 7-2A12.5 12.5 0 0 0 21.5 9.06v-.87a.499.499 0 0 1 .18-.38l1.64-1.37z"></path></svg></a><a href="https://www.youtube.com/channel/UC0pEW_GOrMJ23l8QcrGdKSw" title="YouTube" target="_blank" class="css-1u52uy1 em9i7t20"><style data-emotion-css="1a134qk">.css-1a134qk{overflow:visible;height:24px;}.css-1a134qk *{vector-effect:non-scaling-stroke;}</style><svg viewBox="0 0 24 24" class="css-1a134qk"><path fill="currentColor" d="M20.06 3.5H3.94A3.94 3.94 0 0 0 0 7.44v9.12a3.94 3.94 0 0 0 3.94 3.94h16.12A3.94 3.94 0 0 0 24 16.56V7.44a3.94 3.94 0 0 0-3.94-3.94zM16.54 12l-6.77 4.36a.5.5 0 0 1-.77-.42V7.28a.5.5 0 0 1 .77-.42l6.77 4.33a.5.5 0 0 1 0 .84V12z"></path></svg></a></div></nav></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-74643563-13"></script><script>
      
      
      if(true) {
        window.dataLayer = window.dataLayer || [];
        function gtag(){window.dataLayer && window.dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-74643563-13', {"send_page_view":false});gtag('config', 'G-0BGG5V2W2K', {"send_page_view":false});
      }
      </script><script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/performance/caching/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-59aea5adbecf28484f73.js"],"app":["/app-a55f8575680208f4298f.js"],"component---node-modules-gatsby-theme-apollo-core-src-pages-404-js":["/component---node-modules-gatsby-theme-apollo-core-src-pages-404-js-517170fe97048272a691.js"],"component---node-modules-gatsby-theme-apollo-docs-src-components-template-js":[]};/*]]>*/</script><script src="/polyfill-59aea5adbecf28484f73.js" nomodule=""></script><script src="/app-a55f8575680208f4298f.js" async=""></script><script src="/79ac12c6-689c070edc40661ddeb0.js" async=""></script><script src="/framework-bd32e92195540dc9b6da.js" async=""></script><script src="/webpack-runtime-1e0d3b6f0e0e2f3ff88f.js" async=""></script></body></html>