{"expireTime":9007200901520844000,"key":"gatsby-plugin-mdx-entire-payload-f3119ad6fad2cc71924449839a612c2b-","val":{"mdast":{"type":"root","children":[{"type":"import","value":"import {\n  ExpansionPanel,\n} from 'gatsby-theme-apollo-docs/src/components/expansion-panel';","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":4,"column":66,"offset":93},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This tutorial helps you deploy Apollo Server to Google Cloud Functions. It uses the following example function handler:","position":{"start":{"line":6,"column":1,"offset":95},"end":{"line":6,"column":120,"offset":214},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":95},"end":{"line":6,"column":120,"offset":214},"indent":[]}},{"type":"jsx","value":"<ExpansionPanel title=\"Click to expand\">","position":{"start":{"line":8,"column":1,"offset":216},"end":{"line":8,"column":41,"offset":256},"indent":[]}},{"type":"code","lang":"javascript:title=index.js","meta":null,"value":"const { ApolloServer, gql } = require('apollo-server-cloud-functions');\n\n// Construct a schema, using GraphQL schema language\nconst typeDefs = gql`\n  type Query {\n    hello: String\n  }\n`;\n\n// Provide resolver functions for your schema fields\nconst resolvers = {\n  Query: {\n    hello: () => 'Hello world!',\n  },\n};\n\nconst server = new ApolloServer({\n  typeDefs,\n  resolvers,\n});\n\nexports.handler = server.createHandler();","position":{"start":{"line":10,"column":1,"offset":258},"end":{"line":33,"column":4,"offset":711},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</ExpansionPanel>","position":{"start":{"line":35,"column":1,"offset":713},"end":{"line":35,"column":18,"offset":730},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Deploying from the Google Cloud Console","position":{"start":{"line":38,"column":4,"offset":736},"end":{"line":38,"column":43,"offset":775},"indent":[]}}],"position":{"start":{"line":38,"column":1,"offset":733},"end":{"line":38,"column":43,"offset":775},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"1. Configure the function","position":{"start":{"line":40,"column":5,"offset":781},"end":{"line":40,"column":30,"offset":806},"indent":[]}}],"position":{"start":{"line":40,"column":1,"offset":777},"end":{"line":40,"column":30,"offset":806},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"From your Google Cloud Console, go to the ","position":{"start":{"line":42,"column":1,"offset":808},"end":{"line":42,"column":43,"offset":850},"indent":[]}},{"type":"link","title":null,"url":"https://console.cloud.google.com/functions/list","children":[{"type":"text","value":"Cloud Functions page","position":{"start":{"line":42,"column":44,"offset":851},"end":{"line":42,"column":64,"offset":871},"indent":[]}}],"position":{"start":{"line":42,"column":43,"offset":850},"end":{"line":42,"column":114,"offset":921},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":42,"column":114,"offset":921},"end":{"line":42,"column":115,"offset":922},"indent":[]}}],"position":{"start":{"line":42,"column":1,"offset":808},"end":{"line":42,"column":115,"offset":922},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":44,"column":1,"offset":924},"end":{"line":44,"column":7,"offset":930},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Create Function","position":{"start":{"line":44,"column":9,"offset":932},"end":{"line":44,"column":24,"offset":947},"indent":[]}}],"position":{"start":{"line":44,"column":7,"offset":930},"end":{"line":44,"column":26,"offset":949},"indent":[]}},{"type":"text","value":". Give the function a name and set the ","position":{"start":{"line":44,"column":26,"offset":949},"end":{"line":44,"column":65,"offset":988},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Trigger type","position":{"start":{"line":44,"column":67,"offset":990},"end":{"line":44,"column":79,"offset":1002},"indent":[]}}],"position":{"start":{"line":44,"column":65,"offset":988},"end":{"line":44,"column":81,"offset":1004},"indent":[]}},{"type":"text","value":" to ","position":{"start":{"line":44,"column":81,"offset":1004},"end":{"line":44,"column":85,"offset":1008},"indent":[]}},{"type":"inlineCode","value":"HTTP","position":{"start":{"line":44,"column":85,"offset":1008},"end":{"line":44,"column":91,"offset":1014},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":44,"column":91,"offset":1014},"end":{"line":44,"column":92,"offset":1015},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":924},"end":{"line":44,"column":92,"offset":1015},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For quick setup and access to the GraphQL endpoint/landing page, choose to ","position":{"start":{"line":46,"column":1,"offset":1017},"end":{"line":46,"column":76,"offset":1092},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Allow unauthenticated invocations","position":{"start":{"line":46,"column":78,"offset":1094},"end":{"line":46,"column":111,"offset":1127},"indent":[]}}],"position":{"start":{"line":46,"column":76,"offset":1092},"end":{"line":46,"column":113,"offset":1129},"indent":[]}},{"type":"text","value":". To require authentication for this endpoint, you can manage authorized users via ","position":{"start":{"line":46,"column":113,"offset":1129},"end":{"line":46,"column":196,"offset":1212},"indent":[]}},{"type":"link","title":null,"url":"https://console.cloud.google.com/iam-admin/iam","children":[{"type":"text","value":"Cloud IAM","position":{"start":{"line":46,"column":197,"offset":1213},"end":{"line":46,"column":206,"offset":1222},"indent":[]}}],"position":{"start":{"line":46,"column":196,"offset":1212},"end":{"line":46,"column":255,"offset":1271},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":46,"column":255,"offset":1271},"end":{"line":46,"column":256,"offset":1272},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":1017},"end":{"line":46,"column":256,"offset":1272},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Save your configuration changes in the Trigger section. Copy the trigger's URL for later.","position":{"start":{"line":48,"column":1,"offset":1274},"end":{"line":48,"column":90,"offset":1363},"indent":[]}}],"position":{"start":{"line":48,"column":1,"offset":1274},"end":{"line":48,"column":90,"offset":1363},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Expand the \"Runtime, Build, and Connections Settings\" panel and add a runtime environment variable named ","position":{"start":{"line":50,"column":1,"offset":1365},"end":{"line":50,"column":106,"offset":1470},"indent":[]}},{"type":"inlineCode","value":"NODE_ENV","position":{"start":{"line":50,"column":106,"offset":1470},"end":{"line":50,"column":116,"offset":1480},"indent":[]}},{"type":"text","value":" with value ","position":{"start":{"line":50,"column":116,"offset":1480},"end":{"line":50,"column":128,"offset":1492},"indent":[]}},{"type":"inlineCode","value":"development","position":{"start":{"line":50,"column":128,"offset":1492},"end":{"line":50,"column":141,"offset":1505},"indent":[]}},{"type":"text","value":". (This overrides Cloud Function's default of ","position":{"start":{"line":50,"column":141,"offset":1505},"end":{"line":50,"column":187,"offset":1551},"indent":[]}},{"type":"inlineCode","value":"production","position":{"start":{"line":50,"column":187,"offset":1551},"end":{"line":50,"column":199,"offset":1563},"indent":[]}},{"type":"text","value":" and will allow you to easily test your graph with Apollo Sandbox. You can delete this environment variable once you're ready for your app to be considered a production app.)","position":{"start":{"line":50,"column":199,"offset":1563},"end":{"line":50,"column":373,"offset":1737},"indent":[]}}],"position":{"start":{"line":50,"column":1,"offset":1365},"end":{"line":50,"column":373,"offset":1737},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Now click ","position":{"start":{"line":52,"column":1,"offset":1739},"end":{"line":52,"column":11,"offset":1749},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Next","position":{"start":{"line":52,"column":13,"offset":1751},"end":{"line":52,"column":17,"offset":1755},"indent":[]}}],"position":{"start":{"line":52,"column":11,"offset":1749},"end":{"line":52,"column":19,"offset":1757},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":52,"column":19,"offset":1757},"end":{"line":52,"column":20,"offset":1758},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":1739},"end":{"line":52,"column":20,"offset":1758},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"2. Write the API handlers and deploy","position":{"start":{"line":54,"column":5,"offset":1764},"end":{"line":54,"column":41,"offset":1800},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":1760},"end":{"line":54,"column":41,"offset":1800},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Now on the Code page, set the runtime to a currently supported version of Node.js (such as ","position":{"start":{"line":56,"column":1,"offset":1802},"end":{"line":56,"column":92,"offset":1893},"indent":[]}},{"type":"inlineCode","value":"Node.js 14","position":{"start":{"line":56,"column":92,"offset":1893},"end":{"line":56,"column":104,"offset":1905},"indent":[]}},{"type":"text","value":"), and set the Entry point to ","position":{"start":{"line":56,"column":104,"offset":1905},"end":{"line":56,"column":134,"offset":1935},"indent":[]}},{"type":"inlineCode","value":"handler","position":{"start":{"line":56,"column":134,"offset":1935},"end":{"line":56,"column":143,"offset":1944},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":56,"column":143,"offset":1944},"end":{"line":56,"column":144,"offset":1945},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":1802},"end":{"line":56,"column":144,"offset":1945},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Paste the example code at the top of this page into the contents of ","position":{"start":{"line":58,"column":1,"offset":1947},"end":{"line":58,"column":69,"offset":2015},"indent":[]}},{"type":"inlineCode","value":"index.js","position":{"start":{"line":58,"column":69,"offset":2015},"end":{"line":58,"column":79,"offset":2025},"indent":[]}},{"type":"text","value":" in the code editor.","position":{"start":{"line":58,"column":79,"offset":2025},"end":{"line":58,"column":99,"offset":2045},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":1947},"end":{"line":58,"column":99,"offset":2045},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Edit ","position":{"start":{"line":60,"column":1,"offset":2047},"end":{"line":60,"column":6,"offset":2052},"indent":[]}},{"type":"inlineCode","value":"package.json","position":{"start":{"line":60,"column":6,"offset":2052},"end":{"line":60,"column":20,"offset":2066},"indent":[]}},{"type":"text","value":" so that it lists ","position":{"start":{"line":60,"column":20,"offset":2066},"end":{"line":60,"column":38,"offset":2084},"indent":[]}},{"type":"inlineCode","value":"apollo-server-cloud-functions","position":{"start":{"line":60,"column":38,"offset":2084},"end":{"line":60,"column":69,"offset":2115},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":60,"column":69,"offset":2115},"end":{"line":60,"column":74,"offset":2120},"indent":[]}},{"type":"inlineCode","value":"graphql","position":{"start":{"line":60,"column":74,"offset":2120},"end":{"line":60,"column":83,"offset":2129},"indent":[]}},{"type":"text","value":" in its dependencies:","position":{"start":{"line":60,"column":83,"offset":2129},"end":{"line":60,"column":104,"offset":2150},"indent":[]}}],"position":{"start":{"line":60,"column":1,"offset":2047},"end":{"line":60,"column":104,"offset":2150},"indent":[]}},{"type":"code","lang":"json:title=package.json","meta":null,"value":"  \"dependencies\": {\n    \"apollo-server-cloud-functions\": \"3.x\",\n    \"graphql\": \"^15.5.0\"\n  }","position":{"start":{"line":62,"column":1,"offset":2152},"end":{"line":67,"column":4,"offset":2275},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":69,"column":1,"offset":2277},"end":{"line":69,"column":7,"offset":2283},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Deploy","position":{"start":{"line":69,"column":9,"offset":2285},"end":{"line":69,"column":15,"offset":2291},"indent":[]}}],"position":{"start":{"line":69,"column":7,"offset":2283},"end":{"line":69,"column":17,"offset":2293},"indent":[]}},{"type":"text","value":" to initiate deployment. Then, proceed to ","position":{"start":{"line":69,"column":17,"offset":2293},"end":{"line":69,"column":59,"offset":2335},"indent":[]}},{"type":"link","title":null,"url":"#testing-the-function","children":[{"type":"text","value":"Testing the function","position":{"start":{"line":69,"column":60,"offset":2336},"end":{"line":69,"column":80,"offset":2356},"indent":[]}}],"position":{"start":{"line":69,"column":59,"offset":2335},"end":{"line":69,"column":104,"offset":2380},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":69,"column":104,"offset":2380},"end":{"line":69,"column":105,"offset":2381},"indent":[]}}],"position":{"start":{"line":69,"column":1,"offset":2277},"end":{"line":69,"column":105,"offset":2381},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Deploying from your local machine","position":{"start":{"line":72,"column":4,"offset":2387},"end":{"line":72,"column":37,"offset":2420},"indent":[]}}],"position":{"start":{"line":72,"column":1,"offset":2384},"end":{"line":72,"column":37,"offset":2420},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Before proceeding, you need to set up the gcloud SDK:","position":{"start":{"line":74,"column":1,"offset":2422},"end":{"line":74,"column":54,"offset":2475},"indent":[]}}],"position":{"start":{"line":74,"column":1,"offset":2422},"end":{"line":74,"column":54,"offset":2475},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://cloud.google.com/sdk/docs/install","children":[{"type":"text","value":"Install the gcloud SDK","position":{"start":{"line":76,"column":5,"offset":2481},"end":{"line":76,"column":27,"offset":2503},"indent":[]}}],"position":{"start":{"line":76,"column":4,"offset":2480},"end":{"line":76,"column":71,"offset":2547},"indent":[]}}],"position":{"start":{"line":76,"column":4,"offset":2480},"end":{"line":76,"column":71,"offset":2547},"indent":[]}}],"position":{"start":{"line":76,"column":1,"offset":2477},"end":{"line":77,"column":1,"offset":2548},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://cloud.google.com/sdk/docs/initializing","children":[{"type":"text","value":"Initialize the gcloud SDK and authenticate your Google account","position":{"start":{"line":78,"column":5,"offset":2553},"end":{"line":78,"column":67,"offset":2615},"indent":[]}}],"position":{"start":{"line":78,"column":4,"offset":2552},"end":{"line":78,"column":116,"offset":2664},"indent":[]}}],"position":{"start":{"line":78,"column":4,"offset":2552},"end":{"line":78,"column":116,"offset":2664},"indent":[]}}],"position":{"start":{"line":78,"column":1,"offset":2549},"end":{"line":78,"column":116,"offset":2664},"indent":[]}}],"position":{"start":{"line":76,"column":1,"offset":2477},"end":{"line":78,"column":116,"offset":2664},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Next, initialize a new Node.js project by running ","position":{"start":{"line":80,"column":1,"offset":2666},"end":{"line":80,"column":51,"offset":2716},"indent":[]}},{"type":"inlineCode","value":"npm init","position":{"start":{"line":80,"column":51,"offset":2716},"end":{"line":80,"column":61,"offset":2726},"indent":[]}},{"type":"text","value":" in an empty directory.","position":{"start":{"line":80,"column":61,"offset":2726},"end":{"line":80,"column":84,"offset":2749},"indent":[]}}],"position":{"start":{"line":80,"column":1,"offset":2666},"end":{"line":80,"column":84,"offset":2749},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Run ","position":{"start":{"line":82,"column":1,"offset":2751},"end":{"line":82,"column":5,"offset":2755},"indent":[]}},{"type":"inlineCode","value":"npm install apollo-server-cloud-functions graphql","position":{"start":{"line":82,"column":5,"offset":2755},"end":{"line":82,"column":56,"offset":2806},"indent":[]}},{"type":"text","value":" to install the necessary dependencies and to include them in the ","position":{"start":{"line":82,"column":56,"offset":2806},"end":{"line":82,"column":122,"offset":2872},"indent":[]}},{"type":"inlineCode","value":"package.json","position":{"start":{"line":82,"column":122,"offset":2872},"end":{"line":82,"column":136,"offset":2886},"indent":[]}},{"type":"text","value":" file.","position":{"start":{"line":82,"column":136,"offset":2886},"end":{"line":82,"column":142,"offset":2892},"indent":[]}}],"position":{"start":{"line":82,"column":1,"offset":2751},"end":{"line":82,"column":142,"offset":2892},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"At this point, your ","position":{"start":{"line":84,"column":1,"offset":2894},"end":{"line":84,"column":21,"offset":2914},"indent":[]}},{"type":"inlineCode","value":"package.json","position":{"start":{"line":84,"column":21,"offset":2914},"end":{"line":84,"column":35,"offset":2928},"indent":[]}},{"type":"text","value":" should resemble the following:","position":{"start":{"line":84,"column":35,"offset":2928},"end":{"line":84,"column":66,"offset":2959},"indent":[]}}],"position":{"start":{"line":84,"column":1,"offset":2894},"end":{"line":84,"column":66,"offset":2959},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"name\": \"apollo-gcloud\",\n  \"version\": \"1.0.0\",\n  \"description\": \"\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    \"test\": \"echo \\\"Error: no test specified\\\" && exit 1\"\n  },\n  \"author\": \"\",\n  \"license\": \"ISC\",\n  \"dependencies\": {\n    \"apollo-server-cloud-functions\": \"3.x\",\n    \"graphql\": \"^15.5.0\"\n  }\n}","position":{"start":{"line":86,"column":1,"offset":2961},"end":{"line":102,"column":4,"offset":3275},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Create a new file named ","position":{"start":{"line":104,"column":1,"offset":3277},"end":{"line":104,"column":25,"offset":3301},"indent":[]}},{"type":"inlineCode","value":"index.js","position":{"start":{"line":104,"column":25,"offset":3301},"end":{"line":104,"column":35,"offset":3311},"indent":[]}},{"type":"text","value":" and paste the sample code at the top of this page into it.","position":{"start":{"line":104,"column":35,"offset":3311},"end":{"line":104,"column":94,"offset":3370},"indent":[]}}],"position":{"start":{"line":104,"column":1,"offset":3277},"end":{"line":104,"column":94,"offset":3370},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Run the following command to create and deploy the function to Cloud Functions:","position":{"start":{"line":106,"column":1,"offset":3372},"end":{"line":106,"column":80,"offset":3451},"indent":[]}}],"position":{"start":{"line":106,"column":1,"offset":3372},"end":{"line":106,"column":80,"offset":3451},"indent":[]}},{"type":"code","lang":"bash","meta":null,"value":"gcloud functions deploy apollo-graphql-example --entry-point handler --runtime nodejs14 --trigger-http","position":{"start":{"line":108,"column":1,"offset":3453},"end":{"line":110,"column":4,"offset":3567},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This creates a function named ","position":{"start":{"line":112,"column":1,"offset":3569},"end":{"line":112,"column":31,"offset":3599},"indent":[]}},{"type":"inlineCode","value":"apollo-graphql-example","position":{"start":{"line":112,"column":31,"offset":3599},"end":{"line":112,"column":55,"offset":3623},"indent":[]}},{"type":"text","value":" that you can view from your console's ","position":{"start":{"line":112,"column":55,"offset":3623},"end":{"line":112,"column":94,"offset":3662},"indent":[]}},{"type":"link","title":null,"url":"https://console.cloud.google.com/functions/list","children":[{"type":"text","value":"Cloud Functions page","position":{"start":{"line":112,"column":95,"offset":3663},"end":{"line":112,"column":115,"offset":3683},"indent":[]}}],"position":{"start":{"line":112,"column":94,"offset":3662},"end":{"line":112,"column":165,"offset":3733},"indent":[]}}],"position":{"start":{"line":112,"column":1,"offset":3569},"end":{"line":112,"column":165,"offset":3733},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The command asks some configuration questions and prints metadata about your newly created function, which includes the function's trigger URL.","position":{"start":{"line":114,"column":1,"offset":3735},"end":{"line":114,"column":144,"offset":3878},"indent":[]}}],"position":{"start":{"line":114,"column":1,"offset":3735},"end":{"line":114,"column":144,"offset":3878},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For more information, see the official ","position":{"start":{"line":116,"column":1,"offset":3880},"end":{"line":116,"column":40,"offset":3919},"indent":[]}},{"type":"link","title":null,"url":"https://cloud.google.com/functions/docs/deploying/filesystem","children":[{"type":"text","value":"Cloud Functions docs","position":{"start":{"line":116,"column":41,"offset":3920},"end":{"line":116,"column":61,"offset":3940},"indent":[]}}],"position":{"start":{"line":116,"column":40,"offset":3919},"end":{"line":116,"column":124,"offset":4003},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":116,"column":124,"offset":4003},"end":{"line":116,"column":125,"offset":4004},"indent":[]}}],"position":{"start":{"line":116,"column":1,"offset":3880},"end":{"line":116,"column":125,"offset":4004},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Testing the function","position":{"start":{"line":118,"column":4,"offset":4009},"end":{"line":118,"column":24,"offset":4029},"indent":[]}}],"position":{"start":{"line":118,"column":1,"offset":4006},"end":{"line":118,"column":24,"offset":4029},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"After deployment completes, navigate to your function's trigger URL, with ","position":{"start":{"line":120,"column":1,"offset":4031},"end":{"line":120,"column":75,"offset":4105},"indent":[]}},{"type":"inlineCode","value":"/graphql","position":{"start":{"line":120,"column":75,"offset":4105},"end":{"line":120,"column":85,"offset":4115},"indent":[]}},{"type":"text","value":" added to the end. If deployment succeeded, you should see your server's landing page.","position":{"start":{"line":120,"column":85,"offset":4115},"end":{"line":120,"column":171,"offset":4201},"indent":[]}}],"position":{"start":{"line":120,"column":1,"offset":4031},"end":{"line":120,"column":171,"offset":4201},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"If you can't access your trigger URL, you might need to ","position":{"start":{"line":122,"column":3,"offset":4205},"end":{"line":122,"column":59,"offset":4261},"indent":[]}},{"type":"link","title":null,"url":"https://cloud.google.com/iam/docs/overview#all-authenticated-users","children":[{"type":"text","value":"give ","position":{"start":{"line":122,"column":60,"offset":4262},"end":{"line":122,"column":65,"offset":4267},"indent":[]}},{"type":"inlineCode","value":"allAuthenticatedUsers","position":{"start":{"line":122,"column":65,"offset":4267},"end":{"line":122,"column":88,"offset":4290},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":122,"column":88,"offset":4290},"end":{"line":122,"column":92,"offset":4294},"indent":[]}},{"type":"inlineCode","value":"allUsers","position":{"start":{"line":122,"column":92,"offset":4294},"end":{"line":122,"column":102,"offset":4304},"indent":[]}},{"type":"text","value":" the ","position":{"start":{"line":122,"column":102,"offset":4304},"end":{"line":122,"column":107,"offset":4309},"indent":[]}},{"type":"inlineCode","value":"Cloud Functions Invoker","position":{"start":{"line":122,"column":107,"offset":4309},"end":{"line":122,"column":132,"offset":4334},"indent":[]}},{"type":"text","value":" role","position":{"start":{"line":122,"column":132,"offset":4334},"end":{"line":122,"column":137,"offset":4339},"indent":[]}}],"position":{"start":{"line":122,"column":59,"offset":4261},"end":{"line":122,"column":206,"offset":4408},"indent":[]}},{"type":"text","value":" on the Permissions tab.","position":{"start":{"line":122,"column":206,"offset":4408},"end":{"line":122,"column":230,"offset":4432},"indent":[]}}],"position":{"start":{"line":122,"column":3,"offset":4205},"end":{"line":122,"column":230,"offset":4432},"indent":[]}}],"position":{"start":{"line":122,"column":1,"offset":4203},"end":{"line":122,"column":230,"offset":4432},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Click ","position":{"start":{"line":124,"column":1,"offset":4434},"end":{"line":124,"column":7,"offset":4440},"indent":[]}},{"type":"jsx","value":"<q>","position":{"start":{"line":124,"column":7,"offset":4440},"end":{"line":124,"column":10,"offset":4443},"indent":[]}},{"type":"text","value":"Query your Server","position":{"start":{"line":124,"column":10,"offset":4443},"end":{"line":124,"column":27,"offset":4460},"indent":[]}},{"type":"jsx","value":"</q>","position":{"start":{"line":124,"column":27,"offset":4460},"end":{"line":124,"column":31,"offset":4464},"indent":[]}},{"type":"text","value":" and use Apollo Sandbox to test the following query:","position":{"start":{"line":124,"column":31,"offset":4464},"end":{"line":124,"column":83,"offset":4516},"indent":[]}}],"position":{"start":{"line":124,"column":1,"offset":4434},"end":{"line":124,"column":83,"offset":4516},"indent":[]}},{"type":"code","lang":"graphql","meta":null,"value":"query TestQuery {\n  hello\n}","position":{"start":{"line":126,"column":1,"offset":4518},"end":{"line":130,"column":4,"offset":4560},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"And verify that the following response appears:","position":{"start":{"line":132,"column":1,"offset":4562},"end":{"line":132,"column":48,"offset":4609},"indent":[]}}],"position":{"start":{"line":132,"column":1,"offset":4562},"end":{"line":132,"column":48,"offset":4609},"indent":[]}},{"type":"code","lang":"json","meta":null,"value":"{\n  \"data\": {\n    \"hello\": \"Hello world!\"\n  }\n}","position":{"start":{"line":134,"column":1,"offset":4611},"end":{"line":140,"column":4,"offset":4670},"indent":[1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Getting request details","position":{"start":{"line":142,"column":4,"offset":4675},"end":{"line":142,"column":27,"offset":4698},"indent":[]}}],"position":{"start":{"line":142,"column":1,"offset":4672},"end":{"line":142,"column":27,"offset":4698},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To obtain information about a currently executing Google Cloud Function (HTTP headers, HTTP method, body, path, etc.) use the ","position":{"start":{"line":144,"column":1,"offset":4700},"end":{"line":144,"column":127,"offset":4826},"indent":[]}},{"type":"inlineCode","value":"context","position":{"start":{"line":144,"column":127,"offset":4826},"end":{"line":144,"column":136,"offset":4835},"indent":[]}},{"type":"text","value":" option. This enables you to pass any request-specific data to your server's resolvers.","position":{"start":{"line":144,"column":136,"offset":4835},"end":{"line":144,"column":223,"offset":4922},"indent":[]}}],"position":{"start":{"line":144,"column":1,"offset":4700},"end":{"line":144,"column":223,"offset":4922},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"const { ApolloServer, gql } = require('apollo-server-cloud-functions');\n\n// Construct a schema, using GraphQL schema language\nconst typeDefs = gql`\n  type Query {\n    hello: String\n  }\n`;\n\n// Provide resolver functions for your schema fields\nconst resolvers = {\n  Query: {\n    hello: () => 'Hello world!',\n  },\n};\n\nconst server = new ApolloServer({\n  typeDefs,\n  resolvers,\n  context: ({ req, res }) => ({\n    headers: req.headers,\n    req,\n    res,\n  }),\n});\n\nexports.handler = server.createHandler();","position":{"start":{"line":146,"column":1,"offset":4924},"end":{"line":174,"column":4,"offset":5444},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Enabling production mode","position":{"start":{"line":176,"column":4,"offset":5449},"end":{"line":176,"column":28,"offset":5473},"indent":[]}}],"position":{"start":{"line":176,"column":1,"offset":5446},"end":{"line":176,"column":28,"offset":5473},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When you consider your app to be production-ready, you should remember to edit it to remove the ","position":{"start":{"line":178,"column":1,"offset":5475},"end":{"line":178,"column":97,"offset":5571},"indent":[]}},{"type":"inlineCode","value":"NODE_ENV","position":{"start":{"line":178,"column":97,"offset":5571},"end":{"line":178,"column":107,"offset":5581},"indent":[]}},{"type":"text","value":" environment variable you set at the beginning. Among other things, this will change its landing page to be more discreet, and will mask error details from the end user.","position":{"start":{"line":178,"column":107,"offset":5581},"end":{"line":178,"column":276,"offset":5750},"indent":[]}}],"position":{"start":{"line":178,"column":1,"offset":5475},"end":{"line":178,"column":276,"offset":5750},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Deploying with Google Cloud Functions\",\"sidebar_title\":\"Google Cloud Functions\"}","position":{"start":{"line":181,"column":1,"offset":5753},"end":{"line":181,"column":119,"offset":5871},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":181,"column":119,"offset":5871}}},"scopeImports":["import {\n  ExpansionPanel,\n} from 'gatsby-theme-apollo-docs/src/components/expansion-panel';","import * as React from 'react'"],"scopeIdentifiers":["ExpansionPanel","React"],"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Deploying with Google Cloud Functions\",\n  \"sidebar_title\": \"Google Cloud Functions\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"This tutorial helps you deploy Apollo Server to Google Cloud Functions. It uses the following example function handler:\"), mdx(ExpansionPanel, {\n    title: \"Click to expand\",\n    mdxType: \"ExpansionPanel\"\n  }, mdx(\"div\", {\n    \"className\": \"gatsby-code-title\"\n  }, \"index.js\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" ApolloServer\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" gql \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"require\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'apollo-server-cloud-functions'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// Construct a schema, using GraphQL schema language\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" typeDefs \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" gql\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token template-string\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token template-punctuation string\"\n  }, \"`\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token string\"\n  }, \"\\n  type Query {\\n    hello: String\\n  }\\n\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token template-punctuation string\"\n  }, \"`\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// Provide resolver functions for your schema fields\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" resolvers \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"Query\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function-variable function\"\n  }, \"hello\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=>\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'Hello world!'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" server \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  typeDefs\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  resolvers\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\nexports\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"handler \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"createHandler\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }))))), mdx(\"h2\", {\n    \"id\": \"deploying-from-the-google-cloud-console\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#deploying-from-the-google-cloud-console\",\n    \"aria-label\": \"deploying from the google cloud console permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Deploying from the Google Cloud Console\"), mdx(\"h3\", {\n    \"id\": \"1-configure-the-function\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#1-configure-the-function\",\n    \"aria-label\": \"1 configure the function permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"1. Configure the function\"), mdx(\"p\", null, \"From your Google Cloud Console, go to the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://console.cloud.google.com/functions/list\"\n  }, \"Cloud Functions page\"), \".\"), mdx(\"p\", null, \"Click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Create Function\"), \". Give the function a name and set the \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Trigger type\"), \" to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"HTTP\"), \".\"), mdx(\"p\", null, \"For quick setup and access to the GraphQL endpoint/landing page, choose to \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Allow unauthenticated invocations\"), \". To require authentication for this endpoint, you can manage authorized users via \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://console.cloud.google.com/iam-admin/iam\"\n  }, \"Cloud IAM\"), \".\"), mdx(\"p\", null, \"Save your configuration changes in the Trigger section. Copy the trigger's URL for later.\"), mdx(\"p\", null, \"Expand the \\\"Runtime, Build, and Connections Settings\\\" panel and add a runtime environment variable named \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"NODE_ENV\"), \" with value \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"development\"), \". (This overrides Cloud Function's default of \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"production\"), \" and will allow you to easily test your graph with Apollo Sandbox. You can delete this environment variable once you're ready for your app to be considered a production app.)\"), mdx(\"p\", null, \"Now click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Next\"), \".\"), mdx(\"h3\", {\n    \"id\": \"2-write-the-api-handlers-and-deploy\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#2-write-the-api-handlers-and-deploy\",\n    \"aria-label\": \"2 write the api handlers and deploy permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"2. Write the API handlers and deploy\"), mdx(\"p\", null, \"Now on the Code page, set the runtime to a currently supported version of Node.js (such as \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Node.js 14\"), \"), and set the Entry point to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"handler\"), \".\"), mdx(\"p\", null, \"Paste the example code at the top of this page into the contents of \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"index.js\"), \" in the code editor.\"), mdx(\"p\", null, \"Edit \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"package.json\"), \" so that it lists \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-cloud-functions\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql\"), \" in its dependencies:\"), mdx(\"div\", {\n    \"className\": \"gatsby-code-title\"\n  }, \"package.json\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"json\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-json line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, \"  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token property\"\n  }, \"\\\"dependencies\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token property\"\n  }, \"\\\"apollo-server-cloud-functions\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"3.x\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token property\"\n  }, \"\\\"graphql\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"^15.5.0\\\"\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"Click \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Deploy\"), \" to initiate deployment. Then, proceed to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"#testing-the-function\"\n  }, \"Testing the function\"), \".\"), mdx(\"h2\", {\n    \"id\": \"deploying-from-your-local-machine\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#deploying-from-your-local-machine\",\n    \"aria-label\": \"deploying from your local machine permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Deploying from your local machine\"), mdx(\"p\", null, \"Before proceeding, you need to set up the gcloud SDK:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://cloud.google.com/sdk/docs/install\"\n  }, \"Install the gcloud SDK\"))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://cloud.google.com/sdk/docs/initializing\"\n  }, \"Initialize the gcloud SDK and authenticate your Google account\")))), mdx(\"p\", null, \"Next, initialize a new Node.js project by running \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"npm init\"), \" in an empty directory.\"), mdx(\"p\", null, \"Run \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"npm install apollo-server-cloud-functions graphql\"), \" to install the necessary dependencies and to include them in the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"package.json\"), \" file.\"), mdx(\"p\", null, \"At this point, your \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"package.json\"), \" should resemble the following:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"json\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-json line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token property\"\n  }, \"\\\"name\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"apollo-gcloud\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token property\"\n  }, \"\\\"version\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"1.0.0\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token property\"\n  }, \"\\\"description\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token property\"\n  }, \"\\\"main\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"index.js\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token property\"\n  }, \"\\\"scripts\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token property\"\n  }, \"\\\"test\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"echo \\\\\\\"Error: no test specified\\\\\\\" && exit 1\\\"\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token property\"\n  }, \"\\\"author\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token property\"\n  }, \"\\\"license\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"ISC\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token property\"\n  }, \"\\\"dependencies\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token property\"\n  }, \"\\\"apollo-server-cloud-functions\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"3.x\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token property\"\n  }, \"\\\"graphql\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"^15.5.0\\\"\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"Create a new file named \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"index.js\"), \" and paste the sample code at the top of this page into it.\"), mdx(\"p\", null, \"Run the following command to create and deploy the function to Cloud Functions:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"bash\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-bash line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"gcloud functions deploy apollo-graphql-example --entry-point handler --runtime nodejs14 --trigger-http\"), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"This creates a function named \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-graphql-example\"), \" that you can view from your console's \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://console.cloud.google.com/functions/list\"\n  }, \"Cloud Functions page\")), mdx(\"p\", null, \"The command asks some configuration questions and prints metadata about your newly created function, which includes the function's trigger URL.\"), mdx(\"p\", null, \"For more information, see the official \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://cloud.google.com/functions/docs/deploying/filesystem\"\n  }, \"Cloud Functions docs\"), \".\"), mdx(\"h2\", {\n    \"id\": \"testing-the-function\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#testing-the-function\",\n    \"aria-label\": \"testing the function permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Testing the function\"), mdx(\"p\", null, \"After deployment completes, navigate to your function's trigger URL, with \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"/graphql\"), \" added to the end. If deployment succeeded, you should see your server's landing page.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"If you can't access your trigger URL, you might need to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://cloud.google.com/iam/docs/overview#all-authenticated-users\"\n  }, \"give \", mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"allAuthenticatedUsers\"), \" or \", mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"allUsers\"), \" the \", mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"Cloud Functions Invoker\"), \" role\"), \" on the Permissions tab.\")), mdx(\"p\", null, \"Click \", mdx(\"q\", null, \"Query your Server\"), \" and use Apollo Sandbox to test the following query:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"graphql\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-graphql line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-graphql\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"query\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token definition-query function\"\n  }, \"TestQuery\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token property\"\n  }, \"hello\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"And verify that the following response appears:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"json\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-json line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-json\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token property\"\n  }, \"\\\"data\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token property\"\n  }, \"\\\"hello\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"Hello world!\\\"\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"h2\", {\n    \"id\": \"getting-request-details\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#getting-request-details\",\n    \"aria-label\": \"getting request details permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Getting request details\"), mdx(\"p\", null, \"To obtain information about a currently executing Google Cloud Function (HTTP headers, HTTP method, body, path, etc.) use the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"context\"), \" option. This enables you to pass any request-specific data to your server's resolvers.\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" ApolloServer\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" gql \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"require\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'apollo-server-cloud-functions'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// Construct a schema, using GraphQL schema language\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" typeDefs \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" gql\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token template-string\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token template-punctuation string\"\n  }, \"`\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token string\"\n  }, \"\\n  type Query {\\n    hello: String\\n  }\\n\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token template-punctuation string\"\n  }, \"`\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// Provide resolver functions for your schema fields\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" resolvers \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"Query\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function-variable function\"\n  }, \"hello\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=>\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'Hello world!'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" server \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  typeDefs\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  resolvers\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function-variable function\"\n  }, \"context\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token parameter\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" req\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" res \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"}\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=>\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"headers\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" req\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"headers\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    req\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    res\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\nexports\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"handler \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"createHandler\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"h2\", {\n    \"id\": \"enabling-production-mode\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#enabling-production-mode\",\n    \"aria-label\": \"enabling production mode permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Enabling production mode\"), mdx(\"p\", null, \"When you consider your app to be production-ready, you should remember to edit it to remove the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"NODE_ENV\"), \" environment variable you set at the beginning. Among other things, this will change its landing page to be more discreet, and will mask error details from the end user.\"));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport {\n  ExpansionPanel,\n} from 'gatsby-theme-apollo-docs/src/components/expansion-panel';\nexport const _frontmatter = {\n  \"title\": \"Deploying with Google Cloud Functions\",\n  \"sidebar_title\": \"Google Cloud Functions\"\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <p>{`This tutorial helps you deploy Apollo Server to Google Cloud Functions. It uses the following example function handler:`}</p>\n    <ExpansionPanel title=\"Click to expand\" mdxType=\"ExpansionPanel\">\n      <div {...{\n        \"className\": \"gatsby-code-title\"\n      }}>{`index.js`}</div>\n      <div {...{\n        \"className\": \"gatsby-highlight\",\n        \"data-language\": \"javascript\"\n      }}><pre parentName=\"div\" {...{\n          \"style\": {\n            \"counterReset\": \"linenumber NaN\"\n          },\n          \"className\": \"language-javascript line-numbers\"\n        }}><code parentName=\"pre\" {...{\n            \"className\": \"language-javascript\"\n          }}><span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`const`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{` ApolloServer`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{` gql `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`require`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token string\"\n            }}>{`'apollo-server-cloud-functions'`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n\n`}<span parentName=\"code\" {...{\n              \"className\": \"token comment\"\n            }}>{`// Construct a schema, using GraphQL schema language`}</span>{`\n`}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`const`}</span>{` typeDefs `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=`}</span>{` gql`}<span parentName=\"code\" {...{\n              \"className\": \"token template-string\"\n            }}><span parentName=\"span\" {...{\n                \"className\": \"token template-punctuation string\"\n              }}>{`\\``}</span><span parentName=\"span\" {...{\n                \"className\": \"token string\"\n              }}>{`\n  type Query {\n    hello: String\n  }\n`}</span><span parentName=\"span\" {...{\n                \"className\": \"token template-punctuation string\"\n              }}>{`\\``}</span></span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n\n`}<span parentName=\"code\" {...{\n              \"className\": \"token comment\"\n            }}>{`// Provide resolver functions for your schema fields`}</span>{`\n`}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`const`}</span>{` resolvers `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n              \"className\": \"token literal-property property\"\n            }}>{`Query`}</span><span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{`\n    `}<span parentName=\"code\" {...{\n              \"className\": \"token function-variable function\"\n            }}>{`hello`}</span><span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=>`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token string\"\n            }}>{`'Hello world!'`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n\n`}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`const`}</span>{` server `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token class-name\"\n            }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{`\n  typeDefs`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{`\n  resolvers`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n\nexports`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`.`}</span>{`handler `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=`}</span>{` server`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`.`}</span><span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`createHandler`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span></code><span parentName=\"pre\" {...{\n            \"aria-hidden\": \"true\",\n            \"className\": \"line-numbers-rows\",\n            \"style\": {\n              \"whiteSpace\": \"normal\",\n              \"width\": \"auto\",\n              \"left\": \"0\"\n            }\n          }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    </ExpansionPanel>\n    <h2 {...{\n      \"id\": \"deploying-from-the-google-cloud-console\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#deploying-from-the-google-cloud-console\",\n        \"aria-label\": \"deploying from the google cloud console permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Deploying from the Google Cloud Console`}</h2>\n    <h3 {...{\n      \"id\": \"1-configure-the-function\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#1-configure-the-function\",\n        \"aria-label\": \"1 configure the function permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`1. Configure the function`}</h3>\n    <p>{`From your Google Cloud Console, go to the `}<a parentName=\"p\" {...{\n        \"href\": \"https://console.cloud.google.com/functions/list\"\n      }}>{`Cloud Functions page`}</a>{`.`}</p>\n    <p>{`Click `}<strong parentName=\"p\">{`Create Function`}</strong>{`. Give the function a name and set the `}<strong parentName=\"p\">{`Trigger type`}</strong>{` to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`HTTP`}</code>{`.`}</p>\n    <p>{`For quick setup and access to the GraphQL endpoint/landing page, choose to `}<strong parentName=\"p\">{`Allow unauthenticated invocations`}</strong>{`. To require authentication for this endpoint, you can manage authorized users via `}<a parentName=\"p\" {...{\n        \"href\": \"https://console.cloud.google.com/iam-admin/iam\"\n      }}>{`Cloud IAM`}</a>{`.`}</p>\n    <p>{`Save your configuration changes in the Trigger section. Copy the trigger's URL for later.`}</p>\n    <p>{`Expand the \"Runtime, Build, and Connections Settings\" panel and add a runtime environment variable named `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`NODE_ENV`}</code>{` with value `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`development`}</code>{`. (This overrides Cloud Function's default of `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`production`}</code>{` and will allow you to easily test your graph with Apollo Sandbox. You can delete this environment variable once you're ready for your app to be considered a production app.)`}</p>\n    <p>{`Now click `}<strong parentName=\"p\">{`Next`}</strong>{`.`}</p>\n    <h3 {...{\n      \"id\": \"2-write-the-api-handlers-and-deploy\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#2-write-the-api-handlers-and-deploy\",\n        \"aria-label\": \"2 write the api handlers and deploy permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`2. Write the API handlers and deploy`}</h3>\n    <p>{`Now on the Code page, set the runtime to a currently supported version of Node.js (such as `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`Node.js 14`}</code>{`), and set the Entry point to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`handler`}</code>{`.`}</p>\n    <p>{`Paste the example code at the top of this page into the contents of `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`index.js`}</code>{` in the code editor.`}</p>\n    <p>{`Edit `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`package.json`}</code>{` so that it lists `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-cloud-functions`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql`}</code>{` in its dependencies:`}</p>\n    <div {...{\n      \"className\": \"gatsby-code-title\"\n    }}>{`package.json`}</div>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"json\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-json line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-json\"\n        }}>{`  `}<span parentName=\"code\" {...{\n            \"className\": \"token property\"\n          }}>{`\"dependencies\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token property\"\n          }}>{`\"apollo-server-cloud-functions\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"3.x\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token property\"\n          }}>{`\"graphql\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"^15.5.0\"`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`Click `}<strong parentName=\"p\">{`Deploy`}</strong>{` to initiate deployment. Then, proceed to `}<a parentName=\"p\" {...{\n        \"href\": \"#testing-the-function\"\n      }}>{`Testing the function`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"deploying-from-your-local-machine\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#deploying-from-your-local-machine\",\n        \"aria-label\": \"deploying from your local machine permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Deploying from your local machine`}</h2>\n    <p>{`Before proceeding, you need to set up the gcloud SDK:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"https://cloud.google.com/sdk/docs/install\"\n          }}>{`Install the gcloud SDK`}</a></p>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\"><a parentName=\"p\" {...{\n            \"href\": \"https://cloud.google.com/sdk/docs/initializing\"\n          }}>{`Initialize the gcloud SDK and authenticate your Google account`}</a></p>\n      </li>\n    </ol>\n    <p>{`Next, initialize a new Node.js project by running `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`npm init`}</code>{` in an empty directory.`}</p>\n    <p>{`Run `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`npm install apollo-server-cloud-functions graphql`}</code>{` to install the necessary dependencies and to include them in the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`package.json`}</code>{` file.`}</p>\n    <p>{`At this point, your `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`package.json`}</code>{` should resemble the following:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"json\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-json line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-json\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token property\"\n          }}>{`\"name\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"apollo-gcloud\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token property\"\n          }}>{`\"version\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"1.0.0\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token property\"\n          }}>{`\"description\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token property\"\n          }}>{`\"main\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"index.js\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token property\"\n          }}>{`\"scripts\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token property\"\n          }}>{`\"test\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"echo \\\\\"Error: no test specified\\\\\" && exit 1\"`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token property\"\n          }}>{`\"author\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token property\"\n          }}>{`\"license\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"ISC\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token property\"\n          }}>{`\"dependencies\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token property\"\n          }}>{`\"apollo-server-cloud-functions\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"3.x\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token property\"\n          }}>{`\"graphql\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"^15.5.0\"`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`Create a new file named `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`index.js`}</code>{` and paste the sample code at the top of this page into it.`}</p>\n    <p>{`Run the following command to create and deploy the function to Cloud Functions:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"bash\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-bash line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-bash\"\n        }}>{`gcloud functions deploy apollo-graphql-example --entry-point handler --runtime nodejs14 --trigger-http`}</code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span></span></pre></div>\n    <p>{`This creates a function named `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-graphql-example`}</code>{` that you can view from your console's `}<a parentName=\"p\" {...{\n        \"href\": \"https://console.cloud.google.com/functions/list\"\n      }}>{`Cloud Functions page`}</a></p>\n    <p>{`The command asks some configuration questions and prints metadata about your newly created function, which includes the function's trigger URL.`}</p>\n    <p>{`For more information, see the official `}<a parentName=\"p\" {...{\n        \"href\": \"https://cloud.google.com/functions/docs/deploying/filesystem\"\n      }}>{`Cloud Functions docs`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"testing-the-function\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#testing-the-function\",\n        \"aria-label\": \"testing the function permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Testing the function`}</h2>\n    <p>{`After deployment completes, navigate to your function's trigger URL, with `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`/graphql`}</code>{` added to the end. If deployment succeeded, you should see your server's landing page.`}</p>\n    <blockquote>\n      <p parentName=\"blockquote\">{`If you can't access your trigger URL, you might need to `}<a parentName=\"p\" {...{\n          \"href\": \"https://cloud.google.com/iam/docs/overview#all-authenticated-users\"\n        }}>{`give `}<code parentName=\"a\" {...{\n            \"className\": \"language-text\"\n          }}>{`allAuthenticatedUsers`}</code>{` or `}<code parentName=\"a\" {...{\n            \"className\": \"language-text\"\n          }}>{`allUsers`}</code>{` the `}<code parentName=\"a\" {...{\n            \"className\": \"language-text\"\n          }}>{`Cloud Functions Invoker`}</code>{` role`}</a>{` on the Permissions tab.`}</p>\n    </blockquote>\n    <p>{`Click `}<q>{`Query your Server`}</q>{` and use Apollo Sandbox to test the following query:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"graphql\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-graphql line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-graphql\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`query`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token definition-query function\"\n          }}>{`TestQuery`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token property\"\n          }}>{`hello`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`And verify that the following response appears:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"json\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-json line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-json\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token property\"\n          }}>{`\"data\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token property\"\n          }}>{`\"hello\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"Hello world!\"`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <h2 {...{\n      \"id\": \"getting-request-details\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#getting-request-details\",\n        \"aria-label\": \"getting request details permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Getting request details`}</h2>\n    <p>{`To obtain information about a currently executing Google Cloud Function (HTTP headers, HTTP method, body, path, etc.) use the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`context`}</code>{` option. This enables you to pass any request-specific data to your server's resolvers.`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` ApolloServer`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` gql `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`require`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'apollo-server-cloud-functions'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n\n`}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// Construct a schema, using GraphQL schema language`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` typeDefs `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` gql`}<span parentName=\"code\" {...{\n            \"className\": \"token template-string\"\n          }}><span parentName=\"span\" {...{\n              \"className\": \"token template-punctuation string\"\n            }}>{`\\``}</span><span parentName=\"span\" {...{\n              \"className\": \"token string\"\n            }}>{`\n  type Query {\n    hello: String\n  }\n`}</span><span parentName=\"span\" {...{\n              \"className\": \"token template-punctuation string\"\n            }}>{`\\``}</span></span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n\n`}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// Provide resolver functions for your schema fields`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` resolvers `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`Query`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token function-variable function\"\n          }}>{`hello`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=>`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'Hello world!'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` server `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  typeDefs`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  resolvers`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token function-variable function\"\n          }}>{`context`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token parameter\"\n          }}><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{` req`}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{` res `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=>`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`headers`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` req`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`headers`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n    req`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n    res`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n\nexports`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`handler `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` server`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`createHandler`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <h2 {...{\n      \"id\": \"enabling-production-mode\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#enabling-production-mode\",\n        \"aria-label\": \"enabling production mode permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Enabling production mode`}</h2>\n    <p>{`When you consider your app to be production-ready, you should remember to edit it to remove the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`NODE_ENV`}</code>{` environment variable you set at the beginning. Among other things, this will change its landing page to be more discreet, and will mask error details from the end user.`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}