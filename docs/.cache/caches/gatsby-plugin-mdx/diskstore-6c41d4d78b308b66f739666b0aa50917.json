{"expireTime":9007200901521014000,"key":"gatsby-plugin-mdx-entire-payload-e738ba1199693bd7e4ff58ba5635cf02-","val":{"mdast":{"type":"root","children":[{"type":"import","value":"import { ExpansionPanel } from 'gatsby-theme-apollo-docs';","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":59,"offset":59},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Apollo Server 3 is generally available.","position":{"start":{"line":4,"column":1,"offset":61},"end":{"line":4,"column":40,"offset":100},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":61},"end":{"line":4,"column":40,"offset":100},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The focus of this major-version release is to provide a lighter, nimbler core library as a foundation for future features and improved extensibility.","position":{"start":{"line":6,"column":1,"offset":102},"end":{"line":6,"column":150,"offset":251},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":102},"end":{"line":6,"column":150,"offset":251},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Many Apollo Server 2 users don't need to make any code changes to upgrade to Apollo Server 3!","position":{"start":{"line":8,"column":3,"offset":255},"end":{"line":8,"column":96,"offset":348},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":253},"end":{"line":8,"column":98,"offset":350},"indent":[]}},{"type":"text","value":" This is especially likely if you use the \"batteries-included\" ","position":{"start":{"line":8,"column":98,"offset":350},"end":{"line":8,"column":161,"offset":413},"indent":[]}},{"type":"inlineCode","value":"apollo-server","position":{"start":{"line":8,"column":161,"offset":413},"end":{"line":8,"column":176,"offset":428},"indent":[]}},{"type":"text","value":" library (as opposed to a ","position":{"start":{"line":8,"column":176,"offset":428},"end":{"line":8,"column":202,"offset":454},"indent":[]}},{"type":"link","title":null,"url":"./integrations/middleware/","children":[{"type":"text","value":"middleware-specific library","position":{"start":{"line":8,"column":203,"offset":455},"end":{"line":8,"column":230,"offset":482},"indent":[]}}],"position":{"start":{"line":8,"column":202,"offset":454},"end":{"line":8,"column":259,"offset":511},"indent":[]}},{"type":"text","value":").","position":{"start":{"line":8,"column":259,"offset":511},"end":{"line":8,"column":261,"offset":513},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":253},"end":{"line":8,"column":261,"offset":513},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This document explains which features ","position":{"start":{"line":10,"column":1,"offset":515},"end":{"line":10,"column":39,"offset":553},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"do","position":{"start":{"line":10,"column":40,"offset":554},"end":{"line":10,"column":42,"offset":556},"indent":[]}}],"position":{"start":{"line":10,"column":39,"offset":553},"end":{"line":10,"column":43,"offset":557},"indent":[]}},{"type":"text","value":" require code changes and how to make them. If you encounter issues while migrating, please ","position":{"start":{"line":10,"column":43,"offset":557},"end":{"line":10,"column":135,"offset":649},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/apollographql/apollo-server/issues/new/choose","children":[{"type":"text","value":"create an issue","position":{"start":{"line":10,"column":136,"offset":650},"end":{"line":10,"column":151,"offset":665},"indent":[]}}],"position":{"start":{"line":10,"column":135,"offset":649},"end":{"line":10,"column":218,"offset":732},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":10,"column":218,"offset":732},"end":{"line":10,"column":219,"offset":733},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":515},"end":{"line":10,"column":219,"offset":733},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"For a list of all breaking changes, ","position":{"start":{"line":12,"column":3,"offset":737},"end":{"line":12,"column":39,"offset":773},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/apollographql/apollo-server/blob/main/CHANGELOG.md","children":[{"type":"text","value":"see the changelog","position":{"start":{"line":12,"column":40,"offset":774},"end":{"line":12,"column":57,"offset":791},"indent":[]}}],"position":{"start":{"line":12,"column":39,"offset":773},"end":{"line":12,"column":129,"offset":863},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":12,"column":129,"offset":863},"end":{"line":12,"column":130,"offset":864},"indent":[]}}],"position":{"start":{"line":12,"column":3,"offset":737},"end":{"line":12,"column":130,"offset":864},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":735},"end":{"line":12,"column":130,"offset":864},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Bumped dependencies","position":{"start":{"line":15,"column":4,"offset":870},"end":{"line":15,"column":23,"offset":889},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":867},"end":{"line":15,"column":23,"offset":889},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Node.js","position":{"start":{"line":17,"column":5,"offset":895},"end":{"line":17,"column":12,"offset":902},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":891},"end":{"line":17,"column":12,"offset":902},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Apollo Server 3 supports Node.js 12 and later.","position":{"start":{"line":19,"column":3,"offset":906},"end":{"line":19,"column":49,"offset":952},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":904},"end":{"line":19,"column":51,"offset":954},"indent":[]}},{"type":"text","value":" (Apollo Server 2 supports back to Node.js 6.) This includes ","position":{"start":{"line":19,"column":51,"offset":954},"end":{"line":19,"column":112,"offset":1015},"indent":[]}},{"type":"link","title":null,"url":"https://nodejs.org/about/releases/","children":[{"type":"text","value":"all LTS and Current versions at the time of release","position":{"start":{"line":19,"column":113,"offset":1016},"end":{"line":19,"column":164,"offset":1067},"indent":[]}}],"position":{"start":{"line":19,"column":112,"offset":1015},"end":{"line":19,"column":201,"offset":1104},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":19,"column":201,"offset":1104},"end":{"line":19,"column":202,"offset":1105},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":904},"end":{"line":19,"column":202,"offset":1105},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you're using an older version of Node.js, upgrade your runtime before upgrading to Apollo Server 3.","position":{"start":{"line":21,"column":1,"offset":1107},"end":{"line":21,"column":103,"offset":1209},"indent":[]}}],"position":{"start":{"line":21,"column":1,"offset":1107},"end":{"line":21,"column":103,"offset":1209},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"inlineCode","value":"graphql","position":{"start":{"line":23,"column":5,"offset":1215},"end":{"line":23,"column":14,"offset":1224},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1211},"end":{"line":23,"column":14,"offset":1224},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Apollo Server has a peer dependency on ","position":{"start":{"line":25,"column":1,"offset":1226},"end":{"line":25,"column":40,"offset":1265},"indent":[]}},{"type":"link","title":null,"url":"https://www.npmjs.com/package/graphql","children":[{"type":"inlineCode","value":"graphql","position":{"start":{"line":25,"column":41,"offset":1266},"end":{"line":25,"column":50,"offset":1275},"indent":[]}}],"position":{"start":{"line":25,"column":40,"offset":1265},"end":{"line":25,"column":90,"offset":1315},"indent":[]}},{"type":"text","value":" (the core JS GraphQL implementation), which means you are responsible for choosing the version installed in your app.","position":{"start":{"line":25,"column":90,"offset":1315},"end":{"line":25,"column":208,"offset":1433},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1226},"end":{"line":25,"column":208,"offset":1433},"indent":[]}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Apollo Server 3 supports ","position":{"start":{"line":27,"column":3,"offset":1437},"end":{"line":27,"column":28,"offset":1462},"indent":[]}},{"type":"inlineCode","value":"graphql","position":{"start":{"line":27,"column":28,"offset":1462},"end":{"line":27,"column":37,"offset":1471},"indent":[]}},{"type":"text","value":" v15.3.0 and later.","position":{"start":{"line":27,"column":37,"offset":1471},"end":{"line":27,"column":56,"offset":1490},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1435},"end":{"line":27,"column":58,"offset":1492},"indent":[]}},{"type":"text","value":" (Apollo Server 2 supported ","position":{"start":{"line":27,"column":58,"offset":1492},"end":{"line":27,"column":86,"offset":1520},"indent":[]}},{"type":"inlineCode","value":"graphql","position":{"start":{"line":27,"column":86,"offset":1520},"end":{"line":27,"column":95,"offset":1529},"indent":[]}},{"type":"text","value":" v0.12 through v15.)","position":{"start":{"line":27,"column":95,"offset":1529},"end":{"line":27,"column":115,"offset":1549},"indent":[]}}],"position":{"start":{"line":27,"column":1,"offset":1435},"end":{"line":27,"column":115,"offset":1549},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you're using an older version of ","position":{"start":{"line":29,"column":1,"offset":1551},"end":{"line":29,"column":37,"offset":1587},"indent":[]}},{"type":"inlineCode","value":"graphql","position":{"start":{"line":29,"column":37,"offset":1587},"end":{"line":29,"column":46,"offset":1596},"indent":[]}},{"type":"text","value":", upgrade it to a supported version before upgrading to Apollo Server 3.","position":{"start":{"line":29,"column":46,"offset":1596},"end":{"line":29,"column":118,"offset":1668},"indent":[]}}],"position":{"start":{"line":29,"column":1,"offset":1551},"end":{"line":29,"column":118,"offset":1668},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Removed integrations","position":{"start":{"line":31,"column":4,"offset":1673},"end":{"line":31,"column":24,"offset":1693},"indent":[]}}],"position":{"start":{"line":31,"column":1,"offset":1670},"end":{"line":31,"column":24,"offset":1693},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Apollo Server 2 provides built-in support for subscriptions and file uploads via the ","position":{"start":{"line":33,"column":1,"offset":1695},"end":{"line":33,"column":86,"offset":1780},"indent":[]}},{"type":"inlineCode","value":"subscriptions-transport-ws","position":{"start":{"line":33,"column":86,"offset":1780},"end":{"line":33,"column":114,"offset":1808},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":33,"column":114,"offset":1808},"end":{"line":33,"column":119,"offset":1813},"indent":[]}},{"type":"inlineCode","value":"graphql-upload","position":{"start":{"line":33,"column":119,"offset":1813},"end":{"line":33,"column":135,"offset":1829},"indent":[]}},{"type":"text","value":" packages, respectively. It also serves GraphQL Playground from its base URL by default.","position":{"start":{"line":33,"column":135,"offset":1829},"end":{"line":33,"column":223,"offset":1917},"indent":[]}}],"position":{"start":{"line":33,"column":1,"offset":1695},"end":{"line":33,"column":223,"offset":1917},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Apollo Server 3 removes these built-in integrations, in favor of enabling users to provide their own mechanisms for these features.","position":{"start":{"line":35,"column":1,"offset":1919},"end":{"line":35,"column":132,"offset":2050},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":1919},"end":{"line":35,"column":132,"offset":2050},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can reenable all of these integrations as they exist in Apollo Server 2.","position":{"start":{"line":37,"column":1,"offset":2052},"end":{"line":37,"column":77,"offset":2128},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":2052},"end":{"line":37,"column":77,"offset":2128},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Subscriptions","position":{"start":{"line":39,"column":5,"offset":2134},"end":{"line":39,"column":18,"offset":2147},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":2130},"end":{"line":39,"column":18,"offset":2147},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Apollo Server 2 provides limited, built-in support for WebSocket-based GraphQL subscriptions via the ","position":{"start":{"line":41,"column":1,"offset":2149},"end":{"line":41,"column":102,"offset":2250},"indent":[]}},{"type":"inlineCode","value":"subscriptions-transport-ws","position":{"start":{"line":41,"column":102,"offset":2250},"end":{"line":41,"column":130,"offset":2278},"indent":[]}},{"type":"text","value":" package. This integration doesn't work with Apollo Server's plugin system or Apollo Studio usage reporting.","position":{"start":{"line":41,"column":130,"offset":2278},"end":{"line":41,"column":238,"offset":2386},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":2149},"end":{"line":41,"column":238,"offset":2386},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Apollo Server 3 no longer contains this built-in integration. However, you can still use ","position":{"start":{"line":43,"column":1,"offset":2388},"end":{"line":43,"column":90,"offset":2477},"indent":[]}},{"type":"inlineCode","value":"subscriptions-transport-ws","position":{"start":{"line":43,"column":90,"offset":2477},"end":{"line":43,"column":118,"offset":2505},"indent":[]}},{"type":"text","value":" for subscriptions if you depend on this implementation. Note that as with Apollo Server 2, this integration won't work with the plugin system or Studio usage reporting.","position":{"start":{"line":43,"column":118,"offset":2505},"end":{"line":43,"column":287,"offset":2674},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":2388},"end":{"line":43,"column":287,"offset":2674},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Additionally, Apollo Server 3 ","position":{"start":{"line":45,"column":1,"offset":2676},"end":{"line":45,"column":31,"offset":2706},"indent":[]}},{"type":"link","title":null,"url":"#exports-from-graphql-subscriptions","children":[{"type":"text","value":"no longer re-exports all of the exports from the ","position":{"start":{"line":45,"column":32,"offset":2707},"end":{"line":45,"column":81,"offset":2756},"indent":[]}},{"type":"inlineCode","value":"graphql-subscriptions","position":{"start":{"line":45,"column":81,"offset":2756},"end":{"line":45,"column":104,"offset":2779},"indent":[]}},{"type":"text","value":" package","position":{"start":{"line":45,"column":104,"offset":2779},"end":{"line":45,"column":112,"offset":2787},"indent":[]}}],"position":{"start":{"line":45,"column":31,"offset":2706},"end":{"line":45,"column":150,"offset":2825},"indent":[]}},{"type":"text","value":" such as ","position":{"start":{"line":45,"column":150,"offset":2825},"end":{"line":45,"column":159,"offset":2834},"indent":[]}},{"type":"inlineCode","value":"PubSub","position":{"start":{"line":45,"column":159,"offset":2834},"end":{"line":45,"column":167,"offset":2842},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":45,"column":167,"offset":2842},"end":{"line":45,"column":168,"offset":2843},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":2676},"end":{"line":45,"column":168,"offset":2843},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We hope to add more fully-integrated subscription support to Apollo Server in a future version.","position":{"start":{"line":47,"column":1,"offset":2845},"end":{"line":47,"column":96,"offset":2940},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":2845},"end":{"line":47,"column":96,"offset":2940},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"Note that the ","position":{"start":{"line":49,"column":3,"offset":2944},"end":{"line":49,"column":17,"offset":2958},"indent":[]}},{"type":"inlineCode","value":"subscriptions-transport-ws","position":{"start":{"line":49,"column":17,"offset":2958},"end":{"line":49,"column":45,"offset":2986},"indent":[]}},{"type":"text","value":" library is no longer maintained. A newer, actively-maintained ","position":{"start":{"line":49,"column":45,"offset":2986},"end":{"line":49,"column":108,"offset":3049},"indent":[]}},{"type":"inlineCode","value":"graphql-ws","position":{"start":{"line":49,"column":108,"offset":3049},"end":{"line":49,"column":120,"offset":3061},"indent":[]}},{"type":"text","value":" package exists. These libraries implement different protocols for GraphQL subscriptions over WebSocket, so you need to adjust your client to support ","position":{"start":{"line":49,"column":120,"offset":3061},"end":{"line":49,"column":270,"offset":3211},"indent":[]}},{"type":"inlineCode","value":"graphql-ws","position":{"start":{"line":49,"column":270,"offset":3211},"end":{"line":49,"column":282,"offset":3223},"indent":[]}},{"type":"text","value":". This migration guide shows how to reenable ","position":{"start":{"line":49,"column":282,"offset":3223},"end":{"line":49,"column":327,"offset":3268},"indent":[]}},{"type":"inlineCode","value":"subscriptions-transport-ws","position":{"start":{"line":49,"column":327,"offset":3268},"end":{"line":49,"column":355,"offset":3296},"indent":[]}},{"type":"text","value":" to make your transition from Apollo Server 2 to Apollo Server 3 as easy as possible, but we recommend that you then migrate from ","position":{"start":{"line":49,"column":355,"offset":3296},"end":{"line":49,"column":485,"offset":3426},"indent":[]}},{"type":"inlineCode","value":"subscriptions-transport-ws","position":{"start":{"line":49,"column":485,"offset":3426},"end":{"line":49,"column":513,"offset":3454},"indent":[]}},{"type":"text","value":" to ","position":{"start":{"line":49,"column":513,"offset":3454},"end":{"line":49,"column":517,"offset":3458},"indent":[]}},{"type":"inlineCode","value":"graphql-ws","position":{"start":{"line":49,"column":517,"offset":3458},"end":{"line":49,"column":529,"offset":3470},"indent":[]}},{"type":"text","value":" once you've finished the upgrade. The ","position":{"start":{"line":49,"column":529,"offset":3470},"end":{"line":49,"column":568,"offset":3509},"indent":[]}},{"type":"link","title":null,"url":"./data/subscriptions/","children":[{"type":"text","value":"subscriptions documentation","position":{"start":{"line":49,"column":569,"offset":3510},"end":{"line":49,"column":596,"offset":3537},"indent":[]}}],"position":{"start":{"line":49,"column":568,"offset":3509},"end":{"line":49,"column":620,"offset":3561},"indent":[]}},{"type":"text","value":" shows how to use the newer ","position":{"start":{"line":49,"column":620,"offset":3561},"end":{"line":49,"column":648,"offset":3589},"indent":[]}},{"type":"inlineCode","value":"graphql-ws","position":{"start":{"line":49,"column":648,"offset":3589},"end":{"line":49,"column":660,"offset":3601},"indent":[]}},{"type":"text","value":" rather than the unmaintained ","position":{"start":{"line":49,"column":660,"offset":3601},"end":{"line":49,"column":690,"offset":3631},"indent":[]}},{"type":"inlineCode","value":"subscriptions-transport-ws","position":{"start":{"line":49,"column":690,"offset":3631},"end":{"line":49,"column":718,"offset":3659},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":49,"column":718,"offset":3659},"end":{"line":49,"column":719,"offset":3660},"indent":[]}}],"position":{"start":{"line":49,"column":3,"offset":2944},"end":{"line":49,"column":719,"offset":3660},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":2942},"end":{"line":49,"column":719,"offset":3660},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Reenabling subscriptions","position":{"start":{"line":51,"column":6,"offset":3667},"end":{"line":51,"column":30,"offset":3691},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":3662},"end":{"line":51,"column":30,"offset":3691},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"Currently, these instructions are only for Apollo Server's Express integration. It is likely possible to integrate ","position":{"start":{"line":53,"column":3,"offset":3695},"end":{"line":53,"column":118,"offset":3810},"indent":[]}},{"type":"inlineCode","value":"subscriptions-transport-ws","position":{"start":{"line":53,"column":118,"offset":3810},"end":{"line":53,"column":146,"offset":3838},"indent":[]}},{"type":"text","value":" with other integrations. PRs to this migration guide are certainly welcome!","position":{"start":{"line":53,"column":146,"offset":3838},"end":{"line":53,"column":222,"offset":3914},"indent":[]}}],"position":{"start":{"line":53,"column":3,"offset":3695},"end":{"line":53,"column":222,"offset":3914},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":3693},"end":{"line":53,"column":222,"offset":3914},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, you can't use ","position":{"start":{"line":55,"column":1,"offset":3916},"end":{"line":55,"column":35,"offset":3950},"indent":[]}},{"type":"inlineCode","value":"subscriptions-transport-ws","position":{"start":{"line":55,"column":35,"offset":3950},"end":{"line":55,"column":63,"offset":3978},"indent":[]}},{"type":"text","value":" with the \"batteries-included\" ","position":{"start":{"line":55,"column":63,"offset":3978},"end":{"line":55,"column":94,"offset":4009},"indent":[]}},{"type":"inlineCode","value":"apollo-server","position":{"start":{"line":55,"column":94,"offset":4009},"end":{"line":55,"column":109,"offset":4024},"indent":[]}},{"type":"text","value":" package. If your project uses ","position":{"start":{"line":55,"column":109,"offset":4024},"end":{"line":55,"column":140,"offset":4055},"indent":[]}},{"type":"inlineCode","value":"apollo-server","position":{"start":{"line":55,"column":140,"offset":4055},"end":{"line":55,"column":155,"offset":4070},"indent":[]}},{"type":"text","value":" with subscriptions, first ","position":{"start":{"line":55,"column":155,"offset":4070},"end":{"line":55,"column":182,"offset":4097},"indent":[]}},{"type":"link","title":null,"url":"./integrations/middleware/#swapping-out-apollo-server","children":[{"type":"text","value":"swap to ","position":{"start":{"line":55,"column":183,"offset":4098},"end":{"line":55,"column":191,"offset":4106},"indent":[]}},{"type":"inlineCode","value":"apollo-server-express","position":{"start":{"line":55,"column":191,"offset":4106},"end":{"line":55,"column":214,"offset":4129},"indent":[]}}],"position":{"start":{"line":55,"column":182,"offset":4097},"end":{"line":55,"column":270,"offset":4185},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":55,"column":270,"offset":4185},"end":{"line":55,"column":271,"offset":4186},"indent":[]}}],"position":{"start":{"line":55,"column":1,"offset":3916},"end":{"line":55,"column":271,"offset":4186},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Then, complete the following:","position":{"start":{"line":57,"column":1,"offset":4188},"end":{"line":57,"column":30,"offset":4217},"indent":[]}}],"position":{"start":{"line":57,"column":1,"offset":4188},"end":{"line":57,"column":30,"offset":4217},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Install ","position":{"start":{"line":59,"column":4,"offset":4222},"end":{"line":59,"column":12,"offset":4230},"indent":[]}},{"type":"inlineCode","value":"subscriptions-transport-ws","position":{"start":{"line":59,"column":12,"offset":4230},"end":{"line":59,"column":40,"offset":4258},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":59,"column":40,"offset":4258},"end":{"line":59,"column":45,"offset":4263},"indent":[]}},{"type":"inlineCode","value":"@graphql-tools/schema","position":{"start":{"line":59,"column":45,"offset":4263},"end":{"line":59,"column":68,"offset":4286},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":59,"column":68,"offset":4286},"end":{"line":59,"column":69,"offset":4287},"indent":[]}}],"position":{"start":{"line":59,"column":4,"offset":4222},"end":{"line":59,"column":69,"offset":4287},"indent":[]}},{"type":"code","lang":"shell","meta":null,"value":"npm install subscriptions-transport-ws @graphql-tools/schema","position":{"start":{"line":60,"column":5,"offset":4292},"end":{"line":62,"column":8,"offset":4373},"indent":[5,5]}}],"position":{"start":{"line":59,"column":1,"offset":4219},"end":{"line":63,"column":1,"offset":4374},"indent":[1,1,1,1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Add the following imports in the module where your Apollo Server is currently instantiated. We'll use these in the subsequent steps.","position":{"start":{"line":64,"column":4,"offset":4378},"end":{"line":64,"column":136,"offset":4510},"indent":[]}}],"position":{"start":{"line":64,"column":4,"offset":4378},"end":{"line":64,"column":136,"offset":4510},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"import { createServer } from 'http';\nimport { execute, subscribe } from 'graphql';\nimport { SubscriptionServer } from 'subscriptions-transport-ws';\nimport { makeExecutableSchema } from '@graphql-tools/schema';","position":{"start":{"line":65,"column":5,"offset":4515},"end":{"line":70,"column":8,"offset":4762},"indent":[5,5,5,5,5]}}],"position":{"start":{"line":64,"column":1,"offset":4375},"end":{"line":71,"column":1,"offset":4763},"indent":[1,1,1,1,1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Create an ","position":{"start":{"line":72,"column":4,"offset":4767},"end":{"line":72,"column":14,"offset":4777},"indent":[]}},{"type":"inlineCode","value":"http.Server","position":{"start":{"line":72,"column":14,"offset":4777},"end":{"line":72,"column":27,"offset":4790},"indent":[]}},{"type":"text","value":" instance with your Express ","position":{"start":{"line":72,"column":27,"offset":4790},"end":{"line":72,"column":55,"offset":4818},"indent":[]}},{"type":"inlineCode","value":"app","position":{"start":{"line":72,"column":55,"offset":4818},"end":{"line":72,"column":60,"offset":4823},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":72,"column":60,"offset":4823},"end":{"line":72,"column":61,"offset":4824},"indent":[]}}],"position":{"start":{"line":72,"column":4,"offset":4767},"end":{"line":72,"column":61,"offset":4824},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In order to set up both the HTTP and WebSocket servers, we'll need to create an ","position":{"start":{"line":74,"column":5,"offset":4830},"end":{"line":74,"column":85,"offset":4910},"indent":[]}},{"type":"inlineCode","value":"http.Server","position":{"start":{"line":74,"column":85,"offset":4910},"end":{"line":74,"column":98,"offset":4923},"indent":[]}},{"type":"text","value":". Do this by passing your Express ","position":{"start":{"line":74,"column":98,"offset":4923},"end":{"line":74,"column":132,"offset":4957},"indent":[]}},{"type":"inlineCode","value":"app","position":{"start":{"line":74,"column":132,"offset":4957},"end":{"line":74,"column":137,"offset":4962},"indent":[]}},{"type":"text","value":" to the ","position":{"start":{"line":74,"column":137,"offset":4962},"end":{"line":74,"column":145,"offset":4970},"indent":[]}},{"type":"inlineCode","value":"createServer","position":{"start":{"line":74,"column":145,"offset":4970},"end":{"line":74,"column":159,"offset":4984},"indent":[]}},{"type":"text","value":" function which we imported from the Node.js ","position":{"start":{"line":74,"column":159,"offset":4984},"end":{"line":74,"column":204,"offset":5029},"indent":[]}},{"type":"inlineCode","value":"http","position":{"start":{"line":74,"column":204,"offset":5029},"end":{"line":74,"column":210,"offset":5035},"indent":[]}},{"type":"text","value":" module.","position":{"start":{"line":74,"column":210,"offset":5035},"end":{"line":74,"column":218,"offset":5043},"indent":[]}}],"position":{"start":{"line":74,"column":5,"offset":4830},"end":{"line":74,"column":218,"offset":5043},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"// This `app` is the returned value from `express()`.\nconst httpServer = createServer(app);","position":{"start":{"line":76,"column":5,"offset":5049},"end":{"line":79,"column":8,"offset":5170},"indent":[5,5,5]}}],"position":{"start":{"line":72,"column":1,"offset":4764},"end":{"line":80,"column":1,"offset":5171},"indent":[1,1,1,1,1,1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Create an instance of ","position":{"start":{"line":81,"column":4,"offset":5175},"end":{"line":81,"column":26,"offset":5197},"indent":[]}},{"type":"inlineCode","value":"GraphQLSchema","position":{"start":{"line":81,"column":26,"offset":5197},"end":{"line":81,"column":41,"offset":5212},"indent":[]}},{"type":"text","value":" (if one doesn't already exist).","position":{"start":{"line":81,"column":41,"offset":5212},"end":{"line":81,"column":73,"offset":5244},"indent":[]}}],"position":{"start":{"line":81,"column":4,"offset":5175},"end":{"line":81,"column":73,"offset":5244},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"Your server may already pass a ","position":{"start":{"line":82,"column":7,"offset":5251},"end":{"line":82,"column":38,"offset":5282},"indent":[]}},{"type":"inlineCode","value":"schema","position":{"start":{"line":82,"column":38,"offset":5282},"end":{"line":82,"column":46,"offset":5290},"indent":[]}},{"type":"text","value":" to the ","position":{"start":{"line":82,"column":46,"offset":5290},"end":{"line":82,"column":54,"offset":5298},"indent":[]}},{"type":"inlineCode","value":"ApolloServer","position":{"start":{"line":82,"column":54,"offset":5298},"end":{"line":82,"column":68,"offset":5312},"indent":[]}},{"type":"text","value":" constructor. If it does, this step can be skipped. You'll use the existing ","position":{"start":{"line":82,"column":68,"offset":5312},"end":{"line":82,"column":144,"offset":5388},"indent":[]}},{"type":"inlineCode","value":"schema","position":{"start":{"line":82,"column":144,"offset":5388},"end":{"line":82,"column":152,"offset":5396},"indent":[]}},{"type":"text","value":" instance in a later step.","position":{"start":{"line":82,"column":152,"offset":5396},"end":{"line":82,"column":178,"offset":5422},"indent":[]}}],"position":{"start":{"line":82,"column":7,"offset":5251},"end":{"line":82,"column":178,"offset":5422},"indent":[]}}],"position":{"start":{"line":82,"column":5,"offset":5249},"end":{"line":82,"column":178,"offset":5422},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":84,"column":5,"offset":5428},"end":{"line":84,"column":9,"offset":5432},"indent":[]}},{"type":"inlineCode","value":"SubscriptionServer","position":{"start":{"line":84,"column":9,"offset":5432},"end":{"line":84,"column":29,"offset":5452},"indent":[]}},{"type":"text","value":" (which we'll instantiate next) doesn't accept ","position":{"start":{"line":84,"column":29,"offset":5452},"end":{"line":84,"column":76,"offset":5499},"indent":[]}},{"type":"inlineCode","value":"typeDefs","position":{"start":{"line":84,"column":76,"offset":5499},"end":{"line":84,"column":86,"offset":5509},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":84,"column":86,"offset":5509},"end":{"line":84,"column":91,"offset":5514},"indent":[]}},{"type":"inlineCode","value":"resolvers","position":{"start":{"line":84,"column":91,"offset":5514},"end":{"line":84,"column":102,"offset":5525},"indent":[]}},{"type":"text","value":" directly, but rather an executable ","position":{"start":{"line":84,"column":102,"offset":5525},"end":{"line":84,"column":138,"offset":5561},"indent":[]}},{"type":"inlineCode","value":"GraphQLSchema","position":{"start":{"line":84,"column":138,"offset":5561},"end":{"line":84,"column":153,"offset":5576},"indent":[]}},{"type":"text","value":". We can pass this ","position":{"start":{"line":84,"column":153,"offset":5576},"end":{"line":84,"column":172,"offset":5595},"indent":[]}},{"type":"inlineCode","value":"schema","position":{"start":{"line":84,"column":172,"offset":5595},"end":{"line":84,"column":180,"offset":5603},"indent":[]}},{"type":"text","value":" object to both the ","position":{"start":{"line":84,"column":180,"offset":5603},"end":{"line":84,"column":200,"offset":5623},"indent":[]}},{"type":"inlineCode","value":"SubscriptionServer","position":{"start":{"line":84,"column":200,"offset":5623},"end":{"line":84,"column":220,"offset":5643},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":84,"column":220,"offset":5643},"end":{"line":84,"column":225,"offset":5648},"indent":[]}},{"type":"inlineCode","value":"ApolloServer","position":{"start":{"line":84,"column":225,"offset":5648},"end":{"line":84,"column":239,"offset":5662},"indent":[]}},{"type":"text","value":". This way, it's clear that the same schema is being used in both places.","position":{"start":{"line":84,"column":239,"offset":5662},"end":{"line":84,"column":312,"offset":5735},"indent":[]}}],"position":{"start":{"line":84,"column":5,"offset":5428},"end":{"line":84,"column":312,"offset":5735},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"const schema = makeExecutableSchema({ typeDefs, resolvers });\n// ...\nconst server = new ApolloServer({\n  schema,\n});","position":{"start":{"line":86,"column":5,"offset":5741},"end":{"line":92,"column":8,"offset":5899},"indent":[5,5,5,5,5,5]}}],"position":{"start":{"line":81,"column":1,"offset":5172},"end":{"line":93,"column":1,"offset":5900},"indent":[1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Create the ","position":{"start":{"line":94,"column":4,"offset":5904},"end":{"line":94,"column":15,"offset":5915},"indent":[]}},{"type":"inlineCode","value":"SubscriptionServer","position":{"start":{"line":94,"column":15,"offset":5915},"end":{"line":94,"column":35,"offset":5935},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":94,"column":35,"offset":5935},"end":{"line":94,"column":36,"offset":5936},"indent":[]}}],"position":{"start":{"line":94,"column":4,"offset":5904},"end":{"line":94,"column":36,"offset":5936},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"const subscriptionServer = SubscriptionServer.create({\n  // This is the `schema` we just created.\n  schema,\n  // These are imported from `graphql`.\n  execute,\n  subscribe,\n  // Providing `onConnect` is the `SubscriptionServer` equivalent to the\n  // `context` function in `ApolloServer`. Please [see the docs](https://github.com/apollographql/subscriptions-transport-ws#constructoroptions-socketoptions--socketserver)\n  // for more information on this hook.\n  async onConnect(\n    connectionParams: Object,\n    webSocket: WebSocket,\n    context: ConnectionContext\n  ) {\n    // If an object is returned here, it will be passed as the `context`\n    // argument to your subscription resolvers.\n  }\n}, {\n  // This is the `httpServer` we created in a previous step.\n  server: httpServer,\n  // This `server` is the instance returned from `new ApolloServer`.\n  path: server.graphqlPath,\n});","position":{"start":{"line":96,"column":5,"offset":5942},"end":{"line":120,"column":8,"offset":6939},"indent":[5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5]}}],"position":{"start":{"line":94,"column":1,"offset":5901},"end":{"line":121,"column":1,"offset":6940},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Add a plugin to your ","position":{"start":{"line":122,"column":4,"offset":6944},"end":{"line":122,"column":25,"offset":6965},"indent":[]}},{"type":"inlineCode","value":"ApolloServer","position":{"start":{"line":122,"column":25,"offset":6965},"end":{"line":122,"column":39,"offset":6979},"indent":[]}},{"type":"text","value":" constructor to close the ","position":{"start":{"line":122,"column":39,"offset":6979},"end":{"line":122,"column":65,"offset":7005},"indent":[]}},{"type":"inlineCode","value":"SubscriptionServer","position":{"start":{"line":122,"column":65,"offset":7005},"end":{"line":122,"column":85,"offset":7025},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":122,"column":85,"offset":7025},"end":{"line":122,"column":86,"offset":7026},"indent":[]}}],"position":{"start":{"line":122,"column":4,"offset":6944},"end":{"line":122,"column":86,"offset":7026},"indent":[]}},{"type":"code","lang":"javascript:title=index.js-10","meta":null,"value":"const server = new ApolloServer({\n  schema,\n  plugins: [{\n    async serverWillStart() {\n      return {\n        async drainServer() {\n          subscriptionServer.close();\n        }\n      };\n    }\n  }],\n});","position":{"start":{"line":124,"column":5,"offset":7032},"end":{"line":137,"column":8,"offset":7325},"indent":[5,5,5,5,5,5,5,5,5,5,5,5,5]}}],"position":{"start":{"line":122,"column":1,"offset":6941},"end":{"line":138,"column":1,"offset":7326},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Finally, adjust the existing ","position":{"start":{"line":139,"column":4,"offset":7330},"end":{"line":139,"column":33,"offset":7359},"indent":[]}},{"type":"inlineCode","value":"listen","position":{"start":{"line":139,"column":33,"offset":7359},"end":{"line":139,"column":41,"offset":7367},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":139,"column":41,"offset":7367},"end":{"line":139,"column":42,"offset":7368},"indent":[]}}],"position":{"start":{"line":139,"column":4,"offset":7330},"end":{"line":139,"column":42,"offset":7368},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Most applications will be calling ","position":{"start":{"line":141,"column":5,"offset":7374},"end":{"line":141,"column":39,"offset":7408},"indent":[]}},{"type":"inlineCode","value":"app.listen(...)","position":{"start":{"line":141,"column":39,"offset":7408},"end":{"line":141,"column":56,"offset":7425},"indent":[]}},{"type":"text","value":" on their Express app. ","position":{"start":{"line":141,"column":56,"offset":7425},"end":{"line":141,"column":79,"offset":7448},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"This should be changed to ","position":{"start":{"line":141,"column":81,"offset":7450},"end":{"line":141,"column":107,"offset":7476},"indent":[]}},{"type":"inlineCode","value":"httpServer.listen(...)","position":{"start":{"line":141,"column":107,"offset":7476},"end":{"line":141,"column":131,"offset":7500},"indent":[]}}],"position":{"start":{"line":141,"column":79,"offset":7448},"end":{"line":141,"column":133,"offset":7502},"indent":[]}},{"type":"text","value":" using the same arguments. This will begin listening on the HTTP and WebSocket transports simultaneously.","position":{"start":{"line":141,"column":133,"offset":7502},"end":{"line":141,"column":238,"offset":7607},"indent":[]}}],"position":{"start":{"line":141,"column":5,"offset":7374},"end":{"line":141,"column":238,"offset":7607},"indent":[]}}],"position":{"start":{"line":139,"column":1,"offset":7327},"end":{"line":141,"column":238,"offset":7607},"indent":[1,1]}}],"position":{"start":{"line":59,"column":1,"offset":4219},"end":{"line":141,"column":238,"offset":7607},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"A completed example of migrating subscriptions is shown below:","position":{"start":{"line":143,"column":1,"offset":7609},"end":{"line":143,"column":63,"offset":7671},"indent":[]}}],"position":{"start":{"line":143,"column":1,"offset":7609},"end":{"line":143,"column":63,"offset":7671},"indent":[]}},{"type":"jsx","value":"<ExpansionPanel title=\"Click to expand\">","position":{"start":{"line":144,"column":1,"offset":7672},"end":{"line":144,"column":41,"offset":7712},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"import { createServer } from \"http\";\nimport { execute, subscribe } from \"graphql\";\nimport { SubscriptionServer } from \"subscriptions-transport-ws\";\nimport { makeExecutableSchema } from \"@graphql-tools/schema\";\nimport express from \"express\";\nimport { ApolloServer } from \"apollo-server-express\";\nimport resolvers from \"./resolvers\";\nimport typeDefs from \"./typeDefs\";\n\n(async function () {\n  const app = express();\n\n  const httpServer = createServer(app);\n\n  const schema = makeExecutableSchema({\n    typeDefs,\n    resolvers,\n  });\n\n  const subscriptionServer = SubscriptionServer.create({\n    schema,\n    execute,\n    subscribe,\n    onConnect() {\n      // lookup userId by token, etc.\n      return { userId };\n    },\n  }, {\n    server: httpServer,\n    path: server.graphqlPath,\n  });\n\n  const server = new ApolloServer({\n    schema,\n    context() {\n      // lookup userId by token, etc.\n      return { userId };\n    },\n    plugins: [{\n      async serverWillStart() {\n        return {\n          async drainServer() {\n            subscriptionServer.close();\n          }\n        };\n      }\n    }],\n  });\n  await server.start();\n  server.applyMiddleware({ app });\n\n  const PORT = 4000;\n  httpServer.listen(PORT, () =>\n    console.log(`Server is now running on http://localhost:${PORT}/graphql`)\n  );\n})();","position":{"start":{"line":146,"column":1,"offset":7714},"end":{"line":203,"column":4,"offset":9025},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</ExpansionPanel>","position":{"start":{"line":204,"column":1,"offset":9026},"end":{"line":204,"column":18,"offset":9043},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"File uploads","position":{"start":{"line":206,"column":5,"offset":9049},"end":{"line":206,"column":17,"offset":9061},"indent":[]}}],"position":{"start":{"line":206,"column":1,"offset":9045},"end":{"line":206,"column":17,"offset":9061},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Apollo Server 2 provides built-in support for file uploads via an outdated version of the ","position":{"start":{"line":208,"column":1,"offset":9063},"end":{"line":208,"column":91,"offset":9153},"indent":[]}},{"type":"inlineCode","value":"graphql-upload","position":{"start":{"line":208,"column":91,"offset":9153},"end":{"line":208,"column":107,"offset":9169},"indent":[]}},{"type":"text","value":" library. Using an updated version of ","position":{"start":{"line":208,"column":107,"offset":9169},"end":{"line":208,"column":145,"offset":9207},"indent":[]}},{"type":"inlineCode","value":"graphql-upload","position":{"start":{"line":208,"column":145,"offset":9207},"end":{"line":208,"column":161,"offset":9223},"indent":[]}},{"type":"text","value":" requires you to disable this built-in support due to backward incompatible changes.","position":{"start":{"line":208,"column":161,"offset":9223},"end":{"line":208,"column":245,"offset":9307},"indent":[]}}],"position":{"start":{"line":208,"column":1,"offset":9063},"end":{"line":208,"column":245,"offset":9307},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This built-in support is removed in Apollo Server 3. To use ","position":{"start":{"line":210,"column":1,"offset":9309},"end":{"line":210,"column":61,"offset":9369},"indent":[]}},{"type":"inlineCode","value":"graphql-upload","position":{"start":{"line":210,"column":61,"offset":9369},"end":{"line":210,"column":77,"offset":9385},"indent":[]}},{"type":"text","value":", you can choose an appropriate version and integrate it yourself. Note that ","position":{"start":{"line":210,"column":77,"offset":9385},"end":{"line":210,"column":154,"offset":9462},"indent":[]}},{"type":"inlineCode","value":"graphql-upload","position":{"start":{"line":210,"column":154,"offset":9462},"end":{"line":210,"column":170,"offset":9478},"indent":[]}},{"type":"text","value":" does not support federation or every ","position":{"start":{"line":210,"column":170,"offset":9478},"end":{"line":210,"column":208,"offset":9516},"indent":[]}},{"type":"link","title":null,"url":"./integrations/middleware/","children":[{"type":"text","value":"Node.js framework","position":{"start":{"line":210,"column":209,"offset":9517},"end":{"line":210,"column":226,"offset":9534},"indent":[]}}],"position":{"start":{"line":210,"column":208,"offset":9516},"end":{"line":210,"column":255,"offset":9563},"indent":[]}},{"type":"text","value":" supported by Apollo Server.","position":{"start":{"line":210,"column":255,"offset":9563},"end":{"line":210,"column":283,"offset":9591},"indent":[]}}],"position":{"start":{"line":210,"column":1,"offset":9309},"end":{"line":210,"column":283,"offset":9591},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To use ","position":{"start":{"line":212,"column":1,"offset":9593},"end":{"line":212,"column":8,"offset":9600},"indent":[]}},{"type":"inlineCode","value":"graphql-upload","position":{"start":{"line":212,"column":8,"offset":9600},"end":{"line":212,"column":24,"offset":9616},"indent":[]}},{"type":"text","value":" with Apollo Server 3, see the ","position":{"start":{"line":212,"column":24,"offset":9616},"end":{"line":212,"column":55,"offset":9647},"indent":[]}},{"type":"link","title":null,"url":"../data/file-uploads/","children":[{"type":"text","value":"documentation on enabling file uploads in Apollo Server","position":{"start":{"line":212,"column":56,"offset":9648},"end":{"line":212,"column":111,"offset":9703},"indent":[]}}],"position":{"start":{"line":212,"column":55,"offset":9647},"end":{"line":212,"column":135,"offset":9727},"indent":[]}},{"type":"text","value":". Note that if your project currently uses uploads with the \"batteries-included\" ","position":{"start":{"line":212,"column":135,"offset":9727},"end":{"line":212,"column":216,"offset":9808},"indent":[]}},{"type":"inlineCode","value":"apollo-server","position":{"start":{"line":212,"column":216,"offset":9808},"end":{"line":212,"column":231,"offset":9823},"indent":[]}},{"type":"text","value":" package, you must first ","position":{"start":{"line":212,"column":231,"offset":9823},"end":{"line":212,"column":256,"offset":9848},"indent":[]}},{"type":"link","title":null,"url":"./integrations/middleware/#swapping-out-apollo-server","children":[{"type":"text","value":"swap to ","position":{"start":{"line":212,"column":257,"offset":9849},"end":{"line":212,"column":265,"offset":9857},"indent":[]}},{"type":"inlineCode","value":"apollo-server-express","position":{"start":{"line":212,"column":265,"offset":9857},"end":{"line":212,"column":288,"offset":9880},"indent":[]}}],"position":{"start":{"line":212,"column":256,"offset":9848},"end":{"line":212,"column":344,"offset":9936},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":212,"column":344,"offset":9936},"end":{"line":212,"column":345,"offset":9937},"indent":[]}}],"position":{"start":{"line":212,"column":1,"offset":9593},"end":{"line":212,"column":345,"offset":9937},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Additionally, Apollo Server 3 ","position":{"start":{"line":214,"column":1,"offset":9939},"end":{"line":214,"column":31,"offset":9969},"indent":[]}},{"type":"link","title":null,"url":"#exports-from-graphql-upload","children":[{"type":"text","value":"no longer re-exports the ","position":{"start":{"line":214,"column":32,"offset":9970},"end":{"line":214,"column":57,"offset":9995},"indent":[]}},{"type":"inlineCode","value":"GraphQLUpload","position":{"start":{"line":214,"column":57,"offset":9995},"end":{"line":214,"column":72,"offset":10010},"indent":[]}},{"type":"text","value":" symbol from the ","position":{"start":{"line":214,"column":72,"offset":10010},"end":{"line":214,"column":89,"offset":10027},"indent":[]}},{"type":"inlineCode","value":"graphql-uploads","position":{"start":{"line":214,"column":89,"offset":10027},"end":{"line":214,"column":106,"offset":10044},"indent":[]}},{"type":"text","value":" package","position":{"start":{"line":214,"column":106,"offset":10044},"end":{"line":214,"column":114,"offset":10052},"indent":[]}}],"position":{"start":{"line":214,"column":31,"offset":9969},"end":{"line":214,"column":145,"offset":10083},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":214,"column":145,"offset":10083},"end":{"line":214,"column":146,"offset":10084},"indent":[]}}],"position":{"start":{"line":214,"column":1,"offset":9939},"end":{"line":214,"column":146,"offset":10084},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"GraphQL Playground","position":{"start":{"line":216,"column":5,"offset":10090},"end":{"line":216,"column":23,"offset":10108},"indent":[]}}],"position":{"start":{"line":216,"column":1,"offset":10086},"end":{"line":216,"column":23,"offset":10108},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"By default, Apollo Server 2 serves the (now-","position":{"start":{"line":218,"column":1,"offset":10110},"end":{"line":218,"column":45,"offset":10154},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/graphql/graphql-playground/issues/1143","children":[{"type":"text","value":"retired","position":{"start":{"line":218,"column":46,"offset":10155},"end":{"line":218,"column":53,"offset":10162},"indent":[]}}],"position":{"start":{"line":218,"column":45,"offset":10154},"end":{"line":218,"column":113,"offset":10222},"indent":[]}},{"type":"text","value":") ","position":{"start":{"line":218,"column":113,"offset":10222},"end":{"line":218,"column":115,"offset":10224},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/graphql/graphql-playground","children":[{"type":"text","value":"GraphQL Playground","position":{"start":{"line":218,"column":116,"offset":10225},"end":{"line":218,"column":134,"offset":10243},"indent":[]}}],"position":{"start":{"line":218,"column":115,"offset":10224},"end":{"line":218,"column":182,"offset":10291},"indent":[]}},{"type":"text","value":" IDE from its base URL in non-production environments. In production, it serves no landing page. Apollo Server 2 also accepts a ","position":{"start":{"line":218,"column":182,"offset":10291},"end":{"line":218,"column":310,"offset":10419},"indent":[]}},{"type":"inlineCode","value":"playground","position":{"start":{"line":218,"column":310,"offset":10419},"end":{"line":218,"column":322,"offset":10431},"indent":[]}},{"type":"text","value":" constructor option to override this default behavior (for example, to enable GraphQL Playground even in production).","position":{"start":{"line":218,"column":322,"offset":10431},"end":{"line":218,"column":439,"offset":10548},"indent":[]}}],"position":{"start":{"line":218,"column":1,"offset":10110},"end":{"line":218,"column":439,"offset":10548},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Apollo Server 3 removes GraphQL Playground (and its associated constructor option) in favor of a landing page that links to Apollo Sandbox in non-production environments. In production, it serves a simplified landing page instead.","position":{"start":{"line":220,"column":1,"offset":10550},"end":{"line":220,"column":231,"offset":10780},"indent":[]}}],"position":{"start":{"line":220,"column":1,"offset":10550},"end":{"line":220,"column":231,"offset":10780},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can customize your Apollo Server 3 landing page, as described in ","position":{"start":{"line":222,"column":1,"offset":10782},"end":{"line":222,"column":70,"offset":10851},"indent":[]}},{"type":"link","title":null,"url":"./testing/build-run-queries/","children":[{"type":"text","value":"Build and run queries","position":{"start":{"line":222,"column":71,"offset":10852},"end":{"line":222,"column":92,"offset":10873},"indent":[]}}],"position":{"start":{"line":222,"column":70,"offset":10851},"end":{"line":222,"column":123,"offset":10904},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":222,"column":123,"offset":10904},"end":{"line":222,"column":124,"offset":10905},"indent":[]}}],"position":{"start":{"line":222,"column":1,"offset":10782},"end":{"line":222,"column":124,"offset":10905},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Reenabling GraphQL Playground","position":{"start":{"line":224,"column":6,"offset":10912},"end":{"line":224,"column":35,"offset":10941},"indent":[]}}],"position":{"start":{"line":224,"column":1,"offset":10907},"end":{"line":224,"column":35,"offset":10941},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can continue to use GraphQL Playground by installing its associated plugin. You customize its behavior by passing options to the plugin instead of via the ","position":{"start":{"line":226,"column":1,"offset":10943},"end":{"line":226,"column":160,"offset":11102},"indent":[]}},{"type":"inlineCode","value":"playground","position":{"start":{"line":226,"column":160,"offset":11102},"end":{"line":226,"column":172,"offset":11114},"indent":[]}},{"type":"text","value":" constructor option.","position":{"start":{"line":226,"column":172,"offset":11114},"end":{"line":226,"column":192,"offset":11134},"indent":[]}}],"position":{"start":{"line":226,"column":1,"offset":10943},"end":{"line":226,"column":192,"offset":11134},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If your code did not specify the ","position":{"start":{"line":228,"column":1,"offset":11136},"end":{"line":228,"column":34,"offset":11169},"indent":[]}},{"type":"inlineCode","value":"playground","position":{"start":{"line":228,"column":34,"offset":11169},"end":{"line":228,"column":46,"offset":11181},"indent":[]}},{"type":"text","value":" constructor option and you'd like to keep the previous behavior instead of trying the new splash page, you can do that as follows:","position":{"start":{"line":228,"column":46,"offset":11181},"end":{"line":228,"column":177,"offset":11312},"indent":[]}}],"position":{"start":{"line":228,"column":1,"offset":11136},"end":{"line":228,"column":177,"offset":11312},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"import { ApolloServerPluginLandingPageGraphQLPlayground,\n         ApolloServerPluginLandingPageDisabled } from 'apollo-server-core';\nnew ApolloServer({\n  plugins: [\n    process.env.NODE_ENV === 'production'\n      ? ApolloServerPluginLandingPageDisabled()\n      : ApolloServerPluginLandingPageGraphQLPlayground(),\n  ],\n});","position":{"start":{"line":230,"column":1,"offset":11314},"end":{"line":240,"column":4,"offset":11653},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If your code passed ","position":{"start":{"line":242,"column":1,"offset":11655},"end":{"line":242,"column":21,"offset":11675},"indent":[]}},{"type":"inlineCode","value":"new ApolloServer({playground: true})","position":{"start":{"line":242,"column":21,"offset":11675},"end":{"line":242,"column":59,"offset":11713},"indent":[]}},{"type":"text","value":", you can keep the previous behavior with:","position":{"start":{"line":242,"column":59,"offset":11713},"end":{"line":242,"column":101,"offset":11755},"indent":[]}}],"position":{"start":{"line":242,"column":1,"offset":11655},"end":{"line":242,"column":101,"offset":11755},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"import { ApolloServerPluginLandingPageGraphQLPlayground } from 'apollo-server-core';\nnew ApolloServer({\n  plugins: [\n    ApolloServerPluginLandingPageGraphQLPlayground(),\n  ],\n});","position":{"start":{"line":244,"column":1,"offset":11757},"end":{"line":251,"column":4,"offset":11954},"indent":[1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If your code passed ","position":{"start":{"line":253,"column":1,"offset":11956},"end":{"line":253,"column":21,"offset":11976},"indent":[]}},{"type":"inlineCode","value":"new ApolloServer({playground: false})","position":{"start":{"line":253,"column":21,"offset":11976},"end":{"line":253,"column":60,"offset":12015},"indent":[]}},{"type":"text","value":" you can keep the previous behavior with:","position":{"start":{"line":253,"column":60,"offset":12015},"end":{"line":253,"column":101,"offset":12056},"indent":[]}}],"position":{"start":{"line":253,"column":1,"offset":11956},"end":{"line":253,"column":101,"offset":12056},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"import { ApolloServerPluginLandingPageDisabled } from 'apollo-server-core';\nnew ApolloServer({\n  plugins: [\n    ApolloServerPluginLandingPageDisabled(),\n  ],\n});","position":{"start":{"line":255,"column":1,"offset":12058},"end":{"line":262,"column":4,"offset":12237},"indent":[1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If your code passed an options object like ","position":{"start":{"line":264,"column":1,"offset":12239},"end":{"line":264,"column":44,"offset":12282},"indent":[]}},{"type":"inlineCode","value":"new ApolloServer({playground: playgroundOptions})","position":{"start":{"line":264,"column":44,"offset":12282},"end":{"line":264,"column":95,"offset":12333},"indent":[]}},{"type":"text","value":", you can keep the previous behavior with:","position":{"start":{"line":264,"column":95,"offset":12333},"end":{"line":264,"column":137,"offset":12375},"indent":[]}}],"position":{"start":{"line":264,"column":1,"offset":12239},"end":{"line":264,"column":137,"offset":12375},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"import { ApolloServerPluginLandingPageGraphQLPlayground } from 'apollo-server-core';\nnew ApolloServer({\n  plugins: [\n    ApolloServerPluginLandingPageGraphQLPlayground(playgroundOptions),\n  ],\n});","position":{"start":{"line":266,"column":1,"offset":12377},"end":{"line":273,"column":4,"offset":12591},"indent":[1,1,1,1,1,1,1]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Additional changes to GraphQL Playground","position":{"start":{"line":275,"column":6,"offset":12598},"end":{"line":275,"column":46,"offset":12638},"indent":[]}}],"position":{"start":{"line":275,"column":1,"offset":12593},"end":{"line":275,"column":46,"offset":12638},"indent":[]}},{"type":"heading","depth":5,"children":[{"type":"text","value":"Specifying an ","position":{"start":{"line":277,"column":7,"offset":12646},"end":{"line":277,"column":21,"offset":12660},"indent":[]}},{"type":"inlineCode","value":"endpoint","position":{"start":{"line":277,"column":21,"offset":12660},"end":{"line":277,"column":31,"offset":12670},"indent":[]}}],"position":{"start":{"line":277,"column":1,"offset":12640},"end":{"line":277,"column":31,"offset":12670},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, the default value of GraphQL Playground's ","position":{"start":{"line":279,"column":1,"offset":12672},"end":{"line":279,"column":63,"offset":12734},"indent":[]}},{"type":"inlineCode","value":"endpoint","position":{"start":{"line":279,"column":63,"offset":12734},"end":{"line":279,"column":73,"offset":12744},"indent":[]}},{"type":"text","value":" option is determined in different ways by different Node.js framework integrations. In many cases, it's necessary to manually specify ","position":{"start":{"line":279,"column":73,"offset":12744},"end":{"line":279,"column":208,"offset":12879},"indent":[]}},{"type":"inlineCode","value":"playground: {endpoint}","position":{"start":{"line":279,"column":208,"offset":12879},"end":{"line":279,"column":232,"offset":12903},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":279,"column":232,"offset":12903},"end":{"line":279,"column":233,"offset":12904},"indent":[]}}],"position":{"start":{"line":279,"column":1,"offset":12672},"end":{"line":279,"column":233,"offset":12904},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, the default endpoint used by GraphQL Playground is the browser's current URL. In many cases, this means that you don't have to specify ","position":{"start":{"line":281,"column":1,"offset":12906},"end":{"line":281,"column":156,"offset":13061},"indent":[]}},{"type":"inlineCode","value":"endpoint","position":{"start":{"line":281,"column":156,"offset":13061},"end":{"line":281,"column":166,"offset":13071},"indent":[]}},{"type":"text","value":" anymore. If your Apollo Server 2 app specified ","position":{"start":{"line":281,"column":166,"offset":13071},"end":{"line":281,"column":214,"offset":13119},"indent":[]}},{"type":"inlineCode","value":"playground: {endpoint}","position":{"start":{"line":281,"column":214,"offset":13119},"end":{"line":281,"column":238,"offset":13143},"indent":[]}},{"type":"text","value":" (and you wish to continue using GraphQL Playground), try removing ","position":{"start":{"line":281,"column":238,"offset":13143},"end":{"line":281,"column":305,"offset":13210},"indent":[]}},{"type":"inlineCode","value":"endpoint","position":{"start":{"line":281,"column":305,"offset":13210},"end":{"line":281,"column":315,"offset":13220},"indent":[]}},{"type":"text","value":" from the options passed to ","position":{"start":{"line":281,"column":315,"offset":13220},"end":{"line":281,"column":343,"offset":13248},"indent":[]}},{"type":"inlineCode","value":"ApolloServerPluginLandingPageGraphQLPlayground","position":{"start":{"line":281,"column":343,"offset":13248},"end":{"line":281,"column":391,"offset":13296},"indent":[]}},{"type":"text","value":" and see if it works for you.","position":{"start":{"line":281,"column":391,"offset":13296},"end":{"line":281,"column":420,"offset":13325},"indent":[]}}],"position":{"start":{"line":281,"column":1,"offset":12906},"end":{"line":281,"column":420,"offset":13325},"indent":[]}},{"type":"heading","depth":5,"children":[{"type":"text","value":"Specifying ","position":{"start":{"line":283,"column":7,"offset":13333},"end":{"line":283,"column":18,"offset":13344},"indent":[]}},{"type":"inlineCode","value":"settings","position":{"start":{"line":283,"column":18,"offset":13344},"end":{"line":283,"column":28,"offset":13354},"indent":[]}}],"position":{"start":{"line":283,"column":1,"offset":13327},"end":{"line":283,"column":28,"offset":13354},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, the behavior of the ","position":{"start":{"line":285,"column":1,"offset":13356},"end":{"line":285,"column":41,"offset":13396},"indent":[]}},{"type":"inlineCode","value":"settings","position":{"start":{"line":285,"column":41,"offset":13396},"end":{"line":285,"column":51,"offset":13406},"indent":[]}},{"type":"text","value":" GraphQL Playground option can be surprising. If you don't explicitly pass ","position":{"start":{"line":285,"column":51,"offset":13406},"end":{"line":285,"column":126,"offset":13481},"indent":[]}},{"type":"inlineCode","value":"{playground: {settings: {...}}}","position":{"start":{"line":285,"column":126,"offset":13481},"end":{"line":285,"column":159,"offset":13514},"indent":[]}},{"type":"text","value":" then GraphQL Playground always uses settings that are built into its React application (some of which can be adjusted by the user in their browser). However, if you pass ","position":{"start":{"line":285,"column":159,"offset":13514},"end":{"line":285,"column":330,"offset":13685},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"any object","position":{"start":{"line":285,"column":331,"offset":13686},"end":{"line":285,"column":341,"offset":13696},"indent":[]}}],"position":{"start":{"line":285,"column":330,"offset":13685},"end":{"line":285,"column":342,"offset":13697},"indent":[]}},{"type":"text","value":" as ","position":{"start":{"line":285,"column":342,"offset":13697},"end":{"line":285,"column":346,"offset":13701},"indent":[]}},{"type":"inlineCode","value":"playground: {settings: {...}}","position":{"start":{"line":285,"column":346,"offset":13701},"end":{"line":285,"column":377,"offset":13732},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":285,"column":377,"offset":13732},"end":{"line":285,"column":379,"offset":13734},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/apollographql/apollo-server/blob/70a431212bd2d07d68c962cb5ded63ecc6a21963/packages/apollo-server-core/src/playground.ts#L38-L46","children":[{"type":"text","value":"several default value overrides","position":{"start":{"line":285,"column":380,"offset":13735},"end":{"line":285,"column":411,"offset":13766},"indent":[]}}],"position":{"start":{"line":285,"column":379,"offset":13734},"end":{"line":285,"column":560,"offset":13915},"indent":[]}},{"type":"text","value":" take effect.","position":{"start":{"line":285,"column":560,"offset":13915},"end":{"line":285,"column":573,"offset":13928},"indent":[]}}],"position":{"start":{"line":285,"column":1,"offset":13356},"end":{"line":285,"column":573,"offset":13928},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This surprising behavior is removed in Apollo Server 3. All ","position":{"start":{"line":287,"column":1,"offset":13930},"end":{"line":287,"column":61,"offset":13990},"indent":[]}},{"type":"inlineCode","value":"settings","position":{"start":{"line":287,"column":61,"offset":13990},"end":{"line":287,"column":71,"offset":14000},"indent":[]}},{"type":"text","value":" use default values from the GraphQL Playground React app if they aren't specified in the ","position":{"start":{"line":287,"column":71,"offset":14000},"end":{"line":287,"column":161,"offset":14090},"indent":[]}},{"type":"inlineCode","value":"settings","position":{"start":{"line":287,"column":161,"offset":14090},"end":{"line":287,"column":171,"offset":14100},"indent":[]}},{"type":"text","value":" option to ","position":{"start":{"line":287,"column":171,"offset":14100},"end":{"line":287,"column":182,"offset":14111},"indent":[]}},{"type":"inlineCode","value":"ApolloServerPluginLandingPageGraphQLPlayground","position":{"start":{"line":287,"column":182,"offset":14111},"end":{"line":287,"column":230,"offset":14159},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":287,"column":230,"offset":14159},"end":{"line":287,"column":231,"offset":14160},"indent":[]}}],"position":{"start":{"line":287,"column":1,"offset":13930},"end":{"line":287,"column":231,"offset":14160},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If your app does pass in ","position":{"start":{"line":289,"column":1,"offset":14162},"end":{"line":289,"column":26,"offset":14187},"indent":[]}},{"type":"inlineCode","value":"playground: {settings: {...}}","position":{"start":{"line":289,"column":26,"offset":14187},"end":{"line":289,"column":57,"offset":14218},"indent":[]}},{"type":"text","value":" and you want to make sure the settings used in your GraphQL Playground do not change, you should copy any relevant settings from ","position":{"start":{"line":289,"column":57,"offset":14218},"end":{"line":289,"column":187,"offset":14348},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/apollographql/apollo-server/blob/70a431212bd2d07d68c962cb5ded63ecc6a21963/packages/apollo-server-core/src/playground.ts#L38-L46","children":[{"type":"text","value":"the Apollo Server 2 code","position":{"start":{"line":289,"column":188,"offset":14349},"end":{"line":289,"column":212,"offset":14373},"indent":[]}}],"position":{"start":{"line":289,"column":187,"offset":14348},"end":{"line":289,"column":361,"offset":14522},"indent":[]}},{"type":"text","value":" into your app.","position":{"start":{"line":289,"column":361,"offset":14522},"end":{"line":289,"column":376,"offset":14537},"indent":[]}}],"position":{"start":{"line":289,"column":1,"offset":14162},"end":{"line":289,"column":376,"offset":14537},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For example, you could replace:","position":{"start":{"line":291,"column":1,"offset":14539},"end":{"line":291,"column":32,"offset":14570},"indent":[]}}],"position":{"start":{"line":291,"column":1,"offset":14539},"end":{"line":291,"column":32,"offset":14570},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"new ApolloServer({playground: {settings: {'some.setting': true}}})","position":{"start":{"line":293,"column":1,"offset":14572},"end":{"line":295,"column":4,"offset":14656},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"with:","position":{"start":{"line":297,"column":1,"offset":14658},"end":{"line":297,"column":6,"offset":14663},"indent":[]}}],"position":{"start":{"line":297,"column":1,"offset":14658},"end":{"line":297,"column":6,"offset":14663},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"import { ApolloServerPluginLandingPageGraphQLPlayground } from 'apollo-server-core';\nnew ApolloServer({\n  plugins: [\n    ApolloServerPluginLandingPageGraphQLPlayground({\n      settings: {\n        'some.setting': true,\n        'general.betaUpdates': false,\n        'editor.theme': 'dark',\n        'editor.cursorShape': 'line',\n        'editor.reuseHeaders': true,\n        'tracing.hideTracingResponse': true,\n        'queryPlan.hideQueryPlanResponse': true,\n        'editor.fontSize': 14,\n        'editor.fontFamily': `'Source Code Pro', 'Consolas', 'Inconsolata', 'Droid Sans Mono', 'Monaco', monospace`,\n        'request.credentials': 'omit',\n      },\n    }),\n  ],\n});","position":{"start":{"line":299,"column":1,"offset":14665},"end":{"line":319,"column":4,"offset":15352},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Removed constructor options","position":{"start":{"line":322,"column":4,"offset":15358},"end":{"line":322,"column":31,"offset":15385},"indent":[]}}],"position":{"start":{"line":322,"column":1,"offset":15355},"end":{"line":322,"column":31,"offset":15385},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The following ","position":{"start":{"line":324,"column":1,"offset":15387},"end":{"line":324,"column":15,"offset":15401},"indent":[]}},{"type":"inlineCode","value":"ApolloServer","position":{"start":{"line":324,"column":15,"offset":15401},"end":{"line":324,"column":29,"offset":15415},"indent":[]}},{"type":"text","value":" constructor options have been removed in favor of other features or configuration methods.","position":{"start":{"line":324,"column":29,"offset":15415},"end":{"line":324,"column":120,"offset":15506},"indent":[]}}],"position":{"start":{"line":324,"column":1,"offset":15387},"end":{"line":324,"column":120,"offset":15506},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"inlineCode","value":"extensions","position":{"start":{"line":326,"column":5,"offset":15512},"end":{"line":326,"column":17,"offset":15524},"indent":[]}}],"position":{"start":{"line":326,"column":1,"offset":15508},"end":{"line":326,"column":17,"offset":15524},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Apollo Server 3 removes support for the ","position":{"start":{"line":328,"column":1,"offset":15526},"end":{"line":328,"column":41,"offset":15566},"indent":[]}},{"type":"inlineCode","value":"graphql-extensions","position":{"start":{"line":328,"column":41,"offset":15566},"end":{"line":328,"column":61,"offset":15586},"indent":[]}},{"type":"text","value":" API, which was used to extend Apollo Server's functionality. This API has numerous limitations relative to the ","position":{"start":{"line":328,"column":61,"offset":15586},"end":{"line":328,"column":173,"offset":15698},"indent":[]}},{"type":"link","title":null,"url":"./integrations/plugins/","children":[{"type":"text","value":"plugins API","position":{"start":{"line":328,"column":174,"offset":15699},"end":{"line":328,"column":185,"offset":15710},"indent":[]}}],"position":{"start":{"line":328,"column":173,"offset":15698},"end":{"line":328,"column":211,"offset":15736},"indent":[]}},{"type":"text","value":" introduced in Apollo Server v2.2.0.","position":{"start":{"line":328,"column":211,"offset":15736},"end":{"line":328,"column":247,"offset":15772},"indent":[]}}],"position":{"start":{"line":328,"column":1,"offset":15526},"end":{"line":328,"column":247,"offset":15772},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Unlike ","position":{"start":{"line":330,"column":1,"offset":15774},"end":{"line":330,"column":8,"offset":15781},"indent":[]}},{"type":"inlineCode","value":"graphql-extensions","position":{"start":{"line":330,"column":8,"offset":15781},"end":{"line":330,"column":28,"offset":15801},"indent":[]}},{"type":"text","value":", the plugins API enables cross-request state, and its hooks virtually all interact with the same ","position":{"start":{"line":330,"column":28,"offset":15801},"end":{"line":330,"column":126,"offset":15899},"indent":[]}},{"type":"inlineCode","value":"GraphQLRequestContext","position":{"start":{"line":330,"column":126,"offset":15899},"end":{"line":330,"column":149,"offset":15922},"indent":[]}},{"type":"text","value":" object.","position":{"start":{"line":330,"column":149,"offset":15922},"end":{"line":330,"column":157,"offset":15930},"indent":[]}}],"position":{"start":{"line":330,"column":1,"offset":15774},"end":{"line":330,"column":157,"offset":15930},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you've written your own extensions (passed to ","position":{"start":{"line":332,"column":1,"offset":15932},"end":{"line":332,"column":50,"offset":15981},"indent":[]}},{"type":"inlineCode","value":"new ApolloServer({extensions: ...})","position":{"start":{"line":332,"column":50,"offset":15981},"end":{"line":332,"column":87,"offset":16018},"indent":[]}},{"type":"text","value":"), you should ","position":{"start":{"line":332,"column":87,"offset":16018},"end":{"line":332,"column":101,"offset":16032},"indent":[]}},{"type":"link","title":null,"url":"./integrations/plugins/","children":[{"type":"text","value":"rewrite them as plugins","position":{"start":{"line":332,"column":102,"offset":16033},"end":{"line":332,"column":125,"offset":16056},"indent":[]}}],"position":{"start":{"line":332,"column":101,"offset":16032},"end":{"line":332,"column":151,"offset":16082},"indent":[]}},{"type":"text","value":" before upgrading to Apollo Server 3.","position":{"start":{"line":332,"column":151,"offset":16082},"end":{"line":332,"column":188,"offset":16119},"indent":[]}}],"position":{"start":{"line":332,"column":1,"offset":15932},"end":{"line":332,"column":188,"offset":16119},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"inlineCode","value":"engine","position":{"start":{"line":335,"column":5,"offset":16126},"end":{"line":335,"column":13,"offset":16134},"indent":[]}}],"position":{"start":{"line":335,"column":1,"offset":16122},"end":{"line":335,"column":13,"offset":16134},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"\"Engine\" is a previous name of ","position":{"start":{"line":337,"column":1,"offset":16136},"end":{"line":337,"column":32,"offset":16167},"indent":[]}},{"type":"link","title":null,"url":"https://www.apollographql.com/docs/studio/","children":[{"type":"text","value":"Apollo Studio","position":{"start":{"line":337,"column":33,"offset":16168},"end":{"line":337,"column":46,"offset":16181},"indent":[]}}],"position":{"start":{"line":337,"column":32,"offset":16167},"end":{"line":337,"column":91,"offset":16226},"indent":[]}},{"type":"text","value":". Prior to Apollo Server v2.18.0, you passed the ","position":{"start":{"line":337,"column":91,"offset":16226},"end":{"line":337,"column":140,"offset":16275},"indent":[]}},{"type":"inlineCode","value":"engine","position":{"start":{"line":337,"column":140,"offset":16275},"end":{"line":337,"column":148,"offset":16283},"indent":[]}},{"type":"text","value":" constructor option to configure how Apollo Server communicates with Studio. Additionally, you could specifying your Apollo API key with the ","position":{"start":{"line":337,"column":148,"offset":16283},"end":{"line":337,"column":289,"offset":16424},"indent":[]}},{"type":"inlineCode","value":"ENGINE_API_KEY","position":{"start":{"line":337,"column":289,"offset":16424},"end":{"line":337,"column":305,"offset":16440},"indent":[]}},{"type":"text","value":" environment variable, and you could specify a graph variant with the ","position":{"start":{"line":337,"column":305,"offset":16440},"end":{"line":337,"column":375,"offset":16510},"indent":[]}},{"type":"inlineCode","value":"ENGINE_SCHEMA_TAG","position":{"start":{"line":337,"column":375,"offset":16510},"end":{"line":337,"column":394,"offset":16529},"indent":[]}},{"type":"text","value":" environment variable.","position":{"start":{"line":337,"column":394,"offset":16529},"end":{"line":337,"column":416,"offset":16551},"indent":[]}}],"position":{"start":{"line":337,"column":1,"offset":16136},"end":{"line":337,"column":416,"offset":16551},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In later versions of Apollo Server (including Apollo Server 3), you instead provide this configuration via a combination of the ","position":{"start":{"line":339,"column":1,"offset":16553},"end":{"line":339,"column":129,"offset":16681},"indent":[]}},{"type":"inlineCode","value":"apollo","position":{"start":{"line":339,"column":129,"offset":16681},"end":{"line":339,"column":137,"offset":16689},"indent":[]}},{"type":"text","value":" constructor option, plugins, and ","position":{"start":{"line":339,"column":137,"offset":16689},"end":{"line":339,"column":171,"offset":16723},"indent":[]}},{"type":"inlineCode","value":"APOLLO_","position":{"start":{"line":339,"column":171,"offset":16723},"end":{"line":339,"column":180,"offset":16732},"indent":[]}},{"type":"text","value":"-prefixed environment variables. Apollo Server 3 does not support the ","position":{"start":{"line":339,"column":180,"offset":16732},"end":{"line":339,"column":250,"offset":16802},"indent":[]}},{"type":"inlineCode","value":"engine","position":{"start":{"line":339,"column":250,"offset":16802},"end":{"line":339,"column":258,"offset":16810},"indent":[]}},{"type":"text","value":" constructor option or the ","position":{"start":{"line":339,"column":258,"offset":16810},"end":{"line":339,"column":285,"offset":16837},"indent":[]}},{"type":"inlineCode","value":"ENGINE_","position":{"start":{"line":339,"column":285,"offset":16837},"end":{"line":339,"column":294,"offset":16846},"indent":[]}},{"type":"text","value":"-prefixed environment variables.","position":{"start":{"line":339,"column":294,"offset":16846},"end":{"line":339,"column":326,"offset":16878},"indent":[]}}],"position":{"start":{"line":339,"column":1,"offset":16553},"end":{"line":339,"column":326,"offset":16878},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If your project still uses the ","position":{"start":{"line":341,"column":1,"offset":16880},"end":{"line":341,"column":32,"offset":16911},"indent":[]}},{"type":"inlineCode","value":"engine","position":{"start":{"line":341,"column":32,"offset":16911},"end":{"line":341,"column":40,"offset":16919},"indent":[]}},{"type":"text","value":" option or the ","position":{"start":{"line":341,"column":40,"offset":16919},"end":{"line":341,"column":55,"offset":16934},"indent":[]}},{"type":"inlineCode","value":"ENGINE_","position":{"start":{"line":341,"column":55,"offset":16934},"end":{"line":341,"column":64,"offset":16943},"indent":[]}},{"type":"text","value":"-prefixed environment variables, see ","position":{"start":{"line":341,"column":64,"offset":16943},"end":{"line":341,"column":101,"offset":16980},"indent":[]}},{"type":"link","title":null,"url":"../v2/migration-engine-plugins","children":[{"type":"text","value":"Migrating from the ","position":{"start":{"line":341,"column":102,"offset":16981},"end":{"line":341,"column":121,"offset":17000},"indent":[]}},{"type":"inlineCode","value":"engine","position":{"start":{"line":341,"column":121,"offset":17000},"end":{"line":341,"column":129,"offset":17008},"indent":[]}},{"type":"text","value":" option","position":{"start":{"line":341,"column":129,"offset":17008},"end":{"line":341,"column":136,"offset":17015},"indent":[]}}],"position":{"start":{"line":341,"column":101,"offset":16980},"end":{"line":341,"column":169,"offset":17048},"indent":[]}},{"type":"text","value":" before upgrading to Apollo Server 3.","position":{"start":{"line":341,"column":169,"offset":17048},"end":{"line":341,"column":206,"offset":17085},"indent":[]}}],"position":{"start":{"line":341,"column":1,"offset":16880},"end":{"line":341,"column":206,"offset":17085},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Note that if you are using Studio, make sure to ","position":{"start":{"line":343,"column":1,"offset":17087},"end":{"line":343,"column":49,"offset":17135},"indent":[]}},{"type":"link","title":null,"url":"#guessing-apollo-studio-graph-id-from-api-key","children":[{"type":"text","value":"set your graph ref or graph ID","position":{"start":{"line":343,"column":50,"offset":17136},"end":{"line":343,"column":80,"offset":17166},"indent":[]}}],"position":{"start":{"line":343,"column":49,"offset":17135},"end":{"line":343,"column":128,"offset":17214},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":343,"column":128,"offset":17214},"end":{"line":343,"column":129,"offset":17215},"indent":[]}}],"position":{"start":{"line":343,"column":1,"offset":17087},"end":{"line":343,"column":129,"offset":17215},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"inlineCode","value":"schemaDirectives","position":{"start":{"line":345,"column":5,"offset":17221},"end":{"line":345,"column":23,"offset":17239},"indent":[]}}],"position":{"start":{"line":345,"column":1,"offset":17217},"end":{"line":345,"column":23,"offset":17239},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, you can pass ","position":{"start":{"line":347,"column":1,"offset":17241},"end":{"line":347,"column":34,"offset":17274},"indent":[]}},{"type":"inlineCode","value":"schemaDirectives","position":{"start":{"line":347,"column":34,"offset":17274},"end":{"line":347,"column":52,"offset":17292},"indent":[]}},{"type":"text","value":" to ","position":{"start":{"line":347,"column":52,"offset":17292},"end":{"line":347,"column":56,"offset":17296},"indent":[]}},{"type":"inlineCode","value":"new ApolloServer","position":{"start":{"line":347,"column":56,"offset":17296},"end":{"line":347,"column":74,"offset":17314},"indent":[]}},{"type":"text","value":" alongside ","position":{"start":{"line":347,"column":74,"offset":17314},"end":{"line":347,"column":85,"offset":17325},"indent":[]}},{"type":"inlineCode","value":"typeDefs","position":{"start":{"line":347,"column":85,"offset":17325},"end":{"line":347,"column":95,"offset":17335},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":347,"column":95,"offset":17335},"end":{"line":347,"column":100,"offset":17340},"indent":[]}},{"type":"inlineCode","value":"resolvers","position":{"start":{"line":347,"column":100,"offset":17340},"end":{"line":347,"column":111,"offset":17351},"indent":[]}},{"type":"text","value":". These arguments are all passed through to the ","position":{"start":{"line":347,"column":111,"offset":17351},"end":{"line":347,"column":159,"offset":17399},"indent":[]}},{"type":"link","title":null,"url":"https://www.graphql-tools.com/docs/generate-schema/#makeexecutableschemaoptions","children":[{"type":"inlineCode","value":"makeExecutableSchema","position":{"start":{"line":347,"column":160,"offset":17400},"end":{"line":347,"column":182,"offset":17422},"indent":[]}},{"type":"text","value":" function","position":{"start":{"line":347,"column":182,"offset":17422},"end":{"line":347,"column":191,"offset":17431},"indent":[]}}],"position":{"start":{"line":347,"column":159,"offset":17399},"end":{"line":347,"column":273,"offset":17513},"indent":[]}},{"type":"text","value":"  from the ","position":{"start":{"line":347,"column":273,"offset":17513},"end":{"line":347,"column":284,"offset":17524},"indent":[]}},{"type":"inlineCode","value":"graphql-tools","position":{"start":{"line":347,"column":284,"offset":17524},"end":{"line":347,"column":299,"offset":17539},"indent":[]}},{"type":"text","value":" package.","position":{"start":{"line":347,"column":299,"offset":17539},"end":{"line":347,"column":308,"offset":17548},"indent":[]}}],"position":{"start":{"line":347,"column":1,"offset":17241},"end":{"line":347,"column":308,"offset":17548},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":349,"column":1,"offset":17550},"end":{"line":349,"column":5,"offset":17554},"indent":[]}},{"type":"inlineCode","value":"graphql-tools","position":{"start":{"line":349,"column":5,"offset":17554},"end":{"line":349,"column":20,"offset":17569},"indent":[]}},{"type":"text","value":" project deprecated the  ","position":{"start":{"line":349,"column":20,"offset":17569},"end":{"line":349,"column":45,"offset":17594},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/ardatan/graphql-tools/blob/%40graphql-tools/schema%407.1.5/website/docs/legacy-schema-directives.md","children":[{"type":"inlineCode","value":"schemaDirectives","position":{"start":{"line":349,"column":46,"offset":17595},"end":{"line":349,"column":64,"offset":17613},"indent":[]}},{"type":"text","value":" feature","position":{"start":{"line":349,"column":64,"offset":17613},"end":{"line":349,"column":72,"offset":17621},"indent":[]}}],"position":{"start":{"line":349,"column":45,"offset":17594},"end":{"line":349,"column":193,"offset":17742},"indent":[]}},{"type":"text","value":" and removed it in v8 of ","position":{"start":{"line":349,"column":193,"offset":17742},"end":{"line":349,"column":218,"offset":17767},"indent":[]}},{"type":"inlineCode","value":"@graphql-tools/schema","position":{"start":{"line":349,"column":218,"offset":17767},"end":{"line":349,"column":241,"offset":17790},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":349,"column":241,"offset":17790},"end":{"line":349,"column":242,"offset":17791},"indent":[]}}],"position":{"start":{"line":349,"column":1,"offset":17550},"end":{"line":349,"column":242,"offset":17791},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, the ","position":{"start":{"line":351,"column":1,"offset":17793},"end":{"line":351,"column":25,"offset":17817},"indent":[]}},{"type":"inlineCode","value":"ApolloServer","position":{"start":{"line":351,"column":25,"offset":17817},"end":{"line":351,"column":39,"offset":17831},"indent":[]}},{"type":"text","value":" constructor now only passes ","position":{"start":{"line":351,"column":39,"offset":17831},"end":{"line":351,"column":68,"offset":17860},"indent":[]}},{"type":"inlineCode","value":"typeDefs","position":{"start":{"line":351,"column":68,"offset":17860},"end":{"line":351,"column":78,"offset":17870},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":351,"column":78,"offset":17870},"end":{"line":351,"column":80,"offset":17872},"indent":[]}},{"type":"inlineCode","value":"resolvers","position":{"start":{"line":351,"column":80,"offset":17872},"end":{"line":351,"column":91,"offset":17883},"indent":[]}},{"type":"text","value":", and ","position":{"start":{"line":351,"column":91,"offset":17883},"end":{"line":351,"column":97,"offset":17889},"indent":[]}},{"type":"inlineCode","value":"parseOptions","position":{"start":{"line":351,"column":97,"offset":17889},"end":{"line":351,"column":111,"offset":17903},"indent":[]}},{"type":"text","value":" through to ","position":{"start":{"line":351,"column":111,"offset":17903},"end":{"line":351,"column":123,"offset":17915},"indent":[]}},{"type":"inlineCode","value":"makeExecutableSchema","position":{"start":{"line":351,"column":123,"offset":17915},"end":{"line":351,"column":145,"offset":17937},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":351,"column":145,"offset":17937},"end":{"line":351,"column":146,"offset":17938},"indent":[]}}],"position":{"start":{"line":351,"column":1,"offset":17793},"end":{"line":351,"column":146,"offset":17938},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you would like to still use ","position":{"start":{"line":353,"column":1,"offset":17940},"end":{"line":353,"column":32,"offset":17971},"indent":[]}},{"type":"inlineCode","value":"schemaDirectives","position":{"start":{"line":353,"column":32,"offset":17971},"end":{"line":353,"column":50,"offset":17989},"indent":[]}},{"type":"text","value":", you can install an older version of ","position":{"start":{"line":353,"column":50,"offset":17989},"end":{"line":353,"column":88,"offset":18027},"indent":[]}},{"type":"inlineCode","value":"@graphql-tools/schema","position":{"start":{"line":353,"column":88,"offset":18027},"end":{"line":353,"column":111,"offset":18050},"indent":[]}},{"type":"text","value":" yourself with ","position":{"start":{"line":353,"column":111,"offset":18050},"end":{"line":353,"column":126,"offset":18065},"indent":[]}},{"type":"inlineCode","value":"npm install @graphql-tools/schema@7","position":{"start":{"line":353,"column":126,"offset":18065},"end":{"line":353,"column":163,"offset":18102},"indent":[]}},{"type":"text","value":" and call ","position":{"start":{"line":353,"column":163,"offset":18102},"end":{"line":353,"column":173,"offset":18112},"indent":[]}},{"type":"inlineCode","value":"makeExecutableSchema","position":{"start":{"line":353,"column":173,"offset":18112},"end":{"line":353,"column":195,"offset":18134},"indent":[]}},{"type":"text","value":" yourself and pass its returned schema as the ","position":{"start":{"line":353,"column":195,"offset":18134},"end":{"line":353,"column":241,"offset":18180},"indent":[]}},{"type":"inlineCode","value":"schema","position":{"start":{"line":353,"column":241,"offset":18180},"end":{"line":353,"column":249,"offset":18188},"indent":[]}},{"type":"text","value":" constructor option.","position":{"start":{"line":353,"column":249,"offset":18188},"end":{"line":353,"column":269,"offset":18208},"indent":[]}}],"position":{"start":{"line":353,"column":1,"offset":17940},"end":{"line":353,"column":269,"offset":18208},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"That is, you can replace:","position":{"start":{"line":355,"column":1,"offset":18210},"end":{"line":355,"column":26,"offset":18235},"indent":[]}}],"position":{"start":{"line":355,"column":1,"offset":18210},"end":{"line":355,"column":26,"offset":18235},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"new ApolloServer({\n  typeDefs,\n  resolvers,\n  schemaDirectives,\n});","position":{"start":{"line":357,"column":1,"offset":18237},"end":{"line":363,"column":4,"offset":18322},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"with:","position":{"start":{"line":365,"column":1,"offset":18324},"end":{"line":365,"column":6,"offset":18329},"indent":[]}}],"position":{"start":{"line":365,"column":1,"offset":18324},"end":{"line":365,"column":6,"offset":18329},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"// Make sure you are using v7, not anything newer!\nimport { makeExecutableSchema } from '@graphql-tools/schema';\n\nnew ApolloServer({\n  schema: makeExecutableSchema({\n    typeDefs,\n    resolvers,\n    schemaDirectives,\n  }),\n});","position":{"start":{"line":367,"column":1,"offset":18331},"end":{"line":378,"column":4,"offset":18575},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This can help you with the initial migration to Apollo Server 3. As ","position":{"start":{"line":380,"column":1,"offset":18577},"end":{"line":380,"column":69,"offset":18645},"indent":[]}},{"type":"inlineCode","value":"schemaDirectives","position":{"start":{"line":380,"column":69,"offset":18645},"end":{"line":380,"column":87,"offset":18663},"indent":[]}},{"type":"text","value":" is no longer part of the actively maintained version of ","position":{"start":{"line":380,"column":87,"offset":18663},"end":{"line":380,"column":144,"offset":18720},"indent":[]}},{"type":"inlineCode","value":"@graphql-tools/schema","position":{"start":{"line":380,"column":144,"offset":18720},"end":{"line":380,"column":167,"offset":18743},"indent":[]}},{"type":"text","value":", we recommend that once you've successfully migrated to Apollo Server 3, you then port your schema directive to the ","position":{"start":{"line":380,"column":167,"offset":18743},"end":{"line":380,"column":284,"offset":18860},"indent":[]}},{"type":"link","title":null,"url":"https://www.graphql-tools.com/docs/schema-directives","children":[{"type":"text","value":"newer schema directives API","position":{"start":{"line":380,"column":285,"offset":18861},"end":{"line":380,"column":312,"offset":18888},"indent":[]}}],"position":{"start":{"line":380,"column":284,"offset":18860},"end":{"line":380,"column":367,"offset":18943},"indent":[]}},{"type":"text","value":" which uses the ","position":{"start":{"line":380,"column":367,"offset":18943},"end":{"line":380,"column":383,"offset":18959},"indent":[]}},{"type":"inlineCode","value":"mapSchema","position":{"start":{"line":380,"column":383,"offset":18959},"end":{"line":380,"column":394,"offset":18970},"indent":[]}},{"type":"text","value":" function in ","position":{"start":{"line":380,"column":394,"offset":18970},"end":{"line":380,"column":407,"offset":18983},"indent":[]}},{"type":"inlineCode","value":"@graphql-tools/utils","position":{"start":{"line":380,"column":407,"offset":18983},"end":{"line":380,"column":429,"offset":19005},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":380,"column":429,"offset":19005},"end":{"line":380,"column":430,"offset":19006},"indent":[]}}],"position":{"start":{"line":380,"column":1,"offset":18577},"end":{"line":380,"column":430,"offset":19006},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, there are subtle differences between providing a schema with ","position":{"start":{"line":382,"column":3,"offset":19010},"end":{"line":382,"column":84,"offset":19091},"indent":[]}},{"type":"inlineCode","value":"schema","position":{"start":{"line":382,"column":84,"offset":19091},"end":{"line":382,"column":92,"offset":19099},"indent":[]}},{"type":"text","value":" versus providing it with ","position":{"start":{"line":382,"column":92,"offset":19099},"end":{"line":382,"column":118,"offset":19125},"indent":[]}},{"type":"inlineCode","value":"typeDefs","position":{"start":{"line":382,"column":118,"offset":19125},"end":{"line":382,"column":128,"offset":19135},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":382,"column":128,"offset":19135},"end":{"line":382,"column":133,"offset":19140},"indent":[]}},{"type":"inlineCode","value":"resolvers","position":{"start":{"line":382,"column":133,"offset":19140},"end":{"line":382,"column":144,"offset":19151},"indent":[]}},{"type":"text","value":". For example, the automatic definition of the ","position":{"start":{"line":382,"column":144,"offset":19151},"end":{"line":382,"column":191,"offset":19198},"indent":[]}},{"type":"inlineCode","value":"@cacheControl","position":{"start":{"line":382,"column":191,"offset":19198},"end":{"line":382,"column":206,"offset":19213},"indent":[]}},{"type":"text","value":" directive is added only in the latter case. These differences are removed in Apollo Server 3 (for example, the definition of the ","position":{"start":{"line":382,"column":206,"offset":19213},"end":{"line":382,"column":336,"offset":19343},"indent":[]}},{"type":"inlineCode","value":"@cacheControl","position":{"start":{"line":382,"column":336,"offset":19343},"end":{"line":382,"column":351,"offset":19358},"indent":[]}},{"type":"text","value":" directive is ","position":{"start":{"line":382,"column":351,"offset":19358},"end":{"line":382,"column":365,"offset":19372},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"never","position":{"start":{"line":382,"column":366,"offset":19373},"end":{"line":382,"column":371,"offset":19378},"indent":[]}}],"position":{"start":{"line":382,"column":365,"offset":19372},"end":{"line":382,"column":372,"offset":19379},"indent":[]}},{"type":"text","value":" automatically added).","position":{"start":{"line":382,"column":372,"offset":19379},"end":{"line":382,"column":394,"offset":19401},"indent":[]}}],"position":{"start":{"line":382,"column":3,"offset":19010},"end":{"line":382,"column":394,"offset":19401},"indent":[]}}],"position":{"start":{"line":382,"column":1,"offset":19008},"end":{"line":382,"column":394,"offset":19401},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"inlineCode","value":"tracing","position":{"start":{"line":384,"column":5,"offset":19407},"end":{"line":384,"column":14,"offset":19416},"indent":[]}}],"position":{"start":{"line":384,"column":1,"offset":19403},"end":{"line":384,"column":14,"offset":19416},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, the ","position":{"start":{"line":386,"column":1,"offset":19418},"end":{"line":386,"column":25,"offset":19442},"indent":[]}},{"type":"inlineCode","value":"tracing","position":{"start":{"line":386,"column":25,"offset":19442},"end":{"line":386,"column":34,"offset":19451},"indent":[]}},{"type":"text","value":" constructor option enables a trace mechanism implemented in the ","position":{"start":{"line":386,"column":34,"offset":19451},"end":{"line":386,"column":99,"offset":19516},"indent":[]}},{"type":"inlineCode","value":"apollo-tracing","position":{"start":{"line":386,"column":99,"offset":19516},"end":{"line":386,"column":115,"offset":19532},"indent":[]}},{"type":"text","value":" package. This package uses a comparatively inefficient JSON format for execution traces returned via the ","position":{"start":{"line":386,"column":115,"offset":19532},"end":{"line":386,"column":221,"offset":19638},"indent":[]}},{"type":"inlineCode","value":"tracing","position":{"start":{"line":386,"column":221,"offset":19638},"end":{"line":386,"column":230,"offset":19647},"indent":[]}},{"type":"text","value":" GraphQL response extension. The format is consumed only by the deprecated ","position":{"start":{"line":386,"column":230,"offset":19647},"end":{"line":386,"column":305,"offset":19722},"indent":[]}},{"type":"inlineCode","value":"engineproxy","position":{"start":{"line":386,"column":305,"offset":19722},"end":{"line":386,"column":318,"offset":19735},"indent":[]}},{"type":"text","value":" and GraphQL Playground. It is ","position":{"start":{"line":386,"column":318,"offset":19735},"end":{"line":386,"column":349,"offset":19766},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"not","position":{"start":{"line":386,"column":350,"offset":19767},"end":{"line":386,"column":353,"offset":19770},"indent":[]}}],"position":{"start":{"line":386,"column":349,"offset":19766},"end":{"line":386,"column":354,"offset":19771},"indent":[]}},{"type":"text","value":" the tracing format used for Apollo Studio usage reporting or federated inline traces.","position":{"start":{"line":386,"column":354,"offset":19771},"end":{"line":386,"column":440,"offset":19857},"indent":[]}}],"position":{"start":{"line":386,"column":1,"offset":19418},"end":{"line":386,"column":440,"offset":19857},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":388,"column":1,"offset":19859},"end":{"line":388,"column":5,"offset":19863},"indent":[]}},{"type":"inlineCode","value":"tracing","position":{"start":{"line":388,"column":5,"offset":19863},"end":{"line":388,"column":14,"offset":19872},"indent":[]}},{"type":"text","value":" constructor option is removed in Apollo Server 3. The ","position":{"start":{"line":388,"column":14,"offset":19872},"end":{"line":388,"column":69,"offset":19927},"indent":[]}},{"type":"inlineCode","value":"apollo-tracing","position":{"start":{"line":388,"column":69,"offset":19927},"end":{"line":388,"column":85,"offset":19943},"indent":[]}},{"type":"text","value":" package has been deprecated and is no longer being published.","position":{"start":{"line":388,"column":85,"offset":19943},"end":{"line":388,"column":147,"offset":20005},"indent":[]}}],"position":{"start":{"line":388,"column":1,"offset":19859},"end":{"line":388,"column":147,"offset":20005},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you rely on this deprecated trace format, you might be able to use the old version of ","position":{"start":{"line":390,"column":1,"offset":20007},"end":{"line":390,"column":90,"offset":20096},"indent":[]}},{"type":"inlineCode","value":"apollo-server-tracing","position":{"start":{"line":390,"column":90,"offset":20096},"end":{"line":390,"column":113,"offset":20119},"indent":[]}},{"type":"text","value":" directly:","position":{"start":{"line":390,"column":113,"offset":20119},"end":{"line":390,"column":123,"offset":20129},"indent":[]}}],"position":{"start":{"line":390,"column":1,"offset":20007},"end":{"line":390,"column":123,"offset":20129},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"new ApolloServer({\n  plugins: [\n    require('apollo-tracing').plugin()\n  ]\n});","position":{"start":{"line":392,"column":1,"offset":20131},"end":{"line":398,"column":4,"offset":20227},"indent":[1,1,1,1,1,1]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"This workaround has not been tested! If you need this to work and it doesn't, please file an issue and we will investigate a fix to enable support in Apollo Server 3.","position":{"start":{"line":400,"column":3,"offset":20231},"end":{"line":400,"column":169,"offset":20397},"indent":[]}}],"position":{"start":{"line":400,"column":3,"offset":20231},"end":{"line":400,"column":169,"offset":20397},"indent":[]}}],"position":{"start":{"line":400,"column":1,"offset":20229},"end":{"line":400,"column":169,"offset":20397},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"inlineCode","value":"cacheControl","position":{"start":{"line":402,"column":5,"offset":20403},"end":{"line":402,"column":19,"offset":20417},"indent":[]}}],"position":{"start":{"line":402,"column":1,"offset":20399},"end":{"line":402,"column":19,"offset":20417},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, ","position":{"start":{"line":404,"column":1,"offset":20419},"end":{"line":404,"column":21,"offset":20439},"indent":[]}},{"type":"link","title":null,"url":"../performance/caching/","children":[{"type":"text","value":"cache policy support","position":{"start":{"line":404,"column":22,"offset":20440},"end":{"line":404,"column":42,"offset":20460},"indent":[]}}],"position":{"start":{"line":404,"column":21,"offset":20439},"end":{"line":404,"column":68,"offset":20486},"indent":[]}},{"type":"text","value":" is configured via the ","position":{"start":{"line":404,"column":68,"offset":20486},"end":{"line":404,"column":91,"offset":20509},"indent":[]}},{"type":"inlineCode","value":"cacheControl","position":{"start":{"line":404,"column":91,"offset":20509},"end":{"line":404,"column":105,"offset":20523},"indent":[]}},{"type":"text","value":" constructor option. There are several improvements to the semantics of cache policies in Apollo Server 3, as well as changes to how caching is configured.","position":{"start":{"line":404,"column":105,"offset":20523},"end":{"line":404,"column":260,"offset":20678},"indent":[]}}],"position":{"start":{"line":404,"column":1,"offset":20419},"end":{"line":404,"column":260,"offset":20678},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":406,"column":1,"offset":20680},"end":{"line":406,"column":5,"offset":20684},"indent":[]}},{"type":"inlineCode","value":"cacheControl","position":{"start":{"line":406,"column":5,"offset":20684},"end":{"line":406,"column":19,"offset":20698},"indent":[]}},{"type":"text","value":" constructor option is removed in Apollo Server 3. To customize cache control, you instead manually install the ","position":{"start":{"line":406,"column":19,"offset":20698},"end":{"line":406,"column":131,"offset":20810},"indent":[]}},{"type":"link","title":null,"url":"./api/plugin/cache-control/","children":[{"type":"text","value":"cache control plugin","position":{"start":{"line":406,"column":132,"offset":20811},"end":{"line":406,"column":152,"offset":20831},"indent":[]}}],"position":{"start":{"line":406,"column":131,"offset":20810},"end":{"line":406,"column":182,"offset":20861},"indent":[]}},{"type":"text","value":" and provide custom options to it.","position":{"start":{"line":406,"column":182,"offset":20861},"end":{"line":406,"column":216,"offset":20895},"indent":[]}}],"position":{"start":{"line":406,"column":1,"offset":20680},"end":{"line":406,"column":216,"offset":20895},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For example, if you currently provide ","position":{"start":{"line":408,"column":1,"offset":20897},"end":{"line":408,"column":39,"offset":20935},"indent":[]}},{"type":"inlineCode","value":"defaultMaxAge","position":{"start":{"line":408,"column":39,"offset":20935},"end":{"line":408,"column":54,"offset":20950},"indent":[]}},{"type":"text","value":" and/or ","position":{"start":{"line":408,"column":54,"offset":20950},"end":{"line":408,"column":62,"offset":20958},"indent":[]}},{"type":"inlineCode","value":"calculateHttpHeaders","position":{"start":{"line":408,"column":62,"offset":20958},"end":{"line":408,"column":84,"offset":20980},"indent":[]}},{"type":"text","value":" to ","position":{"start":{"line":408,"column":84,"offset":20980},"end":{"line":408,"column":88,"offset":20984},"indent":[]}},{"type":"inlineCode","value":"cacheControl","position":{"start":{"line":408,"column":88,"offset":20984},"end":{"line":408,"column":102,"offset":20998},"indent":[]}},{"type":"text","value":" like so:","position":{"start":{"line":408,"column":102,"offset":20998},"end":{"line":408,"column":111,"offset":21007},"indent":[]}}],"position":{"start":{"line":408,"column":1,"offset":20897},"end":{"line":408,"column":111,"offset":21007},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"new ApolloServer({\n  cacheControl: {\n    defaultMaxAge,\n    calculateHttpHeaders,\n  },\n});","position":{"start":{"line":410,"column":1,"offset":21009},"end":{"line":417,"column":4,"offset":21117},"indent":[1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You now provide them like so:","position":{"start":{"line":419,"column":1,"offset":21119},"end":{"line":419,"column":30,"offset":21148},"indent":[]}}],"position":{"start":{"line":419,"column":1,"offset":21119},"end":{"line":419,"column":30,"offset":21148},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"import { ApolloServerPluginCacheControl } from 'apollo-server-core';\n\nnew ApolloServer({\n  plugins: [\n    ApolloServerPluginCacheControl({\n      defaultMaxAge,\n      calculateHttpHeaders,\n    }),\n  ],\n})","position":{"start":{"line":421,"column":1,"offset":21150},"end":{"line":432,"column":4,"offset":21371},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If you currently pass ","position":{"start":{"line":434,"column":1,"offset":21373},"end":{"line":434,"column":23,"offset":21395},"indent":[]}},{"type":"inlineCode","value":"cacheControl: false","position":{"start":{"line":434,"column":23,"offset":21395},"end":{"line":434,"column":44,"offset":21416},"indent":[]}},{"type":"text","value":" like so:","position":{"start":{"line":434,"column":44,"offset":21416},"end":{"line":434,"column":53,"offset":21425},"indent":[]}}],"position":{"start":{"line":434,"column":1,"offset":21373},"end":{"line":434,"column":53,"offset":21425},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"new ApolloServer({\n  cacheControl: false,\n});","position":{"start":{"line":436,"column":1,"offset":21427},"end":{"line":440,"column":4,"offset":21490},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You now install the disabling plugin like so:","position":{"start":{"line":442,"column":1,"offset":21492},"end":{"line":442,"column":46,"offset":21537},"indent":[]}}],"position":{"start":{"line":442,"column":1,"offset":21492},"end":{"line":442,"column":46,"offset":21537},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"import { ApolloServerPluginCacheControlDisabled } from 'apollo-server-core';\n\nnew ApolloServer({\n  plugins: [\n    ApolloServerPluginCacheControlDisabled(),\n  ],\n})","position":{"start":{"line":444,"column":1,"offset":21539},"end":{"line":452,"column":4,"offset":21720},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, ","position":{"start":{"line":454,"column":1,"offset":21722},"end":{"line":454,"column":21,"offset":21742},"indent":[]}},{"type":"inlineCode","value":"cacheControl: true","position":{"start":{"line":454,"column":21,"offset":21742},"end":{"line":454,"column":41,"offset":21762},"indent":[]}},{"type":"text","value":" was a shorthand for setting ","position":{"start":{"line":454,"column":41,"offset":21762},"end":{"line":454,"column":70,"offset":21791},"indent":[]}},{"type":"inlineCode","value":"cacheControl: {stripFormattedExtensions: false, calculateHttpHeaders: false}","position":{"start":{"line":454,"column":70,"offset":21791},"end":{"line":454,"column":148,"offset":21869},"indent":[]}},{"type":"text","value":". If you either passed ","position":{"start":{"line":454,"column":148,"offset":21869},"end":{"line":454,"column":171,"offset":21892},"indent":[]}},{"type":"inlineCode","value":"cacheControl: true","position":{"start":{"line":454,"column":171,"offset":21892},"end":{"line":454,"column":191,"offset":21912},"indent":[]}},{"type":"text","value":" or explicitly passed ","position":{"start":{"line":454,"column":191,"offset":21912},"end":{"line":454,"column":213,"offset":21934},"indent":[]}},{"type":"inlineCode","value":"stripFormattedExtensions: false","position":{"start":{"line":454,"column":213,"offset":21934},"end":{"line":454,"column":246,"offset":21967},"indent":[]}},{"type":"text","value":", Apollo Server 2 would include a ","position":{"start":{"line":454,"column":246,"offset":21967},"end":{"line":454,"column":280,"offset":22001},"indent":[]}},{"type":"inlineCode","value":"cacheControl","position":{"start":{"line":454,"column":280,"offset":22001},"end":{"line":454,"column":294,"offset":22015},"indent":[]}},{"type":"text","value":" response extension inside your GraphQL response. This was used by the deprecated ","position":{"start":{"line":454,"column":294,"offset":22015},"end":{"line":454,"column":376,"offset":22097},"indent":[]}},{"type":"inlineCode","value":"engineproxy","position":{"start":{"line":454,"column":376,"offset":22097},"end":{"line":454,"column":389,"offset":22110},"indent":[]}},{"type":"text","value":" server. Support for writing this response extension has been removed from Apollo Server 2. This allows for a more memory-efficient cache control plugin implementation.","position":{"start":{"line":454,"column":389,"offset":22110},"end":{"line":454,"column":557,"offset":22278},"indent":[]}}],"position":{"start":{"line":454,"column":1,"offset":21722},"end":{"line":454,"column":557,"offset":22278},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, definitions of the ","position":{"start":{"line":456,"column":1,"offset":22280},"end":{"line":456,"column":40,"offset":22319},"indent":[]}},{"type":"inlineCode","value":"@cacheControl","position":{"start":{"line":456,"column":40,"offset":22319},"end":{"line":456,"column":55,"offset":22334},"indent":[]}},{"type":"text","value":" directive (and the ","position":{"start":{"line":456,"column":55,"offset":22334},"end":{"line":456,"column":75,"offset":22354},"indent":[]}},{"type":"inlineCode","value":"CacheControlScope","position":{"start":{"line":456,"column":75,"offset":22354},"end":{"line":456,"column":94,"offset":22373},"indent":[]}},{"type":"text","value":" enum that it uses) were sometimes automatically inserted into your schema. (Specifically, they were added if you defined your schema with the ","position":{"start":{"line":456,"column":94,"offset":22373},"end":{"line":456,"column":237,"offset":22516},"indent":[]}},{"type":"inlineCode","value":"typeDefs","position":{"start":{"line":456,"column":237,"offset":22516},"end":{"line":456,"column":247,"offset":22526},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":456,"column":247,"offset":22526},"end":{"line":456,"column":252,"offset":22531},"indent":[]}},{"type":"inlineCode","value":"resolvers","position":{"start":{"line":456,"column":252,"offset":22531},"end":{"line":456,"column":263,"offset":22542},"indent":[]}},{"type":"text","value":" options, but not if you used the ","position":{"start":{"line":456,"column":263,"offset":22542},"end":{"line":456,"column":297,"offset":22576},"indent":[]}},{"type":"inlineCode","value":"modules","position":{"start":{"line":456,"column":297,"offset":22576},"end":{"line":456,"column":306,"offset":22585},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":456,"column":306,"offset":22585},"end":{"line":456,"column":310,"offset":22589},"indent":[]}},{"type":"inlineCode","value":"schema","position":{"start":{"line":456,"column":310,"offset":22589},"end":{"line":456,"column":318,"offset":22597},"indent":[]}},{"type":"text","value":" options or if you were a federated gateway. Passing ","position":{"start":{"line":456,"column":318,"offset":22597},"end":{"line":456,"column":371,"offset":22650},"indent":[]}},{"type":"inlineCode","value":"cacheControl: false","position":{"start":{"line":456,"column":371,"offset":22650},"end":{"line":456,"column":392,"offset":22671},"indent":[]}},{"type":"text","value":" did not stop the definitions from being inserted!) In Apollo Server 3, these definitions are never automatically inserted.","position":{"start":{"line":456,"column":392,"offset":22671},"end":{"line":456,"column":515,"offset":22794},"indent":[]}}],"position":{"start":{"line":456,"column":1,"offset":22280},"end":{"line":456,"column":515,"offset":22794},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"So ","position":{"start":{"line":458,"column":1,"offset":22796},"end":{"line":458,"column":4,"offset":22799},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"if you use the ","position":{"start":{"line":458,"column":6,"offset":22801},"end":{"line":458,"column":21,"offset":22816},"indent":[]}},{"type":"inlineCode","value":"@cacheControl","position":{"start":{"line":458,"column":21,"offset":22816},"end":{"line":458,"column":36,"offset":22831},"indent":[]}},{"type":"text","value":" directive in your schema, you should add these definitions to your schema","position":{"start":{"line":458,"column":36,"offset":22831},"end":{"line":458,"column":110,"offset":22905},"indent":[]}}],"position":{"start":{"line":458,"column":4,"offset":22799},"end":{"line":458,"column":112,"offset":22907},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":458,"column":112,"offset":22907},"end":{"line":458,"column":113,"offset":22908},"indent":[]}}],"position":{"start":{"line":458,"column":1,"offset":22796},"end":{"line":458,"column":113,"offset":22908},"indent":[]}},{"type":"code","lang":"graphql","meta":null,"value":"enum CacheControlScope {\n  PUBLIC\n  PRIVATE\n}\n\ndirective @cacheControl(\n  maxAge: Int\n  scope: CacheControlScope\n  inheritMaxAge: Boolean\n) on FIELD_DEFINITION | OBJECT | INTERFACE | UNION","position":{"start":{"line":460,"column":1,"offset":22910},"end":{"line":471,"column":4,"offset":23113},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"(You may add them to your schema in Apollo Server 2 before upgrading if you'd like.)","position":{"start":{"line":473,"column":1,"offset":23115},"end":{"line":473,"column":85,"offset":23199},"indent":[]}}],"position":{"start":{"line":473,"column":1,"offset":23115},"end":{"line":473,"column":85,"offset":23199},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, plugins that want to change the operation's overall cache policy can overwrite the field ","position":{"start":{"line":475,"column":1,"offset":23201},"end":{"line":475,"column":110,"offset":23310},"indent":[]}},{"type":"inlineCode","value":"requestContext.overallCachePolicy","position":{"start":{"line":475,"column":110,"offset":23310},"end":{"line":475,"column":145,"offset":23345},"indent":[]}},{"type":"text","value":". In Apollo Server 3, that field is considered read-only, but it does have new methods to mutate its state. So you should replace:","position":{"start":{"line":475,"column":145,"offset":23345},"end":{"line":475,"column":275,"offset":23475},"indent":[]}}],"position":{"start":{"line":475,"column":1,"offset":23201},"end":{"line":475,"column":275,"offset":23475},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"requestContext.overallCachePolicy = { maxAge: 100 };","position":{"start":{"line":477,"column":1,"offset":23477},"end":{"line":479,"column":4,"offset":23547},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"with:","position":{"start":{"line":481,"column":1,"offset":23549},"end":{"line":481,"column":6,"offset":23554},"indent":[]}}],"position":{"start":{"line":481,"column":1,"offset":23549},"end":{"line":481,"column":6,"offset":23554},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"requestContext.overallCachePolicy.replace({ maxAge: 100 });","position":{"start":{"line":483,"column":1,"offset":23556},"end":{"line":485,"column":4,"offset":23633},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"(You may also want to consider using ","position":{"start":{"line":487,"column":1,"offset":23635},"end":{"line":487,"column":38,"offset":23672},"indent":[]}},{"type":"inlineCode","value":"restrict","position":{"start":{"line":487,"column":38,"offset":23672},"end":{"line":487,"column":48,"offset":23682},"indent":[]}},{"type":"text","value":" instead of ","position":{"start":{"line":487,"column":48,"offset":23682},"end":{"line":487,"column":60,"offset":23694},"indent":[]}},{"type":"inlineCode","value":"replace","position":{"start":{"line":487,"column":60,"offset":23694},"end":{"line":487,"column":69,"offset":23703},"indent":[]}},{"type":"text","value":"; this method only allows ","position":{"start":{"line":487,"column":69,"offset":23703},"end":{"line":487,"column":95,"offset":23729},"indent":[]}},{"type":"inlineCode","value":"maxAge","position":{"start":{"line":487,"column":95,"offset":23729},"end":{"line":487,"column":103,"offset":23737},"indent":[]}},{"type":"text","value":" to be reduced and only allows ","position":{"start":{"line":487,"column":103,"offset":23737},"end":{"line":487,"column":134,"offset":23768},"indent":[]}},{"type":"inlineCode","value":"scope","position":{"start":{"line":487,"column":134,"offset":23768},"end":{"line":487,"column":141,"offset":23775},"indent":[]}},{"type":"text","value":" to change from ","position":{"start":{"line":487,"column":141,"offset":23775},"end":{"line":487,"column":157,"offset":23791},"indent":[]}},{"type":"inlineCode","value":"PUBLIC","position":{"start":{"line":487,"column":157,"offset":23791},"end":{"line":487,"column":165,"offset":23799},"indent":[]}},{"type":"text","value":" to ","position":{"start":{"line":487,"column":165,"offset":23799},"end":{"line":487,"column":169,"offset":23803},"indent":[]}},{"type":"inlineCode","value":"PRIVATE","position":{"start":{"line":487,"column":169,"offset":23803},"end":{"line":487,"column":178,"offset":23812},"indent":[]}},{"type":"text","value":".)","position":{"start":{"line":487,"column":178,"offset":23812},"end":{"line":487,"column":180,"offset":23814},"indent":[]}}],"position":{"start":{"line":487,"column":1,"offset":23635},"end":{"line":487,"column":180,"offset":23814},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, fields returning a union type are treated similarly to fields returning a scalar type: ","position":{"start":{"line":489,"column":1,"offset":23816},"end":{"line":489,"column":108,"offset":23923},"indent":[]}},{"type":"inlineCode","value":"@cacheControl","position":{"start":{"line":489,"column":108,"offset":23923},"end":{"line":489,"column":123,"offset":23938},"indent":[]}},{"type":"text","value":" on the type itself is ignored, and ","position":{"start":{"line":489,"column":123,"offset":23938},"end":{"line":489,"column":159,"offset":23974},"indent":[]}},{"type":"inlineCode","value":"maxAge","position":{"start":{"line":489,"column":159,"offset":23974},"end":{"line":489,"column":167,"offset":23982},"indent":[]}},{"type":"text","value":" if unspecified is inherited from its parent in the operation (unless it is a root field) instead of defaulting to ","position":{"start":{"line":489,"column":167,"offset":23982},"end":{"line":489,"column":282,"offset":24097},"indent":[]}},{"type":"inlineCode","value":"defaultMaxAge","position":{"start":{"line":489,"column":282,"offset":24097},"end":{"line":489,"column":297,"offset":24112},"indent":[]}},{"type":"text","value":" (which itself defaults to 0). In Apollo Server 3, fields returning a union type are treated similarly to fields returning an interface or object type: ","position":{"start":{"line":489,"column":297,"offset":24112},"end":{"line":489,"column":449,"offset":24264},"indent":[]}},{"type":"inlineCode","value":"@cacheControl","position":{"start":{"line":489,"column":449,"offset":24264},"end":{"line":489,"column":464,"offset":24279},"indent":[]}},{"type":"text","value":" on the type itself is honored, and ","position":{"start":{"line":489,"column":464,"offset":24279},"end":{"line":489,"column":500,"offset":24315},"indent":[]}},{"type":"inlineCode","value":"maxAge","position":{"start":{"line":489,"column":500,"offset":24315},"end":{"line":489,"column":508,"offset":24323},"indent":[]}},{"type":"text","value":" if unspecified defaults to ","position":{"start":{"line":489,"column":508,"offset":24323},"end":{"line":489,"column":536,"offset":24351},"indent":[]}},{"type":"inlineCode","value":"defaultMaxAge","position":{"start":{"line":489,"column":536,"offset":24351},"end":{"line":489,"column":551,"offset":24366},"indent":[]}},{"type":"text","value":". If you were relying on the inheritance behavior, you can specify ","position":{"start":{"line":489,"column":551,"offset":24366},"end":{"line":489,"column":618,"offset":24433},"indent":[]}},{"type":"inlineCode","value":"@cacheControl(maxAge: ...)","position":{"start":{"line":489,"column":618,"offset":24433},"end":{"line":489,"column":646,"offset":24461},"indent":[]}},{"type":"text","value":" explicitly on your union types or union-returning fields, or you can use the new ","position":{"start":{"line":489,"column":646,"offset":24461},"end":{"line":489,"column":728,"offset":24543},"indent":[]}},{"type":"inlineCode","value":"@cacheControl(inheritMaxAge: true)","position":{"start":{"line":489,"column":728,"offset":24543},"end":{"line":489,"column":764,"offset":24579},"indent":[]}},{"type":"text","value":" feature on the union-returning field to restore the Apollo Server 2 behavior. If your schema contained ","position":{"start":{"line":489,"column":764,"offset":24579},"end":{"line":489,"column":868,"offset":24683},"indent":[]}},{"type":"inlineCode","value":"union SomeUnion @cacheControl(...)","position":{"start":{"line":489,"column":868,"offset":24683},"end":{"line":489,"column":904,"offset":24719},"indent":[]}},{"type":"text","value":", that directive will start having an effect when you upgrade to Apollo Server 3.","position":{"start":{"line":489,"column":904,"offset":24719},"end":{"line":489,"column":985,"offset":24800},"indent":[]}}],"position":{"start":{"line":489,"column":1,"offset":23816},"end":{"line":489,"column":985,"offset":24800},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, the ","position":{"start":{"line":491,"column":1,"offset":24802},"end":{"line":491,"column":25,"offset":24826},"indent":[]}},{"type":"inlineCode","value":"@cacheControl","position":{"start":{"line":491,"column":25,"offset":24826},"end":{"line":491,"column":40,"offset":24841},"indent":[]}},{"type":"text","value":" is honored on type definitions but not on type extensions. That is, if you write ","position":{"start":{"line":491,"column":40,"offset":24841},"end":{"line":491,"column":122,"offset":24923},"indent":[]}},{"type":"inlineCode","value":"type SomeType @cacheControl(maxAge: 123)","position":{"start":{"line":491,"column":122,"offset":24923},"end":{"line":491,"column":164,"offset":24965},"indent":[]}},{"type":"text","value":" it takes effect but if you write ","position":{"start":{"line":491,"column":164,"offset":24965},"end":{"line":491,"column":198,"offset":24999},"indent":[]}},{"type":"inlineCode","value":"extend type SomeType @cacheControl(maxAge: 123)","position":{"start":{"line":491,"column":198,"offset":24999},"end":{"line":491,"column":247,"offset":25048},"indent":[]}},{"type":"text","value":" it does not take effect. In Apollo Server 3, ","position":{"start":{"line":491,"column":247,"offset":25048},"end":{"line":491,"column":293,"offset":25094},"indent":[]}},{"type":"inlineCode","value":"@cacheControl","position":{"start":{"line":491,"column":293,"offset":25094},"end":{"line":491,"column":308,"offset":25109},"indent":[]}},{"type":"text","value":" is honored on object, interface, and union extensions. If your schema accidentally contained ","position":{"start":{"line":491,"column":308,"offset":25109},"end":{"line":491,"column":402,"offset":25203},"indent":[]}},{"type":"inlineCode","value":"@cacheControl","position":{"start":{"line":491,"column":402,"offset":25203},"end":{"line":491,"column":417,"offset":25218},"indent":[]}},{"type":"text","value":" on an ","position":{"start":{"line":491,"column":417,"offset":25218},"end":{"line":491,"column":424,"offset":25225},"indent":[]}},{"type":"inlineCode","value":"extend","position":{"start":{"line":491,"column":424,"offset":25225},"end":{"line":491,"column":432,"offset":25233},"indent":[]}},{"type":"text","value":", that directive will start having an effect when you upgrade to Apollo Server 3.","position":{"start":{"line":491,"column":432,"offset":25233},"end":{"line":491,"column":513,"offset":25314},"indent":[]}}],"position":{"start":{"line":491,"column":1,"offset":24802},"end":{"line":491,"column":513,"offset":25314},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, most of the logic related to cache control lives in the ","position":{"start":{"line":493,"column":1,"offset":25316},"end":{"line":493,"column":77,"offset":25392},"indent":[]}},{"type":"inlineCode","value":"apollo-cache-control","position":{"start":{"line":493,"column":77,"offset":25392},"end":{"line":493,"column":99,"offset":25414},"indent":[]}},{"type":"text","value":" package. This package exports a function called ","position":{"start":{"line":493,"column":99,"offset":25414},"end":{"line":493,"column":148,"offset":25463},"indent":[]}},{"type":"inlineCode","value":"plugin","position":{"start":{"line":493,"column":148,"offset":25463},"end":{"line":493,"column":156,"offset":25471},"indent":[]}},{"type":"text","value":" as well as TypeScript types ","position":{"start":{"line":493,"column":156,"offset":25471},"end":{"line":493,"column":185,"offset":25500},"indent":[]}},{"type":"inlineCode","value":"CacheControlFormat","position":{"start":{"line":493,"column":185,"offset":25500},"end":{"line":493,"column":205,"offset":25520},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":493,"column":205,"offset":25520},"end":{"line":493,"column":207,"offset":25522},"indent":[]}},{"type":"inlineCode","value":"CacheHint","position":{"start":{"line":493,"column":207,"offset":25522},"end":{"line":493,"column":218,"offset":25533},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":493,"column":218,"offset":25533},"end":{"line":493,"column":220,"offset":25535},"indent":[]}},{"type":"inlineCode","value":"CacheScope","position":{"start":{"line":493,"column":220,"offset":25535},"end":{"line":493,"column":232,"offset":25547},"indent":[]}},{"type":"text","value":", and ","position":{"start":{"line":493,"column":232,"offset":25547},"end":{"line":493,"column":238,"offset":25553},"indent":[]}},{"type":"inlineCode","value":"CacheControlExtensionOptions","position":{"start":{"line":493,"column":238,"offset":25553},"end":{"line":493,"column":268,"offset":25583},"indent":[]}},{"type":"text","value":". In Apollo Server 3, this logic lives in ","position":{"start":{"line":493,"column":268,"offset":25583},"end":{"line":493,"column":310,"offset":25625},"indent":[]}},{"type":"inlineCode","value":"apollo-server-core","position":{"start":{"line":493,"column":310,"offset":25625},"end":{"line":493,"column":330,"offset":25645},"indent":[]}},{"type":"text","value":" and the ","position":{"start":{"line":493,"column":330,"offset":25645},"end":{"line":493,"column":339,"offset":25654},"indent":[]}},{"type":"inlineCode","value":"apollo-cache-control","position":{"start":{"line":493,"column":339,"offset":25654},"end":{"line":493,"column":361,"offset":25676},"indent":[]}},{"type":"text","value":" package is no longer published. ","position":{"start":{"line":493,"column":361,"offset":25676},"end":{"line":493,"column":394,"offset":25709},"indent":[]}},{"type":"inlineCode","value":"apollo-server-core","position":{"start":{"line":493,"column":394,"offset":25709},"end":{"line":493,"column":414,"offset":25729},"indent":[]}},{"type":"text","value":" exports ","position":{"start":{"line":493,"column":414,"offset":25729},"end":{"line":493,"column":423,"offset":25738},"indent":[]}},{"type":"inlineCode","value":"ApolloServerPluginCacheControl","position":{"start":{"line":493,"column":423,"offset":25738},"end":{"line":493,"column":455,"offset":25770},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":493,"column":455,"offset":25770},"end":{"line":493,"column":460,"offset":25775},"indent":[]}},{"type":"inlineCode","value":"ApolloServerPluginCacheControlOptions","position":{"start":{"line":493,"column":460,"offset":25775},"end":{"line":493,"column":499,"offset":25814},"indent":[]}},{"type":"text","value":" (which are similar to ","position":{"start":{"line":493,"column":499,"offset":25814},"end":{"line":493,"column":522,"offset":25837},"indent":[]}},{"type":"inlineCode","value":"plugin","position":{"start":{"line":493,"column":522,"offset":25837},"end":{"line":493,"column":530,"offset":25845},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":493,"column":530,"offset":25845},"end":{"line":493,"column":535,"offset":25850},"indent":[]}},{"type":"inlineCode","value":"CacheControlExtensionOptions","position":{"start":{"line":493,"column":535,"offset":25850},"end":{"line":493,"column":565,"offset":25880},"indent":[]}},{"type":"text","value":"). ","position":{"start":{"line":493,"column":565,"offset":25880},"end":{"line":493,"column":568,"offset":25883},"indent":[]}},{"type":"inlineCode","value":"apollo-server-types","position":{"start":{"line":493,"column":568,"offset":25883},"end":{"line":493,"column":589,"offset":25904},"indent":[]}},{"type":"text","value":" exports ","position":{"start":{"line":493,"column":589,"offset":25904},"end":{"line":493,"column":598,"offset":25913},"indent":[]}},{"type":"inlineCode","value":"CacheHint","position":{"start":{"line":493,"column":598,"offset":25913},"end":{"line":493,"column":609,"offset":25924},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":493,"column":609,"offset":25924},"end":{"line":493,"column":614,"offset":25929},"indent":[]}},{"type":"inlineCode","value":"CacheScope","position":{"start":{"line":493,"column":614,"offset":25929},"end":{"line":493,"column":626,"offset":25941},"indent":[]}},{"type":"text","value":". There is no equivalent export to ","position":{"start":{"line":493,"column":626,"offset":25941},"end":{"line":493,"column":661,"offset":25976},"indent":[]}},{"type":"inlineCode","value":"CacheControlFormat","position":{"start":{"line":493,"column":661,"offset":25976},"end":{"line":493,"column":681,"offset":25996},"indent":[]}},{"type":"text","value":" because as described above, the code to write the ","position":{"start":{"line":493,"column":681,"offset":25996},"end":{"line":493,"column":732,"offset":26047},"indent":[]}},{"type":"inlineCode","value":"cacheControl","position":{"start":{"line":493,"column":732,"offset":26047},"end":{"line":493,"column":746,"offset":26061},"indent":[]}},{"type":"text","value":" response extension is not part of Apollo Server 3.","position":{"start":{"line":493,"column":746,"offset":26061},"end":{"line":493,"column":797,"offset":26112},"indent":[]}}],"position":{"start":{"line":493,"column":1,"offset":25316},"end":{"line":493,"column":797,"offset":26112},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"inlineCode","value":"playground","position":{"start":{"line":495,"column":5,"offset":26118},"end":{"line":495,"column":17,"offset":26130},"indent":[]}}],"position":{"start":{"line":495,"column":1,"offset":26114},"end":{"line":495,"column":17,"offset":26130},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"See ","position":{"start":{"line":497,"column":1,"offset":26132},"end":{"line":497,"column":5,"offset":26136},"indent":[]}},{"type":"link","title":null,"url":"#graphql-playground","children":[{"type":"text","value":"GraphQL Playground","position":{"start":{"line":497,"column":6,"offset":26137},"end":{"line":497,"column":24,"offset":26155},"indent":[]}}],"position":{"start":{"line":497,"column":5,"offset":26136},"end":{"line":497,"column":46,"offset":26177},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":497,"column":46,"offset":26177},"end":{"line":497,"column":47,"offset":26178},"indent":[]}}],"position":{"start":{"line":497,"column":1,"offset":26132},"end":{"line":497,"column":47,"offset":26178},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Removed exports","position":{"start":{"line":499,"column":4,"offset":26183},"end":{"line":499,"column":19,"offset":26198},"indent":[]}}],"position":{"start":{"line":499,"column":1,"offset":26180},"end":{"line":499,"column":19,"offset":26198},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, ","position":{"start":{"line":501,"column":1,"offset":26200},"end":{"line":501,"column":21,"offset":26220},"indent":[]}},{"type":"inlineCode","value":"apollo-server","position":{"start":{"line":501,"column":21,"offset":26220},"end":{"line":501,"column":36,"offset":26235},"indent":[]}},{"type":"text","value":" and framework integration packages such as ","position":{"start":{"line":501,"column":36,"offset":26235},"end":{"line":501,"column":80,"offset":26279},"indent":[]}},{"type":"inlineCode","value":"apollo-server-express","position":{"start":{"line":501,"column":80,"offset":26279},"end":{"line":501,"column":103,"offset":26302},"indent":[]}},{"type":"text","value":" import many symbols from third-party packages and re-export them. This effectively ties the API of Apollo Server to a specific version of those third-party packages and makes it challenging to upgrade to a newer version or for you to upgrade those packages yourself.","position":{"start":{"line":501,"column":103,"offset":26302},"end":{"line":501,"column":370,"offset":26569},"indent":[]}}],"position":{"start":{"line":501,"column":1,"offset":26200},"end":{"line":501,"column":370,"offset":26569},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, most of these \"re-exports\" are removed. If you want to use these exports, you should import them directly from their originating package.","position":{"start":{"line":503,"column":1,"offset":26571},"end":{"line":503,"column":158,"offset":26728},"indent":[]}}],"position":{"start":{"line":503,"column":1,"offset":26571},"end":{"line":503,"column":158,"offset":26728},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Exports from ","position":{"start":{"line":505,"column":5,"offset":26734},"end":{"line":505,"column":18,"offset":26747},"indent":[]}},{"type":"inlineCode","value":"graphql-tools","position":{"start":{"line":505,"column":18,"offset":26747},"end":{"line":505,"column":33,"offset":26762},"indent":[]}}],"position":{"start":{"line":505,"column":1,"offset":26730},"end":{"line":505,"column":33,"offset":26762},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Apollo Server 2 exports every symbol exported by ","position":{"start":{"line":507,"column":1,"offset":26764},"end":{"line":507,"column":50,"offset":26813},"indent":[]}},{"type":"link","title":null,"url":"https://www.graphql-tools.com/","children":[{"type":"inlineCode","value":"graphql-tools","position":{"start":{"line":507,"column":51,"offset":26814},"end":{"line":507,"column":66,"offset":26829},"indent":[]}}],"position":{"start":{"line":507,"column":50,"offset":26813},"end":{"line":507,"column":99,"offset":26862},"indent":[]}},{"type":"text","value":" v4. If you're importing any of the following symbols from an Apollo Server package, you should instead run ","position":{"start":{"line":507,"column":99,"offset":26862},"end":{"line":507,"column":207,"offset":26970},"indent":[]}},{"type":"inlineCode","value":"npm install graphql-tools@4.x","position":{"start":{"line":507,"column":207,"offset":26970},"end":{"line":507,"column":238,"offset":27001},"indent":[]}},{"type":"text","value":" and import the symbol from ","position":{"start":{"line":507,"column":238,"offset":27001},"end":{"line":507,"column":266,"offset":27029},"indent":[]}},{"type":"inlineCode","value":"graphql-tools","position":{"start":{"line":507,"column":266,"offset":27029},"end":{"line":507,"column":281,"offset":27044},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":507,"column":281,"offset":27044},"end":{"line":507,"column":282,"offset":27045},"indent":[]}}],"position":{"start":{"line":507,"column":1,"offset":26764},"end":{"line":507,"column":282,"offset":27045},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"Alternatively, read the ","position":{"start":{"line":509,"column":3,"offset":27049},"end":{"line":509,"column":27,"offset":27073},"indent":[]}},{"type":"link","title":null,"url":"https://www.graphql-tools.com/docs/introduction","children":[{"type":"text","value":"GraphQL Tools docs","position":{"start":{"line":509,"column":28,"offset":27074},"end":{"line":509,"column":46,"offset":27092},"indent":[]}}],"position":{"start":{"line":509,"column":27,"offset":27073},"end":{"line":509,"column":96,"offset":27142},"indent":[]}},{"type":"text","value":" and find out which ","position":{"start":{"line":509,"column":96,"offset":27142},"end":{"line":509,"column":116,"offset":27162},"indent":[]}},{"type":"inlineCode","value":"@graphql-tools/subpackage","position":{"start":{"line":509,"column":116,"offset":27162},"end":{"line":509,"column":143,"offset":27189},"indent":[]}},{"type":"text","value":" the symbol is exported from in more modern versions of GraphQL Tools.","position":{"start":{"line":509,"column":143,"offset":27189},"end":{"line":509,"column":213,"offset":27259},"indent":[]}}],"position":{"start":{"line":509,"column":3,"offset":27049},"end":{"line":509,"column":213,"offset":27259},"indent":[]}}],"position":{"start":{"line":509,"column":1,"offset":27047},"end":{"line":509,"column":213,"offset":27259},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"AddArgumentsAsVariables","position":{"start":{"line":511,"column":3,"offset":27263},"end":{"line":511,"column":28,"offset":27288},"indent":[]}}],"position":{"start":{"line":511,"column":3,"offset":27263},"end":{"line":511,"column":28,"offset":27288},"indent":[]}}],"position":{"start":{"line":511,"column":1,"offset":27261},"end":{"line":511,"column":28,"offset":27288},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"AddTypenameToAbstract","position":{"start":{"line":512,"column":3,"offset":27291},"end":{"line":512,"column":26,"offset":27314},"indent":[]}}],"position":{"start":{"line":512,"column":3,"offset":27291},"end":{"line":512,"column":26,"offset":27314},"indent":[]}}],"position":{"start":{"line":512,"column":1,"offset":27289},"end":{"line":512,"column":26,"offset":27314},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"CheckResultAndHandleErrors","position":{"start":{"line":513,"column":3,"offset":27317},"end":{"line":513,"column":31,"offset":27345},"indent":[]}}],"position":{"start":{"line":513,"column":3,"offset":27317},"end":{"line":513,"column":31,"offset":27345},"indent":[]}}],"position":{"start":{"line":513,"column":1,"offset":27315},"end":{"line":513,"column":31,"offset":27345},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"DirectiveResolverFn","position":{"start":{"line":514,"column":3,"offset":27348},"end":{"line":514,"column":24,"offset":27369},"indent":[]}}],"position":{"start":{"line":514,"column":3,"offset":27348},"end":{"line":514,"column":24,"offset":27369},"indent":[]}}],"position":{"start":{"line":514,"column":1,"offset":27346},"end":{"line":514,"column":24,"offset":27369},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ExpandAbstractTypes","position":{"start":{"line":515,"column":3,"offset":27372},"end":{"line":515,"column":24,"offset":27393},"indent":[]}}],"position":{"start":{"line":515,"column":3,"offset":27372},"end":{"line":515,"column":24,"offset":27393},"indent":[]}}],"position":{"start":{"line":515,"column":1,"offset":27370},"end":{"line":515,"column":24,"offset":27393},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ExtractField","position":{"start":{"line":516,"column":3,"offset":27396},"end":{"line":516,"column":17,"offset":27410},"indent":[]}}],"position":{"start":{"line":516,"column":3,"offset":27396},"end":{"line":516,"column":17,"offset":27410},"indent":[]}}],"position":{"start":{"line":516,"column":1,"offset":27394},"end":{"line":516,"column":17,"offset":27410},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"FilterRootFields","position":{"start":{"line":517,"column":3,"offset":27413},"end":{"line":517,"column":21,"offset":27431},"indent":[]}}],"position":{"start":{"line":517,"column":3,"offset":27413},"end":{"line":517,"column":21,"offset":27431},"indent":[]}}],"position":{"start":{"line":517,"column":1,"offset":27411},"end":{"line":517,"column":21,"offset":27431},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"FilterToSchema","position":{"start":{"line":518,"column":3,"offset":27434},"end":{"line":518,"column":19,"offset":27450},"indent":[]}}],"position":{"start":{"line":518,"column":3,"offset":27434},"end":{"line":518,"column":19,"offset":27450},"indent":[]}}],"position":{"start":{"line":518,"column":1,"offset":27432},"end":{"line":518,"column":19,"offset":27450},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"FilterTypes","position":{"start":{"line":519,"column":3,"offset":27453},"end":{"line":519,"column":16,"offset":27466},"indent":[]}}],"position":{"start":{"line":519,"column":3,"offset":27453},"end":{"line":519,"column":16,"offset":27466},"indent":[]}}],"position":{"start":{"line":519,"column":1,"offset":27451},"end":{"line":519,"column":16,"offset":27466},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"GraphQLParseOptions","position":{"start":{"line":520,"column":3,"offset":27469},"end":{"line":520,"column":24,"offset":27490},"indent":[]}}],"position":{"start":{"line":520,"column":3,"offset":27469},"end":{"line":520,"column":24,"offset":27490},"indent":[]}}],"position":{"start":{"line":520,"column":1,"offset":27467},"end":{"line":520,"column":24,"offset":27490},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IAddResolveFunctionsToSchemaOptions","position":{"start":{"line":521,"column":3,"offset":27493},"end":{"line":521,"column":40,"offset":27530},"indent":[]}}],"position":{"start":{"line":521,"column":3,"offset":27493},"end":{"line":521,"column":40,"offset":27530},"indent":[]}}],"position":{"start":{"line":521,"column":1,"offset":27491},"end":{"line":521,"column":40,"offset":27530},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IConnectorCls","position":{"start":{"line":522,"column":3,"offset":27533},"end":{"line":522,"column":18,"offset":27548},"indent":[]}}],"position":{"start":{"line":522,"column":3,"offset":27533},"end":{"line":522,"column":18,"offset":27548},"indent":[]}}],"position":{"start":{"line":522,"column":1,"offset":27531},"end":{"line":522,"column":18,"offset":27548},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IConnectorFn","position":{"start":{"line":523,"column":3,"offset":27551},"end":{"line":523,"column":17,"offset":27565},"indent":[]}}],"position":{"start":{"line":523,"column":3,"offset":27551},"end":{"line":523,"column":17,"offset":27565},"indent":[]}}],"position":{"start":{"line":523,"column":1,"offset":27549},"end":{"line":523,"column":17,"offset":27565},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IConnector","position":{"start":{"line":524,"column":3,"offset":27568},"end":{"line":524,"column":15,"offset":27580},"indent":[]}}],"position":{"start":{"line":524,"column":3,"offset":27568},"end":{"line":524,"column":15,"offset":27580},"indent":[]}}],"position":{"start":{"line":524,"column":1,"offset":27566},"end":{"line":524,"column":15,"offset":27580},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IConnectors","position":{"start":{"line":525,"column":3,"offset":27583},"end":{"line":525,"column":16,"offset":27596},"indent":[]}}],"position":{"start":{"line":525,"column":3,"offset":27583},"end":{"line":525,"column":16,"offset":27596},"indent":[]}}],"position":{"start":{"line":525,"column":1,"offset":27581},"end":{"line":525,"column":16,"offset":27596},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IDelegateToSchemaOptions","position":{"start":{"line":526,"column":3,"offset":27599},"end":{"line":526,"column":29,"offset":27625},"indent":[]}}],"position":{"start":{"line":526,"column":3,"offset":27599},"end":{"line":526,"column":29,"offset":27625},"indent":[]}}],"position":{"start":{"line":526,"column":1,"offset":27597},"end":{"line":526,"column":29,"offset":27625},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IDirectiveResolvers","position":{"start":{"line":527,"column":3,"offset":27628},"end":{"line":527,"column":24,"offset":27649},"indent":[]}}],"position":{"start":{"line":527,"column":3,"offset":27628},"end":{"line":527,"column":24,"offset":27649},"indent":[]}}],"position":{"start":{"line":527,"column":1,"offset":27626},"end":{"line":527,"column":24,"offset":27649},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IEnumResolver","position":{"start":{"line":528,"column":3,"offset":27652},"end":{"line":528,"column":18,"offset":27667},"indent":[]}}],"position":{"start":{"line":528,"column":3,"offset":27652},"end":{"line":528,"column":18,"offset":27667},"indent":[]}}],"position":{"start":{"line":528,"column":1,"offset":27650},"end":{"line":528,"column":18,"offset":27667},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IExecutableSchemaDefinition","position":{"start":{"line":529,"column":3,"offset":27670},"end":{"line":529,"column":32,"offset":27699},"indent":[]}}],"position":{"start":{"line":529,"column":3,"offset":27670},"end":{"line":529,"column":32,"offset":27699},"indent":[]}}],"position":{"start":{"line":529,"column":1,"offset":27668},"end":{"line":529,"column":32,"offset":27699},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IFieldIteratorFn","position":{"start":{"line":530,"column":3,"offset":27702},"end":{"line":530,"column":21,"offset":27720},"indent":[]}}],"position":{"start":{"line":530,"column":3,"offset":27702},"end":{"line":530,"column":21,"offset":27720},"indent":[]}}],"position":{"start":{"line":530,"column":1,"offset":27700},"end":{"line":530,"column":21,"offset":27720},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IFieldResolver","position":{"start":{"line":531,"column":3,"offset":27723},"end":{"line":531,"column":19,"offset":27739},"indent":[]}}],"position":{"start":{"line":531,"column":3,"offset":27723},"end":{"line":531,"column":19,"offset":27739},"indent":[]}}],"position":{"start":{"line":531,"column":1,"offset":27721},"end":{"line":531,"column":19,"offset":27739},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IGraphQLToolsResolveInfo","position":{"start":{"line":532,"column":3,"offset":27742},"end":{"line":532,"column":29,"offset":27768},"indent":[]}}],"position":{"start":{"line":532,"column":3,"offset":27742},"end":{"line":532,"column":29,"offset":27768},"indent":[]}}],"position":{"start":{"line":532,"column":1,"offset":27740},"end":{"line":532,"column":29,"offset":27768},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ILogger","position":{"start":{"line":533,"column":3,"offset":27771},"end":{"line":533,"column":12,"offset":27780},"indent":[]}}],"position":{"start":{"line":533,"column":3,"offset":27771},"end":{"line":533,"column":12,"offset":27780},"indent":[]}}],"position":{"start":{"line":533,"column":1,"offset":27769},"end":{"line":533,"column":12,"offset":27780},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IMockFn","position":{"start":{"line":534,"column":3,"offset":27783},"end":{"line":534,"column":12,"offset":27792},"indent":[]}}],"position":{"start":{"line":534,"column":3,"offset":27783},"end":{"line":534,"column":12,"offset":27792},"indent":[]}}],"position":{"start":{"line":534,"column":1,"offset":27781},"end":{"line":534,"column":12,"offset":27792},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IMockOptions","position":{"start":{"line":535,"column":3,"offset":27795},"end":{"line":535,"column":17,"offset":27809},"indent":[]}}],"position":{"start":{"line":535,"column":3,"offset":27795},"end":{"line":535,"column":17,"offset":27809},"indent":[]}}],"position":{"start":{"line":535,"column":1,"offset":27793},"end":{"line":535,"column":17,"offset":27809},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IMockServer","position":{"start":{"line":536,"column":3,"offset":27812},"end":{"line":536,"column":16,"offset":27825},"indent":[]}}],"position":{"start":{"line":536,"column":3,"offset":27812},"end":{"line":536,"column":16,"offset":27825},"indent":[]}}],"position":{"start":{"line":536,"column":1,"offset":27810},"end":{"line":536,"column":16,"offset":27825},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IMockTypeFn","position":{"start":{"line":537,"column":3,"offset":27828},"end":{"line":537,"column":16,"offset":27841},"indent":[]}}],"position":{"start":{"line":537,"column":3,"offset":27828},"end":{"line":537,"column":16,"offset":27841},"indent":[]}}],"position":{"start":{"line":537,"column":1,"offset":27826},"end":{"line":537,"column":16,"offset":27841},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IMocks","position":{"start":{"line":538,"column":3,"offset":27844},"end":{"line":538,"column":11,"offset":27852},"indent":[]}}],"position":{"start":{"line":538,"column":3,"offset":27844},"end":{"line":538,"column":11,"offset":27852},"indent":[]}}],"position":{"start":{"line":538,"column":1,"offset":27842},"end":{"line":538,"column":11,"offset":27852},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IResolverObject","position":{"start":{"line":539,"column":3,"offset":27855},"end":{"line":539,"column":20,"offset":27872},"indent":[]}}],"position":{"start":{"line":539,"column":3,"offset":27855},"end":{"line":539,"column":20,"offset":27872},"indent":[]}}],"position":{"start":{"line":539,"column":1,"offset":27853},"end":{"line":539,"column":20,"offset":27872},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IResolverOptions","position":{"start":{"line":540,"column":3,"offset":27875},"end":{"line":540,"column":21,"offset":27893},"indent":[]}}],"position":{"start":{"line":540,"column":3,"offset":27875},"end":{"line":540,"column":21,"offset":27893},"indent":[]}}],"position":{"start":{"line":540,"column":1,"offset":27873},"end":{"line":540,"column":21,"offset":27893},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IResolverValidationOptions","position":{"start":{"line":541,"column":3,"offset":27896},"end":{"line":541,"column":31,"offset":27924},"indent":[]}}],"position":{"start":{"line":541,"column":3,"offset":27896},"end":{"line":541,"column":31,"offset":27924},"indent":[]}}],"position":{"start":{"line":541,"column":1,"offset":27894},"end":{"line":541,"column":31,"offset":27924},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IResolversParameter","position":{"start":{"line":542,"column":3,"offset":27927},"end":{"line":542,"column":24,"offset":27948},"indent":[]}}],"position":{"start":{"line":542,"column":3,"offset":27927},"end":{"line":542,"column":24,"offset":27948},"indent":[]}}],"position":{"start":{"line":542,"column":1,"offset":27925},"end":{"line":542,"column":24,"offset":27948},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"IResolvers","position":{"start":{"line":543,"column":3,"offset":27951},"end":{"line":543,"column":15,"offset":27963},"indent":[]}}],"position":{"start":{"line":543,"column":3,"offset":27951},"end":{"line":543,"column":15,"offset":27963},"indent":[]}}],"position":{"start":{"line":543,"column":1,"offset":27949},"end":{"line":543,"column":15,"offset":27963},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ITypeDefinitions","position":{"start":{"line":544,"column":3,"offset":27966},"end":{"line":544,"column":21,"offset":27984},"indent":[]}}],"position":{"start":{"line":544,"column":3,"offset":27966},"end":{"line":544,"column":21,"offset":27984},"indent":[]}}],"position":{"start":{"line":544,"column":1,"offset":27964},"end":{"line":544,"column":21,"offset":27984},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ITypedef","position":{"start":{"line":545,"column":3,"offset":27987},"end":{"line":545,"column":13,"offset":27997},"indent":[]}}],"position":{"start":{"line":545,"column":3,"offset":27987},"end":{"line":545,"column":13,"offset":27997},"indent":[]}}],"position":{"start":{"line":545,"column":1,"offset":27985},"end":{"line":545,"column":13,"offset":27997},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"MergeInfo","position":{"start":{"line":546,"column":3,"offset":28000},"end":{"line":546,"column":14,"offset":28011},"indent":[]}}],"position":{"start":{"line":546,"column":3,"offset":28000},"end":{"line":546,"column":14,"offset":28011},"indent":[]}}],"position":{"start":{"line":546,"column":1,"offset":27998},"end":{"line":546,"column":14,"offset":28011},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"MergeTypeCandidate","position":{"start":{"line":547,"column":3,"offset":28014},"end":{"line":547,"column":23,"offset":28034},"indent":[]}}],"position":{"start":{"line":547,"column":3,"offset":28014},"end":{"line":547,"column":23,"offset":28034},"indent":[]}}],"position":{"start":{"line":547,"column":1,"offset":28012},"end":{"line":547,"column":23,"offset":28034},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"MockList","position":{"start":{"line":548,"column":3,"offset":28037},"end":{"line":548,"column":13,"offset":28047},"indent":[]}}],"position":{"start":{"line":548,"column":3,"offset":28037},"end":{"line":548,"column":13,"offset":28047},"indent":[]}}],"position":{"start":{"line":548,"column":1,"offset":28035},"end":{"line":548,"column":13,"offset":28047},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"NextResolverFn","position":{"start":{"line":549,"column":3,"offset":28050},"end":{"line":549,"column":19,"offset":28066},"indent":[]}}],"position":{"start":{"line":549,"column":3,"offset":28050},"end":{"line":549,"column":19,"offset":28066},"indent":[]}}],"position":{"start":{"line":549,"column":1,"offset":28048},"end":{"line":549,"column":19,"offset":28066},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"Operation","position":{"start":{"line":550,"column":3,"offset":28069},"end":{"line":550,"column":14,"offset":28080},"indent":[]}}],"position":{"start":{"line":550,"column":3,"offset":28069},"end":{"line":550,"column":14,"offset":28080},"indent":[]}}],"position":{"start":{"line":550,"column":1,"offset":28067},"end":{"line":550,"column":14,"offset":28080},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"RenameRootFields","position":{"start":{"line":551,"column":3,"offset":28083},"end":{"line":551,"column":21,"offset":28101},"indent":[]}}],"position":{"start":{"line":551,"column":3,"offset":28083},"end":{"line":551,"column":21,"offset":28101},"indent":[]}}],"position":{"start":{"line":551,"column":1,"offset":28081},"end":{"line":551,"column":21,"offset":28101},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"RenameTypes","position":{"start":{"line":552,"column":3,"offset":28104},"end":{"line":552,"column":16,"offset":28117},"indent":[]}}],"position":{"start":{"line":552,"column":3,"offset":28104},"end":{"line":552,"column":16,"offset":28117},"indent":[]}}],"position":{"start":{"line":552,"column":1,"offset":28102},"end":{"line":552,"column":16,"offset":28117},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ReplaceFieldWithFragment","position":{"start":{"line":553,"column":3,"offset":28120},"end":{"line":553,"column":29,"offset":28146},"indent":[]}}],"position":{"start":{"line":553,"column":3,"offset":28120},"end":{"line":553,"column":29,"offset":28146},"indent":[]}}],"position":{"start":{"line":553,"column":1,"offset":28118},"end":{"line":553,"column":29,"offset":28146},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"Request","position":{"start":{"line":554,"column":3,"offset":28149},"end":{"line":554,"column":12,"offset":28158},"indent":[]}}],"position":{"start":{"line":554,"column":3,"offset":28149},"end":{"line":554,"column":12,"offset":28158},"indent":[]}}],"position":{"start":{"line":554,"column":1,"offset":28147},"end":{"line":554,"column":12,"offset":28158},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ResolveType","position":{"start":{"line":555,"column":3,"offset":28161},"end":{"line":555,"column":16,"offset":28174},"indent":[]}}],"position":{"start":{"line":555,"column":3,"offset":28161},"end":{"line":555,"column":16,"offset":28174},"indent":[]}}],"position":{"start":{"line":555,"column":1,"offset":28159},"end":{"line":555,"column":16,"offset":28174},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"Result","position":{"start":{"line":556,"column":3,"offset":28177},"end":{"line":556,"column":11,"offset":28185},"indent":[]}}],"position":{"start":{"line":556,"column":3,"offset":28177},"end":{"line":556,"column":11,"offset":28185},"indent":[]}}],"position":{"start":{"line":556,"column":1,"offset":28175},"end":{"line":556,"column":11,"offset":28185},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"SchemaDirectiveVisitor","position":{"start":{"line":557,"column":3,"offset":28188},"end":{"line":557,"column":27,"offset":28212},"indent":[]}}],"position":{"start":{"line":557,"column":3,"offset":28188},"end":{"line":557,"column":27,"offset":28212},"indent":[]}}],"position":{"start":{"line":557,"column":1,"offset":28186},"end":{"line":557,"column":27,"offset":28212},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"SchemaError","position":{"start":{"line":558,"column":3,"offset":28215},"end":{"line":558,"column":16,"offset":28228},"indent":[]}}],"position":{"start":{"line":558,"column":3,"offset":28215},"end":{"line":558,"column":16,"offset":28228},"indent":[]}}],"position":{"start":{"line":558,"column":1,"offset":28213},"end":{"line":558,"column":16,"offset":28228},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"TransformRootFields","position":{"start":{"line":559,"column":3,"offset":28231},"end":{"line":559,"column":24,"offset":28252},"indent":[]}}],"position":{"start":{"line":559,"column":3,"offset":28231},"end":{"line":559,"column":24,"offset":28252},"indent":[]}}],"position":{"start":{"line":559,"column":1,"offset":28229},"end":{"line":559,"column":24,"offset":28252},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"Transform","position":{"start":{"line":560,"column":3,"offset":28255},"end":{"line":560,"column":14,"offset":28266},"indent":[]}}],"position":{"start":{"line":560,"column":3,"offset":28255},"end":{"line":560,"column":14,"offset":28266},"indent":[]}}],"position":{"start":{"line":560,"column":1,"offset":28253},"end":{"line":560,"column":14,"offset":28266},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"TypeWithResolvers","position":{"start":{"line":561,"column":3,"offset":28269},"end":{"line":561,"column":22,"offset":28288},"indent":[]}}],"position":{"start":{"line":561,"column":3,"offset":28269},"end":{"line":561,"column":22,"offset":28288},"indent":[]}}],"position":{"start":{"line":561,"column":1,"offset":28267},"end":{"line":561,"column":22,"offset":28288},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"UnitOrList","position":{"start":{"line":562,"column":3,"offset":28291},"end":{"line":562,"column":15,"offset":28303},"indent":[]}}],"position":{"start":{"line":562,"column":3,"offset":28291},"end":{"line":562,"column":15,"offset":28303},"indent":[]}}],"position":{"start":{"line":562,"column":1,"offset":28289},"end":{"line":562,"column":15,"offset":28303},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"VisitTypeResult","position":{"start":{"line":563,"column":3,"offset":28306},"end":{"line":563,"column":20,"offset":28323},"indent":[]}}],"position":{"start":{"line":563,"column":3,"offset":28306},"end":{"line":563,"column":20,"offset":28323},"indent":[]}}],"position":{"start":{"line":563,"column":1,"offset":28304},"end":{"line":563,"column":20,"offset":28323},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"VisitType","position":{"start":{"line":564,"column":3,"offset":28326},"end":{"line":564,"column":14,"offset":28337},"indent":[]}}],"position":{"start":{"line":564,"column":3,"offset":28326},"end":{"line":564,"column":14,"offset":28337},"indent":[]}}],"position":{"start":{"line":564,"column":1,"offset":28324},"end":{"line":564,"column":14,"offset":28337},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"WrapQuery","position":{"start":{"line":565,"column":3,"offset":28340},"end":{"line":565,"column":14,"offset":28351},"indent":[]}}],"position":{"start":{"line":565,"column":3,"offset":28340},"end":{"line":565,"column":14,"offset":28351},"indent":[]}}],"position":{"start":{"line":565,"column":1,"offset":28338},"end":{"line":565,"column":14,"offset":28351},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"addCatchUndefinedToSchema","position":{"start":{"line":566,"column":3,"offset":28354},"end":{"line":566,"column":30,"offset":28381},"indent":[]}}],"position":{"start":{"line":566,"column":3,"offset":28354},"end":{"line":566,"column":30,"offset":28381},"indent":[]}}],"position":{"start":{"line":566,"column":1,"offset":28352},"end":{"line":566,"column":30,"offset":28381},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"addErrorLoggingToSchema","position":{"start":{"line":567,"column":3,"offset":28384},"end":{"line":567,"column":28,"offset":28409},"indent":[]}}],"position":{"start":{"line":567,"column":3,"offset":28384},"end":{"line":567,"column":28,"offset":28409},"indent":[]}}],"position":{"start":{"line":567,"column":1,"offset":28382},"end":{"line":567,"column":28,"offset":28409},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"addMockFunctionsToSchema","position":{"start":{"line":568,"column":3,"offset":28412},"end":{"line":568,"column":29,"offset":28438},"indent":[]}}],"position":{"start":{"line":568,"column":3,"offset":28412},"end":{"line":568,"column":29,"offset":28438},"indent":[]}}],"position":{"start":{"line":568,"column":1,"offset":28410},"end":{"line":568,"column":29,"offset":28438},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"addResolveFunctionsToSchema","position":{"start":{"line":569,"column":3,"offset":28441},"end":{"line":569,"column":32,"offset":28470},"indent":[]}}],"position":{"start":{"line":569,"column":3,"offset":28441},"end":{"line":569,"column":32,"offset":28470},"indent":[]}}],"position":{"start":{"line":569,"column":1,"offset":28439},"end":{"line":569,"column":32,"offset":28470},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"addSchemaLevelResolveFunction","position":{"start":{"line":570,"column":3,"offset":28473},"end":{"line":570,"column":34,"offset":28504},"indent":[]}}],"position":{"start":{"line":570,"column":3,"offset":28473},"end":{"line":570,"column":34,"offset":28504},"indent":[]}}],"position":{"start":{"line":570,"column":1,"offset":28471},"end":{"line":570,"column":34,"offset":28504},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"assertResolveFunctionsPresent","position":{"start":{"line":571,"column":3,"offset":28507},"end":{"line":571,"column":34,"offset":28538},"indent":[]}}],"position":{"start":{"line":571,"column":3,"offset":28507},"end":{"line":571,"column":34,"offset":28538},"indent":[]}}],"position":{"start":{"line":571,"column":1,"offset":28505},"end":{"line":571,"column":34,"offset":28538},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"attachConnectorsToContext","position":{"start":{"line":572,"column":3,"offset":28541},"end":{"line":572,"column":30,"offset":28568},"indent":[]}}],"position":{"start":{"line":572,"column":3,"offset":28541},"end":{"line":572,"column":30,"offset":28568},"indent":[]}}],"position":{"start":{"line":572,"column":1,"offset":28539},"end":{"line":572,"column":30,"offset":28568},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"attachDirectiveResolvers","position":{"start":{"line":573,"column":3,"offset":28571},"end":{"line":573,"column":29,"offset":28597},"indent":[]}}],"position":{"start":{"line":573,"column":3,"offset":28571},"end":{"line":573,"column":29,"offset":28597},"indent":[]}}],"position":{"start":{"line":573,"column":1,"offset":28569},"end":{"line":573,"column":29,"offset":28597},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"buildSchemaFromTypeDefinitions","position":{"start":{"line":574,"column":3,"offset":28600},"end":{"line":574,"column":35,"offset":28632},"indent":[]}}],"position":{"start":{"line":574,"column":3,"offset":28600},"end":{"line":574,"column":35,"offset":28632},"indent":[]}}],"position":{"start":{"line":574,"column":1,"offset":28598},"end":{"line":574,"column":35,"offset":28632},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"chainResolvers","position":{"start":{"line":575,"column":3,"offset":28635},"end":{"line":575,"column":19,"offset":28651},"indent":[]}}],"position":{"start":{"line":575,"column":3,"offset":28635},"end":{"line":575,"column":19,"offset":28651},"indent":[]}}],"position":{"start":{"line":575,"column":1,"offset":28633},"end":{"line":575,"column":19,"offset":28651},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"checkForResolveTypeResolver","position":{"start":{"line":576,"column":3,"offset":28654},"end":{"line":576,"column":32,"offset":28683},"indent":[]}}],"position":{"start":{"line":576,"column":3,"offset":28654},"end":{"line":576,"column":32,"offset":28683},"indent":[]}}],"position":{"start":{"line":576,"column":1,"offset":28652},"end":{"line":576,"column":32,"offset":28683},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"concatenateTypeDefs","position":{"start":{"line":577,"column":3,"offset":28686},"end":{"line":577,"column":24,"offset":28707},"indent":[]}}],"position":{"start":{"line":577,"column":3,"offset":28686},"end":{"line":577,"column":24,"offset":28707},"indent":[]}}],"position":{"start":{"line":577,"column":1,"offset":28684},"end":{"line":577,"column":24,"offset":28707},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"decorateWithLogger","position":{"start":{"line":578,"column":3,"offset":28710},"end":{"line":578,"column":23,"offset":28730},"indent":[]}}],"position":{"start":{"line":578,"column":3,"offset":28710},"end":{"line":578,"column":23,"offset":28730},"indent":[]}}],"position":{"start":{"line":578,"column":1,"offset":28708},"end":{"line":578,"column":23,"offset":28730},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"defaultCreateRemoteResolver","position":{"start":{"line":579,"column":3,"offset":28733},"end":{"line":579,"column":32,"offset":28762},"indent":[]}}],"position":{"start":{"line":579,"column":3,"offset":28733},"end":{"line":579,"column":32,"offset":28762},"indent":[]}}],"position":{"start":{"line":579,"column":1,"offset":28731},"end":{"line":579,"column":32,"offset":28762},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"defaultMergedResolver","position":{"start":{"line":580,"column":3,"offset":28765},"end":{"line":580,"column":26,"offset":28788},"indent":[]}}],"position":{"start":{"line":580,"column":3,"offset":28765},"end":{"line":580,"column":26,"offset":28788},"indent":[]}}],"position":{"start":{"line":580,"column":1,"offset":28763},"end":{"line":580,"column":26,"offset":28788},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"delegateToSchema","position":{"start":{"line":581,"column":3,"offset":28791},"end":{"line":581,"column":21,"offset":28809},"indent":[]}}],"position":{"start":{"line":581,"column":3,"offset":28791},"end":{"line":581,"column":21,"offset":28809},"indent":[]}}],"position":{"start":{"line":581,"column":1,"offset":28789},"end":{"line":581,"column":21,"offset":28809},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"extendResolversFromInterfaces","position":{"start":{"line":582,"column":3,"offset":28812},"end":{"line":582,"column":34,"offset":28843},"indent":[]}}],"position":{"start":{"line":582,"column":3,"offset":28812},"end":{"line":582,"column":34,"offset":28843},"indent":[]}}],"position":{"start":{"line":582,"column":1,"offset":28810},"end":{"line":582,"column":34,"offset":28843},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"extractExtensionDefinitions","position":{"start":{"line":583,"column":3,"offset":28846},"end":{"line":583,"column":32,"offset":28875},"indent":[]}}],"position":{"start":{"line":583,"column":3,"offset":28846},"end":{"line":583,"column":32,"offset":28875},"indent":[]}}],"position":{"start":{"line":583,"column":1,"offset":28844},"end":{"line":583,"column":32,"offset":28875},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"forEachField","position":{"start":{"line":584,"column":3,"offset":28878},"end":{"line":584,"column":17,"offset":28892},"indent":[]}}],"position":{"start":{"line":584,"column":3,"offset":28878},"end":{"line":584,"column":17,"offset":28892},"indent":[]}}],"position":{"start":{"line":584,"column":1,"offset":28876},"end":{"line":584,"column":17,"offset":28892},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"introspectSchema","position":{"start":{"line":585,"column":3,"offset":28895},"end":{"line":585,"column":21,"offset":28913},"indent":[]}}],"position":{"start":{"line":585,"column":3,"offset":28895},"end":{"line":585,"column":21,"offset":28913},"indent":[]}}],"position":{"start":{"line":585,"column":1,"offset":28893},"end":{"line":585,"column":21,"offset":28913},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"makeExecutableSchema","position":{"start":{"line":586,"column":3,"offset":28916},"end":{"line":586,"column":25,"offset":28938},"indent":[]}}],"position":{"start":{"line":586,"column":3,"offset":28916},"end":{"line":586,"column":25,"offset":28938},"indent":[]}}],"position":{"start":{"line":586,"column":1,"offset":28914},"end":{"line":586,"column":25,"offset":28938},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"makeRemoteExecutableSchema","position":{"start":{"line":587,"column":3,"offset":28941},"end":{"line":587,"column":31,"offset":28969},"indent":[]}}],"position":{"start":{"line":587,"column":3,"offset":28941},"end":{"line":587,"column":31,"offset":28969},"indent":[]}}],"position":{"start":{"line":587,"column":1,"offset":28939},"end":{"line":587,"column":31,"offset":28969},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"mergeSchemas","position":{"start":{"line":588,"column":3,"offset":28972},"end":{"line":588,"column":17,"offset":28986},"indent":[]}}],"position":{"start":{"line":588,"column":3,"offset":28972},"end":{"line":588,"column":17,"offset":28986},"indent":[]}}],"position":{"start":{"line":588,"column":1,"offset":28970},"end":{"line":588,"column":17,"offset":28986},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"mockServer","position":{"start":{"line":589,"column":3,"offset":28989},"end":{"line":589,"column":15,"offset":29001},"indent":[]}}],"position":{"start":{"line":589,"column":3,"offset":28989},"end":{"line":589,"column":15,"offset":29001},"indent":[]}}],"position":{"start":{"line":589,"column":1,"offset":28987},"end":{"line":589,"column":15,"offset":29001},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"transformSchema","position":{"start":{"line":590,"column":3,"offset":29004},"end":{"line":590,"column":20,"offset":29021},"indent":[]}}],"position":{"start":{"line":590,"column":3,"offset":29004},"end":{"line":590,"column":20,"offset":29021},"indent":[]}}],"position":{"start":{"line":590,"column":1,"offset":29002},"end":{"line":590,"column":20,"offset":29021},"indent":[]}}],"position":{"start":{"line":511,"column":1,"offset":27261},"end":{"line":590,"column":20,"offset":29021},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Exports from ","position":{"start":{"line":592,"column":5,"offset":29027},"end":{"line":592,"column":18,"offset":29040},"indent":[]}},{"type":"inlineCode","value":"graphql-subscriptions","position":{"start":{"line":592,"column":18,"offset":29040},"end":{"line":592,"column":41,"offset":29063},"indent":[]}}],"position":{"start":{"line":592,"column":1,"offset":29023},"end":{"line":592,"column":41,"offset":29063},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Apollo Server 2 exports every symbol exported by ","position":{"start":{"line":594,"column":1,"offset":29065},"end":{"line":594,"column":50,"offset":29114},"indent":[]}},{"type":"link","title":null,"url":"https://www.npmjs.com/package/graphql-subscriptions","children":[{"type":"inlineCode","value":"graphql-subscriptions","position":{"start":{"line":594,"column":51,"offset":29115},"end":{"line":594,"column":74,"offset":29138},"indent":[]}}],"position":{"start":{"line":594,"column":50,"offset":29114},"end":{"line":594,"column":128,"offset":29192},"indent":[]}},{"type":"text","value":". If you are importing any of the following symbols from an Apollo Server package, you should instead run ","position":{"start":{"line":594,"column":128,"offset":29192},"end":{"line":594,"column":234,"offset":29298},"indent":[]}},{"type":"inlineCode","value":"npm install graphql-subscriptions","position":{"start":{"line":594,"column":234,"offset":29298},"end":{"line":594,"column":269,"offset":29333},"indent":[]}},{"type":"text","value":" and import the symbol from ","position":{"start":{"line":594,"column":269,"offset":29333},"end":{"line":594,"column":297,"offset":29361},"indent":[]}},{"type":"inlineCode","value":"graphql-subscriptions","position":{"start":{"line":594,"column":297,"offset":29361},"end":{"line":594,"column":320,"offset":29384},"indent":[]}},{"type":"text","value":" instead.","position":{"start":{"line":594,"column":320,"offset":29384},"end":{"line":594,"column":329,"offset":29393},"indent":[]}}],"position":{"start":{"line":594,"column":1,"offset":29065},"end":{"line":594,"column":329,"offset":29393},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"FilterFn","position":{"start":{"line":596,"column":3,"offset":29397},"end":{"line":596,"column":13,"offset":29407},"indent":[]}}],"position":{"start":{"line":596,"column":3,"offset":29397},"end":{"line":596,"column":13,"offset":29407},"indent":[]}}],"position":{"start":{"line":596,"column":1,"offset":29395},"end":{"line":596,"column":13,"offset":29407},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"PubSub","position":{"start":{"line":597,"column":3,"offset":29410},"end":{"line":597,"column":11,"offset":29418},"indent":[]}}],"position":{"start":{"line":597,"column":3,"offset":29410},"end":{"line":597,"column":11,"offset":29418},"indent":[]}}],"position":{"start":{"line":597,"column":1,"offset":29408},"end":{"line":597,"column":11,"offset":29418},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"PubSubEngine","position":{"start":{"line":598,"column":3,"offset":29421},"end":{"line":598,"column":17,"offset":29435},"indent":[]}}],"position":{"start":{"line":598,"column":3,"offset":29421},"end":{"line":598,"column":17,"offset":29435},"indent":[]}}],"position":{"start":{"line":598,"column":1,"offset":29419},"end":{"line":598,"column":17,"offset":29435},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"PubSubOptions","position":{"start":{"line":599,"column":3,"offset":29438},"end":{"line":599,"column":18,"offset":29453},"indent":[]}}],"position":{"start":{"line":599,"column":3,"offset":29438},"end":{"line":599,"column":18,"offset":29453},"indent":[]}}],"position":{"start":{"line":599,"column":1,"offset":29436},"end":{"line":599,"column":18,"offset":29453},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"ResolverFn","position":{"start":{"line":600,"column":3,"offset":29456},"end":{"line":600,"column":15,"offset":29468},"indent":[]}}],"position":{"start":{"line":600,"column":3,"offset":29456},"end":{"line":600,"column":15,"offset":29468},"indent":[]}}],"position":{"start":{"line":600,"column":1,"offset":29454},"end":{"line":600,"column":15,"offset":29468},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"withFilter","position":{"start":{"line":601,"column":3,"offset":29471},"end":{"line":601,"column":15,"offset":29483},"indent":[]}}],"position":{"start":{"line":601,"column":3,"offset":29471},"end":{"line":601,"column":15,"offset":29483},"indent":[]}}],"position":{"start":{"line":601,"column":1,"offset":29469},"end":{"line":601,"column":15,"offset":29483},"indent":[]}}],"position":{"start":{"line":596,"column":1,"offset":29395},"end":{"line":601,"column":15,"offset":29483},"indent":[1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Exports from ","position":{"start":{"line":603,"column":5,"offset":29489},"end":{"line":603,"column":18,"offset":29502},"indent":[]}},{"type":"inlineCode","value":"graphql-upload","position":{"start":{"line":603,"column":18,"offset":29502},"end":{"line":603,"column":34,"offset":29518},"indent":[]}}],"position":{"start":{"line":603,"column":1,"offset":29485},"end":{"line":603,"column":34,"offset":29518},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Apollo Server 2 exports the ","position":{"start":{"line":605,"column":1,"offset":29520},"end":{"line":605,"column":29,"offset":29548},"indent":[]}},{"type":"inlineCode","value":"GraphQLUpload","position":{"start":{"line":605,"column":29,"offset":29548},"end":{"line":605,"column":44,"offset":29563},"indent":[]}},{"type":"text","value":" symbol from (our fork of) ","position":{"start":{"line":605,"column":44,"offset":29563},"end":{"line":605,"column":71,"offset":29590},"indent":[]}},{"type":"inlineCode","value":"graphql-upload","position":{"start":{"line":605,"column":71,"offset":29590},"end":{"line":605,"column":87,"offset":29606},"indent":[]}},{"type":"text","value":". Apollo Server 3 no longer has built-in ","position":{"start":{"line":605,"column":87,"offset":29606},"end":{"line":605,"column":128,"offset":29647},"indent":[]}},{"type":"inlineCode","value":"graphql-upload","position":{"start":{"line":605,"column":128,"offset":29647},"end":{"line":605,"column":144,"offset":29663},"indent":[]}},{"type":"text","value":" integration. See ","position":{"start":{"line":605,"column":144,"offset":29663},"end":{"line":605,"column":162,"offset":29681},"indent":[]}},{"type":"link","title":null,"url":"../data/file-uploads/","children":[{"type":"text","value":"the documentation on how to enable file uploads in Apollo Server 3","position":{"start":{"line":605,"column":163,"offset":29682},"end":{"line":605,"column":229,"offset":29748},"indent":[]}}],"position":{"start":{"line":605,"column":162,"offset":29681},"end":{"line":605,"column":253,"offset":29772},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":605,"column":253,"offset":29772},"end":{"line":605,"column":254,"offset":29773},"indent":[]}}],"position":{"start":{"line":605,"column":1,"offset":29520},"end":{"line":605,"column":254,"offset":29773},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Exports related to GraphQL Playground","position":{"start":{"line":607,"column":5,"offset":29779},"end":{"line":607,"column":42,"offset":29816},"indent":[]}}],"position":{"start":{"line":607,"column":1,"offset":29775},"end":{"line":607,"column":42,"offset":29816},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Apollo Server 2 exports a ","position":{"start":{"line":609,"column":1,"offset":29818},"end":{"line":609,"column":27,"offset":29844},"indent":[]}},{"type":"inlineCode","value":"defaultPlaygroundOptions","position":{"start":{"line":609,"column":27,"offset":29844},"end":{"line":609,"column":53,"offset":29870},"indent":[]}},{"type":"text","value":" object, along with ","position":{"start":{"line":609,"column":53,"offset":29870},"end":{"line":609,"column":73,"offset":29890},"indent":[]}},{"type":"inlineCode","value":"PlaygroundConfig","position":{"start":{"line":609,"column":73,"offset":29890},"end":{"line":609,"column":91,"offset":29908},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":609,"column":91,"offset":29908},"end":{"line":609,"column":96,"offset":29913},"indent":[]}},{"type":"inlineCode","value":"PlaygroundRenderPageOptions","position":{"start":{"line":609,"column":96,"offset":29913},"end":{"line":609,"column":125,"offset":29942},"indent":[]}},{"type":"text","value":" types to support the ","position":{"start":{"line":609,"column":125,"offset":29942},"end":{"line":609,"column":147,"offset":29964},"indent":[]}},{"type":"inlineCode","value":"playground","position":{"start":{"line":609,"column":147,"offset":29964},"end":{"line":609,"column":159,"offset":29976},"indent":[]}},{"type":"text","value":" top-level constructor argument.","position":{"start":{"line":609,"column":159,"offset":29976},"end":{"line":609,"column":191,"offset":30008},"indent":[]}}],"position":{"start":{"line":609,"column":1,"offset":29818},"end":{"line":609,"column":191,"offset":30008},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, GraphQL Playground is one of several landing pages implemented via plugins, and there are no default options for it. The ","position":{"start":{"line":611,"column":1,"offset":30010},"end":{"line":611,"column":142,"offset":30151},"indent":[]}},{"type":"inlineCode","value":"ApolloServerPluginLandingPageGraphQLPlaygroundOptions","position":{"start":{"line":611,"column":142,"offset":30151},"end":{"line":611,"column":197,"offset":30206},"indent":[]}},{"type":"text","value":" type exported from ","position":{"start":{"line":611,"column":197,"offset":30206},"end":{"line":611,"column":217,"offset":30226},"indent":[]}},{"type":"inlineCode","value":"apollo-server-core","position":{"start":{"line":611,"column":217,"offset":30226},"end":{"line":611,"column":237,"offset":30246},"indent":[]}},{"type":"text","value":" plays a similar role to ","position":{"start":{"line":611,"column":237,"offset":30246},"end":{"line":611,"column":262,"offset":30271},"indent":[]}},{"type":"inlineCode","value":"PlaygroundConfig","position":{"start":{"line":611,"column":262,"offset":30271},"end":{"line":611,"column":280,"offset":30289},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":611,"column":280,"offset":30289},"end":{"line":611,"column":285,"offset":30294},"indent":[]}},{"type":"inlineCode","value":"PlaygroundRenderPageOptions","position":{"start":{"line":611,"column":285,"offset":30294},"end":{"line":611,"column":314,"offset":30323},"indent":[]}},{"type":"text","value":". See ","position":{"start":{"line":611,"column":314,"offset":30323},"end":{"line":611,"column":320,"offset":30329},"indent":[]}},{"type":"link","title":null,"url":"#graphql-playground","children":[{"type":"text","value":"the section on ","position":{"start":{"line":611,"column":321,"offset":30330},"end":{"line":611,"column":336,"offset":30345},"indent":[]}},{"type":"inlineCode","value":"playground","position":{"start":{"line":611,"column":336,"offset":30345},"end":{"line":611,"column":348,"offset":30357},"indent":[]}},{"type":"text","value":" above","position":{"start":{"line":611,"column":348,"offset":30357},"end":{"line":611,"column":354,"offset":30363},"indent":[]}}],"position":{"start":{"line":611,"column":320,"offset":30329},"end":{"line":611,"column":376,"offset":30385},"indent":[]}},{"type":"text","value":" for more details on configuring GraphQL Playground in Apollo Server 3.","position":{"start":{"line":611,"column":376,"offset":30385},"end":{"line":611,"column":447,"offset":30456},"indent":[]}}],"position":{"start":{"line":611,"column":1,"offset":30010},"end":{"line":611,"column":447,"offset":30456},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Removed features","position":{"start":{"line":613,"column":4,"offset":30461},"end":{"line":613,"column":20,"offset":30477},"indent":[]}}],"position":{"start":{"line":613,"column":1,"offset":30458},"end":{"line":613,"column":20,"offset":30477},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Several small features have been removed from Apollo Server 3.","position":{"start":{"line":615,"column":1,"offset":30479},"end":{"line":615,"column":63,"offset":30541},"indent":[]}}],"position":{"start":{"line":615,"column":1,"offset":30479},"end":{"line":615,"column":63,"offset":30541},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Guessing Apollo Studio graph ID from API key","position":{"start":{"line":617,"column":5,"offset":30547},"end":{"line":617,"column":49,"offset":30591},"indent":[]}}],"position":{"start":{"line":617,"column":1,"offset":30543},"end":{"line":617,"column":49,"offset":30591},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, if you specify an Apollo API key (e.g., with the ","position":{"start":{"line":619,"column":1,"offset":30593},"end":{"line":619,"column":70,"offset":30662},"indent":[]}},{"type":"inlineCode","value":"APOLLO_KEY","position":{"start":{"line":619,"column":70,"offset":30662},"end":{"line":619,"column":82,"offset":30674},"indent":[]}},{"type":"text","value":" environment variable) that starts with ","position":{"start":{"line":619,"column":82,"offset":30674},"end":{"line":619,"column":122,"offset":30714},"indent":[]}},{"type":"inlineCode","value":"service:your-graph-id:","position":{"start":{"line":619,"column":122,"offset":30714},"end":{"line":619,"column":146,"offset":30738},"indent":[]}},{"type":"text","value":", Apollo Server automatically guesses that your Studio graph ID (used for usage reporting, schema reporting, managed federation, and so on) is ","position":{"start":{"line":619,"column":146,"offset":30738},"end":{"line":619,"column":289,"offset":30881},"indent":[]}},{"type":"inlineCode","value":"your-graph-id","position":{"start":{"line":619,"column":289,"offset":30881},"end":{"line":619,"column":304,"offset":30896},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":619,"column":304,"offset":30896},"end":{"line":619,"column":305,"offset":30897},"indent":[]}}],"position":{"start":{"line":619,"column":1,"offset":30593},"end":{"line":619,"column":305,"offset":30897},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, you should instead specify your Studio graph ID explicitly when using features that connect to Studio. You can specify the graph ID by itself in the ","position":{"start":{"line":621,"column":1,"offset":30899},"end":{"line":621,"column":170,"offset":31068},"indent":[]}},{"type":"inlineCode","value":"APOLLO_GRAPH_ID","position":{"start":{"line":621,"column":170,"offset":31068},"end":{"line":621,"column":187,"offset":31085},"indent":[]}},{"type":"text","value":" environment variable (or via ","position":{"start":{"line":621,"column":187,"offset":31085},"end":{"line":621,"column":217,"offset":31115},"indent":[]}},{"type":"inlineCode","value":"new ApolloServer({apollo: {graphId}}))","position":{"start":{"line":621,"column":217,"offset":31115},"end":{"line":621,"column":257,"offset":31155},"indent":[]}},{"type":"text","value":", or alongside the variant in a string like ","position":{"start":{"line":621,"column":257,"offset":31155},"end":{"line":621,"column":301,"offset":31199},"indent":[]}},{"type":"inlineCode","value":"your-graph-id@your-graph-variant","position":{"start":{"line":621,"column":301,"offset":31199},"end":{"line":621,"column":335,"offset":31233},"indent":[]}},{"type":"text","value":" in the ","position":{"start":{"line":621,"column":335,"offset":31233},"end":{"line":621,"column":343,"offset":31241},"indent":[]}},{"type":"inlineCode","value":"APOLLO_GRAPH_REF","position":{"start":{"line":621,"column":343,"offset":31241},"end":{"line":621,"column":361,"offset":31259},"indent":[]}},{"type":"text","value":" environment variable (or via ","position":{"start":{"line":621,"column":361,"offset":31259},"end":{"line":621,"column":391,"offset":31289},"indent":[]}},{"type":"inlineCode","value":"new ApolloServer({apollo: {graphRef}})","position":{"start":{"line":621,"column":391,"offset":31289},"end":{"line":621,"column":431,"offset":31329},"indent":[]}},{"type":"text","value":"). See ","position":{"start":{"line":621,"column":431,"offset":31329},"end":{"line":621,"column":438,"offset":31336},"indent":[]}},{"type":"link","title":null,"url":"./api/apollo-server/#apollo","children":[{"type":"text","value":"the ","position":{"start":{"line":621,"column":439,"offset":31337},"end":{"line":621,"column":443,"offset":31341},"indent":[]}},{"type":"inlineCode","value":"apollo","position":{"start":{"line":621,"column":443,"offset":31341},"end":{"line":621,"column":451,"offset":31349},"indent":[]}},{"type":"text","value":" constructor option","position":{"start":{"line":621,"column":451,"offset":31349},"end":{"line":621,"column":470,"offset":31368},"indent":[]}}],"position":{"start":{"line":621,"column":438,"offset":31336},"end":{"line":621,"column":500,"offset":31398},"indent":[]}},{"type":"text","value":" for more details.","position":{"start":{"line":621,"column":500,"offset":31398},"end":{"line":621,"column":518,"offset":31416},"indent":[]}}],"position":{"start":{"line":621,"column":1,"offset":30899},"end":{"line":621,"column":518,"offset":31416},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"If you set your API key but do ","position":{"start":{"line":623,"column":3,"offset":31420},"end":{"line":623,"column":34,"offset":31451},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"not","position":{"start":{"line":623,"column":35,"offset":31452},"end":{"line":623,"column":38,"offset":31455},"indent":[]}}],"position":{"start":{"line":623,"column":34,"offset":31451},"end":{"line":623,"column":39,"offset":31456},"indent":[]}},{"type":"text","value":" set your graph ref or ID:","position":{"start":{"line":623,"column":39,"offset":31456},"end":{"line":623,"column":65,"offset":31482},"indent":[]}}],"position":{"start":{"line":623,"column":3,"offset":31420},"end":{"line":623,"column":65,"offset":31482},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"If you explicitly set up features like the usage reporting plugin or managed federation, Apollo Server 3 throws an error on startup.","position":{"start":{"line":624,"column":5,"offset":31487},"end":{"line":624,"column":137,"offset":31619},"indent":[]}}],"position":{"start":{"line":624,"column":5,"offset":31487},"end":{"line":624,"column":137,"offset":31619},"indent":[]}}],"position":{"start":{"line":624,"column":3,"offset":31485},"end":{"line":624,"column":137,"offset":31619},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"If you don't explicitly ","position":{"start":{"line":625,"column":5,"offset":31624},"end":{"line":625,"column":29,"offset":31648},"indent":[]}},{"type":"link","title":null,"url":"./api/plugin/usage-reporting/","children":[{"type":"text","value":"set up or disable the usage reporting plugin","position":{"start":{"line":625,"column":30,"offset":31649},"end":{"line":625,"column":74,"offset":31693},"indent":[]}}],"position":{"start":{"line":625,"column":29,"offset":31648},"end":{"line":625,"column":106,"offset":31725},"indent":[]}},{"type":"text","value":", Apollo Server 3 logs a warning suggesting that you either set your graph ref or disable the usage reporting plugin.","position":{"start":{"line":625,"column":106,"offset":31725},"end":{"line":625,"column":223,"offset":31842},"indent":[]}}],"position":{"start":{"line":625,"column":5,"offset":31624},"end":{"line":625,"column":223,"offset":31842},"indent":[]}}],"position":{"start":{"line":625,"column":3,"offset":31622},"end":{"line":625,"column":223,"offset":31842},"indent":[]}}],"position":{"start":{"line":624,"column":3,"offset":31485},"end":{"line":625,"column":223,"offset":31842},"indent":[3]}}],"position":{"start":{"line":623,"column":1,"offset":31418},"end":{"line":625,"column":223,"offset":31842},"indent":[1,1]}},{"type":"heading","depth":3,"children":[{"type":"inlineCode","value":"ApolloServer.schema","position":{"start":{"line":627,"column":5,"offset":31848},"end":{"line":627,"column":26,"offset":31869},"indent":[]}},{"type":"text","value":" field","position":{"start":{"line":627,"column":26,"offset":31869},"end":{"line":627,"column":32,"offset":31875},"indent":[]}}],"position":{"start":{"line":627,"column":1,"offset":31844},"end":{"line":627,"column":32,"offset":31875},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Apollo Server 2 has a deprecated field ","position":{"start":{"line":629,"column":1,"offset":31877},"end":{"line":629,"column":40,"offset":31916},"indent":[]}},{"type":"inlineCode","value":"ApolloServer.schema","position":{"start":{"line":629,"column":40,"offset":31916},"end":{"line":629,"column":61,"offset":31937},"indent":[]}},{"type":"text","value":" (which doesn't work when the server is a federated gateway). Apollo Server 3 does not contain this field. To access your server's schema, you have a few options:","position":{"start":{"line":629,"column":61,"offset":31937},"end":{"line":629,"column":223,"offset":32099},"indent":[]}}],"position":{"start":{"line":629,"column":1,"offset":31877},"end":{"line":629,"column":223,"offset":32099},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Construct the schema yourself (e.g., with ","position":{"start":{"line":631,"column":3,"offset":32103},"end":{"line":631,"column":45,"offset":32145},"indent":[]}},{"type":"inlineCode","value":"const schema = makeExecutableSchema({typeDefs, resolvers})","position":{"start":{"line":631,"column":45,"offset":32145},"end":{"line":631,"column":105,"offset":32205},"indent":[]}},{"type":"text","value":" from ","position":{"start":{"line":631,"column":105,"offset":32205},"end":{"line":631,"column":111,"offset":32211},"indent":[]}},{"type":"inlineCode","value":"@graphql-tools/schema","position":{"start":{"line":631,"column":111,"offset":32211},"end":{"line":631,"column":134,"offset":32234},"indent":[]}},{"type":"text","value":"), pass it in as ","position":{"start":{"line":631,"column":134,"offset":32234},"end":{"line":631,"column":151,"offset":32251},"indent":[]}},{"type":"inlineCode","value":"new ApolloServer({schema})","position":{"start":{"line":631,"column":151,"offset":32251},"end":{"line":631,"column":179,"offset":32279},"indent":[]}},{"type":"text","value":", and refer to this same ","position":{"start":{"line":631,"column":179,"offset":32279},"end":{"line":631,"column":204,"offset":32304},"indent":[]}},{"type":"inlineCode","value":"schema","position":{"start":{"line":631,"column":204,"offset":32304},"end":{"line":631,"column":212,"offset":32312},"indent":[]}},{"type":"text","value":" value elsewhere. Apollo Server 3 won't modify the schema you pass in.","position":{"start":{"line":631,"column":212,"offset":32312},"end":{"line":631,"column":282,"offset":32382},"indent":[]}}],"position":{"start":{"line":631,"column":3,"offset":32103},"end":{"line":631,"column":282,"offset":32382},"indent":[]}}],"position":{"start":{"line":631,"column":1,"offset":32101},"end":{"line":631,"column":282,"offset":32382},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Write a plugin that uses the ","position":{"start":{"line":632,"column":3,"offset":32385},"end":{"line":632,"column":32,"offset":32414},"indent":[]}},{"type":"link","title":null,"url":"./integrations/plugins-event-reference/#serverwillstart","children":[{"type":"inlineCode","value":"serverWillStart","position":{"start":{"line":632,"column":33,"offset":32415},"end":{"line":632,"column":50,"offset":32432},"indent":[]}},{"type":"text","value":" event","position":{"start":{"line":632,"column":50,"offset":32432},"end":{"line":632,"column":56,"offset":32438},"indent":[]}}],"position":{"start":{"line":632,"column":32,"offset":32414},"end":{"line":632,"column":114,"offset":32496},"indent":[]}},{"type":"text","value":" to obtain the schema. Note that if your server is a gateway, this receives the ","position":{"start":{"line":632,"column":114,"offset":32496},"end":{"line":632,"column":194,"offset":32576},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"first","position":{"start":{"line":632,"column":195,"offset":32577},"end":{"line":632,"column":200,"offset":32582},"indent":[]}}],"position":{"start":{"line":632,"column":194,"offset":32576},"end":{"line":632,"column":201,"offset":32583},"indent":[]}},{"type":"text","value":" schema that's loaded on startup but doesn't receive any subsequent schemas if it updates dynamically.","position":{"start":{"line":632,"column":201,"offset":32583},"end":{"line":632,"column":303,"offset":32685},"indent":[]}}],"position":{"start":{"line":632,"column":3,"offset":32385},"end":{"line":632,"column":303,"offset":32685},"indent":[]}}],"position":{"start":{"line":632,"column":1,"offset":32383},"end":{"line":632,"column":303,"offset":32685},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"If your server is a gateway, register a callback with ","position":{"start":{"line":633,"column":3,"offset":32688},"end":{"line":633,"column":57,"offset":32742},"indent":[]}},{"type":"inlineCode","value":"gateway.onSchemaChange","position":{"start":{"line":633,"column":57,"offset":32742},"end":{"line":633,"column":81,"offset":32766},"indent":[]}},{"type":"text","value":". Note that this API has some inconsistent behavior. To resolve this, we are considering ","position":{"start":{"line":633,"column":81,"offset":32766},"end":{"line":633,"column":170,"offset":32855},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/apollographql/apollo-server/pull/5187","children":[{"type":"text","value":"adding an Apollo Server plugin event that receives all schema updates","position":{"start":{"line":633,"column":171,"offset":32856},"end":{"line":633,"column":240,"offset":32925},"indent":[]}}],"position":{"start":{"line":633,"column":170,"offset":32855},"end":{"line":633,"column":299,"offset":32984},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":633,"column":299,"offset":32984},"end":{"line":633,"column":300,"offset":32985},"indent":[]}}],"position":{"start":{"line":633,"column":3,"offset":32688},"end":{"line":633,"column":300,"offset":32985},"indent":[]}}],"position":{"start":{"line":633,"column":1,"offset":32686},"end":{"line":633,"column":300,"offset":32985},"indent":[]}}],"position":{"start":{"line":631,"column":1,"offset":32101},"end":{"line":633,"column":300,"offset":32985},"indent":[1,1]}},{"type":"heading","depth":3,"children":[{"type":"inlineCode","value":"apollo-server-testing","position":{"start":{"line":635,"column":5,"offset":32991},"end":{"line":635,"column":28,"offset":33014},"indent":[]}}],"position":{"start":{"line":635,"column":1,"offset":32987},"end":{"line":635,"column":28,"offset":33014},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Apollo Server 2 contains a package ","position":{"start":{"line":637,"column":1,"offset":33016},"end":{"line":637,"column":36,"offset":33051},"indent":[]}},{"type":"inlineCode","value":"apollo-server-testing","position":{"start":{"line":637,"column":36,"offset":33051},"end":{"line":637,"column":59,"offset":33074},"indent":[]}},{"type":"text","value":". This package is a thin wrapper around the ","position":{"start":{"line":637,"column":59,"offset":33074},"end":{"line":637,"column":103,"offset":33118},"indent":[]}},{"type":"inlineCode","value":"server.executeOperation","position":{"start":{"line":637,"column":103,"offset":33118},"end":{"line":637,"column":128,"offset":33143},"indent":[]}},{"type":"text","value":" method. As of Apollo Server 2.25.0, we no longer document this package and instead ","position":{"start":{"line":637,"column":128,"offset":33143},"end":{"line":637,"column":212,"offset":33227},"indent":[]}},{"type":"link","title":null,"url":"../testing/testing/","children":[{"type":"text","value":"document using ","position":{"start":{"line":637,"column":213,"offset":33228},"end":{"line":637,"column":228,"offset":33243},"indent":[]}},{"type":"inlineCode","value":"executeOperation","position":{"start":{"line":637,"column":228,"offset":33243},"end":{"line":637,"column":246,"offset":33261},"indent":[]}},{"type":"text","value":" directly","position":{"start":{"line":637,"column":246,"offset":33261},"end":{"line":637,"column":255,"offset":33270},"indent":[]}}],"position":{"start":{"line":637,"column":212,"offset":33227},"end":{"line":637,"column":277,"offset":33292},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":637,"column":277,"offset":33292},"end":{"line":637,"column":278,"offset":33293},"indent":[]}}],"position":{"start":{"line":637,"column":1,"offset":33016},"end":{"line":637,"column":278,"offset":33293},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, we no longer publish this package. It's possible that the Apollo Server 2 version of this package might work with Apollo Server 3 servers. If you do use ","position":{"start":{"line":639,"column":1,"offset":33295},"end":{"line":639,"column":174,"offset":33468},"indent":[]}},{"type":"inlineCode","value":"apollo-server-testing","position":{"start":{"line":639,"column":174,"offset":33468},"end":{"line":639,"column":197,"offset":33491},"indent":[]}},{"type":"text","value":", we suggest that you migrate to using ","position":{"start":{"line":639,"column":197,"offset":33491},"end":{"line":639,"column":236,"offset":33530},"indent":[]}},{"type":"inlineCode","value":"executeOperation","position":{"start":{"line":639,"column":236,"offset":33530},"end":{"line":639,"column":254,"offset":33548},"indent":[]}},{"type":"text","value":" directly (with at least 2.25.0 of Apollo Server) before upgrading to Apollo Server 3.","position":{"start":{"line":639,"column":254,"offset":33548},"end":{"line":639,"column":340,"offset":33634},"indent":[]}}],"position":{"start":{"line":639,"column":1,"offset":33295},"end":{"line":639,"column":340,"offset":33634},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you used ","position":{"start":{"line":641,"column":1,"offset":33636},"end":{"line":641,"column":13,"offset":33648},"indent":[]}},{"type":"inlineCode","value":"apollo-server-testing","position":{"start":{"line":641,"column":13,"offset":33648},"end":{"line":641,"column":36,"offset":33671},"indent":[]}},{"type":"text","value":" like so:","position":{"start":{"line":641,"column":36,"offset":33671},"end":{"line":641,"column":45,"offset":33680},"indent":[]}}],"position":{"start":{"line":641,"column":1,"offset":33636},"end":{"line":641,"column":45,"offset":33680},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"const { createTestClient } = require('apollo-server-testing');\nconst { query, mutate } = createTestClient(server);\nawait query({ query: QUERY });\nawait mutate({ mutation: MUTATION });","position":{"start":{"line":643,"column":1,"offset":33682},"end":{"line":648,"column":4,"offset":33883},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"then you can use ","position":{"start":{"line":650,"column":1,"offset":33885},"end":{"line":650,"column":18,"offset":33902},"indent":[]}},{"type":"inlineCode","value":"executeOperation","position":{"start":{"line":650,"column":18,"offset":33902},"end":{"line":650,"column":36,"offset":33920},"indent":[]}},{"type":"text","value":" like so:","position":{"start":{"line":650,"column":36,"offset":33920},"end":{"line":650,"column":45,"offset":33929},"indent":[]}}],"position":{"start":{"line":650,"column":1,"offset":33885},"end":{"line":650,"column":45,"offset":33929},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"await server.executeOperation({ query: QUERY });\nawait server.executeOperation({ query: MUTATION });","position":{"start":{"line":652,"column":1,"offset":33931},"end":{"line":655,"column":4,"offset":34049},"indent":[1,1,1]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"Note that prior to Apollo Server 2.25.0, ","position":{"start":{"line":657,"column":3,"offset":34053},"end":{"line":657,"column":44,"offset":34094},"indent":[]}},{"type":"inlineCode","value":"apollo-server-testing","position":{"start":{"line":657,"column":44,"offset":34094},"end":{"line":657,"column":67,"offset":34117},"indent":[]}},{"type":"text","value":" functions allowed you to pass your operation as a string or a ","position":{"start":{"line":657,"column":67,"offset":34117},"end":{"line":657,"column":130,"offset":34180},"indent":[]}},{"type":"inlineCode","value":"DocumentNode","position":{"start":{"line":657,"column":130,"offset":34180},"end":{"line":657,"column":144,"offset":34194},"indent":[]}},{"type":"text","value":" as returned from ","position":{"start":{"line":657,"column":144,"offset":34194},"end":{"line":657,"column":162,"offset":34212},"indent":[]}},{"type":"inlineCode","value":"gql","position":{"start":{"line":657,"column":162,"offset":34212},"end":{"line":657,"column":167,"offset":34217},"indent":[]}},{"type":"text","value":", but ","position":{"start":{"line":657,"column":167,"offset":34217},"end":{"line":657,"column":173,"offset":34223},"indent":[]}},{"type":"inlineCode","value":"executeOperation","position":{"start":{"line":657,"column":173,"offset":34223},"end":{"line":657,"column":191,"offset":34241},"indent":[]}},{"type":"text","value":" only supported strings. As of v2.25.0, ","position":{"start":{"line":657,"column":191,"offset":34241},"end":{"line":657,"column":231,"offset":34281},"indent":[]}},{"type":"inlineCode","value":"executeOperation","position":{"start":{"line":657,"column":231,"offset":34281},"end":{"line":657,"column":249,"offset":34299},"indent":[]}},{"type":"text","value":" takes ","position":{"start":{"line":657,"column":249,"offset":34299},"end":{"line":657,"column":256,"offset":34306},"indent":[]}},{"type":"inlineCode","value":"string","position":{"start":{"line":657,"column":256,"offset":34306},"end":{"line":657,"column":264,"offset":34314},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":657,"column":264,"offset":34314},"end":{"line":657,"column":268,"offset":34318},"indent":[]}},{"type":"inlineCode","value":"DocumentNode","position":{"start":{"line":657,"column":268,"offset":34318},"end":{"line":657,"column":282,"offset":34332},"indent":[]}},{"type":"text","value":", which makes the change shown above straightforward in all cases.","position":{"start":{"line":657,"column":282,"offset":34332},"end":{"line":657,"column":348,"offset":34398},"indent":[]}}],"position":{"start":{"line":657,"column":3,"offset":34053},"end":{"line":657,"column":348,"offset":34398},"indent":[]}}],"position":{"start":{"line":657,"column":1,"offset":34051},"end":{"line":657,"column":348,"offset":34398},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"inlineCode","value":"apollo-datasource-rest","position":{"start":{"line":659,"column":5,"offset":34404},"end":{"line":659,"column":29,"offset":34428},"indent":[]}},{"type":"text","value":": ","position":{"start":{"line":659,"column":29,"offset":34428},"end":{"line":659,"column":31,"offset":34430},"indent":[]}},{"type":"inlineCode","value":"baseURL","position":{"start":{"line":659,"column":31,"offset":34430},"end":{"line":659,"column":40,"offset":34439},"indent":[]}},{"type":"text","value":" override change","position":{"start":{"line":659,"column":40,"offset":34439},"end":{"line":659,"column":56,"offset":34455},"indent":[]}}],"position":{"start":{"line":659,"column":1,"offset":34400},"end":{"line":659,"column":56,"offset":34455},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When you create a ","position":{"start":{"line":661,"column":1,"offset":34457},"end":{"line":661,"column":19,"offset":34475},"indent":[]}},{"type":"link","title":null,"url":"../data/data-sources/","children":[{"type":"inlineCode","value":"RESTDataSource","position":{"start":{"line":661,"column":20,"offset":34476},"end":{"line":661,"column":36,"offset":34492},"indent":[]}}],"position":{"start":{"line":661,"column":19,"offset":34475},"end":{"line":661,"column":60,"offset":34516},"indent":[]}},{"type":"text","value":" subclass, you need to provide its ","position":{"start":{"line":661,"column":60,"offset":34516},"end":{"line":661,"column":95,"offset":34551},"indent":[]}},{"type":"inlineCode","value":"baseURL","position":{"start":{"line":661,"column":95,"offset":34551},"end":{"line":661,"column":104,"offset":34560},"indent":[]}},{"type":"text","value":". This can be done via ","position":{"start":{"line":661,"column":104,"offset":34560},"end":{"line":661,"column":127,"offset":34583},"indent":[]}},{"type":"inlineCode","value":"this.baseURL = ...","position":{"start":{"line":661,"column":127,"offset":34583},"end":{"line":661,"column":147,"offset":34603},"indent":[]}},{"type":"text","value":" in the constructor or ","position":{"start":{"line":661,"column":147,"offset":34603},"end":{"line":661,"column":170,"offset":34626},"indent":[]}},{"type":"inlineCode","value":"resolveURL","position":{"start":{"line":661,"column":170,"offset":34626},"end":{"line":661,"column":182,"offset":34638},"indent":[]}},{"type":"text","value":", or via ","position":{"start":{"line":661,"column":182,"offset":34638},"end":{"line":661,"column":191,"offset":34647},"indent":[]}},{"type":"inlineCode","value":"baseURL = ...","position":{"start":{"line":661,"column":191,"offset":34647},"end":{"line":661,"column":206,"offset":34662},"indent":[]}},{"type":"text","value":" at the class level.","position":{"start":{"line":661,"column":206,"offset":34662},"end":{"line":661,"column":226,"offset":34682},"indent":[]}}],"position":{"start":{"line":661,"column":1,"offset":34457},"end":{"line":661,"column":226,"offset":34682},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2 you can ","position":{"start":{"line":663,"column":1,"offset":34684},"end":{"line":663,"column":28,"offset":34711},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"also","position":{"start":{"line":663,"column":29,"offset":34712},"end":{"line":663,"column":33,"offset":34716},"indent":[]}}],"position":{"start":{"line":663,"column":28,"offset":34711},"end":{"line":663,"column":34,"offset":34717},"indent":[]}},{"type":"text","value":" provide ","position":{"start":{"line":663,"column":34,"offset":34717},"end":{"line":663,"column":43,"offset":34726},"indent":[]}},{"type":"inlineCode","value":"baseURL","position":{"start":{"line":663,"column":43,"offset":34726},"end":{"line":663,"column":52,"offset":34735},"indent":[]}},{"type":"text","value":" via a getter like ","position":{"start":{"line":663,"column":52,"offset":34735},"end":{"line":663,"column":71,"offset":34754},"indent":[]}},{"type":"inlineCode","value":"get baseURL() { ... }","position":{"start":{"line":663,"column":71,"offset":34754},"end":{"line":663,"column":94,"offset":34777},"indent":[]}},{"type":"text","value":". Apollo Server 3 is compiled with TypeScript 4, which ","position":{"start":{"line":663,"column":94,"offset":34777},"end":{"line":663,"column":149,"offset":34832},"indent":[]}},{"type":"link","title":null,"url":"https://devblogs.microsoft.com/typescript/announcing-typescript-4-0/#properties-overriding-accessors-and-vice-versa-is-an-error","children":[{"type":"text","value":"no longer supports overriding a property with an accessor","position":{"start":{"line":663,"column":150,"offset":34833},"end":{"line":663,"column":207,"offset":34890},"indent":[]}}],"position":{"start":{"line":663,"column":149,"offset":34832},"end":{"line":663,"column":337,"offset":35020},"indent":[]}},{"type":"text","value":", so this is no longer allowed.","position":{"start":{"line":663,"column":337,"offset":35020},"end":{"line":663,"column":368,"offset":35051},"indent":[]}}],"position":{"start":{"line":663,"column":1,"offset":34684},"end":{"line":663,"column":368,"offset":35051},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you used a getter in order to provide a dynamic URL, like this:","position":{"start":{"line":665,"column":1,"offset":35053},"end":{"line":665,"column":67,"offset":35119},"indent":[]}}],"position":{"start":{"line":665,"column":1,"offset":35053},"end":{"line":665,"column":67,"offset":35119},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"class MyDataSource extends RESTDataSource {\n  get baseURL() {\n    return someDynamicallyCalculatedURL();\n  }\n}","position":{"start":{"line":667,"column":1,"offset":35121},"end":{"line":673,"column":4,"offset":35249},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"you can instead override ","position":{"start":{"line":675,"column":1,"offset":35251},"end":{"line":675,"column":26,"offset":35276},"indent":[]}},{"type":"inlineCode","value":"resolveURL","position":{"start":{"line":675,"column":26,"offset":35276},"end":{"line":675,"column":38,"offset":35288},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":675,"column":38,"offset":35288},"end":{"line":675,"column":39,"offset":35289},"indent":[]}}],"position":{"start":{"line":675,"column":1,"offset":35251},"end":{"line":675,"column":39,"offset":35289},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"class MyDataSource extends RESTDataSource {\n  async resolveURL(request: RequestOptions) {\n    if (!this.baseURL) {\n      this.baseURL = someDynamicallyCalculatedURL();\n    }\n    return super.resolveURL(request);\n  }\n}","position":{"start":{"line":677,"column":1,"offset":35291},"end":{"line":686,"column":4,"offset":35526},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"inlineCode","value":"apollo-server-env","position":{"start":{"line":688,"column":5,"offset":35532},"end":{"line":688,"column":24,"offset":35551},"indent":[]}},{"type":"text","value":"'s global type definitions","position":{"start":{"line":688,"column":24,"offset":35551},"end":{"line":688,"column":50,"offset":35577},"indent":[]}}],"position":{"start":{"line":688,"column":1,"offset":35528},"end":{"line":688,"column":50,"offset":35577},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Global TypeScript definitions have been removed from ","position":{"start":{"line":690,"column":1,"offset":35579},"end":{"line":690,"column":54,"offset":35632},"indent":[]}},{"type":"inlineCode","value":"apollo-server-env","position":{"start":{"line":690,"column":54,"offset":35632},"end":{"line":690,"column":73,"offset":35651},"indent":[]}},{"type":"text","value":" since they conflicted with similar global types provided by ","position":{"start":{"line":690,"column":73,"offset":35651},"end":{"line":690,"column":134,"offset":35712},"indent":[]}},{"type":"inlineCode","value":"@types/supertest","position":{"start":{"line":690,"column":134,"offset":35712},"end":{"line":690,"column":152,"offset":35730},"indent":[]}},{"type":"text","value":", which we use in Apollo Server's test suite.  These removed types include types which resemble those of ","position":{"start":{"line":690,"column":152,"offset":35730},"end":{"line":690,"column":257,"offset":35835},"indent":[]}},{"type":"link","title":null,"url":"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API","children":[{"type":"text","value":"the Fetch API","position":{"start":{"line":690,"column":258,"offset":35836},"end":{"line":690,"column":271,"offset":35849},"indent":[]}}],"position":{"start":{"line":690,"column":257,"offset":35835},"end":{"line":690,"column":332,"offset":35910},"indent":[]}},{"type":"text","value":" including, e.g., ","position":{"start":{"line":690,"column":332,"offset":35910},"end":{"line":690,"column":350,"offset":35928},"indent":[]}},{"type":"inlineCode","value":"fetch","position":{"start":{"line":690,"column":350,"offset":35928},"end":{"line":690,"column":357,"offset":35935},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":690,"column":357,"offset":35935},"end":{"line":690,"column":359,"offset":35937},"indent":[]}},{"type":"inlineCode","value":"RequestInfo","position":{"start":{"line":690,"column":359,"offset":35937},"end":{"line":690,"column":372,"offset":35950},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":690,"column":372,"offset":35950},"end":{"line":690,"column":374,"offset":35952},"indent":[]}},{"type":"inlineCode","value":"Headers","position":{"start":{"line":690,"column":374,"offset":35952},"end":{"line":690,"column":383,"offset":35961},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":690,"column":383,"offset":35961},"end":{"line":690,"column":385,"offset":35963},"indent":[]}},{"type":"inlineCode","value":"Request","position":{"start":{"line":690,"column":385,"offset":35963},"end":{"line":690,"column":394,"offset":35972},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":690,"column":394,"offset":35972},"end":{"line":690,"column":396,"offset":35974},"indent":[]}},{"type":"inlineCode","value":"Response","position":{"start":{"line":690,"column":396,"offset":35974},"end":{"line":690,"column":406,"offset":35984},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":690,"column":406,"offset":35984},"end":{"line":690,"column":408,"offset":35986},"indent":[]}},{"type":"inlineCode","value":"ResponseInit","position":{"start":{"line":690,"column":408,"offset":35986},"end":{"line":690,"column":422,"offset":36000},"indent":[]}},{"type":"text","value":", and more.  ","position":{"start":{"line":690,"column":422,"offset":36000},"end":{"line":690,"column":435,"offset":36013},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/apollographql/apollo-server/blob/32cfdcfdbd44f4f4e826f347f47fdcbc0475b5cc/packages/apollo-server-env/src/global.d.ts","children":[{"type":"text","value":"See the full list prior to removal here","position":{"start":{"line":690,"column":436,"offset":36014},"end":{"line":690,"column":475,"offset":36053},"indent":[]}}],"position":{"start":{"line":690,"column":435,"offset":36013},"end":{"line":690,"column":613,"offset":36191},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":690,"column":613,"offset":36191},"end":{"line":690,"column":614,"offset":36192},"indent":[]}}],"position":{"start":{"line":690,"column":1,"offset":35579},"end":{"line":690,"column":614,"offset":36192},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We don't expect this to affect many users and we have not publicly suggested using these types in the past, but it's possible that implementations may be using them inadvertently (e.g., from auto-import on ","position":{"start":{"line":692,"column":1,"offset":36194},"end":{"line":692,"column":207,"offset":36400},"indent":[]}},{"type":"inlineCode","value":"apollo-server-env","position":{"start":{"line":692,"column":207,"offset":36400},"end":{"line":692,"column":226,"offset":36419},"indent":[]}},{"type":"text","value":").  While other type definition sets provide similar hand-curated types, for the time being, we have chosen to rely the same-named types from TypeScript's ","position":{"start":{"line":692,"column":226,"offset":36419},"end":{"line":692,"column":381,"offset":36574},"indent":[]}},{"type":"inlineCode","value":"lib.dom.d.ts","position":{"start":{"line":692,"column":381,"offset":36574},"end":{"line":692,"column":395,"offset":36588},"indent":[]}},{"type":"text","value":" e.g., ","position":{"start":{"line":692,"column":395,"offset":36588},"end":{"line":692,"column":404,"offset":36597},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/microsoft/TypeScript/blob/3c604f1c0a412ef41f58c3f9b239b25e8d725751/lib/lib.dom.d.ts#L1470","children":[{"type":"text","value":"its ","position":{"start":{"line":692,"column":405,"offset":36598},"end":{"line":692,"column":409,"offset":36602},"indent":[]}},{"type":"inlineCode","value":"RequestInfo","position":{"start":{"line":692,"column":409,"offset":36602},"end":{"line":692,"column":422,"offset":36615},"indent":[]}},{"type":"text","value":" type definition","position":{"start":{"line":692,"column":422,"offset":36615},"end":{"line":692,"column":438,"offset":36631},"indent":[]}}],"position":{"start":{"line":692,"column":404,"offset":36597},"end":{"line":692,"column":549,"offset":36742},"indent":[]}},{"type":"text","value":".  Even if those types are more appropriate for browsers, they're a reliable and well-maintained source.  For more details, including our plan for adjusting this again in the future, ","position":{"start":{"line":692,"column":549,"offset":36742},"end":{"line":692,"column":732,"offset":36925},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/apollographql/apollo-server/pull/5165","children":[{"type":"text","value":"see PR #5165","position":{"start":{"line":692,"column":733,"offset":36926},"end":{"line":692,"column":745,"offset":36938},"indent":[]}}],"position":{"start":{"line":692,"column":732,"offset":36925},"end":{"line":692,"column":804,"offset":36997},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":692,"column":804,"offset":36997},"end":{"line":692,"column":805,"offset":36998},"indent":[]}}],"position":{"start":{"line":692,"column":1,"offset":36194},"end":{"line":692,"column":805,"offset":36998},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Changed features","position":{"start":{"line":694,"column":4,"offset":37003},"end":{"line":694,"column":20,"offset":37019},"indent":[]}}],"position":{"start":{"line":694,"column":1,"offset":37000},"end":{"line":694,"column":20,"offset":37019},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Plugin API","position":{"start":{"line":696,"column":5,"offset":37025},"end":{"line":696,"column":15,"offset":37035},"indent":[]}}],"position":{"start":{"line":696,"column":1,"offset":37021},"end":{"line":696,"column":15,"offset":37035},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Almost all plugin events are now async","position":{"start":{"line":698,"column":6,"offset":37042},"end":{"line":698,"column":44,"offset":37080},"indent":[]}}],"position":{"start":{"line":698,"column":1,"offset":37037},"end":{"line":698,"column":44,"offset":37080},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, some ","position":{"start":{"line":700,"column":1,"offset":37082},"end":{"line":700,"column":26,"offset":37107},"indent":[]}},{"type":"link","title":null,"url":"./integrations/plugins-event-reference/","children":[{"type":"text","value":"plugin events","position":{"start":{"line":700,"column":27,"offset":37108},"end":{"line":700,"column":40,"offset":37121},"indent":[]}}],"position":{"start":{"line":700,"column":26,"offset":37107},"end":{"line":700,"column":82,"offset":37163},"indent":[]}},{"type":"text","value":" are synchronous (their return value is not a ","position":{"start":{"line":700,"column":82,"offset":37163},"end":{"line":700,"column":128,"offset":37209},"indent":[]}},{"type":"inlineCode","value":"Promise","position":{"start":{"line":700,"column":128,"offset":37209},"end":{"line":700,"column":137,"offset":37218},"indent":[]}},{"type":"text","value":"), and some are \"maybe-asynchronous\" (they could return a ","position":{"start":{"line":700,"column":137,"offset":37218},"end":{"line":700,"column":195,"offset":37276},"indent":[]}},{"type":"inlineCode","value":"Promise","position":{"start":{"line":700,"column":195,"offset":37276},"end":{"line":700,"column":204,"offset":37285},"indent":[]}},{"type":"text","value":" if they wanted, but didn't have to). This means that you can't do asynchronous work in the former events, and the typings for the latter events are somewhat complex.","position":{"start":{"line":700,"column":204,"offset":37285},"end":{"line":700,"column":370,"offset":37451},"indent":[]}}],"position":{"start":{"line":700,"column":1,"offset":37082},"end":{"line":700,"column":370,"offset":37451},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, ","position":{"start":{"line":702,"column":1,"offset":37453},"end":{"line":702,"column":21,"offset":37473},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"almost","position":{"start":{"line":702,"column":22,"offset":37474},"end":{"line":702,"column":28,"offset":37480},"indent":[]}}],"position":{"start":{"line":702,"column":21,"offset":37473},"end":{"line":702,"column":29,"offset":37481},"indent":[]}},{"type":"text","value":" all plugin methods are always asynchronous: they always return a ","position":{"start":{"line":702,"column":29,"offset":37481},"end":{"line":702,"column":95,"offset":37547},"indent":[]}},{"type":"inlineCode","value":"Promise","position":{"start":{"line":702,"column":95,"offset":37547},"end":{"line":702,"column":104,"offset":37556},"indent":[]}},{"type":"text","value":" type. This includes ","position":{"start":{"line":702,"column":104,"offset":37556},"end":{"line":702,"column":125,"offset":37577},"indent":[]}},{"type":"link","title":null,"url":"../integrations/plugins/#end-hooks","children":[{"type":"text","value":"end hooks","position":{"start":{"line":702,"column":126,"offset":37578},"end":{"line":702,"column":135,"offset":37587},"indent":[]}}],"position":{"start":{"line":702,"column":125,"offset":37577},"end":{"line":702,"column":172,"offset":37624},"indent":[]}},{"type":"text","value":" as well. The exceptions are ","position":{"start":{"line":702,"column":172,"offset":37624},"end":{"line":702,"column":201,"offset":37653},"indent":[]}},{"type":"inlineCode","value":"willResolveField","position":{"start":{"line":702,"column":201,"offset":37653},"end":{"line":702,"column":219,"offset":37671},"indent":[]}},{"type":"text","value":" and its end hook and ","position":{"start":{"line":702,"column":219,"offset":37671},"end":{"line":702,"column":241,"offset":37693},"indent":[]}},{"type":"inlineCode","value":"schemaDidLoadOrUpdate","position":{"start":{"line":702,"column":241,"offset":37693},"end":{"line":702,"column":264,"offset":37716},"indent":[]}},{"type":"text","value":", which are always synchronous.","position":{"start":{"line":702,"column":264,"offset":37716},"end":{"line":702,"column":295,"offset":37747},"indent":[]}}],"position":{"start":{"line":702,"column":1,"offset":37453},"end":{"line":702,"column":295,"offset":37747},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In practice, this means that all of your plugin events should use ","position":{"start":{"line":704,"column":1,"offset":37749},"end":{"line":704,"column":67,"offset":37815},"indent":[]}},{"type":"inlineCode","value":"async","position":{"start":{"line":704,"column":67,"offset":37815},"end":{"line":704,"column":74,"offset":37822},"indent":[]}},{"type":"text","value":" functions or methods. If you are using TypeScript, you need to do this for your code to compile.","position":{"start":{"line":704,"column":74,"offset":37822},"end":{"line":704,"column":171,"offset":37919},"indent":[]}}],"position":{"start":{"line":704,"column":1,"offset":37749},"end":{"line":704,"column":171,"offset":37919},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"In practice, Apollo Server generally uses ","position":{"start":{"line":706,"column":3,"offset":37923},"end":{"line":706,"column":45,"offset":37965},"indent":[]}},{"type":"inlineCode","value":"await","position":{"start":{"line":706,"column":45,"offset":37965},"end":{"line":706,"column":52,"offset":37972},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":706,"column":52,"offset":37972},"end":{"line":706,"column":56,"offset":37976},"indent":[]}},{"type":"inlineCode","value":"Promise.all","position":{"start":{"line":706,"column":56,"offset":37976},"end":{"line":706,"column":69,"offset":37989},"indent":[]}},{"type":"text","value":" on values returned by plugin methods instead of an explicit ","position":{"start":{"line":706,"column":69,"offset":37989},"end":{"line":706,"column":130,"offset":38050},"indent":[]}},{"type":"inlineCode","value":".then","position":{"start":{"line":706,"column":130,"offset":38050},"end":{"line":706,"column":137,"offset":38057},"indent":[]}},{"type":"text","value":". These constructs accept both ","position":{"start":{"line":706,"column":137,"offset":38057},"end":{"line":706,"column":168,"offset":38088},"indent":[]}},{"type":"inlineCode","value":"Promise","position":{"start":{"line":706,"column":168,"offset":38088},"end":{"line":706,"column":177,"offset":38097},"indent":[]}},{"type":"text","value":"s and normal values. If you aren't using TypeScript, you might be able to get away with synchronous plugin methods for the time being.","position":{"start":{"line":706,"column":177,"offset":38097},"end":{"line":706,"column":311,"offset":38231},"indent":[]}}],"position":{"start":{"line":706,"column":3,"offset":37923},"end":{"line":706,"column":311,"offset":38231},"indent":[]}}],"position":{"start":{"line":706,"column":1,"offset":37921},"end":{"line":706,"column":311,"offset":38231},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"inlineCode","value":"willSendResponse","position":{"start":{"line":708,"column":6,"offset":38238},"end":{"line":708,"column":24,"offset":38256},"indent":[]}},{"type":"text","value":" is called more consistently","position":{"start":{"line":708,"column":24,"offset":38256},"end":{"line":708,"column":52,"offset":38284},"indent":[]}}],"position":{"start":{"line":708,"column":1,"offset":38233},"end":{"line":708,"column":52,"offset":38284},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, some errors related to ","position":{"start":{"line":710,"column":1,"offset":38286},"end":{"line":710,"column":44,"offset":38329},"indent":[]}},{"type":"link","title":null,"url":"../performance/apq/","children":[{"type":"text","value":"persisted queries","position":{"start":{"line":710,"column":45,"offset":38330},"end":{"line":710,"column":62,"offset":38347},"indent":[]}}],"position":{"start":{"line":710,"column":44,"offset":38329},"end":{"line":710,"column":84,"offset":38369},"indent":[]}},{"type":"text","value":" invoke the ","position":{"start":{"line":710,"column":84,"offset":38369},"end":{"line":710,"column":96,"offset":38381},"indent":[]}},{"type":"inlineCode","value":"requestDidStart","position":{"start":{"line":710,"column":96,"offset":38381},"end":{"line":710,"column":113,"offset":38398},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":710,"column":113,"offset":38398},"end":{"line":710,"column":118,"offset":38403},"indent":[]}},{"type":"inlineCode","value":"didEncounterError","position":{"start":{"line":710,"column":118,"offset":38403},"end":{"line":710,"column":137,"offset":38422},"indent":[]}},{"type":"text","value":" plugin events ","position":{"start":{"line":710,"column":137,"offset":38422},"end":{"line":710,"column":152,"offset":38437},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"without","position":{"start":{"line":710,"column":153,"offset":38438},"end":{"line":710,"column":160,"offset":38445},"indent":[]}}],"position":{"start":{"line":710,"column":152,"offset":38437},"end":{"line":710,"column":161,"offset":38446},"indent":[]}},{"type":"text","value":" invoking the ","position":{"start":{"line":710,"column":161,"offset":38446},"end":{"line":710,"column":175,"offset":38460},"indent":[]}},{"type":"inlineCode","value":"willSendResponse","position":{"start":{"line":710,"column":175,"offset":38460},"end":{"line":710,"column":193,"offset":38478},"indent":[]}},{"type":"text","value":" event afterwards.","position":{"start":{"line":710,"column":193,"offset":38478},"end":{"line":710,"column":211,"offset":38496},"indent":[]}}],"position":{"start":{"line":710,"column":1,"offset":38286},"end":{"line":710,"column":211,"offset":38496},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, any request that makes it far enough to invoke ","position":{"start":{"line":712,"column":1,"offset":38498},"end":{"line":712,"column":68,"offset":38565},"indent":[]}},{"type":"inlineCode","value":"requestDidStart","position":{"start":{"line":712,"column":68,"offset":38565},"end":{"line":712,"column":85,"offset":38582},"indent":[]}},{"type":"text","value":" also invokes ","position":{"start":{"line":712,"column":85,"offset":38582},"end":{"line":712,"column":99,"offset":38596},"indent":[]}},{"type":"inlineCode","value":"willSendResponse","position":{"start":{"line":712,"column":99,"offset":38596},"end":{"line":712,"column":117,"offset":38614},"indent":[]}},{"type":"text","value":". See ","position":{"start":{"line":712,"column":117,"offset":38614},"end":{"line":712,"column":123,"offset":38620},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/apollographql/apollo-server/pull/5287","children":[{"type":"text","value":"this PR","position":{"start":{"line":712,"column":124,"offset":38621},"end":{"line":712,"column":131,"offset":38628},"indent":[]}}],"position":{"start":{"line":712,"column":123,"offset":38620},"end":{"line":712,"column":190,"offset":38687},"indent":[]}},{"type":"text","value":" for details.","position":{"start":{"line":712,"column":190,"offset":38687},"end":{"line":712,"column":203,"offset":38700},"indent":[]}}],"position":{"start":{"line":712,"column":1,"offset":38498},"end":{"line":712,"column":203,"offset":38700},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"inlineCode","value":"executionDidStart","position":{"start":{"line":714,"column":6,"offset":38707},"end":{"line":714,"column":25,"offset":38726},"indent":[]}},{"type":"text","value":" can no longer return a function","position":{"start":{"line":714,"column":25,"offset":38726},"end":{"line":714,"column":57,"offset":38758},"indent":[]}}],"position":{"start":{"line":714,"column":1,"offset":38702},"end":{"line":714,"column":57,"offset":38758},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, the ","position":{"start":{"line":716,"column":1,"offset":38760},"end":{"line":716,"column":25,"offset":38784},"indent":[]}},{"type":"inlineCode","value":"executionDidStart","position":{"start":{"line":716,"column":25,"offset":38784},"end":{"line":716,"column":44,"offset":38803},"indent":[]}},{"type":"text","value":" plugin event could return nothing, an object, or a function. If a function was provided, it would be called when execution finished (one might imagine an ","position":{"start":{"line":716,"column":44,"offset":38803},"end":{"line":716,"column":199,"offset":38958},"indent":[]}},{"type":"inlineCode","value":"executionDidEnd","position":{"start":{"line":716,"column":199,"offset":38958},"end":{"line":716,"column":216,"offset":38975},"indent":[]}},{"type":"text","value":").","position":{"start":{"line":716,"column":216,"offset":38975},"end":{"line":716,"column":218,"offset":38977},"indent":[]}}],"position":{"start":{"line":716,"column":1,"offset":38760},"end":{"line":716,"column":218,"offset":38977},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, ","position":{"start":{"line":718,"column":1,"offset":38979},"end":{"line":718,"column":21,"offset":38999},"indent":[]}},{"type":"inlineCode","value":"executionDidStart","position":{"start":{"line":718,"column":21,"offset":38999},"end":{"line":718,"column":40,"offset":39018},"indent":[]}},{"type":"text","value":" must return either nothing or an object. If you previously returned a function, you can now return an object with an ","position":{"start":{"line":718,"column":40,"offset":39018},"end":{"line":718,"column":158,"offset":39136},"indent":[]}},{"type":"inlineCode","value":"executionDidEnd","position":{"start":{"line":718,"column":158,"offset":39136},"end":{"line":718,"column":175,"offset":39153},"indent":[]}},{"type":"text","value":" field like so:","position":{"start":{"line":718,"column":175,"offset":39153},"end":{"line":718,"column":190,"offset":39168},"indent":[]}}],"position":{"start":{"line":718,"column":1,"offset":38979},"end":{"line":718,"column":190,"offset":39168},"indent":[]}},{"type":"code","lang":"javascript{7-11}","meta":null,"value":"const server = new ApolloServer({\n  schema,\n  plugins: [{\n    async requestDidStart() {\n      return {\n        async executionDidStart() {\n          return {\n            async executionDidEnd() {\n              // your code here\n            }\n          }\n        },\n      };\n    }\n  }],\n});","position":{"start":{"line":720,"column":1,"offset":39170},"end":{"line":737,"column":4,"offset":39483},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"For more information, you can check out the related plugin documentation on ","position":{"start":{"line":739,"column":1,"offset":39485},"end":{"line":739,"column":77,"offset":39561},"indent":[]}},{"type":"link","title":null,"url":"../integrations/plugins/#end-hooks","children":[{"type":"text","value":"end hooks","position":{"start":{"line":739,"column":78,"offset":39562},"end":{"line":739,"column":87,"offset":39571},"indent":[]}}],"position":{"start":{"line":739,"column":77,"offset":39561},"end":{"line":739,"column":124,"offset":39608},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":739,"column":124,"offset":39608},"end":{"line":739,"column":125,"offset":39609},"indent":[]}}],"position":{"start":{"line":739,"column":1,"offset":39485},"end":{"line":739,"column":125,"offset":39609},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Gateway interface renamed and simplified","position":{"start":{"line":741,"column":6,"offset":39616},"end":{"line":741,"column":46,"offset":39656},"indent":[]}}],"position":{"start":{"line":741,"column":1,"offset":39611},"end":{"line":741,"column":46,"offset":39656},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, the TypeScript type used for the ","position":{"start":{"line":743,"column":1,"offset":39658},"end":{"line":743,"column":54,"offset":39711},"indent":[]}},{"type":"inlineCode","value":"gateway","position":{"start":{"line":743,"column":54,"offset":39711},"end":{"line":743,"column":63,"offset":39720},"indent":[]}},{"type":"text","value":" constructor option is called ","position":{"start":{"line":743,"column":63,"offset":39720},"end":{"line":743,"column":93,"offset":39750},"indent":[]}},{"type":"inlineCode","value":"GraphQLService","position":{"start":{"line":743,"column":93,"offset":39750},"end":{"line":743,"column":109,"offset":39766},"indent":[]}},{"type":"text","value":". In Apollo Server 3, it's called ","position":{"start":{"line":743,"column":109,"offset":39766},"end":{"line":743,"column":143,"offset":39800},"indent":[]}},{"type":"inlineCode","value":"GatewayInterface","position":{"start":{"line":743,"column":143,"offset":39800},"end":{"line":743,"column":161,"offset":39818},"indent":[]}},{"type":"text","value":". (For now, an identical interface named ","position":{"start":{"line":743,"column":161,"offset":39818},"end":{"line":743,"column":202,"offset":39859},"indent":[]}},{"type":"inlineCode","value":"GraphQLService","position":{"start":{"line":743,"column":202,"offset":39859},"end":{"line":743,"column":218,"offset":39875},"indent":[]}},{"type":"text","value":" continues to be exported.)","position":{"start":{"line":743,"column":218,"offset":39875},"end":{"line":743,"column":245,"offset":39902},"indent":[]}}],"position":{"start":{"line":743,"column":1,"offset":39658},"end":{"line":743,"column":245,"offset":39902},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This interface now requires the following:","position":{"start":{"line":745,"column":1,"offset":39904},"end":{"line":745,"column":43,"offset":39946},"indent":[]}}],"position":{"start":{"line":745,"column":1,"offset":39904},"end":{"line":745,"column":43,"offset":39946},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":747,"column":3,"offset":39950},"end":{"line":747,"column":7,"offset":39954},"indent":[]}},{"type":"inlineCode","value":"stop","position":{"start":{"line":747,"column":7,"offset":39954},"end":{"line":747,"column":13,"offset":39960},"indent":[]}},{"type":"text","value":" method must be present.","position":{"start":{"line":747,"column":13,"offset":39960},"end":{"line":747,"column":37,"offset":39984},"indent":[]}}],"position":{"start":{"line":747,"column":3,"offset":39950},"end":{"line":747,"column":37,"offset":39984},"indent":[]}}],"position":{"start":{"line":747,"column":1,"offset":39948},"end":{"line":747,"column":37,"offset":39984},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":748,"column":3,"offset":39987},"end":{"line":748,"column":7,"offset":39991},"indent":[]}},{"type":"inlineCode","value":"executor","position":{"start":{"line":748,"column":7,"offset":39991},"end":{"line":748,"column":17,"offset":40001},"indent":[]}},{"type":"text","value":" method must async","position":{"start":{"line":748,"column":17,"offset":40001},"end":{"line":748,"column":35,"offset":40019},"indent":[]}}],"position":{"start":{"line":748,"column":3,"offset":39987},"end":{"line":748,"column":35,"offset":40019},"indent":[]}}],"position":{"start":{"line":748,"column":1,"offset":39985},"end":{"line":748,"column":35,"offset":40019},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":749,"column":3,"offset":40022},"end":{"line":749,"column":7,"offset":40026},"indent":[]}},{"type":"inlineCode","value":"apollo","position":{"start":{"line":749,"column":7,"offset":40026},"end":{"line":749,"column":15,"offset":40034},"indent":[]}},{"type":"text","value":" option must always be passed to the ","position":{"start":{"line":749,"column":15,"offset":40034},"end":{"line":749,"column":52,"offset":40071},"indent":[]}},{"type":"inlineCode","value":"load","position":{"start":{"line":749,"column":52,"offset":40071},"end":{"line":749,"column":58,"offset":40077},"indent":[]}},{"type":"text","value":" method.","position":{"start":{"line":749,"column":58,"offset":40077},"end":{"line":749,"column":66,"offset":40085},"indent":[]}}],"position":{"start":{"line":749,"column":3,"offset":40022},"end":{"line":749,"column":66,"offset":40085},"indent":[]}}],"position":{"start":{"line":749,"column":1,"offset":40020},"end":{"line":749,"column":66,"offset":40085},"indent":[]}}],"position":{"start":{"line":747,"column":1,"offset":39948},"end":{"line":749,"column":66,"offset":40085},"indent":[1,1]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"All recent versions of ","position":{"start":{"line":751,"column":3,"offset":40089},"end":{"line":751,"column":26,"offset":40112},"indent":[]}},{"type":"inlineCode","value":"@apollo/gateway","position":{"start":{"line":751,"column":26,"offset":40112},"end":{"line":751,"column":43,"offset":40129},"indent":[]}},{"type":"text","value":" satisfy these stronger requirements.","position":{"start":{"line":751,"column":43,"offset":40129},"end":{"line":751,"column":80,"offset":40166},"indent":[]}}],"position":{"start":{"line":751,"column":3,"offset":40089},"end":{"line":751,"column":80,"offset":40166},"indent":[]}}],"position":{"start":{"line":751,"column":1,"offset":40087},"end":{"line":751,"column":80,"offset":40166},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Bad request errors more consistently return 4xx","position":{"start":{"line":753,"column":5,"offset":40172},"end":{"line":753,"column":52,"offset":40219},"indent":[]}}],"position":{"start":{"line":753,"column":1,"offset":40168},"end":{"line":753,"column":52,"offset":40219},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, certain poorly formatted requests receive HTTP responses with a 5xx status (indicating a server error) instead of 4xx (indicating a client error). For example, this occurs in some integrations for a missing POST body or a JSON parse error.","position":{"start":{"line":755,"column":1,"offset":40221},"end":{"line":755,"column":260,"offset":40480},"indent":[]}}],"position":{"start":{"line":755,"column":1,"offset":40221},"end":{"line":755,"column":260,"offset":40480},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, these errors are handled in a more consistent manner across integrations and consistently return HTTP responses with a 4xx status.","position":{"start":{"line":757,"column":1,"offset":40482},"end":{"line":757,"column":151,"offset":40632},"indent":[]}}],"position":{"start":{"line":757,"column":1,"offset":40482},"end":{"line":757,"column":151,"offset":40632},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Extensions (custom details) on ","position":{"start":{"line":759,"column":5,"offset":40638},"end":{"line":759,"column":36,"offset":40669},"indent":[]}},{"type":"inlineCode","value":"ApolloError","position":{"start":{"line":759,"column":36,"offset":40669},"end":{"line":759,"column":49,"offset":40682},"indent":[]}}],"position":{"start":{"line":759,"column":1,"offset":40634},"end":{"line":759,"column":49,"offset":40682},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Initializing an error","position":{"start":{"line":761,"column":6,"offset":40689},"end":{"line":761,"column":27,"offset":40710},"indent":[]}}],"position":{"start":{"line":761,"column":1,"offset":40684},"end":{"line":761,"column":27,"offset":40710},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, ","position":{"start":{"line":763,"column":1,"offset":40712},"end":{"line":763,"column":21,"offset":40732},"indent":[]}},{"type":"link","title":null,"url":"../data/errors/#including-custom-error-details","children":[{"type":"text","value":"error extensions","position":{"start":{"line":763,"column":22,"offset":40733},"end":{"line":763,"column":38,"offset":40749},"indent":[]}}],"position":{"start":{"line":763,"column":21,"offset":40732},"end":{"line":763,"column":87,"offset":40798},"indent":[]}},{"type":"text","value":" can be passed to the ","position":{"start":{"line":763,"column":87,"offset":40798},"end":{"line":763,"column":109,"offset":40820},"indent":[]}},{"type":"inlineCode","value":"ApolloError","position":{"start":{"line":763,"column":109,"offset":40820},"end":{"line":763,"column":122,"offset":40833},"indent":[]}},{"type":"text","value":" constructor either as the third argument, ","position":{"start":{"line":763,"column":122,"offset":40833},"end":{"line":763,"column":165,"offset":40876},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"or","position":{"start":{"line":763,"column":166,"offset":40877},"end":{"line":763,"column":168,"offset":40879},"indent":[]}}],"position":{"start":{"line":763,"column":165,"offset":40876},"end":{"line":763,"column":169,"offset":40880},"indent":[]}},{"type":"text","value":" as an ","position":{"start":{"line":763,"column":169,"offset":40880},"end":{"line":763,"column":176,"offset":40887},"indent":[]}},{"type":"inlineCode","value":"extensions","position":{"start":{"line":763,"column":176,"offset":40887},"end":{"line":763,"column":188,"offset":40899},"indent":[]}},{"type":"text","value":" option on the third argument.","position":{"start":{"line":763,"column":188,"offset":40899},"end":{"line":763,"column":218,"offset":40929},"indent":[]}}],"position":{"start":{"line":763,"column":1,"offset":40712},"end":{"line":763,"column":218,"offset":40929},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In other words, these two lines are equivalent with Apollo Server 2:","position":{"start":{"line":765,"column":1,"offset":40931},"end":{"line":765,"column":69,"offset":40999},"indent":[]}}],"position":{"start":{"line":765,"column":1,"offset":40931},"end":{"line":765,"column":69,"offset":40999},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"new ApolloError(message, code, {key: 'value'})\nnew ApolloError(message, code, {extensions: {key: 'value'}})","position":{"start":{"line":767,"column":1,"offset":41001},"end":{"line":770,"column":4,"offset":41118},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, only the first line above is supported. If you try to use the second line, the constructor throws an error. Before upgrading, replace any code using the second form with the first form.","position":{"start":{"line":772,"column":1,"offset":41120},"end":{"line":772,"column":206,"offset":41325},"indent":[]}}],"position":{"start":{"line":772,"column":1,"offset":41120},"end":{"line":772,"column":206,"offset":41325},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Reading error extensions","position":{"start":{"line":774,"column":6,"offset":41332},"end":{"line":774,"column":30,"offset":41356},"indent":[]}}],"position":{"start":{"line":774,"column":1,"offset":41327},"end":{"line":774,"column":30,"offset":41356},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, an error extension (","position":{"start":{"line":776,"column":1,"offset":41358},"end":{"line":776,"column":41,"offset":41398},"indent":[]}},{"type":"inlineCode","value":"foo","position":{"start":{"line":776,"column":41,"offset":41398},"end":{"line":776,"column":46,"offset":41403},"indent":[]}},{"type":"text","value":") is present in two locations on an ","position":{"start":{"line":776,"column":46,"offset":41403},"end":{"line":776,"column":82,"offset":41439},"indent":[]}},{"type":"inlineCode","value":"ApolloError","position":{"start":{"line":776,"column":82,"offset":41439},"end":{"line":776,"column":95,"offset":41452},"indent":[]}},{"type":"text","value":" object (","position":{"start":{"line":776,"column":95,"offset":41452},"end":{"line":776,"column":104,"offset":41461},"indent":[]}},{"type":"inlineCode","value":"error","position":{"start":{"line":776,"column":104,"offset":41461},"end":{"line":776,"column":111,"offset":41468},"indent":[]}},{"type":"text","value":"): ","position":{"start":{"line":776,"column":111,"offset":41468},"end":{"line":776,"column":114,"offset":41471},"indent":[]}},{"type":"inlineCode","value":"error.foo","position":{"start":{"line":776,"column":114,"offset":41471},"end":{"line":776,"column":125,"offset":41482},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":776,"column":125,"offset":41482},"end":{"line":776,"column":126,"offset":41483},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"and","position":{"start":{"line":776,"column":127,"offset":41484},"end":{"line":776,"column":130,"offset":41487},"indent":[]}}],"position":{"start":{"line":776,"column":126,"offset":41483},"end":{"line":776,"column":131,"offset":41488},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":776,"column":131,"offset":41488},"end":{"line":776,"column":132,"offset":41489},"indent":[]}},{"type":"inlineCode","value":"error.extensions.foo","position":{"start":{"line":776,"column":132,"offset":41489},"end":{"line":776,"column":154,"offset":41511},"indent":[]}},{"type":"text","value":". When that object is serialized for a JSON response, the extension is ","position":{"start":{"line":776,"column":154,"offset":41511},"end":{"line":776,"column":225,"offset":41582},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"also","position":{"start":{"line":776,"column":226,"offset":41583},"end":{"line":776,"column":230,"offset":41587},"indent":[]}}],"position":{"start":{"line":776,"column":225,"offset":41582},"end":{"line":776,"column":231,"offset":41588},"indent":[]}},{"type":"text","value":" present in two locations in the JSON: ","position":{"start":{"line":776,"column":231,"offset":41588},"end":{"line":776,"column":270,"offset":41627},"indent":[]}},{"type":"inlineCode","value":"extensions.foo","position":{"start":{"line":776,"column":270,"offset":41627},"end":{"line":776,"column":286,"offset":41643},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":776,"column":286,"offset":41643},"end":{"line":776,"column":291,"offset":41648},"indent":[]}},{"type":"inlineCode","value":"extensions.exception.foo","position":{"start":{"line":776,"column":291,"offset":41648},"end":{"line":776,"column":317,"offset":41674},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":776,"column":317,"offset":41674},"end":{"line":776,"column":318,"offset":41675},"indent":[]}}],"position":{"start":{"line":776,"column":1,"offset":41358},"end":{"line":776,"column":318,"offset":41675},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, an error extension is present in ","position":{"start":{"line":778,"column":1,"offset":41677},"end":{"line":778,"column":54,"offset":41730},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"one","position":{"start":{"line":778,"column":55,"offset":41731},"end":{"line":778,"column":58,"offset":41734},"indent":[]}}],"position":{"start":{"line":778,"column":54,"offset":41730},"end":{"line":778,"column":59,"offset":41735},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":778,"column":59,"offset":41735},"end":{"line":778,"column":60,"offset":41736},"indent":[]}},{"type":"inlineCode","value":"ApolloError","position":{"start":{"line":778,"column":60,"offset":41736},"end":{"line":778,"column":73,"offset":41749},"indent":[]}},{"type":"text","value":" location: ","position":{"start":{"line":778,"column":73,"offset":41749},"end":{"line":778,"column":84,"offset":41760},"indent":[]}},{"type":"inlineCode","value":"error.extensions.foo","position":{"start":{"line":778,"column":84,"offset":41760},"end":{"line":778,"column":106,"offset":41782},"indent":[]}},{"type":"text","value":". When the error is serialized to JSON, the extension is present only in ","position":{"start":{"line":778,"column":106,"offset":41782},"end":{"line":778,"column":179,"offset":41855},"indent":[]}},{"type":"inlineCode","value":"extensions.foo","position":{"start":{"line":778,"column":179,"offset":41855},"end":{"line":778,"column":195,"offset":41871},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":778,"column":195,"offset":41871},"end":{"line":778,"column":196,"offset":41872},"indent":[]}}],"position":{"start":{"line":778,"column":1,"offset":41677},"end":{"line":778,"column":196,"offset":41872},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"See ","position":{"start":{"line":780,"column":1,"offset":41874},"end":{"line":780,"column":5,"offset":41878},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/apollographql/apollo-server/pull/5294","children":[{"type":"text","value":"this PR","position":{"start":{"line":780,"column":6,"offset":41879},"end":{"line":780,"column":13,"offset":41886},"indent":[]}}],"position":{"start":{"line":780,"column":5,"offset":41878},"end":{"line":780,"column":72,"offset":41945},"indent":[]}},{"type":"text","value":" for more details.","position":{"start":{"line":780,"column":72,"offset":41945},"end":{"line":780,"column":90,"offset":41963},"indent":[]}}],"position":{"start":{"line":780,"column":1,"offset":41874},"end":{"line":780,"column":90,"offset":41963},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Mocking","position":{"start":{"line":782,"column":5,"offset":41969},"end":{"line":782,"column":12,"offset":41976},"indent":[]}}],"position":{"start":{"line":782,"column":1,"offset":41965},"end":{"line":782,"column":12,"offset":41976},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, the ","position":{"start":{"line":784,"column":1,"offset":41978},"end":{"line":784,"column":25,"offset":42002},"indent":[]}},{"type":"inlineCode","value":"mocks","position":{"start":{"line":784,"column":25,"offset":42002},"end":{"line":784,"column":32,"offset":42009},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":784,"column":32,"offset":42009},"end":{"line":784,"column":37,"offset":42014},"indent":[]}},{"type":"inlineCode","value":"mockEntireSchema","position":{"start":{"line":784,"column":37,"offset":42014},"end":{"line":784,"column":55,"offset":42032},"indent":[]}},{"type":"text","value":" constructor options are essentially implemented as follows:","position":{"start":{"line":784,"column":55,"offset":42032},"end":{"line":784,"column":115,"offset":42092},"indent":[]}}],"position":{"start":{"line":784,"column":1,"offset":41978},"end":{"line":784,"column":115,"offset":42092},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"import { addMockFunctionsToSchema } from 'graphql-tools';  // v4.x\n\nconst { mocks, mockEntireSchema } = constructorOptions;\nconst schemaWithMocks = addMockFunctionsToSchema({\n  schema,\n  mocks:\n    typeof mocks === 'boolean' || typeof mocks === 'undefined'\n      ? {} : mocks,\n  preserveResolvers:\n    typeof mockEntireSchema === 'undefined' ? false : !mockEntireSchema,\n});","position":{"start":{"line":786,"column":1,"offset":42094},"end":{"line":798,"column":4,"offset":42486},"indent":[1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, we've upgraded from ","position":{"start":{"line":800,"column":1,"offset":42488},"end":{"line":800,"column":41,"offset":42528},"indent":[]}},{"type":"inlineCode","value":"graphql-tools","position":{"start":{"line":800,"column":41,"offset":42528},"end":{"line":800,"column":56,"offset":42543},"indent":[]}},{"type":"text","value":" v4 to ","position":{"start":{"line":800,"column":56,"offset":42543},"end":{"line":800,"column":63,"offset":42550},"indent":[]}},{"type":"inlineCode","value":"@graphql-tools/mock","position":{"start":{"line":800,"column":63,"offset":42550},"end":{"line":800,"column":84,"offset":42571},"indent":[]}},{"type":"text","value":" v8. The details of how mocking works in GraphQL Tools has changed, and the name of the function that implements it has changed too. The new implementation is as follows:","position":{"start":{"line":800,"column":84,"offset":42571},"end":{"line":800,"column":254,"offset":42741},"indent":[]}}],"position":{"start":{"line":800,"column":1,"offset":42488},"end":{"line":800,"column":254,"offset":42741},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"import { addMocksToSchema } from '@graphql-tools/mock';  // v8.x\n\nconst { mocks, mockEntireSchema } = constructorOptions;\nconst schemaWithMocks = addMocksToSchema({\n  schema,\n  mocks: mocks === true || typeof mocks === 'undefined' ? {} : mocks,\n  preserveResolvers:\n    typeof mockEntireSchema === 'undefined' ? false : !mockEntireSchema,\n});","position":{"start":{"line":802,"column":1,"offset":42743},"end":{"line":812,"column":4,"offset":43103},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"So the name of the function has changed, and additionally, the semantics of the function have changed. You can ","position":{"start":{"line":814,"column":1,"offset":43105},"end":{"line":814,"column":112,"offset":43216},"indent":[]}},{"type":"link","title":null,"url":"https://www.graphql-tools.com/docs/mocking/#migration-from-v7-and-below","children":[{"type":"text","value":"read the GraphQL Tools migration docs","position":{"start":{"line":814,"column":113,"offset":43217},"end":{"line":814,"column":150,"offset":43254},"indent":[]}}],"position":{"start":{"line":814,"column":112,"offset":43216},"end":{"line":814,"column":224,"offset":43328},"indent":[]}},{"type":"text","value":" to see if you use any mocking features that have changed between v4 and v8, and adjust the value of your ","position":{"start":{"line":814,"column":224,"offset":43328},"end":{"line":814,"column":330,"offset":43434},"indent":[]}},{"type":"inlineCode","value":"mocks","position":{"start":{"line":814,"column":330,"offset":43434},"end":{"line":814,"column":337,"offset":43441},"indent":[]}},{"type":"text","value":" argument if so.","position":{"start":{"line":814,"column":337,"offset":43441},"end":{"line":814,"column":353,"offset":43457},"indent":[]}}],"position":{"start":{"line":814,"column":1,"offset":43105},"end":{"line":814,"column":353,"offset":43457},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To use features of ","position":{"start":{"line":816,"column":1,"offset":43459},"end":{"line":816,"column":20,"offset":43478},"indent":[]}},{"type":"inlineCode","value":"addMocksToSchema","position":{"start":{"line":816,"column":20,"offset":43478},"end":{"line":816,"column":38,"offset":43496},"indent":[]}},{"type":"text","value":" that require passing more options to it than the three that ","position":{"start":{"line":816,"column":38,"offset":43496},"end":{"line":816,"column":99,"offset":43557},"indent":[]}},{"type":"inlineCode","value":"ApolloServer","position":{"start":{"line":816,"column":99,"offset":43557},"end":{"line":816,"column":113,"offset":43571},"indent":[]}},{"type":"text","value":" passes through, you can use the library directly. To do so, run ","position":{"start":{"line":816,"column":113,"offset":43571},"end":{"line":816,"column":178,"offset":43636},"indent":[]}},{"type":"inlineCode","value":"npm install @graphql-tools/mock @graphql-tools/schema","position":{"start":{"line":816,"column":178,"offset":43636},"end":{"line":816,"column":233,"offset":43691},"indent":[]}},{"type":"text","value":" in your app, and replace","position":{"start":{"line":816,"column":233,"offset":43691},"end":{"line":816,"column":258,"offset":43716},"indent":[]}}],"position":{"start":{"line":816,"column":1,"offset":43459},"end":{"line":816,"column":258,"offset":43716},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"new ApolloServer({ typeDefs, resolvers, mocks });","position":{"start":{"line":818,"column":1,"offset":43718},"end":{"line":820,"column":4,"offset":43785},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"with","position":{"start":{"line":822,"column":1,"offset":43787},"end":{"line":822,"column":5,"offset":43791},"indent":[]}}],"position":{"start":{"line":822,"column":1,"offset":43787},"end":{"line":822,"column":5,"offset":43791},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"import { addMocksToSchema } from '@graphql-tools/mock';\nimport { makeExecutableSchema } from '@graphql-tools/schema';\n\nnew ApolloServer({\n  schema: addMocksToSchema({\n    schema: makeExecutableSchema({ typeDefs, resolvers }),\n    mocks: // ...\n    // ...\n  }),\n});","position":{"start":{"line":824,"column":1,"offset":43793},"end":{"line":835,"column":4,"offset":44075},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Alternatively, to keep the current behavior without changing your mock functions at all, you can continue to use ","position":{"start":{"line":837,"column":1,"offset":44077},"end":{"line":837,"column":114,"offset":44190},"indent":[]}},{"type":"inlineCode","value":"graphql-tools","position":{"start":{"line":837,"column":114,"offset":44190},"end":{"line":837,"column":129,"offset":44205},"indent":[]}},{"type":"text","value":" v4. To do this, run ","position":{"start":{"line":837,"column":129,"offset":44205},"end":{"line":837,"column":150,"offset":44226},"indent":[]}},{"type":"inlineCode","value":"npm install graphql-tools@v4.x","position":{"start":{"line":837,"column":150,"offset":44226},"end":{"line":837,"column":182,"offset":44258},"indent":[]}},{"type":"text","value":" in your app, and replace","position":{"start":{"line":837,"column":182,"offset":44258},"end":{"line":837,"column":207,"offset":44283},"indent":[]}}],"position":{"start":{"line":837,"column":1,"offset":44077},"end":{"line":837,"column":207,"offset":44283},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"new ApolloServer({typeDefs, resolvers, mocks, preserveResolvers});","position":{"start":{"line":839,"column":1,"offset":44285},"end":{"line":841,"column":4,"offset":44369},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"with","position":{"start":{"line":843,"column":1,"offset":44371},"end":{"line":843,"column":5,"offset":44375},"indent":[]}}],"position":{"start":{"line":843,"column":1,"offset":44371},"end":{"line":843,"column":5,"offset":44375},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"import { makeExecutableSchema, addMockFunctionsToSchema } from 'graphql-tools';\n\nnew ApolloServer({\n  schema: addMockFunctionsToSchema({\n    schema: makeExecutableSchema({typeDefs, resolvers}),\n    mocks,\n    preserveResolvers:\n      typeof mockEntireSchema === 'undefined' ? false : !mockEntireSchema,\n  }),\n});","position":{"start":{"line":845,"column":1,"offset":44377},"end":{"line":856,"column":4,"offset":44707},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"inlineCode","value":"apollo-server-caching","position":{"start":{"line":858,"column":5,"offset":44713},"end":{"line":858,"column":28,"offset":44736},"indent":[]}},{"type":"text","value":" test suite helpers","position":{"start":{"line":858,"column":28,"offset":44736},"end":{"line":858,"column":47,"offset":44755},"indent":[]}}],"position":{"start":{"line":858,"column":1,"offset":44709},"end":{"line":858,"column":47,"offset":44755},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, the ","position":{"start":{"line":860,"column":1,"offset":44757},"end":{"line":860,"column":25,"offset":44781},"indent":[]}},{"type":"inlineCode","value":"apollo-server-caching","position":{"start":{"line":860,"column":25,"offset":44781},"end":{"line":860,"column":48,"offset":44804},"indent":[]}},{"type":"text","value":" package exports functions like ","position":{"start":{"line":860,"column":48,"offset":44804},"end":{"line":860,"column":80,"offset":44836},"indent":[]}},{"type":"inlineCode","value":"testKeyValueCache","position":{"start":{"line":860,"column":80,"offset":44836},"end":{"line":860,"column":99,"offset":44855},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":860,"column":99,"offset":44855},"end":{"line":860,"column":101,"offset":44857},"indent":[]}},{"type":"inlineCode","value":"testKeyValueCache_Basic","position":{"start":{"line":860,"column":101,"offset":44857},"end":{"line":860,"column":126,"offset":44882},"indent":[]}},{"type":"text","value":", and ","position":{"start":{"line":860,"column":126,"offset":44882},"end":{"line":860,"column":132,"offset":44888},"indent":[]}},{"type":"inlineCode","value":"testKeyValueCache_Expiration","position":{"start":{"line":860,"column":132,"offset":44888},"end":{"line":860,"column":162,"offset":44918},"indent":[]}},{"type":"text","value":", which define Jest test suites. The package also exports a ","position":{"start":{"line":860,"column":162,"offset":44918},"end":{"line":860,"column":222,"offset":44978},"indent":[]}},{"type":"inlineCode","value":"TestableKeyValueCache","position":{"start":{"line":860,"column":222,"offset":44978},"end":{"line":860,"column":245,"offset":45001},"indent":[]}},{"type":"text","value":" type that's required for these test suites to be able to flush and close the cache.","position":{"start":{"line":860,"column":245,"offset":45001},"end":{"line":860,"column":329,"offset":45085},"indent":[]}}],"position":{"start":{"line":860,"column":1,"offset":44757},"end":{"line":860,"column":329,"offset":45085},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You can use this to define Jest test suites for your own implementation of the ","position":{"start":{"line":862,"column":1,"offset":45087},"end":{"line":862,"column":80,"offset":45166},"indent":[]}},{"type":"inlineCode","value":"KeyValueCache","position":{"start":{"line":862,"column":80,"offset":45166},"end":{"line":862,"column":95,"offset":45181},"indent":[]}},{"type":"text","value":" interface, although this requires intricate Jest and TypeScript config to set up.","position":{"start":{"line":862,"column":95,"offset":45181},"end":{"line":862,"column":177,"offset":45263},"indent":[]}}],"position":{"start":{"line":862,"column":1,"offset":45087},"end":{"line":862,"column":177,"offset":45263},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, these functions and type are removed. Instead, a ","position":{"start":{"line":864,"column":1,"offset":45265},"end":{"line":864,"column":70,"offset":45334},"indent":[]}},{"type":"inlineCode","value":"runKeyValueCacheTests","position":{"start":{"line":864,"column":70,"offset":45334},"end":{"line":864,"column":93,"offset":45357},"indent":[]}},{"type":"text","value":" function is exported which can be run in any test suite (without any Jest-specific behavior). See the ","position":{"start":{"line":864,"column":93,"offset":45357},"end":{"line":864,"column":196,"offset":45460},"indent":[]}},{"type":"inlineCode","value":"apollo-server-caching","position":{"start":{"line":864,"column":196,"offset":45460},"end":{"line":864,"column":219,"offset":45483},"indent":[]}},{"type":"text","value":" README for more details.","position":{"start":{"line":864,"column":219,"offset":45483},"end":{"line":864,"column":244,"offset":45508},"indent":[]}}],"position":{"start":{"line":864,"column":1,"offset":45265},"end":{"line":864,"column":244,"offset":45508},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Changes to framework integrations","position":{"start":{"line":866,"column":4,"offset":45513},"end":{"line":866,"column":37,"offset":45546},"indent":[]}}],"position":{"start":{"line":866,"column":1,"offset":45510},"end":{"line":866,"column":37,"offset":45546},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"inlineCode","value":"start()","position":{"start":{"line":868,"column":5,"offset":45552},"end":{"line":868,"column":14,"offset":45561},"indent":[]}},{"type":"text","value":" now mandatory for non-serverless framework integrations","position":{"start":{"line":868,"column":14,"offset":45561},"end":{"line":868,"column":70,"offset":45617},"indent":[]}}],"position":{"start":{"line":868,"column":1,"offset":45548},"end":{"line":868,"column":70,"offset":45617},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Apollo Server v2.22 introduced the ","position":{"start":{"line":870,"column":1,"offset":45619},"end":{"line":870,"column":36,"offset":45654},"indent":[]}},{"type":"inlineCode","value":"server.start()","position":{"start":{"line":870,"column":36,"offset":45654},"end":{"line":870,"column":52,"offset":45670},"indent":[]}},{"type":"text","value":" method for non-serverless framework integrations (Express, Fastify, Hapi, Koa, Micro, and Cloudflare). Users of these integrations were encouraged to await a call to it immediately after creating an ","position":{"start":{"line":870,"column":52,"offset":45670},"end":{"line":870,"column":252,"offset":45870},"indent":[]}},{"type":"inlineCode","value":"ApolloServer","position":{"start":{"line":870,"column":252,"offset":45870},"end":{"line":870,"column":266,"offset":45884},"indent":[]}},{"type":"text","value":" object:","position":{"start":{"line":870,"column":266,"offset":45884},"end":{"line":870,"column":274,"offset":45892},"indent":[]}}],"position":{"start":{"line":870,"column":1,"offset":45619},"end":{"line":870,"column":274,"offset":45892},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"async function startServer() {\n  const server = new ApolloServer({...});\n  await server.start();\n  server.applyMiddleware({ app });\n}","position":{"start":{"line":872,"column":1,"offset":45894},"end":{"line":878,"column":4,"offset":46045},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If any plugin ","position":{"start":{"line":880,"column":1,"offset":46047},"end":{"line":880,"column":15,"offset":46061},"indent":[]}},{"type":"inlineCode","value":"serverWillStart","position":{"start":{"line":880,"column":15,"offset":46061},"end":{"line":880,"column":32,"offset":46078},"indent":[]}},{"type":"text","value":" events throw, or if the server fails to load its schema properly (for example, if the server is a gateway and cannot load its schema), then ","position":{"start":{"line":880,"column":32,"offset":46078},"end":{"line":880,"column":173,"offset":46219},"indent":[]}},{"type":"inlineCode","value":"await server.start()","position":{"start":{"line":880,"column":173,"offset":46219},"end":{"line":880,"column":195,"offset":46241},"indent":[]}},{"type":"text","value":" will throw. This allows you to ensure that Apollo Server has successfully loaded its configuration before you start listening for HTTP requests.","position":{"start":{"line":880,"column":195,"offset":46241},"end":{"line":880,"column":340,"offset":46386},"indent":[]}}],"position":{"start":{"line":880,"column":1,"offset":46047},"end":{"line":880,"column":340,"offset":46386},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, calling this method was optional. If you didn't call it, you could still call methods like ","position":{"start":{"line":882,"column":1,"offset":46388},"end":{"line":882,"column":112,"offset":46499},"indent":[]}},{"type":"inlineCode","value":"applyMiddleware","position":{"start":{"line":882,"column":112,"offset":46499},"end":{"line":882,"column":129,"offset":46516},"indent":[]}},{"type":"text","value":" and start listening. If a startup failure occurred, all GraphQL requests would fail.","position":{"start":{"line":882,"column":129,"offset":46516},"end":{"line":882,"column":214,"offset":46601},"indent":[]}}],"position":{"start":{"line":882,"column":1,"offset":46388},"end":{"line":882,"column":214,"offset":46601},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, you ","position":{"start":{"line":884,"column":1,"offset":46603},"end":{"line":884,"column":25,"offset":46627},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"must","position":{"start":{"line":884,"column":26,"offset":46628},"end":{"line":884,"column":30,"offset":46632},"indent":[]}}],"position":{"start":{"line":884,"column":25,"offset":46627},"end":{"line":884,"column":31,"offset":46633},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":884,"column":31,"offset":46633},"end":{"line":884,"column":32,"offset":46634},"indent":[]}},{"type":"inlineCode","value":"await server.start()","position":{"start":{"line":884,"column":32,"offset":46634},"end":{"line":884,"column":54,"offset":46656},"indent":[]}},{"type":"text","value":" immediately after ","position":{"start":{"line":884,"column":54,"offset":46656},"end":{"line":884,"column":73,"offset":46675},"indent":[]}},{"type":"inlineCode","value":"new ApolloServer","position":{"start":{"line":884,"column":73,"offset":46675},"end":{"line":884,"column":91,"offset":46693},"indent":[]}},{"type":"text","value":" before calling ","position":{"start":{"line":884,"column":91,"offset":46693},"end":{"line":884,"column":107,"offset":46709},"indent":[]}},{"type":"inlineCode","value":"applyMiddleware","position":{"start":{"line":884,"column":107,"offset":46709},"end":{"line":884,"column":124,"offset":46726},"indent":[]}},{"type":"text","value":" (or ","position":{"start":{"line":884,"column":124,"offset":46726},"end":{"line":884,"column":129,"offset":46731},"indent":[]}},{"type":"inlineCode","value":"getMiddleware","position":{"start":{"line":884,"column":129,"offset":46731},"end":{"line":884,"column":144,"offset":46746},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":884,"column":144,"offset":46746},"end":{"line":884,"column":148,"offset":46750},"indent":[]}},{"type":"inlineCode","value":"getHandler","position":{"start":{"line":884,"column":148,"offset":46750},"end":{"line":884,"column":160,"offset":46762},"indent":[]}},{"type":"text","value":", depending on the integration). Note that you don't have to call it before calling the testing method ","position":{"start":{"line":884,"column":160,"offset":46762},"end":{"line":884,"column":263,"offset":46865},"indent":[]}},{"type":"inlineCode","value":"executeOperation","position":{"start":{"line":884,"column":263,"offset":46865},"end":{"line":884,"column":281,"offset":46883},"indent":[]}},{"type":"text","value":". Otherwise, that method will throw.","position":{"start":{"line":884,"column":281,"offset":46883},"end":{"line":884,"column":317,"offset":46919},"indent":[]}}],"position":{"start":{"line":884,"column":1,"offset":46603},"end":{"line":884,"column":317,"offset":46919},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"This does not apply to the batteries-included ","position":{"start":{"line":886,"column":1,"offset":46921},"end":{"line":886,"column":47,"offset":46967},"indent":[]}},{"type":"inlineCode","value":"apollo-server","position":{"start":{"line":886,"column":47,"offset":46967},"end":{"line":886,"column":62,"offset":46982},"indent":[]}},{"type":"text","value":" package (the server is started as part of the async method ","position":{"start":{"line":886,"column":62,"offset":46982},"end":{"line":886,"column":122,"offset":47042},"indent":[]}},{"type":"inlineCode","value":"server.listen()","position":{"start":{"line":886,"column":122,"offset":47042},"end":{"line":886,"column":139,"offset":47059},"indent":[]}},{"type":"text","value":") or to serverless framework integrations.","position":{"start":{"line":886,"column":139,"offset":47059},"end":{"line":886,"column":181,"offset":47101},"indent":[]}}],"position":{"start":{"line":886,"column":1,"offset":46921},"end":{"line":886,"column":181,"offset":47101},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Peer deps instead of direct deps","position":{"start":{"line":888,"column":5,"offset":47107},"end":{"line":888,"column":37,"offset":47139},"indent":[]}}],"position":{"start":{"line":888,"column":1,"offset":47103},"end":{"line":888,"column":37,"offset":47139},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, the ","position":{"start":{"line":890,"column":1,"offset":47141},"end":{"line":890,"column":25,"offset":47165},"indent":[]}},{"type":"inlineCode","value":"apollo-server-express","position":{"start":{"line":890,"column":25,"offset":47165},"end":{"line":890,"column":48,"offset":47188},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":890,"column":48,"offset":47188},"end":{"line":890,"column":50,"offset":47190},"indent":[]}},{"type":"inlineCode","value":"apollo-server-koa","position":{"start":{"line":890,"column":50,"offset":47190},"end":{"line":890,"column":69,"offset":47209},"indent":[]}},{"type":"text","value":", and ","position":{"start":{"line":890,"column":69,"offset":47209},"end":{"line":890,"column":75,"offset":47215},"indent":[]}},{"type":"inlineCode","value":"apollo-server-micro","position":{"start":{"line":890,"column":75,"offset":47215},"end":{"line":890,"column":96,"offset":47236},"indent":[]}},{"type":"text","value":" packages have ","position":{"start":{"line":890,"column":96,"offset":47236},"end":{"line":890,"column":111,"offset":47251},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"direct","position":{"start":{"line":890,"column":112,"offset":47252},"end":{"line":890,"column":118,"offset":47258},"indent":[]}}],"position":{"start":{"line":890,"column":111,"offset":47251},"end":{"line":890,"column":119,"offset":47259},"indent":[]}},{"type":"text","value":" dependencies on ","position":{"start":{"line":890,"column":119,"offset":47259},"end":{"line":890,"column":136,"offset":47276},"indent":[]}},{"type":"inlineCode","value":"express","position":{"start":{"line":890,"column":136,"offset":47276},"end":{"line":890,"column":145,"offset":47285},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":890,"column":145,"offset":47285},"end":{"line":890,"column":147,"offset":47287},"indent":[]}},{"type":"inlineCode","value":"koa","position":{"start":{"line":890,"column":147,"offset":47287},"end":{"line":890,"column":152,"offset":47292},"indent":[]}},{"type":"text","value":", and ","position":{"start":{"line":890,"column":152,"offset":47292},"end":{"line":890,"column":158,"offset":47298},"indent":[]}},{"type":"inlineCode","value":"micro","position":{"start":{"line":890,"column":158,"offset":47298},"end":{"line":890,"column":165,"offset":47305},"indent":[]}},{"type":"text","value":" respectively, and ","position":{"start":{"line":890,"column":165,"offset":47305},"end":{"line":890,"column":184,"offset":47324},"indent":[]}},{"type":"inlineCode","value":"apollo-server-fastify","position":{"start":{"line":890,"column":184,"offset":47324},"end":{"line":890,"column":207,"offset":47347},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":890,"column":207,"offset":47347},"end":{"line":890,"column":212,"offset":47352},"indent":[]}},{"type":"inlineCode","value":"apollo-server-hapi","position":{"start":{"line":890,"column":212,"offset":47352},"end":{"line":890,"column":232,"offset":47372},"indent":[]}},{"type":"text","value":" have no dependency on ","position":{"start":{"line":890,"column":232,"offset":47372},"end":{"line":890,"column":255,"offset":47395},"indent":[]}},{"type":"inlineCode","value":"fastify","position":{"start":{"line":890,"column":255,"offset":47395},"end":{"line":890,"column":264,"offset":47404},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":890,"column":264,"offset":47404},"end":{"line":890,"column":266,"offset":47406},"indent":[]}},{"type":"inlineCode","value":"hapi","position":{"start":{"line":890,"column":266,"offset":47406},"end":{"line":890,"column":272,"offset":47412},"indent":[]}},{"type":"text","value":", or ","position":{"start":{"line":890,"column":272,"offset":47412},"end":{"line":890,"column":277,"offset":47417},"indent":[]}},{"type":"inlineCode","value":"@hapi/hapi","position":{"start":{"line":890,"column":277,"offset":47417},"end":{"line":890,"column":289,"offset":47429},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":890,"column":289,"offset":47429},"end":{"line":890,"column":290,"offset":47430},"indent":[]}}],"position":{"start":{"line":890,"column":1,"offset":47141},"end":{"line":890,"column":290,"offset":47430},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, these packages have ","position":{"start":{"line":892,"column":1,"offset":47432},"end":{"line":892,"column":41,"offset":47472},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"peer","position":{"start":{"line":892,"column":42,"offset":47473},"end":{"line":892,"column":46,"offset":47477},"indent":[]}}],"position":{"start":{"line":892,"column":41,"offset":47472},"end":{"line":892,"column":47,"offset":47478},"indent":[]}},{"type":"text","value":" dependencies on their corresponding framework packages. This means that you need to install a version of that package of your choice yourself in your app (though most likely that was already the case).","position":{"start":{"line":892,"column":47,"offset":47478},"end":{"line":892,"column":249,"offset":47680},"indent":[]}}],"position":{"start":{"line":892,"column":1,"offset":47432},"end":{"line":892,"column":249,"offset":47680},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"CORS ","position":{"start":{"line":894,"column":5,"offset":47686},"end":{"line":894,"column":10,"offset":47691},"indent":[]}},{"type":"inlineCode","value":"*","position":{"start":{"line":894,"column":10,"offset":47691},"end":{"line":894,"column":13,"offset":47694},"indent":[]}},{"type":"text","value":" is now the default","position":{"start":{"line":894,"column":13,"offset":47694},"end":{"line":894,"column":32,"offset":47713},"indent":[]}}],"position":{"start":{"line":894,"column":1,"offset":47682},"end":{"line":894,"column":32,"offset":47713},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, the default CORS configuration for most packages is to serve an ","position":{"start":{"line":896,"column":1,"offset":47715},"end":{"line":896,"column":85,"offset":47799},"indent":[]}},{"type":"inlineCode","value":"access-control-allow-origin: *","position":{"start":{"line":896,"column":85,"offset":47799},"end":{"line":896,"column":117,"offset":47831},"indent":[]}},{"type":"text","value":" header for all responses.","position":{"start":{"line":896,"column":117,"offset":47831},"end":{"line":896,"column":143,"offset":47857},"indent":[]}}],"position":{"start":{"line":896,"column":1,"offset":47715},"end":{"line":896,"column":143,"offset":47857},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"However, this is not the case in Apollo Server 2 for ","position":{"start":{"line":898,"column":1,"offset":47859},"end":{"line":898,"column":54,"offset":47912},"indent":[]}},{"type":"inlineCode","value":"apollo-server-lambda","position":{"start":{"line":898,"column":54,"offset":47912},"end":{"line":898,"column":76,"offset":47934},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":898,"column":76,"offset":47934},"end":{"line":898,"column":78,"offset":47936},"indent":[]}},{"type":"inlineCode","value":"apollo-server-cloud-functions","position":{"start":{"line":898,"column":78,"offset":47936},"end":{"line":898,"column":109,"offset":47967},"indent":[]}},{"type":"text","value":", or ","position":{"start":{"line":898,"column":109,"offset":47967},"end":{"line":898,"column":114,"offset":47972},"indent":[]}},{"type":"inlineCode","value":"apollo-server-azure-functions","position":{"start":{"line":898,"column":114,"offset":47972},"end":{"line":898,"column":145,"offset":48003},"indent":[]}},{"type":"text","value":" (these serve no CORS headers by default), or for ","position":{"start":{"line":898,"column":145,"offset":48003},"end":{"line":898,"column":195,"offset":48053},"indent":[]}},{"type":"inlineCode","value":"apollo-server-koa","position":{"start":{"line":898,"column":195,"offset":48053},"end":{"line":898,"column":214,"offset":48072},"indent":[]}},{"type":"text","value":" (this serves an ","position":{"start":{"line":898,"column":214,"offset":48072},"end":{"line":898,"column":231,"offset":48089},"indent":[]}},{"type":"inlineCode","value":"access-control-allow-origin","position":{"start":{"line":898,"column":231,"offset":48089},"end":{"line":898,"column":260,"offset":48118},"indent":[]}},{"type":"text","value":" header with a value matching the request's origin by default).","position":{"start":{"line":898,"column":260,"offset":48118},"end":{"line":898,"column":323,"offset":48181},"indent":[]}}],"position":{"start":{"line":898,"column":1,"offset":47859},"end":{"line":898,"column":323,"offset":48181},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, all implementations of ","position":{"start":{"line":900,"column":1,"offset":48183},"end":{"line":900,"column":44,"offset":48226},"indent":[]}},{"type":"inlineCode","value":"ApolloServer","position":{"start":{"line":900,"column":44,"offset":48226},"end":{"line":900,"column":58,"offset":48240},"indent":[]}},{"type":"text","value":" that support CORS configuration have the same default of ","position":{"start":{"line":900,"column":58,"offset":48240},"end":{"line":900,"column":116,"offset":48298},"indent":[]}},{"type":"inlineCode","value":"access-control-allow-origin: *","position":{"start":{"line":900,"column":116,"offset":48298},"end":{"line":900,"column":148,"offset":48330},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":900,"column":148,"offset":48330},"end":{"line":900,"column":149,"offset":48331},"indent":[]}}],"position":{"start":{"line":900,"column":1,"offset":48183},"end":{"line":900,"column":149,"offset":48331},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To use your framework's Apollo Server 2 default CORS behavior in your Apollo Server 3 application, provide the options specified below to the ","position":{"start":{"line":902,"column":1,"offset":48333},"end":{"line":902,"column":143,"offset":48475},"indent":[]}},{"type":"inlineCode","value":"createHandler","position":{"start":{"line":902,"column":143,"offset":48475},"end":{"line":902,"column":158,"offset":48490},"indent":[]}},{"type":"text","value":"/","position":{"start":{"line":902,"column":158,"offset":48490},"end":{"line":902,"column":159,"offset":48491},"indent":[]}},{"type":"inlineCode","value":"getMiddleware","position":{"start":{"line":902,"column":159,"offset":48491},"end":{"line":902,"column":174,"offset":48506},"indent":[]}},{"type":"text","value":" method.","position":{"start":{"line":902,"column":174,"offset":48506},"end":{"line":902,"column":182,"offset":48514},"indent":[]}}],"position":{"start":{"line":902,"column":1,"offset":48333},"end":{"line":902,"column":182,"offset":48514},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Lambda / Cloud Functions","position":{"start":{"line":904,"column":6,"offset":48521},"end":{"line":904,"column":30,"offset":48545},"indent":[]}}],"position":{"start":{"line":904,"column":1,"offset":48516},"end":{"line":904,"column":30,"offset":48545},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"server.createHandler({expressGetMiddlewareOptions: {cors: false}})","position":{"start":{"line":906,"column":1,"offset":48547},"end":{"line":908,"column":4,"offset":48623},"indent":[1,1]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Azure Functions","position":{"start":{"line":910,"column":6,"offset":48630},"end":{"line":910,"column":21,"offset":48645},"indent":[]}}],"position":{"start":{"line":910,"column":1,"offset":48625},"end":{"line":910,"column":21,"offset":48645},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"server.createHandler({cors: false})","position":{"start":{"line":912,"column":1,"offset":48647},"end":{"line":914,"column":4,"offset":48692},"indent":[1,1]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Koa","position":{"start":{"line":916,"column":6,"offset":48699},"end":{"line":916,"column":9,"offset":48702},"indent":[]}}],"position":{"start":{"line":916,"column":1,"offset":48694},"end":{"line":916,"column":9,"offset":48702},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"server.getMiddleware({cors: {}})","position":{"start":{"line":918,"column":1,"offset":48704},"end":{"line":920,"column":4,"offset":48746},"indent":[1,1]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"apollo-server-micro","position":{"start":{"line":922,"column":3,"offset":48750},"end":{"line":922,"column":24,"offset":48771},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":922,"column":24,"offset":48771},"end":{"line":922,"column":29,"offset":48776},"indent":[]}},{"type":"inlineCode","value":"apollo-server-cloudflare","position":{"start":{"line":922,"column":29,"offset":48776},"end":{"line":922,"column":55,"offset":48802},"indent":[]}},{"type":"text","value":" do not support CORS configuration in Apollo Server 2 ","position":{"start":{"line":922,"column":55,"offset":48802},"end":{"line":922,"column":109,"offset":48856},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"or","position":{"start":{"line":922,"column":110,"offset":48857},"end":{"line":922,"column":112,"offset":48859},"indent":[]}}],"position":{"start":{"line":922,"column":109,"offset":48856},"end":{"line":922,"column":113,"offset":48860},"indent":[]}},{"type":"text","value":" 3.","position":{"start":{"line":922,"column":113,"offset":48860},"end":{"line":922,"column":116,"offset":48863},"indent":[]}}],"position":{"start":{"line":922,"column":3,"offset":48750},"end":{"line":922,"column":116,"offset":48863},"indent":[]}}],"position":{"start":{"line":922,"column":1,"offset":48748},"end":{"line":922,"column":116,"offset":48863},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"inlineCode","value":"apollo-server-express","position":{"start":{"line":924,"column":5,"offset":48869},"end":{"line":924,"column":28,"offset":48892},"indent":[]}}],"position":{"start":{"line":924,"column":1,"offset":48865},"end":{"line":924,"column":28,"offset":48892},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, ","position":{"start":{"line":926,"column":1,"offset":48894},"end":{"line":926,"column":21,"offset":48914},"indent":[]}},{"type":"inlineCode","value":"apollo-server-express","position":{"start":{"line":926,"column":21,"offset":48914},"end":{"line":926,"column":44,"offset":48937},"indent":[]}},{"type":"text","value":" officially supports both the ","position":{"start":{"line":926,"column":44,"offset":48937},"end":{"line":926,"column":74,"offset":48967},"indent":[]}},{"type":"inlineCode","value":"express","position":{"start":{"line":926,"column":74,"offset":48967},"end":{"line":926,"column":83,"offset":48976},"indent":[]}},{"type":"text","value":" framework and the older ","position":{"start":{"line":926,"column":83,"offset":48976},"end":{"line":926,"column":108,"offset":49001},"indent":[]}},{"type":"link","title":null,"url":"https://www.npmjs.com/package/connect","children":[{"type":"inlineCode","value":"connect","position":{"start":{"line":926,"column":109,"offset":49002},"end":{"line":926,"column":118,"offset":49011},"indent":[]}}],"position":{"start":{"line":926,"column":108,"offset":49001},"end":{"line":926,"column":158,"offset":49051},"indent":[]}},{"type":"text","value":" framework.","position":{"start":{"line":926,"column":158,"offset":49051},"end":{"line":926,"column":169,"offset":49062},"indent":[]}}],"position":{"start":{"line":926,"column":1,"offset":48894},"end":{"line":926,"column":169,"offset":49062},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, we no longer guarantee future support for ","position":{"start":{"line":928,"column":1,"offset":49064},"end":{"line":928,"column":63,"offset":49126},"indent":[]}},{"type":"inlineCode","value":"connect","position":{"start":{"line":928,"column":63,"offset":49126},"end":{"line":928,"column":72,"offset":49135},"indent":[]}},{"type":"text","value":". We do still run a test suite against it and we will try not to ","position":{"start":{"line":928,"column":72,"offset":49135},"end":{"line":928,"column":137,"offset":49200},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"unintentionally","position":{"start":{"line":928,"column":138,"offset":49201},"end":{"line":928,"column":153,"offset":49216},"indent":[]}}],"position":{"start":{"line":928,"column":137,"offset":49200},"end":{"line":928,"column":154,"offset":49217},"indent":[]}},{"type":"text","value":" break functionality under ","position":{"start":{"line":928,"column":154,"offset":49217},"end":{"line":928,"column":181,"offset":49244},"indent":[]}},{"type":"inlineCode","value":"connect","position":{"start":{"line":928,"column":181,"offset":49244},"end":{"line":928,"column":190,"offset":49253},"indent":[]}},{"type":"text","value":", but if future changes are easier to implement in an Express-only fashion, we reserve the right to break ","position":{"start":{"line":928,"column":190,"offset":49253},"end":{"line":928,"column":296,"offset":49359},"indent":[]}},{"type":"inlineCode","value":"connect","position":{"start":{"line":928,"column":296,"offset":49359},"end":{"line":928,"column":305,"offset":49368},"indent":[]}},{"type":"text","value":" compatibility within Apollo Server 3.","position":{"start":{"line":928,"column":305,"offset":49368},"end":{"line":928,"column":343,"offset":49406},"indent":[]}}],"position":{"start":{"line":928,"column":1,"offset":49064},"end":{"line":928,"column":343,"offset":49406},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"inlineCode","value":"apollo-server-lambda","position":{"start":{"line":930,"column":5,"offset":49412},"end":{"line":930,"column":27,"offset":49434},"indent":[]}}],"position":{"start":{"line":930,"column":1,"offset":49408},"end":{"line":930,"column":27,"offset":49434},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Now based on Express","position":{"start":{"line":932,"column":6,"offset":49441},"end":{"line":932,"column":26,"offset":49461},"indent":[]}}],"position":{"start":{"line":932,"column":1,"offset":49436},"end":{"line":932,"column":26,"offset":49461},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, ","position":{"start":{"line":934,"column":1,"offset":49463},"end":{"line":934,"column":21,"offset":49483},"indent":[]}},{"type":"inlineCode","value":"apollo-server-lambda","position":{"start":{"line":934,"column":21,"offset":49483},"end":{"line":934,"column":43,"offset":49505},"indent":[]}},{"type":"text","value":" implements parsing AWS Lambda events and performing standard web framework logic inside the package itself. As Lambda added new capabilities, the logic had to adapt, and as Apollo Server added new features, they had to be implemented from scratch in ","position":{"start":{"line":934,"column":43,"offset":49505},"end":{"line":934,"column":294,"offset":49756},"indent":[]}},{"type":"inlineCode","value":"apollo-server-lambda","position":{"start":{"line":934,"column":294,"offset":49756},"end":{"line":934,"column":316,"offset":49778},"indent":[]}},{"type":"text","value":". Additionally, there was no way to add additional HTTP functionality (e.g., \"middleware\") to ","position":{"start":{"line":934,"column":316,"offset":49778},"end":{"line":934,"column":410,"offset":49872},"indent":[]}},{"type":"inlineCode","value":"apollo-server-lambda","position":{"start":{"line":934,"column":410,"offset":49872},"end":{"line":934,"column":432,"offset":49894},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":934,"column":432,"offset":49894},"end":{"line":934,"column":433,"offset":49895},"indent":[]}}],"position":{"start":{"line":934,"column":1,"offset":49463},"end":{"line":934,"column":433,"offset":49895},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, ","position":{"start":{"line":936,"column":1,"offset":49897},"end":{"line":936,"column":21,"offset":49917},"indent":[]}},{"type":"inlineCode","value":"apollo-server-lambda","position":{"start":{"line":936,"column":21,"offset":49917},"end":{"line":936,"column":43,"offset":49939},"indent":[]}},{"type":"text","value":" is implemented as a wrapper around ","position":{"start":{"line":936,"column":43,"offset":49939},"end":{"line":936,"column":79,"offset":49975},"indent":[]}},{"type":"inlineCode","value":"apollo-server-express","position":{"start":{"line":936,"column":79,"offset":49975},"end":{"line":936,"column":102,"offset":49998},"indent":[]}},{"type":"text","value":", using an ","position":{"start":{"line":936,"column":102,"offset":49998},"end":{"line":936,"column":113,"offset":50009},"indent":[]}},{"type":"link","title":null,"url":"https://www.npmjs.com/package/@vendia/serverless-express","children":[{"type":"text","value":"actively maintained package","position":{"start":{"line":936,"column":114,"offset":50010},"end":{"line":936,"column":141,"offset":50037},"indent":[]}}],"position":{"start":{"line":936,"column":113,"offset":50009},"end":{"line":936,"column":200,"offset":50096},"indent":[]}},{"type":"text","value":" to parse AWS Lambda events into Express requests. This simplifies the implementation and enables us to support new Lambda integrations such as Application Load Balancers. Additionally, because it now uses Express internally, you can extend HTTP functionality via Express middleware using the new ","position":{"start":{"line":936,"column":200,"offset":50096},"end":{"line":936,"column":497,"offset":50393},"indent":[]}},{"type":"inlineCode","value":"expressAppFromMiddleware","position":{"start":{"line":936,"column":497,"offset":50393},"end":{"line":936,"column":523,"offset":50419},"indent":[]}},{"type":"text","value":" option to ","position":{"start":{"line":936,"column":523,"offset":50419},"end":{"line":936,"column":534,"offset":50430},"indent":[]}},{"type":"inlineCode","value":"createHandler","position":{"start":{"line":936,"column":534,"offset":50430},"end":{"line":936,"column":549,"offset":50445},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":936,"column":549,"offset":50445},"end":{"line":936,"column":550,"offset":50446},"indent":[]}}],"position":{"start":{"line":936,"column":1,"offset":49897},"end":{"line":936,"column":550,"offset":50446},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"inlineCode","value":"createHandler","position":{"start":{"line":938,"column":6,"offset":50453},"end":{"line":938,"column":21,"offset":50468},"indent":[]}},{"type":"text","value":" arguments changed","position":{"start":{"line":938,"column":21,"offset":50468},"end":{"line":938,"column":39,"offset":50486},"indent":[]}}],"position":{"start":{"line":938,"column":1,"offset":50448},"end":{"line":938,"column":39,"offset":50486},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"As part of the update described ","position":{"start":{"line":940,"column":1,"offset":50488},"end":{"line":940,"column":33,"offset":50520},"indent":[]}},{"type":"link","title":null,"url":"#now-based-on-express","children":[{"type":"text","value":"above","position":{"start":{"line":940,"column":34,"offset":50521},"end":{"line":940,"column":39,"offset":50526},"indent":[]}}],"position":{"start":{"line":940,"column":33,"offset":50520},"end":{"line":940,"column":63,"offset":50550},"indent":[]}},{"type":"text","value":", the arguments to ","position":{"start":{"line":940,"column":63,"offset":50550},"end":{"line":940,"column":82,"offset":50569},"indent":[]}},{"type":"inlineCode","value":"createHandler","position":{"start":{"line":940,"column":82,"offset":50569},"end":{"line":940,"column":97,"offset":50584},"indent":[]}},{"type":"text","value":" have changed. Instead of taking only ","position":{"start":{"line":940,"column":97,"offset":50584},"end":{"line":940,"column":135,"offset":50622},"indent":[]}},{"type":"inlineCode","value":"cors","position":{"start":{"line":940,"column":135,"offset":50622},"end":{"line":940,"column":141,"offset":50628},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":940,"column":141,"offset":50628},"end":{"line":940,"column":146,"offset":50633},"indent":[]}},{"type":"inlineCode","value":"onHealthCheck","position":{"start":{"line":940,"column":146,"offset":50633},"end":{"line":940,"column":161,"offset":50648},"indent":[]}},{"type":"text","value":", the method takes an ","position":{"start":{"line":940,"column":161,"offset":50648},"end":{"line":940,"column":183,"offset":50670},"indent":[]}},{"type":"inlineCode","value":"expressGetMiddlewareOptions","position":{"start":{"line":940,"column":183,"offset":50670},"end":{"line":940,"column":212,"offset":50699},"indent":[]}},{"type":"text","value":" option, which is an object that supports any of the options that the ","position":{"start":{"line":940,"column":212,"offset":50699},"end":{"line":940,"column":282,"offset":50769},"indent":[]}},{"type":"inlineCode","value":"apollo-server-express","position":{"start":{"line":940,"column":282,"offset":50769},"end":{"line":940,"column":305,"offset":50792},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":940,"column":305,"offset":50792},"end":{"line":940,"column":306,"offset":50793},"indent":[]}},{"type":"inlineCode","value":"applyMiddleware","position":{"start":{"line":940,"column":306,"offset":50793},"end":{"line":940,"column":323,"offset":50810},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":940,"column":323,"offset":50810},"end":{"line":940,"column":328,"offset":50815},"indent":[]}},{"type":"inlineCode","value":"getMiddleware","position":{"start":{"line":940,"column":328,"offset":50815},"end":{"line":940,"column":343,"offset":50830},"indent":[]}},{"type":"text","value":" can take (other than ","position":{"start":{"line":940,"column":343,"offset":50830},"end":{"line":940,"column":365,"offset":50852},"indent":[]}},{"type":"inlineCode","value":"app","position":{"start":{"line":940,"column":365,"offset":50852},"end":{"line":940,"column":370,"offset":50857},"indent":[]}},{"type":"text","value":").","position":{"start":{"line":940,"column":370,"offset":50857},"end":{"line":940,"column":372,"offset":50859},"indent":[]}}],"position":{"start":{"line":940,"column":1,"offset":50488},"end":{"line":940,"column":372,"offset":50859},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For example, instead of:","position":{"start":{"line":942,"column":1,"offset":50861},"end":{"line":942,"column":25,"offset":50885},"indent":[]}}],"position":{"start":{"line":942,"column":1,"offset":50861},"end":{"line":942,"column":25,"offset":50885},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"server.createHandler({onHealthCheck})","position":{"start":{"line":944,"column":1,"offset":50887},"end":{"line":946,"column":4,"offset":50934},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"you now write","position":{"start":{"line":948,"column":1,"offset":50936},"end":{"line":948,"column":14,"offset":50949},"indent":[]}}],"position":{"start":{"line":948,"column":1,"offset":50936},"end":{"line":948,"column":14,"offset":50949},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"server.createHandler({expressGetMiddlewareOptions: {onHealthCheck}})`","position":{"start":{"line":950,"column":1,"offset":50951},"end":{"line":952,"column":4,"offset":51030},"indent":[1,1]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Handler is always async","position":{"start":{"line":954,"column":6,"offset":51037},"end":{"line":954,"column":29,"offset":51060},"indent":[]}}],"position":{"start":{"line":954,"column":1,"offset":51032},"end":{"line":954,"column":29,"offset":51060},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, the handler returned by ","position":{"start":{"line":956,"column":1,"offset":51062},"end":{"line":956,"column":45,"offset":51106},"indent":[]}},{"type":"inlineCode","value":"createHandler","position":{"start":{"line":956,"column":45,"offset":51106},"end":{"line":956,"column":60,"offset":51121},"indent":[]}},{"type":"text","value":" can be called either as a function that takes a callback as a third argument, or (starting with Apollo Server v2.21.2) as an async function that returns a ","position":{"start":{"line":956,"column":60,"offset":51121},"end":{"line":956,"column":216,"offset":51277},"indent":[]}},{"type":"inlineCode","value":"Promise","position":{"start":{"line":956,"column":216,"offset":51277},"end":{"line":956,"column":225,"offset":51286},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":956,"column":225,"offset":51286},"end":{"line":956,"column":226,"offset":51287},"indent":[]}}],"position":{"start":{"line":956,"column":1,"offset":51062},"end":{"line":956,"column":226,"offset":51287},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, the handler returned by ","position":{"start":{"line":958,"column":1,"offset":51289},"end":{"line":958,"column":45,"offset":51333},"indent":[]}},{"type":"inlineCode","value":"createHandler","position":{"start":{"line":958,"column":45,"offset":51333},"end":{"line":958,"column":60,"offset":51348},"indent":[]}},{"type":"text","value":" is always an async function that returns a ","position":{"start":{"line":958,"column":60,"offset":51348},"end":{"line":958,"column":104,"offset":51392},"indent":[]}},{"type":"inlineCode","value":"Promise","position":{"start":{"line":958,"column":104,"offset":51392},"end":{"line":958,"column":113,"offset":51401},"indent":[]}},{"type":"text","value":". Any callback passed in will be ignored.","position":{"start":{"line":958,"column":113,"offset":51401},"end":{"line":958,"column":154,"offset":51442},"indent":[]}}],"position":{"start":{"line":958,"column":1,"offset":51289},"end":{"line":958,"column":154,"offset":51442},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"All currently supported Lambda runtimes support async handlers. However, if you are currently wrapping the handler returned from ","position":{"start":{"line":960,"column":1,"offset":51444},"end":{"line":960,"column":130,"offset":51573},"indent":[]}},{"type":"inlineCode","value":"createHandler","position":{"start":{"line":960,"column":130,"offset":51573},"end":{"line":960,"column":145,"offset":51588},"indent":[]}},{"type":"text","value":" in your own larger handler and passing a callback into it, this no longer works. Rewrite your outer handler to be an async function and ","position":{"start":{"line":960,"column":145,"offset":51588},"end":{"line":960,"column":282,"offset":51725},"indent":[]}},{"type":"inlineCode","value":"await","position":{"start":{"line":960,"column":282,"offset":51725},"end":{"line":960,"column":289,"offset":51732},"indent":[]}},{"type":"text","value":" the ","position":{"start":{"line":960,"column":289,"offset":51732},"end":{"line":960,"column":294,"offset":51737},"indent":[]}},{"type":"inlineCode","value":"Promise","position":{"start":{"line":960,"column":294,"offset":51737},"end":{"line":960,"column":303,"offset":51746},"indent":[]}},{"type":"text","value":" returned from the handler returned by ","position":{"start":{"line":960,"column":303,"offset":51746},"end":{"line":960,"column":342,"offset":51785},"indent":[]}},{"type":"inlineCode","value":"createHandler","position":{"start":{"line":960,"column":342,"offset":51785},"end":{"line":960,"column":357,"offset":51800},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":960,"column":357,"offset":51800},"end":{"line":960,"column":358,"offset":51801},"indent":[]}}],"position":{"start":{"line":960,"column":1,"offset":51444},"end":{"line":960,"column":358,"offset":51801},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For example, if your server looked like this:","position":{"start":{"line":962,"column":1,"offset":51803},"end":{"line":962,"column":46,"offset":51848},"indent":[]}}],"position":{"start":{"line":962,"column":1,"offset":51803},"end":{"line":962,"column":46,"offset":51848},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"const apolloHandler = server.createHandler();\n\nexports.handler = function (event, context, callback) {\n  doSomethingFirst();\n  apolloHandler(event, context, (error, result) => {\n    doSomethingLater();\n    callback(error, result);\n  });\n}","position":{"start":{"line":964,"column":1,"offset":51850},"end":{"line":974,"column":4,"offset":52106},"indent":[1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"you can change it to look like this:","position":{"start":{"line":976,"column":1,"offset":52108},"end":{"line":976,"column":37,"offset":52144},"indent":[]}}],"position":{"start":{"line":976,"column":1,"offset":52108},"end":{"line":976,"column":37,"offset":52144},"indent":[]}},{"type":"code","lang":"javascript","meta":null,"value":"const apolloHandler = server.createHandler();\n\nexports.handler = async function (event, context) {\n  doSomethingFirst();\n  try {\n    return await apolloHandler(event, context);\n  } finally {\n    doSomethingLater();\n  }\n}","position":{"start":{"line":978,"column":1,"offset":52146},"end":{"line":989,"column":4,"offset":52384},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"inlineCode","value":"apollo-server-cloud-functions","position":{"start":{"line":991,"column":5,"offset":52390},"end":{"line":991,"column":36,"offset":52421},"indent":[]}}],"position":{"start":{"line":991,"column":1,"offset":52386},"end":{"line":991,"column":36,"offset":52421},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, ","position":{"start":{"line":993,"column":1,"offset":52423},"end":{"line":993,"column":21,"offset":52443},"indent":[]}},{"type":"inlineCode","value":"apollo-server-cloud-functions","position":{"start":{"line":993,"column":21,"offset":52443},"end":{"line":993,"column":52,"offset":52474},"indent":[]}},{"type":"text","value":" implements standard web framework logic inside the package itself. Even though the Node.js API for Google Cloud Functions provides its request and response in the form of Express request and response objects, Apollo Server 2 has a bespoke implementation unrelated to ","position":{"start":{"line":993,"column":52,"offset":52474},"end":{"line":993,"column":320,"offset":52742},"indent":[]}},{"type":"inlineCode","value":"apollo-server-express","position":{"start":{"line":993,"column":320,"offset":52742},"end":{"line":993,"column":343,"offset":52765},"indent":[]}},{"type":"text","value":" and does not support all features supported by ","position":{"start":{"line":993,"column":343,"offset":52765},"end":{"line":993,"column":391,"offset":52813},"indent":[]}},{"type":"inlineCode","value":"apollo-server-express","position":{"start":{"line":993,"column":391,"offset":52813},"end":{"line":993,"column":414,"offset":52836},"indent":[]}},{"type":"text","value":". Additionally, there is no way to add additional HTTP functionality (e.g., \"middleware\") to ","position":{"start":{"line":993,"column":414,"offset":52836},"end":{"line":993,"column":507,"offset":52929},"indent":[]}},{"type":"inlineCode","value":"apollo-server-cloud-functions","position":{"start":{"line":993,"column":507,"offset":52929},"end":{"line":993,"column":538,"offset":52960},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":993,"column":538,"offset":52960},"end":{"line":993,"column":539,"offset":52961},"indent":[]}}],"position":{"start":{"line":993,"column":1,"offset":52423},"end":{"line":993,"column":539,"offset":52961},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, ","position":{"start":{"line":995,"column":1,"offset":52963},"end":{"line":995,"column":21,"offset":52983},"indent":[]}},{"type":"inlineCode","value":"apollo-server-cloud-functions","position":{"start":{"line":995,"column":21,"offset":52983},"end":{"line":995,"column":52,"offset":53014},"indent":[]}},{"type":"text","value":" is implemented on top of ","position":{"start":{"line":995,"column":52,"offset":53014},"end":{"line":995,"column":78,"offset":53040},"indent":[]}},{"type":"inlineCode","value":"apollo-server-express","position":{"start":{"line":995,"column":78,"offset":53040},"end":{"line":995,"column":101,"offset":53063},"indent":[]}},{"type":"text","value":" and supports all features supported by ","position":{"start":{"line":995,"column":101,"offset":53063},"end":{"line":995,"column":141,"offset":53103},"indent":[]}},{"type":"inlineCode","value":"apollo-server-express","position":{"start":{"line":995,"column":141,"offset":53103},"end":{"line":995,"column":164,"offset":53126},"indent":[]}},{"type":"text","value":". You can add additional HTTP functionality via Express middleware using the new ","position":{"start":{"line":995,"column":164,"offset":53126},"end":{"line":995,"column":245,"offset":53207},"indent":[]}},{"type":"inlineCode","value":"expressAppFromMiddleware","position":{"start":{"line":995,"column":245,"offset":53207},"end":{"line":995,"column":271,"offset":53233},"indent":[]}},{"type":"text","value":" option to ","position":{"start":{"line":995,"column":271,"offset":53233},"end":{"line":995,"column":282,"offset":53244},"indent":[]}},{"type":"inlineCode","value":"createHandler","position":{"start":{"line":995,"column":282,"offset":53244},"end":{"line":995,"column":297,"offset":53259},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":995,"column":297,"offset":53259},"end":{"line":995,"column":298,"offset":53260},"indent":[]}}],"position":{"start":{"line":995,"column":1,"offset":52963},"end":{"line":995,"column":298,"offset":53260},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"As part of this, the arguments to ","position":{"start":{"line":997,"column":1,"offset":53262},"end":{"line":997,"column":35,"offset":53296},"indent":[]}},{"type":"inlineCode","value":"createHandler","position":{"start":{"line":997,"column":35,"offset":53296},"end":{"line":997,"column":50,"offset":53311},"indent":[]}},{"type":"text","value":" have changed. Instead of taking only ","position":{"start":{"line":997,"column":50,"offset":53311},"end":{"line":997,"column":88,"offset":53349},"indent":[]}},{"type":"inlineCode","value":"cors","position":{"start":{"line":997,"column":88,"offset":53349},"end":{"line":997,"column":94,"offset":53355},"indent":[]}},{"type":"text","value":", it takes an ","position":{"start":{"line":997,"column":94,"offset":53355},"end":{"line":997,"column":108,"offset":53369},"indent":[]}},{"type":"inlineCode","value":"expressGetMiddlewareOptions","position":{"start":{"line":997,"column":108,"offset":53369},"end":{"line":997,"column":137,"offset":53398},"indent":[]}},{"type":"text","value":" option, which is an object taking any of the options that the ","position":{"start":{"line":997,"column":137,"offset":53398},"end":{"line":997,"column":200,"offset":53461},"indent":[]}},{"type":"inlineCode","value":"apollo-server-express","position":{"start":{"line":997,"column":200,"offset":53461},"end":{"line":997,"column":223,"offset":53484},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":997,"column":223,"offset":53484},"end":{"line":997,"column":224,"offset":53485},"indent":[]}},{"type":"inlineCode","value":"applyMiddleware","position":{"start":{"line":997,"column":224,"offset":53485},"end":{"line":997,"column":241,"offset":53502},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":997,"column":241,"offset":53502},"end":{"line":997,"column":246,"offset":53507},"indent":[]}},{"type":"inlineCode","value":"getMiddleware","position":{"start":{"line":997,"column":246,"offset":53507},"end":{"line":997,"column":261,"offset":53522},"indent":[]}},{"type":"text","value":" can take (other than ","position":{"start":{"line":997,"column":261,"offset":53522},"end":{"line":997,"column":283,"offset":53544},"indent":[]}},{"type":"inlineCode","value":"app","position":{"start":{"line":997,"column":283,"offset":53544},"end":{"line":997,"column":288,"offset":53549},"indent":[]}},{"type":"text","value":"). For example, instead of:","position":{"start":{"line":997,"column":288,"offset":53549},"end":{"line":997,"column":315,"offset":53576},"indent":[]}}],"position":{"start":{"line":997,"column":1,"offset":53262},"end":{"line":997,"column":315,"offset":53576},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"server.createHandler({cors})","position":{"start":{"line":999,"column":1,"offset":53578},"end":{"line":1001,"column":4,"offset":53616},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"you now write:","position":{"start":{"line":1003,"column":1,"offset":53618},"end":{"line":1003,"column":15,"offset":53632},"indent":[]}}],"position":{"start":{"line":1003,"column":1,"offset":53618},"end":{"line":1003,"column":15,"offset":53632},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"server.createHandler({expressGetMiddlewareOptions: {cors}})","position":{"start":{"line":1005,"column":1,"offset":53634},"end":{"line":1007,"column":4,"offset":53703},"indent":[1,1]}},{"type":"heading","depth":3,"children":[{"type":"inlineCode","value":"apollo-server-fastify","position":{"start":{"line":1009,"column":5,"offset":53709},"end":{"line":1009,"column":28,"offset":53732},"indent":[]}}],"position":{"start":{"line":1009,"column":1,"offset":53705},"end":{"line":1009,"column":28,"offset":53732},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 2, ","position":{"start":{"line":1011,"column":1,"offset":53734},"end":{"line":1011,"column":21,"offset":53754},"indent":[]}},{"type":"inlineCode","value":"apollo-server-fastify","position":{"start":{"line":1011,"column":21,"offset":53754},"end":{"line":1011,"column":44,"offset":53777},"indent":[]}},{"type":"text","value":" supports Fastify v2 and does ","position":{"start":{"line":1011,"column":44,"offset":53777},"end":{"line":1011,"column":74,"offset":53807},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"not","position":{"start":{"line":1011,"column":75,"offset":53808},"end":{"line":1011,"column":78,"offset":53811},"indent":[]}}],"position":{"start":{"line":1011,"column":74,"offset":53807},"end":{"line":1011,"column":79,"offset":53812},"indent":[]}},{"type":"text","value":" support Fastify v3. There is no dependency or peer dependency making this requirement clear.","position":{"start":{"line":1011,"column":79,"offset":53812},"end":{"line":1011,"column":172,"offset":53905},"indent":[]}}],"position":{"start":{"line":1011,"column":1,"offset":53734},"end":{"line":1011,"column":172,"offset":53905},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, ","position":{"start":{"line":1013,"column":1,"offset":53907},"end":{"line":1013,"column":21,"offset":53927},"indent":[]}},{"type":"inlineCode","value":"apollo-server-fastify","position":{"start":{"line":1013,"column":21,"offset":53927},"end":{"line":1013,"column":44,"offset":53950},"indent":[]}},{"type":"text","value":" supports Fastify v3. It has not been tested with versions of Fastify older than v3. There is a peer dependency on ","position":{"start":{"line":1013,"column":44,"offset":53950},"end":{"line":1013,"column":159,"offset":54065},"indent":[]}},{"type":"inlineCode","value":"fastify","position":{"start":{"line":1013,"column":159,"offset":54065},"end":{"line":1013,"column":168,"offset":54074},"indent":[]}},{"type":"text","value":" v3.","position":{"start":{"line":1013,"column":168,"offset":54074},"end":{"line":1013,"column":172,"offset":54078},"indent":[]}}],"position":{"start":{"line":1013,"column":1,"offset":53907},"end":{"line":1013,"column":172,"offset":54078},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"inlineCode","value":"apollo-server-hapi","position":{"start":{"line":1015,"column":5,"offset":54084},"end":{"line":1015,"column":25,"offset":54104},"indent":[]}}],"position":{"start":{"line":1015,"column":1,"offset":54080},"end":{"line":1015,"column":25,"offset":54104},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We are not certain exactly which versions of Hapi are supported by ","position":{"start":{"line":1017,"column":1,"offset":54106},"end":{"line":1017,"column":68,"offset":54173},"indent":[]}},{"type":"inlineCode","value":"apollo-server-hapi","position":{"start":{"line":1017,"column":68,"offset":54173},"end":{"line":1017,"column":88,"offset":54193},"indent":[]}},{"type":"text","value":" in Apollo Server 2. We ","position":{"start":{"line":1017,"column":88,"offset":54193},"end":{"line":1017,"column":112,"offset":54217},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"are","position":{"start":{"line":1017,"column":113,"offset":54218},"end":{"line":1017,"column":116,"offset":54221},"indent":[]}}],"position":{"start":{"line":1017,"column":112,"offset":54217},"end":{"line":1017,"column":117,"offset":54222},"indent":[]}},{"type":"text","value":" certain that only ","position":{"start":{"line":1017,"column":117,"offset":54222},"end":{"line":1017,"column":136,"offset":54241},"indent":[]}},{"type":"inlineCode","value":"@hapi/hapi","position":{"start":{"line":1017,"column":136,"offset":54241},"end":{"line":1017,"column":148,"offset":54253},"indent":[]}},{"type":"text","value":" v20.1.2 and higher are supported by Node 16, and Apollo Server 2 was not tested with versions of ","position":{"start":{"line":1017,"column":148,"offset":54253},"end":{"line":1017,"column":246,"offset":54351},"indent":[]}},{"type":"inlineCode","value":"hapi","position":{"start":{"line":1017,"column":246,"offset":54351},"end":{"line":1017,"column":252,"offset":54357},"indent":[]}},{"type":"text","value":" newer than v17.8.5. (Hapi's package name changed from ","position":{"start":{"line":1017,"column":252,"offset":54357},"end":{"line":1017,"column":307,"offset":54412},"indent":[]}},{"type":"inlineCode","value":"hapi","position":{"start":{"line":1017,"column":307,"offset":54412},"end":{"line":1017,"column":313,"offset":54418},"indent":[]}},{"type":"text","value":" to ","position":{"start":{"line":1017,"column":313,"offset":54418},"end":{"line":1017,"column":317,"offset":54422},"indent":[]}},{"type":"inlineCode","value":"@hapi/hapi","position":{"start":{"line":1017,"column":317,"offset":54422},"end":{"line":1017,"column":329,"offset":54434},"indent":[]}},{"type":"text","value":" between v18.1.0 and v18.2.0.)","position":{"start":{"line":1017,"column":329,"offset":54434},"end":{"line":1017,"column":359,"offset":54464},"indent":[]}}],"position":{"start":{"line":1017,"column":1,"offset":54106},"end":{"line":1017,"column":359,"offset":54464},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In Apollo Server 3, ","position":{"start":{"line":1019,"column":1,"offset":54466},"end":{"line":1019,"column":21,"offset":54486},"indent":[]}},{"type":"inlineCode","value":"apollo-server-hapi","position":{"start":{"line":1019,"column":21,"offset":54486},"end":{"line":1019,"column":41,"offset":54506},"indent":[]}},{"type":"text","value":" works with ","position":{"start":{"line":1019,"column":41,"offset":54506},"end":{"line":1019,"column":53,"offset":54518},"indent":[]}},{"type":"inlineCode","value":"@hapi/hapi","position":{"start":{"line":1019,"column":53,"offset":54518},"end":{"line":1019,"column":65,"offset":54530},"indent":[]}},{"type":"text","value":" v20.1.2 and Node 16. It is not tested with older versions of Hapi. Note that the Hapi project believes that ","position":{"start":{"line":1019,"column":65,"offset":54530},"end":{"line":1019,"column":174,"offset":54639},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/hapijs/hapi/issues/4114","children":[{"type":"text","value":"all versions older than v20 have security issues","position":{"start":{"line":1019,"column":175,"offset":54640},"end":{"line":1019,"column":223,"offset":54688},"indent":[]}}],"position":{"start":{"line":1019,"column":174,"offset":54639},"end":{"line":1019,"column":268,"offset":54733},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":1019,"column":268,"offset":54733},"end":{"line":1019,"column":269,"offset":54734},"indent":[]}}],"position":{"start":{"line":1019,"column":1,"offset":54466},"end":{"line":1019,"column":269,"offset":54734},"indent":[]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Migrating to Apollo Server 3\"}","position":{"start":{"line":1022,"column":1,"offset":54737},"end":{"line":1022,"column":69,"offset":54805},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":1022,"column":69,"offset":54805}}},"scopeImports":["import { ExpansionPanel } from 'gatsby-theme-apollo-docs';","import * as React from 'react'"],"scopeIdentifiers":["ExpansionPanel","React"],"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Migrating to Apollo Server 3\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Apollo Server 3 is generally available.\"), mdx(\"p\", null, \"The focus of this major-version release is to provide a lighter, nimbler core library as a foundation for future features and improved extensibility.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Many Apollo Server 2 users don't need to make any code changes to upgrade to Apollo Server 3!\"), \" This is especially likely if you use the \\\"batteries-included\\\" \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server\"), \" library (as opposed to a \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/integrations/middleware/\"\n  }, \"middleware-specific library\"), \").\"), mdx(\"p\", null, \"This document explains which features \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"do\"), \" require code changes and how to make them. If you encounter issues while migrating, please \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/apollographql/apollo-server/issues/new/choose\"\n  }, \"create an issue\"), \".\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"For a list of all breaking changes, \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/apollographql/apollo-server/blob/main/CHANGELOG.md\"\n  }, \"see the changelog\"), \".\")), mdx(\"h2\", {\n    \"id\": \"bumped-dependencies\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#bumped-dependencies\",\n    \"aria-label\": \"bumped dependencies permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Bumped dependencies\"), mdx(\"h3\", {\n    \"id\": \"nodejs\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#nodejs\",\n    \"aria-label\": \"nodejs permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Node.js\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Apollo Server 3 supports Node.js 12 and later.\"), \" (Apollo Server 2 supports back to Node.js 6.) This includes \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://nodejs.org/about/releases/\"\n  }, \"all LTS and Current versions at the time of release\"), \".\"), mdx(\"p\", null, \"If you're using an older version of Node.js, upgrade your runtime before upgrading to Apollo Server 3.\"), mdx(\"h3\", {\n    \"id\": \"graphql\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#graphql\",\n    \"aria-label\": \"graphql permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"graphql\")), mdx(\"p\", null, \"Apollo Server has a peer dependency on \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.npmjs.com/package/graphql\"\n  }, mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"graphql\")), \" (the core JS GraphQL implementation), which means you are responsible for choosing the version installed in your app.\"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Apollo Server 3 supports \", mdx(\"code\", {\n    parentName: \"strong\",\n    \"className\": \"language-text\"\n  }, \"graphql\"), \" v15.3.0 and later.\"), \" (Apollo Server 2 supported \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql\"), \" v0.12 through v15.)\"), mdx(\"p\", null, \"If you're using an older version of \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql\"), \", upgrade it to a supported version before upgrading to Apollo Server 3.\"), mdx(\"h2\", {\n    \"id\": \"removed-integrations\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#removed-integrations\",\n    \"aria-label\": \"removed integrations permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Removed integrations\"), mdx(\"p\", null, \"Apollo Server 2 provides built-in support for subscriptions and file uploads via the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"subscriptions-transport-ws\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-upload\"), \" packages, respectively. It also serves GraphQL Playground from its base URL by default.\"), mdx(\"p\", null, \"Apollo Server 3 removes these built-in integrations, in favor of enabling users to provide their own mechanisms for these features.\"), mdx(\"p\", null, \"You can reenable all of these integrations as they exist in Apollo Server 2.\"), mdx(\"h3\", {\n    \"id\": \"subscriptions\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#subscriptions\",\n    \"aria-label\": \"subscriptions permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Subscriptions\"), mdx(\"p\", null, \"Apollo Server 2 provides limited, built-in support for WebSocket-based GraphQL subscriptions via the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"subscriptions-transport-ws\"), \" package. This integration doesn't work with Apollo Server's plugin system or Apollo Studio usage reporting.\"), mdx(\"p\", null, \"Apollo Server 3 no longer contains this built-in integration. However, you can still use \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"subscriptions-transport-ws\"), \" for subscriptions if you depend on this implementation. Note that as with Apollo Server 2, this integration won't work with the plugin system or Studio usage reporting.\"), mdx(\"p\", null, \"Additionally, Apollo Server 3 \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"#exports-from-graphql-subscriptions\"\n  }, \"no longer re-exports all of the exports from the \", mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"graphql-subscriptions\"), \" package\"), \" such as \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"PubSub\"), \".\"), mdx(\"p\", null, \"We hope to add more fully-integrated subscription support to Apollo Server in a future version.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Note that the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"subscriptions-transport-ws\"), \" library is no longer maintained. A newer, actively-maintained \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-ws\"), \" package exists. These libraries implement different protocols for GraphQL subscriptions over WebSocket, so you need to adjust your client to support \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-ws\"), \". This migration guide shows how to reenable \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"subscriptions-transport-ws\"), \" to make your transition from Apollo Server 2 to Apollo Server 3 as easy as possible, but we recommend that you then migrate from \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"subscriptions-transport-ws\"), \" to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-ws\"), \" once you've finished the upgrade. The \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/data/subscriptions/\"\n  }, \"subscriptions documentation\"), \" shows how to use the newer \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-ws\"), \" rather than the unmaintained \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"subscriptions-transport-ws\"), \".\")), mdx(\"h4\", {\n    \"id\": \"reenabling-subscriptions\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#reenabling-subscriptions\",\n    \"aria-label\": \"reenabling subscriptions permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Reenabling subscriptions\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Currently, these instructions are only for Apollo Server's Express integration. It is likely possible to integrate \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"subscriptions-transport-ws\"), \" with other integrations. PRs to this migration guide are certainly welcome!\")), mdx(\"p\", null, \"In Apollo Server 3, you can't use \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"subscriptions-transport-ws\"), \" with the \\\"batteries-included\\\" \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server\"), \" package. If your project uses \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server\"), \" with subscriptions, first \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/integrations/middleware/#swapping-out-apollo-server\"\n  }, \"swap to \", mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-express\")), \".\"), mdx(\"p\", null, \"Then, complete the following:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Install \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"subscriptions-transport-ws\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@graphql-tools/schema\"), \".\"), mdx(\"div\", {\n    parentName: \"li\",\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"shell\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-shell line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-shell\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"npm\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"install\"), \" subscriptions-transport-ws @graphql-tools/schema\"), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }))))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Add the following imports in the module where your Apollo Server is currently instantiated. We'll use these in the subsequent steps.\"), mdx(\"div\", {\n    parentName: \"li\",\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" createServer \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'http'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" execute\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" subscribe \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'graphql'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" SubscriptionServer \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'subscriptions-transport-ws'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" makeExecutableSchema \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'@graphql-tools/schema'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }))))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Create an \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"http.Server\"), \" instance with your Express \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"app\"), \".\"), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"In order to set up both the HTTP and WebSocket servers, we'll need to create an \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"http.Server\"), \". Do this by passing your Express \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"app\"), \" to the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"createServer\"), \" function which we imported from the Node.js \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"http\"), \" module.\"), mdx(\"div\", {\n    parentName: \"li\",\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// This `app` is the returned value from `express()`.\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" httpServer \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"createServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"app\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }))))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Create an instance of \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"GraphQLSchema\"), \" (if one doesn't already exist).\"), mdx(\"blockquote\", {\n    parentName: \"li\"\n  }, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Your server may already pass a \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"schema\"), \" to the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ApolloServer\"), \" constructor. If it does, this step can be skipped. You'll use the existing \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"schema\"), \" instance in a later step.\")), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"The \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"SubscriptionServer\"), \" (which we'll instantiate next) doesn't accept \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"typeDefs\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"resolvers\"), \" directly, but rather an executable \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"GraphQLSchema\"), \". We can pass this \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"schema\"), \" object to both the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"SubscriptionServer\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ApolloServer\"), \". This way, it's clear that the same schema is being used in both places.\"), mdx(\"div\", {\n    parentName: \"li\",\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" schema \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"makeExecutableSchema\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" typeDefs\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" resolvers \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" server \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  schema\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }))))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Create the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"SubscriptionServer\"), \".\"), mdx(\"div\", {\n    parentName: \"li\",\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" subscriptionServer \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" SubscriptionServer\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"create\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// This is the `schema` we just created.\"), \"\\n  schema\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// These are imported from `graphql`.\"), \"\\n  execute\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  subscribe\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// Providing `onConnect` is the `SubscriptionServer` equivalent to the\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// `context` function in `ApolloServer`. Please [see the docs](https://github.com/apollographql/subscriptions-transport-ws#constructoroptions-socketoptions--socketserver)\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// for more information on this hook.\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"async\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"onConnect\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token parameter\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token literal-property property\"\n  }, \"connectionParams\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token operator\"\n  }, \":\"), \" Object\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token literal-property property\"\n  }, \"webSocket\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token operator\"\n  }, \":\"), \" WebSocket\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token literal-property property\"\n  }, \"context\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token operator\"\n  }, \":\"), \" ConnectionContext\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// If an object is returned here, it will be passed as the `context`\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// argument to your subscription resolvers.\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// This is the `httpServer` we created in a previous step.\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"server\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" httpServer\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// This `server` is the instance returned from `new ApolloServer`.\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"path\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"graphqlPath\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }))))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Add a plugin to your \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ApolloServer\"), \" constructor to close the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"SubscriptionServer\"), \".\"), mdx(\"div\", {\n    parentName: \"li\",\n    \"className\": \"gatsby-code-title\"\n  }, \"index.js-10\"), mdx(\"div\", {\n    parentName: \"li\",\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" server \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  schema\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"plugins\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"[\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"async\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"serverWillStart\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"return\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"async\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"drainServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n          subscriptionServer\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"close\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"]\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }))))), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Finally, adjust the existing \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"listen\"), \".\"), mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Most applications will be calling \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"app.listen(...)\"), \" on their Express app. \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"This should be changed to \", mdx(\"code\", {\n    parentName: \"strong\",\n    \"className\": \"language-text\"\n  }, \"httpServer.listen(...)\")), \" using the same arguments. This will begin listening on the HTTP and WebSocket transports simultaneously.\"))), mdx(\"p\", null, \"A completed example of migrating subscriptions is shown below:\"), mdx(ExpansionPanel, {\n    title: \"Click to expand\",\n    mdxType: \"ExpansionPanel\"\n  }, mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-js line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" createServer \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"http\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" execute\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" subscribe \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"graphql\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" SubscriptionServer \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"subscriptions-transport-ws\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" makeExecutableSchema \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"@graphql-tools/schema\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" express \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"express\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" ApolloServer \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"apollo-server-express\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" resolvers \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"./resolvers\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" typeDefs \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"\\\"./typeDefs\\\"\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"async\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"function\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" app \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"express\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" httpServer \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"createServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"app\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" schema \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"makeExecutableSchema\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    typeDefs\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    resolvers\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" subscriptionServer \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" SubscriptionServer\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"create\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    schema\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    execute\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    subscribe\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"onConnect\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// lookup userId by token, etc.\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"return\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" userId \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"server\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" httpServer\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"path\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"graphqlPath\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" server \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    schema\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"context\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// lookup userId by token, etc.\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"return\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" userId \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"plugins\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"[\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"async\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"serverWillStart\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"return\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n          \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"async\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"drainServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n            subscriptionServer\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"close\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n          \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"]\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"await\"), \" server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"start\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"applyMiddleware\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" app \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token constant\"\n  }, \"PORT\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token number\"\n  }, \"4000\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  httpServer\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"listen\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token constant\"\n  }, \"PORT\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=>\"), \"\\n    console\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"log\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token template-string\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token template-punctuation string\"\n  }, \"`\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token string\"\n  }, \"Server is now running on http://localhost:\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token interpolation\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token interpolation-punctuation punctuation\"\n  }, \"${\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token constant\"\n  }, \"PORT\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token interpolation-punctuation punctuation\"\n  }, \"}\")), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token string\"\n  }, \"/graphql\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token template-punctuation string\"\n  }, \"`\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }))))), mdx(\"h3\", {\n    \"id\": \"file-uploads\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#file-uploads\",\n    \"aria-label\": \"file uploads permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"File uploads\"), mdx(\"p\", null, \"Apollo Server 2 provides built-in support for file uploads via an outdated version of the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-upload\"), \" library. Using an updated version of \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-upload\"), \" requires you to disable this built-in support due to backward incompatible changes.\"), mdx(\"p\", null, \"This built-in support is removed in Apollo Server 3. To use \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-upload\"), \", you can choose an appropriate version and integrate it yourself. Note that \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-upload\"), \" does not support federation or every \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/integrations/middleware/\"\n  }, \"Node.js framework\"), \" supported by Apollo Server.\"), mdx(\"p\", null, \"To use \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-upload\"), \" with Apollo Server 3, see the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/data/file-uploads/\"\n  }, \"documentation on enabling file uploads in Apollo Server\"), \". Note that if your project currently uses uploads with the \\\"batteries-included\\\" \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server\"), \" package, you must first \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/integrations/middleware/#swapping-out-apollo-server\"\n  }, \"swap to \", mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-express\")), \".\"), mdx(\"p\", null, \"Additionally, Apollo Server 3 \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"#exports-from-graphql-upload\"\n  }, \"no longer re-exports the \", mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"GraphQLUpload\"), \" symbol from the \", mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"graphql-uploads\"), \" package\"), \".\"), mdx(\"h3\", {\n    \"id\": \"graphql-playground\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#graphql-playground\",\n    \"aria-label\": \"graphql playground permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"GraphQL Playground\"), mdx(\"p\", null, \"By default, Apollo Server 2 serves the (now-\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/graphql/graphql-playground/issues/1143\"\n  }, \"retired\"), \") \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/graphql/graphql-playground\"\n  }, \"GraphQL Playground\"), \" IDE from its base URL in non-production environments. In production, it serves no landing page. Apollo Server 2 also accepts a \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"playground\"), \" constructor option to override this default behavior (for example, to enable GraphQL Playground even in production).\"), mdx(\"p\", null, \"Apollo Server 3 removes GraphQL Playground (and its associated constructor option) in favor of a landing page that links to Apollo Sandbox in non-production environments. In production, it serves a simplified landing page instead.\"), mdx(\"p\", null, \"You can customize your Apollo Server 3 landing page, as described in \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/testing/build-run-queries/\"\n  }, \"Build and run queries\"), \".\"), mdx(\"h4\", {\n    \"id\": \"reenabling-graphql-playground\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#reenabling-graphql-playground\",\n    \"aria-label\": \"reenabling graphql playground permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Reenabling GraphQL Playground\"), mdx(\"p\", null, \"You can continue to use GraphQL Playground by installing its associated plugin. You customize its behavior by passing options to the plugin instead of via the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"playground\"), \" constructor option.\"), mdx(\"p\", null, \"If your code did not specify the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"playground\"), \" constructor option and you'd like to keep the previous behavior instead of trying the new splash page, you can do that as follows:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" ApolloServerPluginLandingPageGraphQLPlayground\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n         ApolloServerPluginLandingPageDisabled \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'apollo-server-core'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"plugins\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"[\"), \"\\n    process\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"env\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token constant\"\n  }, \"NODE_ENV\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"===\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'production'\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"?\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"ApolloServerPluginLandingPageDisabled\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"ApolloServerPluginLandingPageGraphQLPlayground\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"]\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"If your code passed \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"new ApolloServer({playground: true})\"), \", you can keep the previous behavior with:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" ApolloServerPluginLandingPageGraphQLPlayground \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'apollo-server-core'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"plugins\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"[\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"ApolloServerPluginLandingPageGraphQLPlayground\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"]\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"If your code passed \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"new ApolloServer({playground: false})\"), \" you can keep the previous behavior with:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" ApolloServerPluginLandingPageDisabled \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'apollo-server-core'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"plugins\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"[\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"ApolloServerPluginLandingPageDisabled\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"]\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"If your code passed an options object like \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"new ApolloServer({playground: playgroundOptions})\"), \", you can keep the previous behavior with:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" ApolloServerPluginLandingPageGraphQLPlayground \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'apollo-server-core'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"plugins\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"[\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"ApolloServerPluginLandingPageGraphQLPlayground\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"playgroundOptions\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"]\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"h4\", {\n    \"id\": \"additional-changes-to-graphql-playground\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#additional-changes-to-graphql-playground\",\n    \"aria-label\": \"additional changes to graphql playground permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Additional changes to GraphQL Playground\"), mdx(\"h5\", {\n    \"id\": \"specifying-an-endpoint\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h5\",\n    \"href\": \"#specifying-an-endpoint\",\n    \"aria-label\": \"specifying an endpoint permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Specifying an \", mdx(\"code\", {\n    parentName: \"h5\",\n    \"className\": \"language-text\"\n  }, \"endpoint\")), mdx(\"p\", null, \"In Apollo Server 2, the default value of GraphQL Playground's \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"endpoint\"), \" option is determined in different ways by different Node.js framework integrations. In many cases, it's necessary to manually specify \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"playground: {endpoint}\"), \".\"), mdx(\"p\", null, \"In Apollo Server 3, the default endpoint used by GraphQL Playground is the browser's current URL. In many cases, this means that you don't have to specify \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"endpoint\"), \" anymore. If your Apollo Server 2 app specified \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"playground: {endpoint}\"), \" (and you wish to continue using GraphQL Playground), try removing \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"endpoint\"), \" from the options passed to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ApolloServerPluginLandingPageGraphQLPlayground\"), \" and see if it works for you.\"), mdx(\"h5\", {\n    \"id\": \"specifying-settings\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h5\",\n    \"href\": \"#specifying-settings\",\n    \"aria-label\": \"specifying settings permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Specifying \", mdx(\"code\", {\n    parentName: \"h5\",\n    \"className\": \"language-text\"\n  }, \"settings\")), mdx(\"p\", null, \"In Apollo Server 2, the behavior of the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"settings\"), \" GraphQL Playground option can be surprising. If you don't explicitly pass \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"{playground: {settings: {...}}}\"), \" then GraphQL Playground always uses settings that are built into its React application (some of which can be adjusted by the user in their browser). However, if you pass \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"any object\"), \" as \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"playground: {settings: {...}}\"), \", \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/apollographql/apollo-server/blob/70a431212bd2d07d68c962cb5ded63ecc6a21963/packages/apollo-server-core/src/playground.ts#L38-L46\"\n  }, \"several default value overrides\"), \" take effect.\"), mdx(\"p\", null, \"This surprising behavior is removed in Apollo Server 3. All \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"settings\"), \" use default values from the GraphQL Playground React app if they aren't specified in the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"settings\"), \" option to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ApolloServerPluginLandingPageGraphQLPlayground\"), \".\"), mdx(\"p\", null, \"If your app does pass in \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"playground: {settings: {...}}\"), \" and you want to make sure the settings used in your GraphQL Playground do not change, you should copy any relevant settings from \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/apollographql/apollo-server/blob/70a431212bd2d07d68c962cb5ded63ecc6a21963/packages/apollo-server-core/src/playground.ts#L38-L46\"\n  }, \"the Apollo Server 2 code\"), \" into your app.\"), mdx(\"p\", null, \"For example, you could replace:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"playground\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"settings\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string-property property\"\n  }, \"'some.setting'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token boolean\"\n  }, \"true\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"with:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" ApolloServerPluginLandingPageGraphQLPlayground \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'apollo-server-core'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"plugins\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"[\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"ApolloServerPluginLandingPageGraphQLPlayground\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"settings\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string-property property\"\n  }, \"'some.setting'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token boolean\"\n  }, \"true\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string-property property\"\n  }, \"'general.betaUpdates'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token boolean\"\n  }, \"false\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string-property property\"\n  }, \"'editor.theme'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'dark'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string-property property\"\n  }, \"'editor.cursorShape'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'line'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string-property property\"\n  }, \"'editor.reuseHeaders'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token boolean\"\n  }, \"true\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string-property property\"\n  }, \"'tracing.hideTracingResponse'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token boolean\"\n  }, \"true\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string-property property\"\n  }, \"'queryPlan.hideQueryPlanResponse'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token boolean\"\n  }, \"true\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string-property property\"\n  }, \"'editor.fontSize'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token number\"\n  }, \"14\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string-property property\"\n  }, \"'editor.fontFamily'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token template-string\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token template-punctuation string\"\n  }, \"`\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token string\"\n  }, \"'Source Code Pro', 'Consolas', 'Inconsolata', 'Droid Sans Mono', 'Monaco', monospace\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token template-punctuation string\"\n  }, \"`\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string-property property\"\n  }, \"'request.credentials'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'omit'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"]\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"h2\", {\n    \"id\": \"removed-constructor-options\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#removed-constructor-options\",\n    \"aria-label\": \"removed constructor options permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Removed constructor options\"), mdx(\"p\", null, \"The following \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ApolloServer\"), \" constructor options have been removed in favor of other features or configuration methods.\"), mdx(\"h3\", {\n    \"id\": \"extensions\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#extensions\",\n    \"aria-label\": \"extensions permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"extensions\")), mdx(\"p\", null, \"Apollo Server 3 removes support for the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-extensions\"), \" API, which was used to extend Apollo Server's functionality. This API has numerous limitations relative to the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/integrations/plugins/\"\n  }, \"plugins API\"), \" introduced in Apollo Server v2.2.0.\"), mdx(\"p\", null, \"Unlike \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-extensions\"), \", the plugins API enables cross-request state, and its hooks virtually all interact with the same \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"GraphQLRequestContext\"), \" object.\"), mdx(\"p\", null, \"If you've written your own extensions (passed to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"new ApolloServer({extensions: ...})\"), \"), you should \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/integrations/plugins/\"\n  }, \"rewrite them as plugins\"), \" before upgrading to Apollo Server 3.\"), mdx(\"h3\", {\n    \"id\": \"engine\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#engine\",\n    \"aria-label\": \"engine permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"engine\")), mdx(\"p\", null, \"\\\"Engine\\\" is a previous name of \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.apollographql.com/docs/studio/\"\n  }, \"Apollo Studio\"), \". Prior to Apollo Server v2.18.0, you passed the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"engine\"), \" constructor option to configure how Apollo Server communicates with Studio. Additionally, you could specifying your Apollo API key with the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ENGINE_API_KEY\"), \" environment variable, and you could specify a graph variant with the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ENGINE_SCHEMA_TAG\"), \" environment variable.\"), mdx(\"p\", null, \"In later versions of Apollo Server (including Apollo Server 3), you instead provide this configuration via a combination of the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo\"), \" constructor option, plugins, and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"APOLLO_\"), \"-prefixed environment variables. Apollo Server 3 does not support the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"engine\"), \" constructor option or the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ENGINE_\"), \"-prefixed environment variables.\"), mdx(\"p\", null, \"If your project still uses the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"engine\"), \" option or the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ENGINE_\"), \"-prefixed environment variables, see \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/v2/migration-engine-plugins/\"\n  }, \"Migrating from the \", mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"engine\"), \" option\"), \" before upgrading to Apollo Server 3.\"), mdx(\"p\", null, \"Note that if you are using Studio, make sure to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"#guessing-apollo-studio-graph-id-from-api-key\"\n  }, \"set your graph ref or graph ID\"), \".\"), mdx(\"h3\", {\n    \"id\": \"schemadirectives\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#schemadirectives\",\n    \"aria-label\": \"schemadirectives permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"schemaDirectives\")), mdx(\"p\", null, \"In Apollo Server 2, you can pass \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"schemaDirectives\"), \" to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"new ApolloServer\"), \" alongside \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"typeDefs\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"resolvers\"), \". These arguments are all passed through to the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.graphql-tools.com/docs/generate-schema/#makeexecutableschemaoptions\"\n  }, mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"makeExecutableSchema\"), \" function\"), \"  from the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-tools\"), \" package.\"), mdx(\"p\", null, \"The \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-tools\"), \" project deprecated the  \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/ardatan/graphql-tools/blob/%40graphql-tools/schema%407.1.5/website/docs/legacy-schema-directives.md\"\n  }, mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"schemaDirectives\"), \" feature\"), \" and removed it in v8 of \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@graphql-tools/schema\"), \".\"), mdx(\"p\", null, \"In Apollo Server 3, the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ApolloServer\"), \" constructor now only passes \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"typeDefs\"), \", \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"resolvers\"), \", and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"parseOptions\"), \" through to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"makeExecutableSchema\"), \".\"), mdx(\"p\", null, \"If you would like to still use \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"schemaDirectives\"), \", you can install an older version of \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@graphql-tools/schema\"), \" yourself with \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"npm install @graphql-tools/schema@7\"), \" and call \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"makeExecutableSchema\"), \" yourself and pass its returned schema as the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"schema\"), \" constructor option.\"), mdx(\"p\", null, \"That is, you can replace:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  typeDefs\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  resolvers\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  schemaDirectives\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"with:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// Make sure you are using v7, not anything newer!\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" makeExecutableSchema \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'@graphql-tools/schema'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"schema\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"makeExecutableSchema\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    typeDefs\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    resolvers\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    schemaDirectives\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"This can help you with the initial migration to Apollo Server 3. As \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"schemaDirectives\"), \" is no longer part of the actively maintained version of \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@graphql-tools/schema\"), \", we recommend that once you've successfully migrated to Apollo Server 3, you then port your schema directive to the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.graphql-tools.com/docs/schema-directives\"\n  }, \"newer schema directives API\"), \" which uses the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"mapSchema\"), \" function in \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@graphql-tools/utils\"), \".\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"In Apollo Server 2, there are subtle differences between providing a schema with \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"schema\"), \" versus providing it with \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"typeDefs\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"resolvers\"), \". For example, the automatic definition of the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@cacheControl\"), \" directive is added only in the latter case. These differences are removed in Apollo Server 3 (for example, the definition of the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@cacheControl\"), \" directive is \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"never\"), \" automatically added).\")), mdx(\"h3\", {\n    \"id\": \"tracing\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#tracing\",\n    \"aria-label\": \"tracing permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"tracing\")), mdx(\"p\", null, \"In Apollo Server 2, the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"tracing\"), \" constructor option enables a trace mechanism implemented in the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-tracing\"), \" package. This package uses a comparatively inefficient JSON format for execution traces returned via the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"tracing\"), \" GraphQL response extension. The format is consumed only by the deprecated \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"engineproxy\"), \" and GraphQL Playground. It is \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"not\"), \" the tracing format used for Apollo Studio usage reporting or federated inline traces.\"), mdx(\"p\", null, \"The \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"tracing\"), \" constructor option is removed in Apollo Server 3. The \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-tracing\"), \" package has been deprecated and is no longer being published.\"), mdx(\"p\", null, \"If you rely on this deprecated trace format, you might be able to use the old version of \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-tracing\"), \" directly:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"plugins\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"[\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"require\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'apollo-tracing'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"plugin\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"]\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"This workaround has not been tested! If you need this to work and it doesn't, please file an issue and we will investigate a fix to enable support in Apollo Server 3.\")), mdx(\"h3\", {\n    \"id\": \"cachecontrol\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#cachecontrol\",\n    \"aria-label\": \"cachecontrol permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"cacheControl\")), mdx(\"p\", null, \"In Apollo Server 2, \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/performance/caching/\"\n  }, \"cache policy support\"), \" is configured via the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"cacheControl\"), \" constructor option. There are several improvements to the semantics of cache policies in Apollo Server 3, as well as changes to how caching is configured.\"), mdx(\"p\", null, \"The \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"cacheControl\"), \" constructor option is removed in Apollo Server 3. To customize cache control, you instead manually install the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/api/plugin/cache-control/\"\n  }, \"cache control plugin\"), \" and provide custom options to it.\"), mdx(\"p\", null, \"For example, if you currently provide \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"defaultMaxAge\"), \" and/or \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"calculateHttpHeaders\"), \" to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"cacheControl\"), \" like so:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"cacheControl\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    defaultMaxAge\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    calculateHttpHeaders\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"You now provide them like so:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" ApolloServerPluginCacheControl \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'apollo-server-core'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"plugins\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"[\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"ApolloServerPluginCacheControl\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n      defaultMaxAge\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n      calculateHttpHeaders\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"]\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"If you currently pass \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"cacheControl: false\"), \" like so:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"cacheControl\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token boolean\"\n  }, \"false\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"You now install the disabling plugin like so:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" ApolloServerPluginCacheControlDisabled \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'apollo-server-core'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"plugins\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"[\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"ApolloServerPluginCacheControlDisabled\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"]\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"In Apollo Server 2, \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"cacheControl: true\"), \" was a shorthand for setting \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"cacheControl: {stripFormattedExtensions: false, calculateHttpHeaders: false}\"), \". If you either passed \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"cacheControl: true\"), \" or explicitly passed \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"stripFormattedExtensions: false\"), \", Apollo Server 2 would include a \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"cacheControl\"), \" response extension inside your GraphQL response. This was used by the deprecated \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"engineproxy\"), \" server. Support for writing this response extension has been removed from Apollo Server 2. This allows for a more memory-efficient cache control plugin implementation.\"), mdx(\"p\", null, \"In Apollo Server 2, definitions of the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@cacheControl\"), \" directive (and the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"CacheControlScope\"), \" enum that it uses) were sometimes automatically inserted into your schema. (Specifically, they were added if you defined your schema with the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"typeDefs\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"resolvers\"), \" options, but not if you used the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"modules\"), \" or \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"schema\"), \" options or if you were a federated gateway. Passing \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"cacheControl: false\"), \" did not stop the definitions from being inserted!) In Apollo Server 3, these definitions are never automatically inserted.\"), mdx(\"p\", null, \"So \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"if you use the \", mdx(\"code\", {\n    parentName: \"strong\",\n    \"className\": \"language-text\"\n  }, \"@cacheControl\"), \" directive in your schema, you should add these definitions to your schema\"), \":\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"graphql\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-graphql line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-graphql\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"enum\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"CacheControlScope\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token constant\"\n  }, \"PUBLIC\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token constant\"\n  }, \"PRIVATE\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"directive\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token directive function\"\n  }, \"@cacheControl\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token attr-name\"\n  }, \"maxAge\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token scalar\"\n  }, \"Int\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token attr-name\"\n  }, \"scope\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"CacheControlScope\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token attr-name\"\n  }, \"inheritMaxAge\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token scalar\"\n  }, \"Boolean\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"on\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token constant\"\n  }, \"FIELD_DEFINITION\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"|\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token constant\"\n  }, \"OBJECT\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"|\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token constant\"\n  }, \"INTERFACE\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"|\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token constant\"\n  }, \"UNION\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"(You may add them to your schema in Apollo Server 2 before upgrading if you'd like.)\"), mdx(\"p\", null, \"In Apollo Server 2, plugins that want to change the operation's overall cache policy can overwrite the field \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"requestContext.overallCachePolicy\"), \". In Apollo Server 3, that field is considered read-only, but it does have new methods to mutate its state. So you should replace:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"requestContext\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"overallCachePolicy \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"maxAge\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token number\"\n  }, \"100\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"with:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, \"requestContext\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"overallCachePolicy\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"replace\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"maxAge\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token number\"\n  }, \"100\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"(You may also want to consider using \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"restrict\"), \" instead of \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"replace\"), \"; this method only allows \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"maxAge\"), \" to be reduced and only allows \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"scope\"), \" to change from \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"PUBLIC\"), \" to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"PRIVATE\"), \".)\"), mdx(\"p\", null, \"In Apollo Server 2, fields returning a union type are treated similarly to fields returning a scalar type: \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@cacheControl\"), \" on the type itself is ignored, and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"maxAge\"), \" if unspecified is inherited from its parent in the operation (unless it is a root field) instead of defaulting to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"defaultMaxAge\"), \" (which itself defaults to 0). In Apollo Server 3, fields returning a union type are treated similarly to fields returning an interface or object type: \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@cacheControl\"), \" on the type itself is honored, and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"maxAge\"), \" if unspecified defaults to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"defaultMaxAge\"), \". If you were relying on the inheritance behavior, you can specify \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@cacheControl(maxAge: ...)\"), \" explicitly on your union types or union-returning fields, or you can use the new \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@cacheControl(inheritMaxAge: true)\"), \" feature on the union-returning field to restore the Apollo Server 2 behavior. If your schema contained \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"union SomeUnion @cacheControl(...)\"), \", that directive will start having an effect when you upgrade to Apollo Server 3.\"), mdx(\"p\", null, \"In Apollo Server 2, the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@cacheControl\"), \" is honored on type definitions but not on type extensions. That is, if you write \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"type SomeType @cacheControl(maxAge: 123)\"), \" it takes effect but if you write \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"extend type SomeType @cacheControl(maxAge: 123)\"), \" it does not take effect. In Apollo Server 3, \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@cacheControl\"), \" is honored on object, interface, and union extensions. If your schema accidentally contained \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@cacheControl\"), \" on an \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"extend\"), \", that directive will start having an effect when you upgrade to Apollo Server 3.\"), mdx(\"p\", null, \"In Apollo Server 2, most of the logic related to cache control lives in the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-cache-control\"), \" package. This package exports a function called \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"plugin\"), \" as well as TypeScript types \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"CacheControlFormat\"), \", \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"CacheHint\"), \", \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"CacheScope\"), \", and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"CacheControlExtensionOptions\"), \". In Apollo Server 3, this logic lives in \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-core\"), \" and the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-cache-control\"), \" package is no longer published. \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-core\"), \" exports \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ApolloServerPluginCacheControl\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ApolloServerPluginCacheControlOptions\"), \" (which are similar to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"plugin\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"CacheControlExtensionOptions\"), \"). \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-types\"), \" exports \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"CacheHint\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"CacheScope\"), \". There is no equivalent export to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"CacheControlFormat\"), \" because as described above, the code to write the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"cacheControl\"), \" response extension is not part of Apollo Server 3.\"), mdx(\"h3\", {\n    \"id\": \"playground\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#playground\",\n    \"aria-label\": \"playground permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"playground\")), mdx(\"p\", null, \"See \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"#graphql-playground\"\n  }, \"GraphQL Playground\"), \".\"), mdx(\"h2\", {\n    \"id\": \"removed-exports\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#removed-exports\",\n    \"aria-label\": \"removed exports permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Removed exports\"), mdx(\"p\", null, \"In Apollo Server 2, \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server\"), \" and framework integration packages such as \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-express\"), \" import many symbols from third-party packages and re-export them. This effectively ties the API of Apollo Server to a specific version of those third-party packages and makes it challenging to upgrade to a newer version or for you to upgrade those packages yourself.\"), mdx(\"p\", null, \"In Apollo Server 3, most of these \\\"re-exports\\\" are removed. If you want to use these exports, you should import them directly from their originating package.\"), mdx(\"h3\", {\n    \"id\": \"exports-from-graphql-tools\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#exports-from-graphql-tools\",\n    \"aria-label\": \"exports from graphql tools permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Exports from \", mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"graphql-tools\")), mdx(\"p\", null, \"Apollo Server 2 exports every symbol exported by \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.graphql-tools.com/\"\n  }, mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"graphql-tools\")), \" v4. If you're importing any of the following symbols from an Apollo Server package, you should instead run \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"npm install graphql-tools@4.x\"), \" and import the symbol from \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-tools\"), \".\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Alternatively, read the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.graphql-tools.com/docs/introduction\"\n  }, \"GraphQL Tools docs\"), \" and find out which \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@graphql-tools/subpackage\"), \" the symbol is exported from in more modern versions of GraphQL Tools.\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"AddArgumentsAsVariables\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"AddTypenameToAbstract\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"CheckResultAndHandleErrors\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"DirectiveResolverFn\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"ExpandAbstractTypes\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"ExtractField\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"FilterRootFields\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"FilterToSchema\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"FilterTypes\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"GraphQLParseOptions\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IAddResolveFunctionsToSchemaOptions\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IConnectorCls\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IConnectorFn\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IConnector\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IConnectors\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IDelegateToSchemaOptions\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IDirectiveResolvers\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IEnumResolver\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IExecutableSchemaDefinition\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IFieldIteratorFn\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IFieldResolver\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IGraphQLToolsResolveInfo\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"ILogger\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IMockFn\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IMockOptions\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IMockServer\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IMockTypeFn\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IMocks\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IResolverObject\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IResolverOptions\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IResolverValidationOptions\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IResolversParameter\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"IResolvers\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"ITypeDefinitions\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"ITypedef\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"MergeInfo\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"MergeTypeCandidate\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"MockList\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"NextResolverFn\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"Operation\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"RenameRootFields\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"RenameTypes\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"ReplaceFieldWithFragment\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"Request\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"ResolveType\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"Result\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"SchemaDirectiveVisitor\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"SchemaError\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"TransformRootFields\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"Transform\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"TypeWithResolvers\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"UnitOrList\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"VisitTypeResult\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"VisitType\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"WrapQuery\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"addCatchUndefinedToSchema\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"addErrorLoggingToSchema\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"addMockFunctionsToSchema\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"addResolveFunctionsToSchema\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"addSchemaLevelResolveFunction\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"assertResolveFunctionsPresent\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"attachConnectorsToContext\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"attachDirectiveResolvers\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"buildSchemaFromTypeDefinitions\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"chainResolvers\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"checkForResolveTypeResolver\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"concatenateTypeDefs\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"decorateWithLogger\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"defaultCreateRemoteResolver\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"defaultMergedResolver\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"delegateToSchema\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"extendResolversFromInterfaces\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"extractExtensionDefinitions\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"forEachField\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"introspectSchema\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"makeExecutableSchema\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"makeRemoteExecutableSchema\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"mergeSchemas\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"mockServer\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"transformSchema\"))), mdx(\"h3\", {\n    \"id\": \"exports-from-graphql-subscriptions\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#exports-from-graphql-subscriptions\",\n    \"aria-label\": \"exports from graphql subscriptions permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Exports from \", mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"graphql-subscriptions\")), mdx(\"p\", null, \"Apollo Server 2 exports every symbol exported by \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.npmjs.com/package/graphql-subscriptions\"\n  }, mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"graphql-subscriptions\")), \". If you are importing any of the following symbols from an Apollo Server package, you should instead run \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"npm install graphql-subscriptions\"), \" and import the symbol from \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-subscriptions\"), \" instead.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"FilterFn\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"PubSub\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"PubSubEngine\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"PubSubOptions\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"ResolverFn\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"withFilter\"))), mdx(\"h3\", {\n    \"id\": \"exports-from-graphql-upload\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#exports-from-graphql-upload\",\n    \"aria-label\": \"exports from graphql upload permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Exports from \", mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"graphql-upload\")), mdx(\"p\", null, \"Apollo Server 2 exports the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"GraphQLUpload\"), \" symbol from (our fork of) \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-upload\"), \". Apollo Server 3 no longer has built-in \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-upload\"), \" integration. See \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/data/file-uploads/\"\n  }, \"the documentation on how to enable file uploads in Apollo Server 3\"), \".\"), mdx(\"h3\", {\n    \"id\": \"exports-related-to-graphql-playground\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#exports-related-to-graphql-playground\",\n    \"aria-label\": \"exports related to graphql playground permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Exports related to GraphQL Playground\"), mdx(\"p\", null, \"Apollo Server 2 exports a \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"defaultPlaygroundOptions\"), \" object, along with \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"PlaygroundConfig\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"PlaygroundRenderPageOptions\"), \" types to support the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"playground\"), \" top-level constructor argument.\"), mdx(\"p\", null, \"In Apollo Server 3, GraphQL Playground is one of several landing pages implemented via plugins, and there are no default options for it. The \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ApolloServerPluginLandingPageGraphQLPlaygroundOptions\"), \" type exported from \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-core\"), \" plays a similar role to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"PlaygroundConfig\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"PlaygroundRenderPageOptions\"), \". See \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"#graphql-playground\"\n  }, \"the section on \", mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"playground\"), \" above\"), \" for more details on configuring GraphQL Playground in Apollo Server 3.\"), mdx(\"h2\", {\n    \"id\": \"removed-features\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#removed-features\",\n    \"aria-label\": \"removed features permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Removed features\"), mdx(\"p\", null, \"Several small features have been removed from Apollo Server 3.\"), mdx(\"h3\", {\n    \"id\": \"guessing-apollo-studio-graph-id-from-api-key\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#guessing-apollo-studio-graph-id-from-api-key\",\n    \"aria-label\": \"guessing apollo studio graph id from api key permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Guessing Apollo Studio graph ID from API key\"), mdx(\"p\", null, \"In Apollo Server 2, if you specify an Apollo API key (e.g., with the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"APOLLO_KEY\"), \" environment variable) that starts with \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"service:your-graph-id:\"), \", Apollo Server automatically guesses that your Studio graph ID (used for usage reporting, schema reporting, managed federation, and so on) is \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"your-graph-id\"), \".\"), mdx(\"p\", null, \"In Apollo Server 3, you should instead specify your Studio graph ID explicitly when using features that connect to Studio. You can specify the graph ID by itself in the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"APOLLO_GRAPH_ID\"), \" environment variable (or via \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"new ApolloServer({apollo: {graphId}}))\"), \", or alongside the variant in a string like \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"your-graph-id@your-graph-variant\"), \" in the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"APOLLO_GRAPH_REF\"), \" environment variable (or via \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"new ApolloServer({apollo: {graphRef}})\"), \"). See \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/api/apollo-server/#apollo\"\n  }, \"the \", mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"apollo\"), \" constructor option\"), \" for more details.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"If you set your API key but do \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"not\"), \" set your graph ref or ID:\"), mdx(\"ul\", {\n    parentName: \"blockquote\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"If you explicitly set up features like the usage reporting plugin or managed federation, Apollo Server 3 throws an error on startup.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"If you don't explicitly \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/api/plugin/usage-reporting/\"\n  }, \"set up or disable the usage reporting plugin\"), \", Apollo Server 3 logs a warning suggesting that you either set your graph ref or disable the usage reporting plugin.\"))), mdx(\"h3\", {\n    \"id\": \"apolloserverschema-field\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#apolloserverschema-field\",\n    \"aria-label\": \"apolloserverschema field permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"ApolloServer.schema\"), \" field\"), mdx(\"p\", null, \"Apollo Server 2 has a deprecated field \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ApolloServer.schema\"), \" (which doesn't work when the server is a federated gateway). Apollo Server 3 does not contain this field. To access your server's schema, you have a few options:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Construct the schema yourself (e.g., with \", mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"const schema = makeExecutableSchema({typeDefs, resolvers})\"), \" from \", mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"@graphql-tools/schema\"), \"), pass it in as \", mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"new ApolloServer({schema})\"), \", and refer to this same \", mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"schema\"), \" value elsewhere. Apollo Server 3 won't modify the schema you pass in.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Write a plugin that uses the \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"/integrations/plugins-event-reference/#serverwillstart\"\n  }, mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"serverWillStart\"), \" event\"), \" to obtain the schema. Note that if your server is a gateway, this receives the \", mdx(\"em\", {\n    parentName: \"li\"\n  }, \"first\"), \" schema that's loaded on startup but doesn't receive any subsequent schemas if it updates dynamically.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"If your server is a gateway, register a callback with \", mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"gateway.onSchemaChange\"), \". Note that this API has some inconsistent behavior. To resolve this, we are considering \", mdx(\"a\", {\n    parentName: \"li\",\n    \"href\": \"https://github.com/apollographql/apollo-server/pull/5187\"\n  }, \"adding an Apollo Server plugin event that receives all schema updates\"), \".\")), mdx(\"h3\", {\n    \"id\": \"apollo-server-testing\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#apollo-server-testing\",\n    \"aria-label\": \"apollo server testing permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-testing\")), mdx(\"p\", null, \"Apollo Server 2 contains a package \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-testing\"), \". This package is a thin wrapper around the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"server.executeOperation\"), \" method. As of Apollo Server 2.25.0, we no longer document this package and instead \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/testing/testing/\"\n  }, \"document using \", mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"executeOperation\"), \" directly\"), \".\"), mdx(\"p\", null, \"In Apollo Server 3, we no longer publish this package. It's possible that the Apollo Server 2 version of this package might work with Apollo Server 3 servers. If you do use \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-testing\"), \", we suggest that you migrate to using \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"executeOperation\"), \" directly (with at least 2.25.0 of Apollo Server) before upgrading to Apollo Server 3.\"), mdx(\"p\", null, \"If you used \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-testing\"), \" like so:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" createTestClient \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"require\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'apollo-server-testing'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" query\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" mutate \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"createTestClient\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"await\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"query\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"query\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token constant\"\n  }, \"QUERY\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"await\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"mutate\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"mutation\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token constant\"\n  }, \"MUTATION\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"then you can use \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"executeOperation\"), \" like so:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"await\"), \" server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"executeOperation\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"query\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token constant\"\n  }, \"QUERY\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"await\"), \" server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"executeOperation\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"query\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token constant\"\n  }, \"MUTATION\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Note that prior to Apollo Server 2.25.0, \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-testing\"), \" functions allowed you to pass your operation as a string or a \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"DocumentNode\"), \" as returned from \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"gql\"), \", but \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"executeOperation\"), \" only supported strings. As of v2.25.0, \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"executeOperation\"), \" takes \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"string\"), \" or \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"DocumentNode\"), \", which makes the change shown above straightforward in all cases.\")), mdx(\"h3\", {\n    \"id\": \"apollo-datasource-rest-baseurl-override-change\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#apollo-datasource-rest-baseurl-override-change\",\n    \"aria-label\": \"apollo datasource rest baseurl override change permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"apollo-datasource-rest\"), \": \", mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"baseURL\"), \" override change\"), mdx(\"p\", null, \"When you create a \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/data/data-sources/\"\n  }, mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"RESTDataSource\")), \" subclass, you need to provide its \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"baseURL\"), \". This can be done via \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"this.baseURL = ...\"), \" in the constructor or \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"resolveURL\"), \", or via \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"baseURL = ...\"), \" at the class level.\"), mdx(\"p\", null, \"In Apollo Server 2 you can \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"also\"), \" provide \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"baseURL\"), \" via a getter like \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"get baseURL() { ... }\"), \". Apollo Server 3 is compiled with TypeScript 4, which \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://devblogs.microsoft.com/typescript/announcing-typescript-4-0/#properties-overriding-accessors-and-vice-versa-is-an-error\"\n  }, \"no longer supports overriding a property with an accessor\"), \", so this is no longer allowed.\"), mdx(\"p\", null, \"If you used a getter in order to provide a dynamic URL, like this:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"class\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"MyDataSource\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"extends\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"RESTDataSource\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"get\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"baseURL\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"return\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"someDynamicallyCalculatedURL\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"you can instead override \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"resolveURL\"), \":\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"class\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"MyDataSource\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"extends\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"RESTDataSource\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"async\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"resolveURL\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token parameter\"\n  }, mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token literal-property property\"\n  }, \"request\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token operator\"\n  }, \":\"), \" RequestOptions\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"if\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"!\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"this\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"baseURL\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"this\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), \"baseURL \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"someDynamicallyCalculatedURL\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"return\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"super\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"resolveURL\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"request\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"h3\", {\n    \"id\": \"apollo-server-envs-global-type-definitions\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#apollo-server-envs-global-type-definitions\",\n    \"aria-label\": \"apollo server envs global type definitions permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-env\"), \"'s global type definitions\"), mdx(\"p\", null, \"Global TypeScript definitions have been removed from \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-env\"), \" since they conflicted with similar global types provided by \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@types/supertest\"), \", which we use in Apollo Server's test suite.  These removed types include types which resemble those of \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\"\n  }, \"the Fetch API\"), \" including, e.g., \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"fetch\"), \", \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"RequestInfo\"), \", \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Headers\"), \", \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Request\"), \", \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Response\"), \", \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ResponseInit\"), \", and more.  \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/apollographql/apollo-server/blob/32cfdcfdbd44f4f4e826f347f47fdcbc0475b5cc/packages/apollo-server-env/src/global.d.ts\"\n  }, \"See the full list prior to removal here\"), \".\"), mdx(\"p\", null, \"We don't expect this to affect many users and we have not publicly suggested using these types in the past, but it's possible that implementations may be using them inadvertently (e.g., from auto-import on \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-env\"), \").  While other type definition sets provide similar hand-curated types, for the time being, we have chosen to rely the same-named types from TypeScript's \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"lib.dom.d.ts\"), \" \\u2014\\xA0e.g., \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/microsoft/TypeScript/blob/3c604f1c0a412ef41f58c3f9b239b25e8d725751/lib/lib.dom.d.ts#L1470\"\n  }, \"its \", mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"RequestInfo\"), \" type definition\"), \".  Even if those types are more appropriate for browsers, they're a reliable and well-maintained source.  For more details, including our plan for adjusting this again in the future, \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/apollographql/apollo-server/pull/5165\"\n  }, \"see PR #5165\"), \".\"), mdx(\"h2\", {\n    \"id\": \"changed-features\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#changed-features\",\n    \"aria-label\": \"changed features permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Changed features\"), mdx(\"h3\", {\n    \"id\": \"plugin-api\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#plugin-api\",\n    \"aria-label\": \"plugin api permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Plugin API\"), mdx(\"h4\", {\n    \"id\": \"almost-all-plugin-events-are-now-async\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#almost-all-plugin-events-are-now-async\",\n    \"aria-label\": \"almost all plugin events are now async permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Almost all plugin events are now async\"), mdx(\"p\", null, \"In Apollo Server 2, some \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/integrations/plugins-event-reference/\"\n  }, \"plugin events\"), \" are synchronous (their return value is not a \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Promise\"), \"), and some are \\\"maybe-asynchronous\\\" (they could return a \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Promise\"), \" if they wanted, but didn't have to). This means that you can't do asynchronous work in the former events, and the typings for the latter events are somewhat complex.\"), mdx(\"p\", null, \"In Apollo Server 3, \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"almost\"), \" all plugin methods are always asynchronous: they always return a \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Promise\"), \" type. This includes \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/integrations/plugins/#end-hooks\"\n  }, \"end hooks\"), \" as well. The exceptions are \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"willResolveField\"), \" and its end hook and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"schemaDidLoadOrUpdate\"), \", which are always synchronous.\"), mdx(\"p\", null, \"In practice, this means that all of your plugin events should use \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"async\"), \" functions or methods. If you are using TypeScript, you need to do this for your code to compile.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"In practice, Apollo Server generally uses \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"await\"), \" or \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Promise.all\"), \" on values returned by plugin methods instead of an explicit \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \".then\"), \". These constructs accept both \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Promise\"), \"s and normal values. If you aren't using TypeScript, you might be able to get away with synchronous plugin methods for the time being.\")), mdx(\"h4\", {\n    \"id\": \"willsendresponse-is-called-more-consistently\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#willsendresponse-is-called-more-consistently\",\n    \"aria-label\": \"willsendresponse is called more consistently permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h4\",\n    \"className\": \"language-text\"\n  }, \"willSendResponse\"), \" is called more consistently\"), mdx(\"p\", null, \"In Apollo Server 2, some errors related to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/performance/apq/\"\n  }, \"persisted queries\"), \" invoke the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"requestDidStart\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"didEncounterError\"), \" plugin events \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"without\"), \" invoking the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"willSendResponse\"), \" event afterwards.\"), mdx(\"p\", null, \"In Apollo Server 3, any request that makes it far enough to invoke \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"requestDidStart\"), \" also invokes \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"willSendResponse\"), \". See \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/apollographql/apollo-server/pull/5287\"\n  }, \"this PR\"), \" for details.\"), mdx(\"h4\", {\n    \"id\": \"executiondidstart-can-no-longer-return-a-function\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#executiondidstart-can-no-longer-return-a-function\",\n    \"aria-label\": \"executiondidstart can no longer return a function permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h4\",\n    \"className\": \"language-text\"\n  }, \"executionDidStart\"), \" can no longer return a function\"), mdx(\"p\", null, \"In Apollo Server 2, the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"executionDidStart\"), \" plugin event could return nothing, an object, or a function. If a function was provided, it would be called when execution finished (one might imagine an \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"executionDidEnd\"), \").\"), mdx(\"p\", null, \"In Apollo Server 3, \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"executionDidStart\"), \" must return either nothing or an object. If you previously returned a function, you can now return an object with an \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"executionDidEnd\"), \" field like so:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight has-highlighted-lines\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" server \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  schema\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"plugins\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"[\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"async\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"requestDidStart\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"return\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"async\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"executionDidStart\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"gatsby-highlight-code-line\"\n  }, \"          \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token keyword\"\n  }, \"return\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"{\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"gatsby-highlight-code-line\"\n  }, \"            \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token keyword\"\n  }, \"async\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token function\"\n  }, \"executionDidEnd\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"{\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"gatsby-highlight-code-line\"\n  }, \"              \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token comment\"\n  }, \"// your code here\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"gatsby-highlight-code-line\"\n  }, \"            \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"}\")), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"gatsby-highlight-code-line\"\n  }, \"          \", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \"}\")), \"        \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"]\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"For more information, you can check out the related plugin documentation on \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/integrations/plugins/#end-hooks\"\n  }, \"end hooks\"), \".\"), mdx(\"h4\", {\n    \"id\": \"gateway-interface-renamed-and-simplified\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#gateway-interface-renamed-and-simplified\",\n    \"aria-label\": \"gateway interface renamed and simplified permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Gateway interface renamed and simplified\"), mdx(\"p\", null, \"In Apollo Server 2, the TypeScript type used for the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"gateway\"), \" constructor option is called \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"GraphQLService\"), \". In Apollo Server 3, it's called \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"GatewayInterface\"), \". (For now, an identical interface named \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"GraphQLService\"), \" continues to be exported.)\"), mdx(\"p\", null, \"This interface now requires the following:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The \", mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"stop\"), \" method must be present.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The \", mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"executor\"), \" method must async\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The \", mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"apollo\"), \" option must always be passed to the \", mdx(\"code\", {\n    parentName: \"li\",\n    \"className\": \"language-text\"\n  }, \"load\"), \" method.\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"All recent versions of \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@apollo/gateway\"), \" satisfy these stronger requirements.\")), mdx(\"h3\", {\n    \"id\": \"bad-request-errors-more-consistently-return-4xx\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#bad-request-errors-more-consistently-return-4xx\",\n    \"aria-label\": \"bad request errors more consistently return 4xx permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Bad request errors more consistently return 4xx\"), mdx(\"p\", null, \"In Apollo Server 2, certain poorly formatted requests receive HTTP responses with a 5xx status (indicating a server error) instead of 4xx (indicating a client error). For example, this occurs in some integrations for a missing POST body or a JSON parse error.\"), mdx(\"p\", null, \"In Apollo Server 3, these errors are handled in a more consistent manner across integrations and consistently return HTTP responses with a 4xx status.\"), mdx(\"h3\", {\n    \"id\": \"extensions-custom-details-on-apolloerror\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#extensions-custom-details-on-apolloerror\",\n    \"aria-label\": \"extensions custom details on apolloerror permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Extensions (custom details) on \", mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"ApolloError\")), mdx(\"h4\", {\n    \"id\": \"initializing-an-error\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#initializing-an-error\",\n    \"aria-label\": \"initializing an error permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Initializing an error\"), mdx(\"p\", null, \"In Apollo Server 2, \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/data/errors/#including-custom-error-details\"\n  }, \"error extensions\"), \" can be passed to the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ApolloError\"), \" constructor either as the third argument, \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"or\"), \" as an \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"extensions\"), \" option on the third argument.\"), mdx(\"p\", null, \"In other words, these two lines are equivalent with Apollo Server 2:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-js line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloError\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"message\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" code\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"key\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'value'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloError\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"message\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" code\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"extensions\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"key\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'value'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"In Apollo Server 3, only the first line above is supported. If you try to use the second line, the constructor throws an error. Before upgrading, replace any code using the second form with the first form.\"), mdx(\"h4\", {\n    \"id\": \"reading-error-extensions\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#reading-error-extensions\",\n    \"aria-label\": \"reading error extensions permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Reading error extensions\"), mdx(\"p\", null, \"In Apollo Server 2, an error extension (\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"foo\"), \") is present in two locations on an \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ApolloError\"), \" object (\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"error\"), \"): \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"error.foo\"), \" \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"and\"), \" \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"error.extensions.foo\"), \". When that object is serialized for a JSON response, the extension is \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"also\"), \" present in two locations in the JSON: \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"extensions.foo\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"extensions.exception.foo\"), \".\"), mdx(\"p\", null, \"In Apollo Server 3, an error extension is present in \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"one\"), \" \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ApolloError\"), \" location: \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"error.extensions.foo\"), \". When the error is serialized to JSON, the extension is present only in \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"extensions.foo\"), \".\"), mdx(\"p\", null, \"See \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/apollographql/apollo-server/pull/5294\"\n  }, \"this PR\"), \" for more details.\"), mdx(\"h3\", {\n    \"id\": \"mocking\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#mocking\",\n    \"aria-label\": \"mocking permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Mocking\"), mdx(\"p\", null, \"In Apollo Server 2, the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"mocks\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"mockEntireSchema\"), \" constructor options are essentially implemented as follows:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" addMockFunctionsToSchema \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'graphql-tools'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// v4.x\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" mocks\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" mockEntireSchema \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" constructorOptions\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" schemaWithMocks \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"addMockFunctionsToSchema\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  schema\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"mocks\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"typeof\"), \" mocks \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"===\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'boolean'\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"||\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"typeof\"), \" mocks \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"===\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'undefined'\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"?\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" mocks\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"preserveResolvers\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"typeof\"), \" mockEntireSchema \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"===\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'undefined'\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"?\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token boolean\"\n  }, \"false\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"!\"), \"mockEntireSchema\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"In Apollo Server 3, we've upgraded from \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-tools\"), \" v4 to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@graphql-tools/mock\"), \" v8. The details of how mocking works in GraphQL Tools has changed, and the name of the function that implements it has changed too. The new implementation is as follows:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" addMocksToSchema \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'@graphql-tools/mock'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// v8.x\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" mocks\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" mockEntireSchema \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" constructorOptions\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" schemaWithMocks \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"addMocksToSchema\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  schema\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"mocks\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" mocks \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"===\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token boolean\"\n  }, \"true\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"||\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"typeof\"), \" mocks \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"===\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'undefined'\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"?\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" mocks\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"preserveResolvers\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"typeof\"), \" mockEntireSchema \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"===\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'undefined'\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"?\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token boolean\"\n  }, \"false\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"!\"), \"mockEntireSchema\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"So the name of the function has changed, and additionally, the semantics of the function have changed. You can \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.graphql-tools.com/docs/mocking/#migration-from-v7-and-below\"\n  }, \"read the GraphQL Tools migration docs\"), \" to see if you use any mocking features that have changed between v4 and v8, and adjust the value of your \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"mocks\"), \" argument if so.\"), mdx(\"p\", null, \"To use features of \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"addMocksToSchema\"), \" that require passing more options to it than the three that \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ApolloServer\"), \" passes through, you can use the library directly. To do so, run \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"npm install @graphql-tools/mock @graphql-tools/schema\"), \" in your app, and replace\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" typeDefs\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" resolvers\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" mocks \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"with\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" addMocksToSchema \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'@graphql-tools/mock'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" makeExecutableSchema \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'@graphql-tools/schema'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"schema\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"addMocksToSchema\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"schema\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"makeExecutableSchema\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" typeDefs\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" resolvers \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"mocks\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token comment\"\n  }, \"// ...\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"Alternatively, to keep the current behavior without changing your mock functions at all, you can continue to use \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"graphql-tools\"), \" v4. To do this, run \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"npm install graphql-tools@v4.x\"), \" in your app, and replace\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"typeDefs\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" resolvers\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" mocks\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" preserveResolvers\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"with\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"import\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" makeExecutableSchema\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" addMockFunctionsToSchema \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"from\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'graphql-tools'\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"schema\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"addMockFunctionsToSchema\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"schema\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"makeExecutableSchema\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"typeDefs\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" resolvers\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    mocks\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"preserveResolvers\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \"\\n      \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"typeof\"), \" mockEntireSchema \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"===\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token string\"\n  }, \"'undefined'\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"?\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token boolean\"\n  }, \"false\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"!\"), \"mockEntireSchema\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"h3\", {\n    \"id\": \"apollo-server-caching-test-suite-helpers\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#apollo-server-caching-test-suite-helpers\",\n    \"aria-label\": \"apollo server caching test suite helpers permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-caching\"), \" test suite helpers\"), mdx(\"p\", null, \"In Apollo Server 2, the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-caching\"), \" package exports functions like \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"testKeyValueCache\"), \", \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"testKeyValueCache_Basic\"), \", and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"testKeyValueCache_Expiration\"), \", which define Jest test suites. The package also exports a \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"TestableKeyValueCache\"), \" type that's required for these test suites to be able to flush and close the cache.\"), mdx(\"p\", null, \"You can use this to define Jest test suites for your own implementation of the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"KeyValueCache\"), \" interface, although this requires intricate Jest and TypeScript config to set up.\"), mdx(\"p\", null, \"In Apollo Server 3, these functions and type are removed. Instead, a \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"runKeyValueCacheTests\"), \" function is exported which can be run in any test suite (without any Jest-specific behavior). See the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-caching\"), \" README for more details.\"), mdx(\"h2\", {\n    \"id\": \"changes-to-framework-integrations\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#changes-to-framework-integrations\",\n    \"aria-label\": \"changes to framework integrations permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Changes to framework integrations\"), mdx(\"h3\", {\n    \"id\": \"start-now-mandatory-for-non-serverless-framework-integrations\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#start-now-mandatory-for-non-serverless-framework-integrations\",\n    \"aria-label\": \"start now mandatory for non serverless framework integrations permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"start()\"), \" now mandatory for non-serverless framework integrations\"), mdx(\"p\", null, \"Apollo Server v2.22 introduced the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"server.start()\"), \" method for non-serverless framework integrations (Express, Fastify, Hapi, Koa, Micro, and Cloudflare). Users of these integrations were encouraged to await a call to it immediately after creating an \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ApolloServer\"), \" object:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"async\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"function\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"startServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" server \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"new\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token class-name\"\n  }, \"ApolloServer\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"...\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"await\"), \" server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"start\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"applyMiddleware\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \" app \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"If any plugin \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"serverWillStart\"), \" events throw, or if the server fails to load its schema properly (for example, if the server is a gateway and cannot load its schema), then \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"await server.start()\"), \" will throw. This allows you to ensure that Apollo Server has successfully loaded its configuration before you start listening for HTTP requests.\"), mdx(\"p\", null, \"In Apollo Server 2, calling this method was optional. If you didn't call it, you could still call methods like \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"applyMiddleware\"), \" and start listening. If a startup failure occurred, all GraphQL requests would fail.\"), mdx(\"p\", null, \"In Apollo Server 3, you \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"must\"), \" \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"await server.start()\"), \" immediately after \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"new ApolloServer\"), \" before calling \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"applyMiddleware\"), \" (or \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"getMiddleware\"), \" or \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"getHandler\"), \", depending on the integration). Note that you don't have to call it before calling the testing method \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"executeOperation\"), \". Otherwise, that method will throw.\"), mdx(\"p\", null, \"This does not apply to the batteries-included \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server\"), \" package (the server is started as part of the async method \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"server.listen()\"), \") or to serverless framework integrations.\"), mdx(\"h3\", {\n    \"id\": \"peer-deps-instead-of-direct-deps\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#peer-deps-instead-of-direct-deps\",\n    \"aria-label\": \"peer deps instead of direct deps permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Peer deps instead of direct deps\"), mdx(\"p\", null, \"In Apollo Server 2, the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-express\"), \", \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-koa\"), \", and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-micro\"), \" packages have \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"direct\"), \" dependencies on \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"express\"), \", \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"koa\"), \", and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"micro\"), \" respectively, and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-fastify\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-hapi\"), \" have no dependency on \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"fastify\"), \", \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"hapi\"), \", or \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@hapi/hapi\"), \".\"), mdx(\"p\", null, \"In Apollo Server 3, these packages have \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"peer\"), \" dependencies on their corresponding framework packages. This means that you need to install a version of that package of your choice yourself in your app (though most likely that was already the case).\"), mdx(\"h3\", {\n    \"id\": \"cors--is-now-the-default\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#cors--is-now-the-default\",\n    \"aria-label\": \"cors  is now the default permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"CORS \", mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"*\"), \" is now the default\"), mdx(\"p\", null, \"In Apollo Server 2, the default CORS configuration for most packages is to serve an \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"access-control-allow-origin: *\"), \" header for all responses.\"), mdx(\"p\", null, \"However, this is not the case in Apollo Server 2 for \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-lambda\"), \", \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-cloud-functions\"), \", or \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-azure-functions\"), \" (these serve no CORS headers by default), or for \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-koa\"), \" (this serves an \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"access-control-allow-origin\"), \" header with a value matching the request's origin by default).\"), mdx(\"p\", null, \"In Apollo Server 3, all implementations of \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"ApolloServer\"), \" that support CORS configuration have the same default of \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"access-control-allow-origin: *\"), \".\"), mdx(\"p\", null, \"To use your framework's Apollo Server 2 default CORS behavior in your Apollo Server 3 application, provide the options specified below to the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"createHandler\"), \"/\", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"getMiddleware\"), \" method.\"), mdx(\"h4\", {\n    \"id\": \"lambda--cloud-functions\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#lambda--cloud-functions\",\n    \"aria-label\": \"lambda  cloud functions permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Lambda / Cloud Functions\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-js line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"createHandler\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"expressGetMiddlewareOptions\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"cors\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token boolean\"\n  }, \"false\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"h4\", {\n    \"id\": \"azure-functions\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#azure-functions\",\n    \"aria-label\": \"azure functions permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Azure Functions\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-js line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"createHandler\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"cors\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token boolean\"\n  }, \"false\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"h4\", {\n    \"id\": \"koa\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#koa\",\n    \"aria-label\": \"koa permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Koa\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-js line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"getMiddleware\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"cors\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-micro\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-cloudflare\"), \" do not support CORS configuration in Apollo Server 2 \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"or\"), \" 3.\")), mdx(\"h3\", {\n    \"id\": \"apollo-server-express\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#apollo-server-express\",\n    \"aria-label\": \"apollo server express permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-express\")), mdx(\"p\", null, \"In Apollo Server 2, \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-express\"), \" officially supports both the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"express\"), \" framework and the older \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.npmjs.com/package/connect\"\n  }, mdx(\"code\", {\n    parentName: \"a\",\n    \"className\": \"language-text\"\n  }, \"connect\")), \" framework.\"), mdx(\"p\", null, \"In Apollo Server 3, we no longer guarantee future support for \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"connect\"), \". We do still run a test suite against it and we will try not to \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"unintentionally\"), \" break functionality under \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"connect\"), \", but if future changes are easier to implement in an Express-only fashion, we reserve the right to break \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"connect\"), \" compatibility within Apollo Server 3.\"), mdx(\"h3\", {\n    \"id\": \"apollo-server-lambda\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#apollo-server-lambda\",\n    \"aria-label\": \"apollo server lambda permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-lambda\")), mdx(\"h4\", {\n    \"id\": \"now-based-on-express\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#now-based-on-express\",\n    \"aria-label\": \"now based on express permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Now based on Express\"), mdx(\"p\", null, \"In Apollo Server 2, \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-lambda\"), \" implements parsing AWS Lambda events and performing standard web framework logic inside the package itself. As Lambda added new capabilities, the logic had to adapt, and as Apollo Server added new features, they had to be implemented from scratch in \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-lambda\"), \". Additionally, there was no way to add additional HTTP functionality (e.g., \\\"middleware\\\") to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-lambda\"), \".\"), mdx(\"p\", null, \"In Apollo Server 3, \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-lambda\"), \" is implemented as a wrapper around \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-express\"), \", using an \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.npmjs.com/package/@vendia/serverless-express\"\n  }, \"actively maintained package\"), \" to parse AWS Lambda events into Express requests. This simplifies the implementation and enables us to support new Lambda integrations such as Application Load Balancers. Additionally, because it now uses Express internally, you can extend HTTP functionality via Express middleware using the new \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"expressAppFromMiddleware\"), \" option to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"createHandler\"), \".\"), mdx(\"h4\", {\n    \"id\": \"createhandler-arguments-changed\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#createhandler-arguments-changed\",\n    \"aria-label\": \"createhandler arguments changed permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h4\",\n    \"className\": \"language-text\"\n  }, \"createHandler\"), \" arguments changed\"), mdx(\"p\", null, \"As part of the update described \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"#now-based-on-express\"\n  }, \"above\"), \", the arguments to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"createHandler\"), \" have changed. Instead of taking only \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"cors\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"onHealthCheck\"), \", the method takes an \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"expressGetMiddlewareOptions\"), \" option, which is an object that supports any of the options that the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-express\"), \" \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"applyMiddleware\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"getMiddleware\"), \" can take (other than \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"app\"), \").\"), mdx(\"p\", null, \"For example, instead of:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-js line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"createHandler\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"onHealthCheck\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"you now write\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-js line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"createHandler\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"expressGetMiddlewareOptions\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"onHealthCheck\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \"`\"), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"h4\", {\n    \"id\": \"handler-is-always-async\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h4\",\n    \"href\": \"#handler-is-always-async\",\n    \"aria-label\": \"handler is always async permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), \"Handler is always async\"), mdx(\"p\", null, \"In Apollo Server 2, the handler returned by \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"createHandler\"), \" can be called either as a function that takes a callback as a third argument, or (starting with Apollo Server v2.21.2) as an async function that returns a \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Promise\"), \".\"), mdx(\"p\", null, \"In Apollo Server 3, the handler returned by \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"createHandler\"), \" is always an async function that returns a \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Promise\"), \". Any callback passed in will be ignored.\"), mdx(\"p\", null, \"All currently supported Lambda runtimes support async handlers. However, if you are currently wrapping the handler returned from \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"createHandler\"), \" in your own larger handler and passing a callback into it, this no longer works. Rewrite your outer handler to be an async function and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"await\"), \" the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"Promise\"), \" returned from the handler returned by \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"createHandler\"), \".\"), mdx(\"p\", null, \"For example, if your server looked like this:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" apolloHandler \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"createHandler\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\nexports\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function-variable function\"\n  }, \"handler\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"function\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token parameter\"\n  }, \"event\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" context\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" callback\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"doSomethingFirst\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"apolloHandler\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"event\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" context\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token parameter\"\n  }, \"error\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" result\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=>\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"doSomethingLater\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"callback\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"error\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" result\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"you can change it to look like this:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"javascript\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-javascript line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-javascript\"\n  }, mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"const\"), \" apolloHandler \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"createHandler\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n\\nexports\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function-variable function\"\n  }, \"handler\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \"=\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"async\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"function\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token parameter\"\n  }, \"event\", mdx(\"span\", {\n    parentName: \"span\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" context\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"doSomethingFirst\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"try\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"return\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"await\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"apolloHandler\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), \"event\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \",\"), \" context\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token keyword\"\n  }, \"finally\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"\\n    \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"doSomethingLater\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \";\"), \"\\n  \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), \"\\n\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"h3\", {\n    \"id\": \"apollo-server-cloud-functions\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#apollo-server-cloud-functions\",\n    \"aria-label\": \"apollo server cloud functions permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-cloud-functions\")), mdx(\"p\", null, \"In Apollo Server 2, \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-cloud-functions\"), \" implements standard web framework logic inside the package itself. Even though the Node.js API for Google Cloud Functions provides its request and response in the form of Express request and response objects, Apollo Server 2 has a bespoke implementation unrelated to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-express\"), \" and does not support all features supported by \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-express\"), \". Additionally, there is no way to add additional HTTP functionality (e.g., \\\"middleware\\\") to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-cloud-functions\"), \".\"), mdx(\"p\", null, \"In Apollo Server 3, \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-cloud-functions\"), \" is implemented on top of \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-express\"), \" and supports all features supported by \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-express\"), \". You can add additional HTTP functionality via Express middleware using the new \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"expressAppFromMiddleware\"), \" option to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"createHandler\"), \".\"), mdx(\"p\", null, \"As part of this, the arguments to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"createHandler\"), \" have changed. Instead of taking only \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"cors\"), \", it takes an \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"expressGetMiddlewareOptions\"), \" option, which is an object taking any of the options that the \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-express\"), \" \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"applyMiddleware\"), \" and \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"getMiddleware\"), \" can take (other than \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"app\"), \"). For example, instead of:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-js line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"createHandler\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"cors\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"you now write:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", {\n    parentName: \"div\",\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-js line-numbers\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-js\"\n  }, \"server\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \".\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token function\"\n  }, \"createHandler\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"(\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token literal-property property\"\n  }, \"expressGetMiddlewareOptions\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token operator\"\n  }, \":\"), \" \", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"{\"), \"cors\", mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \"}\"), mdx(\"span\", {\n    parentName: \"code\",\n    \"className\": \"token punctuation\"\n  }, \")\")), mdx(\"span\", {\n    parentName: \"pre\",\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }, mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"h3\", {\n    \"id\": \"apollo-server-fastify\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#apollo-server-fastify\",\n    \"aria-label\": \"apollo server fastify permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-fastify\")), mdx(\"p\", null, \"In Apollo Server 2, \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-fastify\"), \" supports Fastify v2 and does \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"not\"), \" support Fastify v3. There is no dependency or peer dependency making this requirement clear.\"), mdx(\"p\", null, \"In Apollo Server 3, \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-fastify\"), \" supports Fastify v3. It has not been tested with versions of Fastify older than v3. There is a peer dependency on \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"fastify\"), \" v3.\"), mdx(\"h3\", {\n    \"id\": \"apollo-server-hapi\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#apollo-server-hapi\",\n    \"aria-label\": \"apollo server hapi permalink\",\n    \"className\": \"anchor before\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }, mdx(\"path\", {\n    parentName: \"svg\",\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  }))), mdx(\"code\", {\n    parentName: \"h3\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-hapi\")), mdx(\"p\", null, \"We are not certain exactly which versions of Hapi are supported by \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-hapi\"), \" in Apollo Server 2. We \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"are\"), \" certain that only \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@hapi/hapi\"), \" v20.1.2 and higher are supported by Node 16, and Apollo Server 2 was not tested with versions of \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"hapi\"), \" newer than v17.8.5. (Hapi's package name changed from \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"hapi\"), \" to \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@hapi/hapi\"), \" between v18.1.0 and v18.2.0.)\"), mdx(\"p\", null, \"In Apollo Server 3, \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"apollo-server-hapi\"), \" works with \", mdx(\"code\", {\n    parentName: \"p\",\n    \"className\": \"language-text\"\n  }, \"@hapi/hapi\"), \" v20.1.2 and Node 16. It is not tested with older versions of Hapi. Note that the Hapi project believes that \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/hapijs/hapi/issues/4114\"\n  }, \"all versions older than v20 have security issues\"), \".\"));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport { ExpansionPanel } from 'gatsby-theme-apollo-docs';\nexport const _frontmatter = {\n  \"title\": \"Migrating to Apollo Server 3\"\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <p>{`Apollo Server 3 is generally available.`}</p>\n    <p>{`The focus of this major-version release is to provide a lighter, nimbler core library as a foundation for future features and improved extensibility.`}</p>\n    <p><strong parentName=\"p\">{`Many Apollo Server 2 users don't need to make any code changes to upgrade to Apollo Server 3!`}</strong>{` This is especially likely if you use the \"batteries-included\" `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server`}</code>{` library (as opposed to a `}<a parentName=\"p\" {...{\n        \"href\": \"/integrations/middleware/\"\n      }}>{`middleware-specific library`}</a>{`).`}</p>\n    <p>{`This document explains which features `}<em parentName=\"p\">{`do`}</em>{` require code changes and how to make them. If you encounter issues while migrating, please `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/apollographql/apollo-server/issues/new/choose\"\n      }}>{`create an issue`}</a>{`.`}</p>\n    <blockquote>\n      <p parentName=\"blockquote\">{`For a list of all breaking changes, `}<a parentName=\"p\" {...{\n          \"href\": \"https://github.com/apollographql/apollo-server/blob/main/CHANGELOG.md\"\n        }}>{`see the changelog`}</a>{`.`}</p>\n    </blockquote>\n    <h2 {...{\n      \"id\": \"bumped-dependencies\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#bumped-dependencies\",\n        \"aria-label\": \"bumped dependencies permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Bumped dependencies`}</h2>\n    <h3 {...{\n      \"id\": \"nodejs\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#nodejs\",\n        \"aria-label\": \"nodejs permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Node.js`}</h3>\n    <p><strong parentName=\"p\">{`Apollo Server 3 supports Node.js 12 and later.`}</strong>{` (Apollo Server 2 supports back to Node.js 6.) This includes `}<a parentName=\"p\" {...{\n        \"href\": \"https://nodejs.org/about/releases/\"\n      }}>{`all LTS and Current versions at the time of release`}</a>{`.`}</p>\n    <p>{`If you're using an older version of Node.js, upgrade your runtime before upgrading to Apollo Server 3.`}</p>\n    <h3 {...{\n      \"id\": \"graphql\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#graphql\",\n        \"aria-label\": \"graphql permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql`}</code></h3>\n    <p>{`Apollo Server has a peer dependency on `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.npmjs.com/package/graphql\"\n      }}><code parentName=\"a\" {...{\n          \"className\": \"language-text\"\n        }}>{`graphql`}</code></a>{` (the core JS GraphQL implementation), which means you are responsible for choosing the version installed in your app.`}</p>\n    <p><strong parentName=\"p\">{`Apollo Server 3 supports `}<code parentName=\"strong\" {...{\n          \"className\": \"language-text\"\n        }}>{`graphql`}</code>{` v15.3.0 and later.`}</strong>{` (Apollo Server 2 supported `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql`}</code>{` v0.12 through v15.)`}</p>\n    <p>{`If you're using an older version of `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql`}</code>{`, upgrade it to a supported version before upgrading to Apollo Server 3.`}</p>\n    <h2 {...{\n      \"id\": \"removed-integrations\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#removed-integrations\",\n        \"aria-label\": \"removed integrations permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Removed integrations`}</h2>\n    <p>{`Apollo Server 2 provides built-in support for subscriptions and file uploads via the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`subscriptions-transport-ws`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql-upload`}</code>{` packages, respectively. It also serves GraphQL Playground from its base URL by default.`}</p>\n    <p>{`Apollo Server 3 removes these built-in integrations, in favor of enabling users to provide their own mechanisms for these features.`}</p>\n    <p>{`You can reenable all of these integrations as they exist in Apollo Server 2.`}</p>\n    <h3 {...{\n      \"id\": \"subscriptions\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#subscriptions\",\n        \"aria-label\": \"subscriptions permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Subscriptions`}</h3>\n    <p>{`Apollo Server 2 provides limited, built-in support for WebSocket-based GraphQL subscriptions via the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`subscriptions-transport-ws`}</code>{` package. This integration doesn't work with Apollo Server's plugin system or Apollo Studio usage reporting.`}</p>\n    <p>{`Apollo Server 3 no longer contains this built-in integration. However, you can still use `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`subscriptions-transport-ws`}</code>{` for subscriptions if you depend on this implementation. Note that as with Apollo Server 2, this integration won't work with the plugin system or Studio usage reporting.`}</p>\n    <p>{`Additionally, Apollo Server 3 `}<a parentName=\"p\" {...{\n        \"href\": \"#exports-from-graphql-subscriptions\"\n      }}>{`no longer re-exports all of the exports from the `}<code parentName=\"a\" {...{\n          \"className\": \"language-text\"\n        }}>{`graphql-subscriptions`}</code>{` package`}</a>{` such as `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`PubSub`}</code>{`.`}</p>\n    <p>{`We hope to add more fully-integrated subscription support to Apollo Server in a future version.`}</p>\n    <blockquote>\n      <p parentName=\"blockquote\">{`Note that the `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`subscriptions-transport-ws`}</code>{` library is no longer maintained. A newer, actively-maintained `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`graphql-ws`}</code>{` package exists. These libraries implement different protocols for GraphQL subscriptions over WebSocket, so you need to adjust your client to support `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`graphql-ws`}</code>{`. This migration guide shows how to reenable `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`subscriptions-transport-ws`}</code>{` to make your transition from Apollo Server 2 to Apollo Server 3 as easy as possible, but we recommend that you then migrate from `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`subscriptions-transport-ws`}</code>{` to `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`graphql-ws`}</code>{` once you've finished the upgrade. The `}<a parentName=\"p\" {...{\n          \"href\": \"/data/subscriptions/\"\n        }}>{`subscriptions documentation`}</a>{` shows how to use the newer `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`graphql-ws`}</code>{` rather than the unmaintained `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`subscriptions-transport-ws`}</code>{`.`}</p>\n    </blockquote>\n    <h4 {...{\n      \"id\": \"reenabling-subscriptions\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#reenabling-subscriptions\",\n        \"aria-label\": \"reenabling subscriptions permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Reenabling subscriptions`}</h4>\n    <blockquote>\n      <p parentName=\"blockquote\">{`Currently, these instructions are only for Apollo Server's Express integration. It is likely possible to integrate `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`subscriptions-transport-ws`}</code>{` with other integrations. PRs to this migration guide are certainly welcome!`}</p>\n    </blockquote>\n    <p>{`In Apollo Server 3, you can't use `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`subscriptions-transport-ws`}</code>{` with the \"batteries-included\" `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server`}</code>{` package. If your project uses `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server`}</code>{` with subscriptions, first `}<a parentName=\"p\" {...{\n        \"href\": \"/integrations/middleware/#swapping-out-apollo-server\"\n      }}>{`swap to `}<code parentName=\"a\" {...{\n          \"className\": \"language-text\"\n        }}>{`apollo-server-express`}</code></a>{`.`}</p>\n    <p>{`Then, complete the following:`}</p>\n    <ol>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Install `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`subscriptions-transport-ws`}</code>{` and `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`@graphql-tools/schema`}</code>{`.`}</p>\n        <div parentName=\"li\" {...{\n          \"className\": \"gatsby-highlight\",\n          \"data-language\": \"shell\"\n        }}><pre parentName=\"div\" {...{\n            \"style\": {\n              \"counterReset\": \"linenumber NaN\"\n            },\n            \"className\": \"language-shell line-numbers\"\n          }}><code parentName=\"pre\" {...{\n              \"className\": \"language-shell\"\n            }}><span parentName=\"code\" {...{\n                \"className\": \"token function\"\n              }}>{`npm`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token function\"\n              }}>{`install`}</span>{` subscriptions-transport-ws @graphql-tools/schema`}</code><span parentName=\"pre\" {...{\n              \"aria-hidden\": \"true\",\n              \"className\": \"line-numbers-rows\",\n              \"style\": {\n                \"whiteSpace\": \"normal\",\n                \"width\": \"auto\",\n                \"left\": \"0\"\n              }\n            }}><span parentName=\"span\"></span></span></pre></div>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Add the following imports in the module where your Apollo Server is currently instantiated. We'll use these in the subsequent steps.`}</p>\n        <div parentName=\"li\" {...{\n          \"className\": \"gatsby-highlight\",\n          \"data-language\": \"javascript\"\n        }}><pre parentName=\"div\" {...{\n            \"style\": {\n              \"counterReset\": \"linenumber NaN\"\n            },\n            \"className\": \"language-javascript line-numbers\"\n          }}><code parentName=\"pre\" {...{\n              \"className\": \"language-javascript\"\n            }}><span parentName=\"code\" {...{\n                \"className\": \"token keyword\"\n              }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`{`}</span>{` createServer `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token keyword\"\n              }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token string\"\n              }}>{`'http'`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n                \"className\": \"token keyword\"\n              }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`{`}</span>{` execute`}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`,`}</span>{` subscribe `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token keyword\"\n              }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token string\"\n              }}>{`'graphql'`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n                \"className\": \"token keyword\"\n              }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`{`}</span>{` SubscriptionServer `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token keyword\"\n              }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token string\"\n              }}>{`'subscriptions-transport-ws'`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n                \"className\": \"token keyword\"\n              }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`{`}</span>{` makeExecutableSchema `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token keyword\"\n              }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token string\"\n              }}>{`'@graphql-tools/schema'`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`;`}</span></code><span parentName=\"pre\" {...{\n              \"aria-hidden\": \"true\",\n              \"className\": \"line-numbers-rows\",\n              \"style\": {\n                \"whiteSpace\": \"normal\",\n                \"width\": \"auto\",\n                \"left\": \"0\"\n              }\n            }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create an `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`http.Server`}</code>{` instance with your Express `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`app`}</code>{`.`}</p>\n        <p parentName=\"li\">{`In order to set up both the HTTP and WebSocket servers, we'll need to create an `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`http.Server`}</code>{`. Do this by passing your Express `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`app`}</code>{` to the `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`createServer`}</code>{` function which we imported from the Node.js `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`http`}</code>{` module.`}</p>\n        <div parentName=\"li\" {...{\n          \"className\": \"gatsby-highlight\",\n          \"data-language\": \"javascript\"\n        }}><pre parentName=\"div\" {...{\n            \"style\": {\n              \"counterReset\": \"linenumber NaN\"\n            },\n            \"className\": \"language-javascript line-numbers\"\n          }}><code parentName=\"pre\" {...{\n              \"className\": \"language-javascript\"\n            }}><span parentName=\"code\" {...{\n                \"className\": \"token comment\"\n              }}>{`// This \\`app\\` is the returned value from \\`express()\\`.`}</span>{`\n`}<span parentName=\"code\" {...{\n                \"className\": \"token keyword\"\n              }}>{`const`}</span>{` httpServer `}<span parentName=\"code\" {...{\n                \"className\": \"token operator\"\n              }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token function\"\n              }}>{`createServer`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`(`}</span>{`app`}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`)`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`;`}</span></code><span parentName=\"pre\" {...{\n              \"aria-hidden\": \"true\",\n              \"className\": \"line-numbers-rows\",\n              \"style\": {\n                \"whiteSpace\": \"normal\",\n                \"width\": \"auto\",\n                \"left\": \"0\"\n              }\n            }}><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create an instance of `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`GraphQLSchema`}</code>{` (if one doesn't already exist).`}</p>\n        <blockquote parentName=\"li\">\n          <p parentName=\"blockquote\">{`Your server may already pass a `}<code parentName=\"p\" {...{\n              \"className\": \"language-text\"\n            }}>{`schema`}</code>{` to the `}<code parentName=\"p\" {...{\n              \"className\": \"language-text\"\n            }}>{`ApolloServer`}</code>{` constructor. If it does, this step can be skipped. You'll use the existing `}<code parentName=\"p\" {...{\n              \"className\": \"language-text\"\n            }}>{`schema`}</code>{` instance in a later step.`}</p>\n        </blockquote>\n        <p parentName=\"li\">{`The `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`SubscriptionServer`}</code>{` (which we'll instantiate next) doesn't accept `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`typeDefs`}</code>{` and `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`resolvers`}</code>{` directly, but rather an executable `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`GraphQLSchema`}</code>{`. We can pass this `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`schema`}</code>{` object to both the `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`SubscriptionServer`}</code>{` and `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`ApolloServer`}</code>{`. This way, it's clear that the same schema is being used in both places.`}</p>\n        <div parentName=\"li\" {...{\n          \"className\": \"gatsby-highlight\",\n          \"data-language\": \"javascript\"\n        }}><pre parentName=\"div\" {...{\n            \"style\": {\n              \"counterReset\": \"linenumber NaN\"\n            },\n            \"className\": \"language-javascript line-numbers\"\n          }}><code parentName=\"pre\" {...{\n              \"className\": \"language-javascript\"\n            }}><span parentName=\"code\" {...{\n                \"className\": \"token keyword\"\n              }}>{`const`}</span>{` schema `}<span parentName=\"code\" {...{\n                \"className\": \"token operator\"\n              }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token function\"\n              }}>{`makeExecutableSchema`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`(`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`{`}</span>{` typeDefs`}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`,`}</span>{` resolvers `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`}`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`)`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n                \"className\": \"token comment\"\n              }}>{`// ...`}</span>{`\n`}<span parentName=\"code\" {...{\n                \"className\": \"token keyword\"\n              }}>{`const`}</span>{` server `}<span parentName=\"code\" {...{\n                \"className\": \"token operator\"\n              }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token keyword\"\n              }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token class-name\"\n              }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`(`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`{`}</span>{`\n  schema`}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`}`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`)`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`;`}</span></code><span parentName=\"pre\" {...{\n              \"aria-hidden\": \"true\",\n              \"className\": \"line-numbers-rows\",\n              \"style\": {\n                \"whiteSpace\": \"normal\",\n                \"width\": \"auto\",\n                \"left\": \"0\"\n              }\n            }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Create the `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`SubscriptionServer`}</code>{`.`}</p>\n        <div parentName=\"li\" {...{\n          \"className\": \"gatsby-highlight\",\n          \"data-language\": \"javascript\"\n        }}><pre parentName=\"div\" {...{\n            \"style\": {\n              \"counterReset\": \"linenumber NaN\"\n            },\n            \"className\": \"language-javascript line-numbers\"\n          }}><code parentName=\"pre\" {...{\n              \"className\": \"language-javascript\"\n            }}><span parentName=\"code\" {...{\n                \"className\": \"token keyword\"\n              }}>{`const`}</span>{` subscriptionServer `}<span parentName=\"code\" {...{\n                \"className\": \"token operator\"\n              }}>{`=`}</span>{` SubscriptionServer`}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`.`}</span><span parentName=\"code\" {...{\n                \"className\": \"token function\"\n              }}>{`create`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`(`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n                \"className\": \"token comment\"\n              }}>{`// This is the \\`schema\\` we just created.`}</span>{`\n  schema`}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n                \"className\": \"token comment\"\n              }}>{`// These are imported from \\`graphql\\`.`}</span>{`\n  execute`}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`,`}</span>{`\n  subscribe`}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n                \"className\": \"token comment\"\n              }}>{`// Providing \\`onConnect\\` is the \\`SubscriptionServer\\` equivalent to the`}</span>{`\n  `}<span parentName=\"code\" {...{\n                \"className\": \"token comment\"\n              }}>{`// \\`context\\` function in \\`ApolloServer\\`. Please [see the docs](https://github.com/apollographql/subscriptions-transport-ws#constructoroptions-socketoptions--socketserver)`}</span>{`\n  `}<span parentName=\"code\" {...{\n                \"className\": \"token comment\"\n              }}>{`// for more information on this hook.`}</span>{`\n  `}<span parentName=\"code\" {...{\n                \"className\": \"token keyword\"\n              }}>{`async`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token function\"\n              }}>{`onConnect`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`(`}</span>{`\n    `}<span parentName=\"code\" {...{\n                \"className\": \"token parameter\"\n              }}><span parentName=\"span\" {...{\n                  \"className\": \"token literal-property property\"\n                }}>{`connectionParams`}</span><span parentName=\"span\" {...{\n                  \"className\": \"token operator\"\n                }}>{`:`}</span>{` Object`}<span parentName=\"span\" {...{\n                  \"className\": \"token punctuation\"\n                }}>{`,`}</span>{`\n    `}<span parentName=\"span\" {...{\n                  \"className\": \"token literal-property property\"\n                }}>{`webSocket`}</span><span parentName=\"span\" {...{\n                  \"className\": \"token operator\"\n                }}>{`:`}</span>{` WebSocket`}<span parentName=\"span\" {...{\n                  \"className\": \"token punctuation\"\n                }}>{`,`}</span>{`\n    `}<span parentName=\"span\" {...{\n                  \"className\": \"token literal-property property\"\n                }}>{`context`}</span><span parentName=\"span\" {...{\n                  \"className\": \"token operator\"\n                }}>{`:`}</span>{` ConnectionContext`}</span>{`\n  `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`{`}</span>{`\n    `}<span parentName=\"code\" {...{\n                \"className\": \"token comment\"\n              }}>{`// If an object is returned here, it will be passed as the \\`context\\``}</span>{`\n    `}<span parentName=\"code\" {...{\n                \"className\": \"token comment\"\n              }}>{`// argument to your subscription resolvers.`}</span>{`\n  `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`}`}</span>{`\n`}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`}`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`,`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n                \"className\": \"token comment\"\n              }}>{`// This is the \\`httpServer\\` we created in a previous step.`}</span>{`\n  `}<span parentName=\"code\" {...{\n                \"className\": \"token literal-property property\"\n              }}>{`server`}</span><span parentName=\"code\" {...{\n                \"className\": \"token operator\"\n              }}>{`:`}</span>{` httpServer`}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n                \"className\": \"token comment\"\n              }}>{`// This \\`server\\` is the instance returned from \\`new ApolloServer\\`.`}</span>{`\n  `}<span parentName=\"code\" {...{\n                \"className\": \"token literal-property property\"\n              }}>{`path`}</span><span parentName=\"code\" {...{\n                \"className\": \"token operator\"\n              }}>{`:`}</span>{` server`}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`.`}</span>{`graphqlPath`}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`}`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`)`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`;`}</span></code><span parentName=\"pre\" {...{\n              \"aria-hidden\": \"true\",\n              \"className\": \"line-numbers-rows\",\n              \"style\": {\n                \"whiteSpace\": \"normal\",\n                \"width\": \"auto\",\n                \"left\": \"0\"\n              }\n            }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Add a plugin to your `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`ApolloServer`}</code>{` constructor to close the `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`SubscriptionServer`}</code>{`.`}</p>\n        <div parentName=\"li\" {...{\n          \"className\": \"gatsby-code-title\"\n        }}>{`index.js-10`}</div>\n        <div parentName=\"li\" {...{\n          \"className\": \"gatsby-highlight\",\n          \"data-language\": \"javascript\"\n        }}><pre parentName=\"div\" {...{\n            \"style\": {\n              \"counterReset\": \"linenumber NaN\"\n            },\n            \"className\": \"language-javascript line-numbers\"\n          }}><code parentName=\"pre\" {...{\n              \"className\": \"language-javascript\"\n            }}><span parentName=\"code\" {...{\n                \"className\": \"token keyword\"\n              }}>{`const`}</span>{` server `}<span parentName=\"code\" {...{\n                \"className\": \"token operator\"\n              }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token keyword\"\n              }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token class-name\"\n              }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`(`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`{`}</span>{`\n  schema`}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n                \"className\": \"token literal-property property\"\n              }}>{`plugins`}</span><span parentName=\"code\" {...{\n                \"className\": \"token operator\"\n              }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`[`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`{`}</span>{`\n    `}<span parentName=\"code\" {...{\n                \"className\": \"token keyword\"\n              }}>{`async`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token function\"\n              }}>{`serverWillStart`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`(`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`{`}</span>{`\n      `}<span parentName=\"code\" {...{\n                \"className\": \"token keyword\"\n              }}>{`return`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`{`}</span>{`\n        `}<span parentName=\"code\" {...{\n                \"className\": \"token keyword\"\n              }}>{`async`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token function\"\n              }}>{`drainServer`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`(`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`{`}</span>{`\n          subscriptionServer`}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`.`}</span><span parentName=\"code\" {...{\n                \"className\": \"token function\"\n              }}>{`close`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`(`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`)`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`;`}</span>{`\n        `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`}`}</span>{`\n      `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`}`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`;`}</span>{`\n    `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`}`}</span>{`\n  `}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`}`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`]`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`}`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`)`}</span><span parentName=\"code\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`;`}</span></code><span parentName=\"pre\" {...{\n              \"aria-hidden\": \"true\",\n              \"className\": \"line-numbers-rows\",\n              \"style\": {\n                \"whiteSpace\": \"normal\",\n                \"width\": \"auto\",\n                \"left\": \"0\"\n              }\n            }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n      </li>\n      <li parentName=\"ol\">\n        <p parentName=\"li\">{`Finally, adjust the existing `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`listen`}</code>{`.`}</p>\n        <p parentName=\"li\">{`Most applications will be calling `}<code parentName=\"p\" {...{\n            \"className\": \"language-text\"\n          }}>{`app.listen(...)`}</code>{` on their Express app. `}<strong parentName=\"p\">{`This should be changed to `}<code parentName=\"strong\" {...{\n              \"className\": \"language-text\"\n            }}>{`httpServer.listen(...)`}</code></strong>{` using the same arguments. This will begin listening on the HTTP and WebSocket transports simultaneously.`}</p>\n      </li>\n    </ol>\n    <p>{`A completed example of migrating subscriptions is shown below:`}</p>\n    <ExpansionPanel title=\"Click to expand\" mdxType=\"ExpansionPanel\">\n      <div {...{\n        \"className\": \"gatsby-highlight\",\n        \"data-language\": \"js\"\n      }}><pre parentName=\"div\" {...{\n          \"style\": {\n            \"counterReset\": \"linenumber NaN\"\n          },\n          \"className\": \"language-js line-numbers\"\n        }}><code parentName=\"pre\" {...{\n            \"className\": \"language-js\"\n          }}><span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{` createServer `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token string\"\n            }}>{`\"http\"`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{` execute`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{` subscribe `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token string\"\n            }}>{`\"graphql\"`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{` SubscriptionServer `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token string\"\n            }}>{`\"subscriptions-transport-ws\"`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{` makeExecutableSchema `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token string\"\n            }}>{`\"@graphql-tools/schema\"`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`import`}</span>{` express `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token string\"\n            }}>{`\"express\"`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{` ApolloServer `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token string\"\n            }}>{`\"apollo-server-express\"`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`import`}</span>{` resolvers `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token string\"\n            }}>{`\"./resolvers\"`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`import`}</span>{` typeDefs `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token string\"\n            }}>{`\"./typeDefs\"`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n\n`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`async`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`function`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`const`}</span>{` app `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`express`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n\n  `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`const`}</span>{` httpServer `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`createServer`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span>{`app`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n\n  `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`const`}</span>{` schema `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`makeExecutableSchema`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{`\n    typeDefs`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{`\n    resolvers`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n\n  `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`const`}</span>{` subscriptionServer `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=`}</span>{` SubscriptionServer`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`.`}</span><span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`create`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{`\n    schema`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{`\n    execute`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{`\n    subscribe`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{`\n    `}<span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`onConnect`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{`\n      `}<span parentName=\"code\" {...{\n              \"className\": \"token comment\"\n            }}>{`// lookup userId by token, etc.`}</span>{`\n      `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`return`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{` userId `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n    `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{`\n    `}<span parentName=\"code\" {...{\n              \"className\": \"token literal-property property\"\n            }}>{`server`}</span><span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`:`}</span>{` httpServer`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{`\n    `}<span parentName=\"code\" {...{\n              \"className\": \"token literal-property property\"\n            }}>{`path`}</span><span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`:`}</span>{` server`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`.`}</span>{`graphqlPath`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n\n  `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`const`}</span>{` server `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token class-name\"\n            }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{`\n    schema`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{`\n    `}<span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`context`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{`\n      `}<span parentName=\"code\" {...{\n              \"className\": \"token comment\"\n            }}>{`// lookup userId by token, etc.`}</span>{`\n      `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`return`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{` userId `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n    `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{`\n    `}<span parentName=\"code\" {...{\n              \"className\": \"token literal-property property\"\n            }}>{`plugins`}</span><span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`[`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{`\n      `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`async`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`serverWillStart`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{`\n        `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`return`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{`\n          `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`async`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`drainServer`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{`\n            subscriptionServer`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`.`}</span><span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`close`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n          `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span>{`\n        `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n      `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span>{`\n    `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`]`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n  `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`await`}</span>{` server`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`.`}</span><span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`start`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n  server`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`.`}</span><span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`applyMiddleware`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{` app `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n\n  `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`const`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token constant\"\n            }}>{`PORT`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token number\"\n            }}>{`4000`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n  httpServer`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`.`}</span><span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`listen`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token constant\"\n            }}>{`PORT`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=>`}</span>{`\n    console`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`.`}</span><span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`log`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token template-string\"\n            }}><span parentName=\"span\" {...{\n                \"className\": \"token template-punctuation string\"\n              }}>{`\\``}</span><span parentName=\"span\" {...{\n                \"className\": \"token string\"\n              }}>{`Server is now running on http://localhost:`}</span><span parentName=\"span\" {...{\n                \"className\": \"token interpolation\"\n              }}><span parentName=\"span\" {...{\n                  \"className\": \"token interpolation-punctuation punctuation\"\n                }}>{`\\${`}</span><span parentName=\"span\" {...{\n                  \"className\": \"token constant\"\n                }}>{`PORT`}</span><span parentName=\"span\" {...{\n                  \"className\": \"token interpolation-punctuation punctuation\"\n                }}>{`}`}</span></span><span parentName=\"span\" {...{\n                \"className\": \"token string\"\n              }}>{`/graphql`}</span><span parentName=\"span\" {...{\n                \"className\": \"token template-punctuation string\"\n              }}>{`\\``}</span></span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span>{`\n  `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span></code><span parentName=\"pre\" {...{\n            \"aria-hidden\": \"true\",\n            \"className\": \"line-numbers-rows\",\n            \"style\": {\n              \"whiteSpace\": \"normal\",\n              \"width\": \"auto\",\n              \"left\": \"0\"\n            }\n          }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    </ExpansionPanel>\n    <h3 {...{\n      \"id\": \"file-uploads\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#file-uploads\",\n        \"aria-label\": \"file uploads permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`File uploads`}</h3>\n    <p>{`Apollo Server 2 provides built-in support for file uploads via an outdated version of the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql-upload`}</code>{` library. Using an updated version of `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql-upload`}</code>{` requires you to disable this built-in support due to backward incompatible changes.`}</p>\n    <p>{`This built-in support is removed in Apollo Server 3. To use `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql-upload`}</code>{`, you can choose an appropriate version and integrate it yourself. Note that `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql-upload`}</code>{` does not support federation or every `}<a parentName=\"p\" {...{\n        \"href\": \"/integrations/middleware/\"\n      }}>{`Node.js framework`}</a>{` supported by Apollo Server.`}</p>\n    <p>{`To use `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql-upload`}</code>{` with Apollo Server 3, see the `}<a parentName=\"p\" {...{\n        \"href\": \"/data/file-uploads/\"\n      }}>{`documentation on enabling file uploads in Apollo Server`}</a>{`. Note that if your project currently uses uploads with the \"batteries-included\" `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server`}</code>{` package, you must first `}<a parentName=\"p\" {...{\n        \"href\": \"/integrations/middleware/#swapping-out-apollo-server\"\n      }}>{`swap to `}<code parentName=\"a\" {...{\n          \"className\": \"language-text\"\n        }}>{`apollo-server-express`}</code></a>{`.`}</p>\n    <p>{`Additionally, Apollo Server 3 `}<a parentName=\"p\" {...{\n        \"href\": \"#exports-from-graphql-upload\"\n      }}>{`no longer re-exports the `}<code parentName=\"a\" {...{\n          \"className\": \"language-text\"\n        }}>{`GraphQLUpload`}</code>{` symbol from the `}<code parentName=\"a\" {...{\n          \"className\": \"language-text\"\n        }}>{`graphql-uploads`}</code>{` package`}</a>{`.`}</p>\n    <h3 {...{\n      \"id\": \"graphql-playground\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#graphql-playground\",\n        \"aria-label\": \"graphql playground permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`GraphQL Playground`}</h3>\n    <p>{`By default, Apollo Server 2 serves the (now-`}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/graphql/graphql-playground/issues/1143\"\n      }}>{`retired`}</a>{`) `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/graphql/graphql-playground\"\n      }}>{`GraphQL Playground`}</a>{` IDE from its base URL in non-production environments. In production, it serves no landing page. Apollo Server 2 also accepts a `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`playground`}</code>{` constructor option to override this default behavior (for example, to enable GraphQL Playground even in production).`}</p>\n    <p>{`Apollo Server 3 removes GraphQL Playground (and its associated constructor option) in favor of a landing page that links to Apollo Sandbox in non-production environments. In production, it serves a simplified landing page instead.`}</p>\n    <p>{`You can customize your Apollo Server 3 landing page, as described in `}<a parentName=\"p\" {...{\n        \"href\": \"/testing/build-run-queries/\"\n      }}>{`Build and run queries`}</a>{`.`}</p>\n    <h4 {...{\n      \"id\": \"reenabling-graphql-playground\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#reenabling-graphql-playground\",\n        \"aria-label\": \"reenabling graphql playground permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Reenabling GraphQL Playground`}</h4>\n    <p>{`You can continue to use GraphQL Playground by installing its associated plugin. You customize its behavior by passing options to the plugin instead of via the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`playground`}</code>{` constructor option.`}</p>\n    <p>{`If your code did not specify the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`playground`}</code>{` constructor option and you'd like to keep the previous behavior instead of trying the new splash page, you can do that as follows:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` ApolloServerPluginLandingPageGraphQLPlayground`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n         ApolloServerPluginLandingPageDisabled `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'apollo-server-core'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`plugins`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`[`}</span>{`\n    process`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`env`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token constant\"\n          }}>{`NODE_ENV`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`===`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'production'`}</span>{`\n      `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`?`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`ApolloServerPluginLandingPageDisabled`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{`\n      `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`ApolloServerPluginLandingPageGraphQLPlayground`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`]`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`If your code passed `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`new ApolloServer({playground: true})`}</code>{`, you can keep the previous behavior with:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` ApolloServerPluginLandingPageGraphQLPlayground `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'apollo-server-core'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`plugins`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`[`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`ApolloServerPluginLandingPageGraphQLPlayground`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`]`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`If your code passed `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`new ApolloServer({playground: false})`}</code>{` you can keep the previous behavior with:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` ApolloServerPluginLandingPageDisabled `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'apollo-server-core'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`plugins`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`[`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`ApolloServerPluginLandingPageDisabled`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`]`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`If your code passed an options object like `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`new ApolloServer({playground: playgroundOptions})`}</code>{`, you can keep the previous behavior with:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` ApolloServerPluginLandingPageGraphQLPlayground `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'apollo-server-core'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`plugins`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`[`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`ApolloServerPluginLandingPageGraphQLPlayground`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span>{`playgroundOptions`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`]`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <h4 {...{\n      \"id\": \"additional-changes-to-graphql-playground\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#additional-changes-to-graphql-playground\",\n        \"aria-label\": \"additional changes to graphql playground permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Additional changes to GraphQL Playground`}</h4>\n    <h5 {...{\n      \"id\": \"specifying-an-endpoint\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h5\" {...{\n        \"href\": \"#specifying-an-endpoint\",\n        \"aria-label\": \"specifying an endpoint permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Specifying an `}<code parentName=\"h5\" {...{\n        \"className\": \"language-text\"\n      }}>{`endpoint`}</code></h5>\n    <p>{`In Apollo Server 2, the default value of GraphQL Playground's `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`endpoint`}</code>{` option is determined in different ways by different Node.js framework integrations. In many cases, it's necessary to manually specify `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`playground: {endpoint}`}</code>{`.`}</p>\n    <p>{`In Apollo Server 3, the default endpoint used by GraphQL Playground is the browser's current URL. In many cases, this means that you don't have to specify `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`endpoint`}</code>{` anymore. If your Apollo Server 2 app specified `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`playground: {endpoint}`}</code>{` (and you wish to continue using GraphQL Playground), try removing `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`endpoint`}</code>{` from the options passed to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ApolloServerPluginLandingPageGraphQLPlayground`}</code>{` and see if it works for you.`}</p>\n    <h5 {...{\n      \"id\": \"specifying-settings\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h5\" {...{\n        \"href\": \"#specifying-settings\",\n        \"aria-label\": \"specifying settings permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Specifying `}<code parentName=\"h5\" {...{\n        \"className\": \"language-text\"\n      }}>{`settings`}</code></h5>\n    <p>{`In Apollo Server 2, the behavior of the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`settings`}</code>{` GraphQL Playground option can be surprising. If you don't explicitly pass `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`{playground: {settings: {...}}}`}</code>{` then GraphQL Playground always uses settings that are built into its React application (some of which can be adjusted by the user in their browser). However, if you pass `}<em parentName=\"p\">{`any object`}</em>{` as `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`playground: {settings: {...}}`}</code>{`, `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/apollographql/apollo-server/blob/70a431212bd2d07d68c962cb5ded63ecc6a21963/packages/apollo-server-core/src/playground.ts#L38-L46\"\n      }}>{`several default value overrides`}</a>{` take effect.`}</p>\n    <p>{`This surprising behavior is removed in Apollo Server 3. All `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`settings`}</code>{` use default values from the GraphQL Playground React app if they aren't specified in the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`settings`}</code>{` option to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ApolloServerPluginLandingPageGraphQLPlayground`}</code>{`.`}</p>\n    <p>{`If your app does pass in `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`playground: {settings: {...}}`}</code>{` and you want to make sure the settings used in your GraphQL Playground do not change, you should copy any relevant settings from `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/apollographql/apollo-server/blob/70a431212bd2d07d68c962cb5ded63ecc6a21963/packages/apollo-server-core/src/playground.ts#L38-L46\"\n      }}>{`the Apollo Server 2 code`}</a>{` into your app.`}</p>\n    <p>{`For example, you could replace:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span><span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`playground`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span><span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`settings`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span><span parentName=\"code\" {...{\n            \"className\": \"token string-property property\"\n          }}>{`'some.setting'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`true`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span></span></pre></div>\n    <p>{`with:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` ApolloServerPluginLandingPageGraphQLPlayground `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'apollo-server-core'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`plugins`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`[`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`ApolloServerPluginLandingPageGraphQLPlayground`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n      `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`settings`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n        `}<span parentName=\"code\" {...{\n            \"className\": \"token string-property property\"\n          }}>{`'some.setting'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`true`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n        `}<span parentName=\"code\" {...{\n            \"className\": \"token string-property property\"\n          }}>{`'general.betaUpdates'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`false`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n        `}<span parentName=\"code\" {...{\n            \"className\": \"token string-property property\"\n          }}>{`'editor.theme'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'dark'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n        `}<span parentName=\"code\" {...{\n            \"className\": \"token string-property property\"\n          }}>{`'editor.cursorShape'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'line'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n        `}<span parentName=\"code\" {...{\n            \"className\": \"token string-property property\"\n          }}>{`'editor.reuseHeaders'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`true`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n        `}<span parentName=\"code\" {...{\n            \"className\": \"token string-property property\"\n          }}>{`'tracing.hideTracingResponse'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`true`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n        `}<span parentName=\"code\" {...{\n            \"className\": \"token string-property property\"\n          }}>{`'queryPlan.hideQueryPlanResponse'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`true`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n        `}<span parentName=\"code\" {...{\n            \"className\": \"token string-property property\"\n          }}>{`'editor.fontSize'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token number\"\n          }}>{`14`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n        `}<span parentName=\"code\" {...{\n            \"className\": \"token string-property property\"\n          }}>{`'editor.fontFamily'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token template-string\"\n          }}><span parentName=\"span\" {...{\n              \"className\": \"token template-punctuation string\"\n            }}>{`\\``}</span><span parentName=\"span\" {...{\n              \"className\": \"token string\"\n            }}>{`'Source Code Pro', 'Consolas', 'Inconsolata', 'Droid Sans Mono', 'Monaco', monospace`}</span><span parentName=\"span\" {...{\n              \"className\": \"token template-punctuation string\"\n            }}>{`\\``}</span></span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n        `}<span parentName=\"code\" {...{\n            \"className\": \"token string-property property\"\n          }}>{`'request.credentials'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'omit'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n      `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`]`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <h2 {...{\n      \"id\": \"removed-constructor-options\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#removed-constructor-options\",\n        \"aria-label\": \"removed constructor options permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Removed constructor options`}</h2>\n    <p>{`The following `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ApolloServer`}</code>{` constructor options have been removed in favor of other features or configuration methods.`}</p>\n    <h3 {...{\n      \"id\": \"extensions\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#extensions\",\n        \"aria-label\": \"extensions permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`extensions`}</code></h3>\n    <p>{`Apollo Server 3 removes support for the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql-extensions`}</code>{` API, which was used to extend Apollo Server's functionality. This API has numerous limitations relative to the `}<a parentName=\"p\" {...{\n        \"href\": \"/integrations/plugins/\"\n      }}>{`plugins API`}</a>{` introduced in Apollo Server v2.2.0.`}</p>\n    <p>{`Unlike `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql-extensions`}</code>{`, the plugins API enables cross-request state, and its hooks virtually all interact with the same `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`GraphQLRequestContext`}</code>{` object.`}</p>\n    <p>{`If you've written your own extensions (passed to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`new ApolloServer({extensions: ...})`}</code>{`), you should `}<a parentName=\"p\" {...{\n        \"href\": \"/integrations/plugins/\"\n      }}>{`rewrite them as plugins`}</a>{` before upgrading to Apollo Server 3.`}</p>\n    <h3 {...{\n      \"id\": \"engine\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#engine\",\n        \"aria-label\": \"engine permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`engine`}</code></h3>\n    <p>{`\"Engine\" is a previous name of `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.apollographql.com/docs/studio/\"\n      }}>{`Apollo Studio`}</a>{`. Prior to Apollo Server v2.18.0, you passed the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`engine`}</code>{` constructor option to configure how Apollo Server communicates with Studio. Additionally, you could specifying your Apollo API key with the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ENGINE_API_KEY`}</code>{` environment variable, and you could specify a graph variant with the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ENGINE_SCHEMA_TAG`}</code>{` environment variable.`}</p>\n    <p>{`In later versions of Apollo Server (including Apollo Server 3), you instead provide this configuration via a combination of the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo`}</code>{` constructor option, plugins, and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`APOLLO_`}</code>{`-prefixed environment variables. Apollo Server 3 does not support the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`engine`}</code>{` constructor option or the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ENGINE_`}</code>{`-prefixed environment variables.`}</p>\n    <p>{`If your project still uses the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`engine`}</code>{` option or the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ENGINE_`}</code>{`-prefixed environment variables, see `}<a parentName=\"p\" {...{\n        \"href\": \"/v2/migration-engine-plugins/\"\n      }}>{`Migrating from the `}<code parentName=\"a\" {...{\n          \"className\": \"language-text\"\n        }}>{`engine`}</code>{` option`}</a>{` before upgrading to Apollo Server 3.`}</p>\n    <p>{`Note that if you are using Studio, make sure to `}<a parentName=\"p\" {...{\n        \"href\": \"#guessing-apollo-studio-graph-id-from-api-key\"\n      }}>{`set your graph ref or graph ID`}</a>{`.`}</p>\n    <h3 {...{\n      \"id\": \"schemadirectives\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#schemadirectives\",\n        \"aria-label\": \"schemadirectives permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`schemaDirectives`}</code></h3>\n    <p>{`In Apollo Server 2, you can pass `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`schemaDirectives`}</code>{` to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`new ApolloServer`}</code>{` alongside `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`typeDefs`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`resolvers`}</code>{`. These arguments are all passed through to the `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.graphql-tools.com/docs/generate-schema/#makeexecutableschemaoptions\"\n      }}><code parentName=\"a\" {...{\n          \"className\": \"language-text\"\n        }}>{`makeExecutableSchema`}</code>{` function`}</a>{`  from the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql-tools`}</code>{` package.`}</p>\n    <p>{`The `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql-tools`}</code>{` project deprecated the  `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/ardatan/graphql-tools/blob/%40graphql-tools/schema%407.1.5/website/docs/legacy-schema-directives.md\"\n      }}><code parentName=\"a\" {...{\n          \"className\": \"language-text\"\n        }}>{`schemaDirectives`}</code>{` feature`}</a>{` and removed it in v8 of `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`@graphql-tools/schema`}</code>{`.`}</p>\n    <p>{`In Apollo Server 3, the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ApolloServer`}</code>{` constructor now only passes `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`typeDefs`}</code>{`, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`resolvers`}</code>{`, and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`parseOptions`}</code>{` through to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`makeExecutableSchema`}</code>{`.`}</p>\n    <p>{`If you would like to still use `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`schemaDirectives`}</code>{`, you can install an older version of `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`@graphql-tools/schema`}</code>{` yourself with `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`npm install @graphql-tools/schema@7`}</code>{` and call `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`makeExecutableSchema`}</code>{` yourself and pass its returned schema as the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`schema`}</code>{` constructor option.`}</p>\n    <p>{`That is, you can replace:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  typeDefs`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  resolvers`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  schemaDirectives`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`with:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// Make sure you are using v7, not anything newer!`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` makeExecutableSchema `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'@graphql-tools/schema'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`schema`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`makeExecutableSchema`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n    typeDefs`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n    resolvers`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n    schemaDirectives`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`This can help you with the initial migration to Apollo Server 3. As `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`schemaDirectives`}</code>{` is no longer part of the actively maintained version of `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`@graphql-tools/schema`}</code>{`, we recommend that once you've successfully migrated to Apollo Server 3, you then port your schema directive to the `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.graphql-tools.com/docs/schema-directives\"\n      }}>{`newer schema directives API`}</a>{` which uses the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`mapSchema`}</code>{` function in `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`@graphql-tools/utils`}</code>{`.`}</p>\n    <blockquote>\n      <p parentName=\"blockquote\">{`In Apollo Server 2, there are subtle differences between providing a schema with `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`schema`}</code>{` versus providing it with `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`typeDefs`}</code>{` and `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`resolvers`}</code>{`. For example, the automatic definition of the `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`@cacheControl`}</code>{` directive is added only in the latter case. These differences are removed in Apollo Server 3 (for example, the definition of the `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`@cacheControl`}</code>{` directive is `}<em parentName=\"p\">{`never`}</em>{` automatically added).`}</p>\n    </blockquote>\n    <h3 {...{\n      \"id\": \"tracing\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#tracing\",\n        \"aria-label\": \"tracing permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`tracing`}</code></h3>\n    <p>{`In Apollo Server 2, the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`tracing`}</code>{` constructor option enables a trace mechanism implemented in the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-tracing`}</code>{` package. This package uses a comparatively inefficient JSON format for execution traces returned via the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`tracing`}</code>{` GraphQL response extension. The format is consumed only by the deprecated `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`engineproxy`}</code>{` and GraphQL Playground. It is `}<em parentName=\"p\">{`not`}</em>{` the tracing format used for Apollo Studio usage reporting or federated inline traces.`}</p>\n    <p>{`The `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`tracing`}</code>{` constructor option is removed in Apollo Server 3. The `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-tracing`}</code>{` package has been deprecated and is no longer being published.`}</p>\n    <p>{`If you rely on this deprecated trace format, you might be able to use the old version of `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-tracing`}</code>{` directly:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`plugins`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`[`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`require`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'apollo-tracing'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`plugin`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`]`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <blockquote>\n      <p parentName=\"blockquote\">{`This workaround has not been tested! If you need this to work and it doesn't, please file an issue and we will investigate a fix to enable support in Apollo Server 3.`}</p>\n    </blockquote>\n    <h3 {...{\n      \"id\": \"cachecontrol\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#cachecontrol\",\n        \"aria-label\": \"cachecontrol permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`cacheControl`}</code></h3>\n    <p>{`In Apollo Server 2, `}<a parentName=\"p\" {...{\n        \"href\": \"/performance/caching/\"\n      }}>{`cache policy support`}</a>{` is configured via the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`cacheControl`}</code>{` constructor option. There are several improvements to the semantics of cache policies in Apollo Server 3, as well as changes to how caching is configured.`}</p>\n    <p>{`The `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`cacheControl`}</code>{` constructor option is removed in Apollo Server 3. To customize cache control, you instead manually install the `}<a parentName=\"p\" {...{\n        \"href\": \"/api/plugin/cache-control/\"\n      }}>{`cache control plugin`}</a>{` and provide custom options to it.`}</p>\n    <p>{`For example, if you currently provide `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`defaultMaxAge`}</code>{` and/or `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`calculateHttpHeaders`}</code>{` to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`cacheControl`}</code>{` like so:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`cacheControl`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n    defaultMaxAge`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n    calculateHttpHeaders`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`You now provide them like so:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` ApolloServerPluginCacheControl `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'apollo-server-core'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`plugins`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`[`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`ApolloServerPluginCacheControl`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n      defaultMaxAge`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n      calculateHttpHeaders`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`]`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`If you currently pass `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`cacheControl: false`}</code>{` like so:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`cacheControl`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`false`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`You now install the disabling plugin like so:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` ApolloServerPluginCacheControlDisabled `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'apollo-server-core'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`plugins`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`[`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`ApolloServerPluginCacheControlDisabled`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`]`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`In Apollo Server 2, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`cacheControl: true`}</code>{` was a shorthand for setting `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`cacheControl: {stripFormattedExtensions: false, calculateHttpHeaders: false}`}</code>{`. If you either passed `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`cacheControl: true`}</code>{` or explicitly passed `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`stripFormattedExtensions: false`}</code>{`, Apollo Server 2 would include a `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`cacheControl`}</code>{` response extension inside your GraphQL response. This was used by the deprecated `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`engineproxy`}</code>{` server. Support for writing this response extension has been removed from Apollo Server 2. This allows for a more memory-efficient cache control plugin implementation.`}</p>\n    <p>{`In Apollo Server 2, definitions of the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`@cacheControl`}</code>{` directive (and the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`CacheControlScope`}</code>{` enum that it uses) were sometimes automatically inserted into your schema. (Specifically, they were added if you defined your schema with the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`typeDefs`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`resolvers`}</code>{` options, but not if you used the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`modules`}</code>{` or `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`schema`}</code>{` options or if you were a federated gateway. Passing `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`cacheControl: false`}</code>{` did not stop the definitions from being inserted!) In Apollo Server 3, these definitions are never automatically inserted.`}</p>\n    <p>{`So `}<strong parentName=\"p\">{`if you use the `}<code parentName=\"strong\" {...{\n          \"className\": \"language-text\"\n        }}>{`@cacheControl`}</code>{` directive in your schema, you should add these definitions to your schema`}</strong>{`:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"graphql\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-graphql line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-graphql\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`enum`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`CacheControlScope`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token constant\"\n          }}>{`PUBLIC`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token constant\"\n          }}>{`PRIVATE`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{`\n\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`directive`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token directive function\"\n          }}>{`@cacheControl`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token attr-name\"\n          }}>{`maxAge`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token scalar\"\n          }}>{`Int`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token attr-name\"\n          }}>{`scope`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`CacheControlScope`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token attr-name\"\n          }}>{`inheritMaxAge`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token scalar\"\n          }}>{`Boolean`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`on`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token constant\"\n          }}>{`FIELD_DEFINITION`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`|`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token constant\"\n          }}>{`OBJECT`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`|`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token constant\"\n          }}>{`INTERFACE`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`|`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token constant\"\n          }}>{`UNION`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`(You may add them to your schema in Apollo Server 2 before upgrading if you'd like.)`}</p>\n    <p>{`In Apollo Server 2, plugins that want to change the operation's overall cache policy can overwrite the field `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`requestContext.overallCachePolicy`}</code>{`. In Apollo Server 3, that field is considered read-only, but it does have new methods to mutate its state. So you should replace:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}>{`requestContext`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`overallCachePolicy `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`maxAge`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token number\"\n          }}>{`100`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span></span></pre></div>\n    <p>{`with:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}>{`requestContext`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`overallCachePolicy`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`replace`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`maxAge`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token number\"\n          }}>{`100`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span></span></pre></div>\n    <p>{`(You may also want to consider using `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`restrict`}</code>{` instead of `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`replace`}</code>{`; this method only allows `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`maxAge`}</code>{` to be reduced and only allows `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`scope`}</code>{` to change from `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`PUBLIC`}</code>{` to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`PRIVATE`}</code>{`.)`}</p>\n    <p>{`In Apollo Server 2, fields returning a union type are treated similarly to fields returning a scalar type: `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`@cacheControl`}</code>{` on the type itself is ignored, and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`maxAge`}</code>{` if unspecified is inherited from its parent in the operation (unless it is a root field) instead of defaulting to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`defaultMaxAge`}</code>{` (which itself defaults to 0). In Apollo Server 3, fields returning a union type are treated similarly to fields returning an interface or object type: `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`@cacheControl`}</code>{` on the type itself is honored, and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`maxAge`}</code>{` if unspecified defaults to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`defaultMaxAge`}</code>{`. If you were relying on the inheritance behavior, you can specify `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`@cacheControl(maxAge: ...)`}</code>{` explicitly on your union types or union-returning fields, or you can use the new `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`@cacheControl(inheritMaxAge: true)`}</code>{` feature on the union-returning field to restore the Apollo Server 2 behavior. If your schema contained `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`union SomeUnion @cacheControl(...)`}</code>{`, that directive will start having an effect when you upgrade to Apollo Server 3.`}</p>\n    <p>{`In Apollo Server 2, the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`@cacheControl`}</code>{` is honored on type definitions but not on type extensions. That is, if you write `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`type SomeType @cacheControl(maxAge: 123)`}</code>{` it takes effect but if you write `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`extend type SomeType @cacheControl(maxAge: 123)`}</code>{` it does not take effect. In Apollo Server 3, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`@cacheControl`}</code>{` is honored on object, interface, and union extensions. If your schema accidentally contained `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`@cacheControl`}</code>{` on an `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`extend`}</code>{`, that directive will start having an effect when you upgrade to Apollo Server 3.`}</p>\n    <p>{`In Apollo Server 2, most of the logic related to cache control lives in the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-cache-control`}</code>{` package. This package exports a function called `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`plugin`}</code>{` as well as TypeScript types `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`CacheControlFormat`}</code>{`, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`CacheHint`}</code>{`, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`CacheScope`}</code>{`, and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`CacheControlExtensionOptions`}</code>{`. In Apollo Server 3, this logic lives in `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-core`}</code>{` and the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-cache-control`}</code>{` package is no longer published. `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-core`}</code>{` exports `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ApolloServerPluginCacheControl`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ApolloServerPluginCacheControlOptions`}</code>{` (which are similar to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`plugin`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`CacheControlExtensionOptions`}</code>{`). `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-types`}</code>{` exports `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`CacheHint`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`CacheScope`}</code>{`. There is no equivalent export to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`CacheControlFormat`}</code>{` because as described above, the code to write the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`cacheControl`}</code>{` response extension is not part of Apollo Server 3.`}</p>\n    <h3 {...{\n      \"id\": \"playground\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#playground\",\n        \"aria-label\": \"playground permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`playground`}</code></h3>\n    <p>{`See `}<a parentName=\"p\" {...{\n        \"href\": \"#graphql-playground\"\n      }}>{`GraphQL Playground`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"removed-exports\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#removed-exports\",\n        \"aria-label\": \"removed exports permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Removed exports`}</h2>\n    <p>{`In Apollo Server 2, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server`}</code>{` and framework integration packages such as `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-express`}</code>{` import many symbols from third-party packages and re-export them. This effectively ties the API of Apollo Server to a specific version of those third-party packages and makes it challenging to upgrade to a newer version or for you to upgrade those packages yourself.`}</p>\n    <p>{`In Apollo Server 3, most of these \"re-exports\" are removed. If you want to use these exports, you should import them directly from their originating package.`}</p>\n    <h3 {...{\n      \"id\": \"exports-from-graphql-tools\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#exports-from-graphql-tools\",\n        \"aria-label\": \"exports from graphql tools permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Exports from `}<code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql-tools`}</code></h3>\n    <p>{`Apollo Server 2 exports every symbol exported by `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.graphql-tools.com/\"\n      }}><code parentName=\"a\" {...{\n          \"className\": \"language-text\"\n        }}>{`graphql-tools`}</code></a>{` v4. If you're importing any of the following symbols from an Apollo Server package, you should instead run `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`npm install graphql-tools@4.x`}</code>{` and import the symbol from `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql-tools`}</code>{`.`}</p>\n    <blockquote>\n      <p parentName=\"blockquote\">{`Alternatively, read the `}<a parentName=\"p\" {...{\n          \"href\": \"https://www.graphql-tools.com/docs/introduction\"\n        }}>{`GraphQL Tools docs`}</a>{` and find out which `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`@graphql-tools/subpackage`}</code>{` the symbol is exported from in more modern versions of GraphQL Tools.`}</p>\n    </blockquote>\n    <ul>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`AddArgumentsAsVariables`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`AddTypenameToAbstract`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`CheckResultAndHandleErrors`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`DirectiveResolverFn`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`ExpandAbstractTypes`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`ExtractField`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`FilterRootFields`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`FilterToSchema`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`FilterTypes`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`GraphQLParseOptions`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IAddResolveFunctionsToSchemaOptions`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IConnectorCls`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IConnectorFn`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IConnector`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IConnectors`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IDelegateToSchemaOptions`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IDirectiveResolvers`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IEnumResolver`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IExecutableSchemaDefinition`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IFieldIteratorFn`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IFieldResolver`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IGraphQLToolsResolveInfo`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`ILogger`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IMockFn`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IMockOptions`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IMockServer`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IMockTypeFn`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IMocks`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IResolverObject`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IResolverOptions`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IResolverValidationOptions`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IResolversParameter`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`IResolvers`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`ITypeDefinitions`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`ITypedef`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`MergeInfo`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`MergeTypeCandidate`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`MockList`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`NextResolverFn`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`Operation`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`RenameRootFields`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`RenameTypes`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`ReplaceFieldWithFragment`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`Request`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`ResolveType`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`Result`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`SchemaDirectiveVisitor`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`SchemaError`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`TransformRootFields`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`Transform`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`TypeWithResolvers`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`UnitOrList`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`VisitTypeResult`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`VisitType`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`WrapQuery`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`addCatchUndefinedToSchema`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`addErrorLoggingToSchema`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`addMockFunctionsToSchema`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`addResolveFunctionsToSchema`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`addSchemaLevelResolveFunction`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`assertResolveFunctionsPresent`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`attachConnectorsToContext`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`attachDirectiveResolvers`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`buildSchemaFromTypeDefinitions`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`chainResolvers`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`checkForResolveTypeResolver`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`concatenateTypeDefs`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`decorateWithLogger`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`defaultCreateRemoteResolver`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`defaultMergedResolver`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`delegateToSchema`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`extendResolversFromInterfaces`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`extractExtensionDefinitions`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`forEachField`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`introspectSchema`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`makeExecutableSchema`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`makeRemoteExecutableSchema`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`mergeSchemas`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`mockServer`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`transformSchema`}</code></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"exports-from-graphql-subscriptions\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#exports-from-graphql-subscriptions\",\n        \"aria-label\": \"exports from graphql subscriptions permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Exports from `}<code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql-subscriptions`}</code></h3>\n    <p>{`Apollo Server 2 exports every symbol exported by `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.npmjs.com/package/graphql-subscriptions\"\n      }}><code parentName=\"a\" {...{\n          \"className\": \"language-text\"\n        }}>{`graphql-subscriptions`}</code></a>{`. If you are importing any of the following symbols from an Apollo Server package, you should instead run `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`npm install graphql-subscriptions`}</code>{` and import the symbol from `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql-subscriptions`}</code>{` instead.`}</p>\n    <ul>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`FilterFn`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`PubSub`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`PubSubEngine`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`PubSubOptions`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`ResolverFn`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`withFilter`}</code></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"exports-from-graphql-upload\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#exports-from-graphql-upload\",\n        \"aria-label\": \"exports from graphql upload permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Exports from `}<code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql-upload`}</code></h3>\n    <p>{`Apollo Server 2 exports the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`GraphQLUpload`}</code>{` symbol from (our fork of) `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql-upload`}</code>{`. Apollo Server 3 no longer has built-in `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql-upload`}</code>{` integration. See `}<a parentName=\"p\" {...{\n        \"href\": \"/data/file-uploads/\"\n      }}>{`the documentation on how to enable file uploads in Apollo Server 3`}</a>{`.`}</p>\n    <h3 {...{\n      \"id\": \"exports-related-to-graphql-playground\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#exports-related-to-graphql-playground\",\n        \"aria-label\": \"exports related to graphql playground permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Exports related to GraphQL Playground`}</h3>\n    <p>{`Apollo Server 2 exports a `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`defaultPlaygroundOptions`}</code>{` object, along with `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`PlaygroundConfig`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`PlaygroundRenderPageOptions`}</code>{` types to support the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`playground`}</code>{` top-level constructor argument.`}</p>\n    <p>{`In Apollo Server 3, GraphQL Playground is one of several landing pages implemented via plugins, and there are no default options for it. The `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ApolloServerPluginLandingPageGraphQLPlaygroundOptions`}</code>{` type exported from `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-core`}</code>{` plays a similar role to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`PlaygroundConfig`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`PlaygroundRenderPageOptions`}</code>{`. See `}<a parentName=\"p\" {...{\n        \"href\": \"#graphql-playground\"\n      }}>{`the section on `}<code parentName=\"a\" {...{\n          \"className\": \"language-text\"\n        }}>{`playground`}</code>{` above`}</a>{` for more details on configuring GraphQL Playground in Apollo Server 3.`}</p>\n    <h2 {...{\n      \"id\": \"removed-features\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#removed-features\",\n        \"aria-label\": \"removed features permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Removed features`}</h2>\n    <p>{`Several small features have been removed from Apollo Server 3.`}</p>\n    <h3 {...{\n      \"id\": \"guessing-apollo-studio-graph-id-from-api-key\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#guessing-apollo-studio-graph-id-from-api-key\",\n        \"aria-label\": \"guessing apollo studio graph id from api key permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Guessing Apollo Studio graph ID from API key`}</h3>\n    <p>{`In Apollo Server 2, if you specify an Apollo API key (e.g., with the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`APOLLO_KEY`}</code>{` environment variable) that starts with `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`service:your-graph-id:`}</code>{`, Apollo Server automatically guesses that your Studio graph ID (used for usage reporting, schema reporting, managed federation, and so on) is `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`your-graph-id`}</code>{`.`}</p>\n    <p>{`In Apollo Server 3, you should instead specify your Studio graph ID explicitly when using features that connect to Studio. You can specify the graph ID by itself in the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`APOLLO_GRAPH_ID`}</code>{` environment variable (or via `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`new ApolloServer({apollo: {graphId}}))`}</code>{`, or alongside the variant in a string like `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`your-graph-id@your-graph-variant`}</code>{` in the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`APOLLO_GRAPH_REF`}</code>{` environment variable (or via `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`new ApolloServer({apollo: {graphRef}})`}</code>{`). See `}<a parentName=\"p\" {...{\n        \"href\": \"/api/apollo-server/#apollo\"\n      }}>{`the `}<code parentName=\"a\" {...{\n          \"className\": \"language-text\"\n        }}>{`apollo`}</code>{` constructor option`}</a>{` for more details.`}</p>\n    <blockquote>\n      <p parentName=\"blockquote\">{`If you set your API key but do `}<em parentName=\"p\">{`not`}</em>{` set your graph ref or ID:`}</p>\n      <ul parentName=\"blockquote\">\n        <li parentName=\"ul\">{`If you explicitly set up features like the usage reporting plugin or managed federation, Apollo Server 3 throws an error on startup.`}</li>\n        <li parentName=\"ul\">{`If you don't explicitly `}<a parentName=\"li\" {...{\n            \"href\": \"/api/plugin/usage-reporting/\"\n          }}>{`set up or disable the usage reporting plugin`}</a>{`, Apollo Server 3 logs a warning suggesting that you either set your graph ref or disable the usage reporting plugin.`}</li>\n      </ul>\n    </blockquote>\n    <h3 {...{\n      \"id\": \"apolloserverschema-field\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#apolloserverschema-field\",\n        \"aria-label\": \"apolloserverschema field permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`ApolloServer.schema`}</code>{` field`}</h3>\n    <p>{`Apollo Server 2 has a deprecated field `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ApolloServer.schema`}</code>{` (which doesn't work when the server is a federated gateway). Apollo Server 3 does not contain this field. To access your server's schema, you have a few options:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Construct the schema yourself (e.g., with `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`const schema = makeExecutableSchema({typeDefs, resolvers})`}</code>{` from `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`@graphql-tools/schema`}</code>{`), pass it in as `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`new ApolloServer({schema})`}</code>{`, and refer to this same `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`schema`}</code>{` value elsewhere. Apollo Server 3 won't modify the schema you pass in.`}</li>\n      <li parentName=\"ul\">{`Write a plugin that uses the `}<a parentName=\"li\" {...{\n          \"href\": \"/integrations/plugins-event-reference/#serverwillstart\"\n        }}><code parentName=\"a\" {...{\n            \"className\": \"language-text\"\n          }}>{`serverWillStart`}</code>{` event`}</a>{` to obtain the schema. Note that if your server is a gateway, this receives the `}<em parentName=\"li\">{`first`}</em>{` schema that's loaded on startup but doesn't receive any subsequent schemas if it updates dynamically.`}</li>\n      <li parentName=\"ul\">{`If your server is a gateway, register a callback with `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`gateway.onSchemaChange`}</code>{`. Note that this API has some inconsistent behavior. To resolve this, we are considering `}<a parentName=\"li\" {...{\n          \"href\": \"https://github.com/apollographql/apollo-server/pull/5187\"\n        }}>{`adding an Apollo Server plugin event that receives all schema updates`}</a>{`.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"apollo-server-testing\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#apollo-server-testing\",\n        \"aria-label\": \"apollo server testing permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-testing`}</code></h3>\n    <p>{`Apollo Server 2 contains a package `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-testing`}</code>{`. This package is a thin wrapper around the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`server.executeOperation`}</code>{` method. As of Apollo Server 2.25.0, we no longer document this package and instead `}<a parentName=\"p\" {...{\n        \"href\": \"/testing/testing/\"\n      }}>{`document using `}<code parentName=\"a\" {...{\n          \"className\": \"language-text\"\n        }}>{`executeOperation`}</code>{` directly`}</a>{`.`}</p>\n    <p>{`In Apollo Server 3, we no longer publish this package. It's possible that the Apollo Server 2 version of this package might work with Apollo Server 3 servers. If you do use `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-testing`}</code>{`, we suggest that you migrate to using `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`executeOperation`}</code>{` directly (with at least 2.25.0 of Apollo Server) before upgrading to Apollo Server 3.`}</p>\n    <p>{`If you used `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-testing`}</code>{` like so:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` createTestClient `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`require`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'apollo-server-testing'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` query`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` mutate `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`createTestClient`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span>{`server`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`await`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`query`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`query`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token constant\"\n          }}>{`QUERY`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`await`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`mutate`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`mutation`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token constant\"\n          }}>{`MUTATION`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`then you can use `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`executeOperation`}</code>{` like so:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`await`}</span>{` server`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`executeOperation`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`query`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token constant\"\n          }}>{`QUERY`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`await`}</span>{` server`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`executeOperation`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`query`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token constant\"\n          }}>{`MUTATION`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <blockquote>\n      <p parentName=\"blockquote\">{`Note that prior to Apollo Server 2.25.0, `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`apollo-server-testing`}</code>{` functions allowed you to pass your operation as a string or a `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`DocumentNode`}</code>{` as returned from `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`gql`}</code>{`, but `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`executeOperation`}</code>{` only supported strings. As of v2.25.0, `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`executeOperation`}</code>{` takes `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`string`}</code>{` or `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`DocumentNode`}</code>{`, which makes the change shown above straightforward in all cases.`}</p>\n    </blockquote>\n    <h3 {...{\n      \"id\": \"apollo-datasource-rest-baseurl-override-change\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#apollo-datasource-rest-baseurl-override-change\",\n        \"aria-label\": \"apollo datasource rest baseurl override change permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-datasource-rest`}</code>{`: `}<code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`baseURL`}</code>{` override change`}</h3>\n    <p>{`When you create a `}<a parentName=\"p\" {...{\n        \"href\": \"/data/data-sources/\"\n      }}><code parentName=\"a\" {...{\n          \"className\": \"language-text\"\n        }}>{`RESTDataSource`}</code></a>{` subclass, you need to provide its `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`baseURL`}</code>{`. This can be done via `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`this.baseURL = ...`}</code>{` in the constructor or `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`resolveURL`}</code>{`, or via `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`baseURL = ...`}</code>{` at the class level.`}</p>\n    <p>{`In Apollo Server 2 you can `}<em parentName=\"p\">{`also`}</em>{` provide `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`baseURL`}</code>{` via a getter like `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`get baseURL() { ... }`}</code>{`. Apollo Server 3 is compiled with TypeScript 4, which `}<a parentName=\"p\" {...{\n        \"href\": \"https://devblogs.microsoft.com/typescript/announcing-typescript-4-0/#properties-overriding-accessors-and-vice-versa-is-an-error\"\n      }}>{`no longer supports overriding a property with an accessor`}</a>{`, so this is no longer allowed.`}</p>\n    <p>{`If you used a getter in order to provide a dynamic URL, like this:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`class`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`MyDataSource`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`extends`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`RESTDataSource`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`get`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`baseURL`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`return`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`someDynamicallyCalculatedURL`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`you can instead override `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`resolveURL`}</code>{`:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`class`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`MyDataSource`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`extends`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`RESTDataSource`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`async`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`resolveURL`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token parameter\"\n          }}><span parentName=\"span\" {...{\n              \"className\": \"token literal-property property\"\n            }}>{`request`}</span><span parentName=\"span\" {...{\n              \"className\": \"token operator\"\n            }}>{`:`}</span>{` RequestOptions`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`if`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`!`}</span><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`this`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`baseURL`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n      `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`this`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span>{`baseURL `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`someDynamicallyCalculatedURL`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`return`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`super`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`resolveURL`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span>{`request`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <h3 {...{\n      \"id\": \"apollo-server-envs-global-type-definitions\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#apollo-server-envs-global-type-definitions\",\n        \"aria-label\": \"apollo server envs global type definitions permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-env`}</code>{`'s global type definitions`}</h3>\n    <p>{`Global TypeScript definitions have been removed from `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-env`}</code>{` since they conflicted with similar global types provided by `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`@types/supertest`}</code>{`, which we use in Apollo Server's test suite.  These removed types include types which resemble those of `}<a parentName=\"p\" {...{\n        \"href\": \"https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API\"\n      }}>{`the Fetch API`}</a>{` including, e.g., `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`fetch`}</code>{`, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`RequestInfo`}</code>{`, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`Headers`}</code>{`, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`Request`}</code>{`, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`Response`}</code>{`, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ResponseInit`}</code>{`, and more.  `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/apollographql/apollo-server/blob/32cfdcfdbd44f4f4e826f347f47fdcbc0475b5cc/packages/apollo-server-env/src/global.d.ts\"\n      }}>{`See the full list prior to removal here`}</a>{`.`}</p>\n    <p>{`We don't expect this to affect many users and we have not publicly suggested using these types in the past, but it's possible that implementations may be using them inadvertently (e.g., from auto-import on `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-env`}</code>{`).  While other type definition sets provide similar hand-curated types, for the time being, we have chosen to rely the same-named types from TypeScript's `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`lib.dom.d.ts`}</code>{` e.g., `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/microsoft/TypeScript/blob/3c604f1c0a412ef41f58c3f9b239b25e8d725751/lib/lib.dom.d.ts#L1470\"\n      }}>{`its `}<code parentName=\"a\" {...{\n          \"className\": \"language-text\"\n        }}>{`RequestInfo`}</code>{` type definition`}</a>{`.  Even if those types are more appropriate for browsers, they're a reliable and well-maintained source.  For more details, including our plan for adjusting this again in the future, `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/apollographql/apollo-server/pull/5165\"\n      }}>{`see PR #5165`}</a>{`.`}</p>\n    <h2 {...{\n      \"id\": \"changed-features\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#changed-features\",\n        \"aria-label\": \"changed features permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Changed features`}</h2>\n    <h3 {...{\n      \"id\": \"plugin-api\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#plugin-api\",\n        \"aria-label\": \"plugin api permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Plugin API`}</h3>\n    <h4 {...{\n      \"id\": \"almost-all-plugin-events-are-now-async\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#almost-all-plugin-events-are-now-async\",\n        \"aria-label\": \"almost all plugin events are now async permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Almost all plugin events are now async`}</h4>\n    <p>{`In Apollo Server 2, some `}<a parentName=\"p\" {...{\n        \"href\": \"/integrations/plugins-event-reference/\"\n      }}>{`plugin events`}</a>{` are synchronous (their return value is not a `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`Promise`}</code>{`), and some are \"maybe-asynchronous\" (they could return a `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`Promise`}</code>{` if they wanted, but didn't have to). This means that you can't do asynchronous work in the former events, and the typings for the latter events are somewhat complex.`}</p>\n    <p>{`In Apollo Server 3, `}<em parentName=\"p\">{`almost`}</em>{` all plugin methods are always asynchronous: they always return a `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`Promise`}</code>{` type. This includes `}<a parentName=\"p\" {...{\n        \"href\": \"/integrations/plugins/#end-hooks\"\n      }}>{`end hooks`}</a>{` as well. The exceptions are `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`willResolveField`}</code>{` and its end hook and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`schemaDidLoadOrUpdate`}</code>{`, which are always synchronous.`}</p>\n    <p>{`In practice, this means that all of your plugin events should use `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`async`}</code>{` functions or methods. If you are using TypeScript, you need to do this for your code to compile.`}</p>\n    <blockquote>\n      <p parentName=\"blockquote\">{`In practice, Apollo Server generally uses `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`await`}</code>{` or `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`Promise.all`}</code>{` on values returned by plugin methods instead of an explicit `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`.then`}</code>{`. These constructs accept both `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`Promise`}</code>{`s and normal values. If you aren't using TypeScript, you might be able to get away with synchronous plugin methods for the time being.`}</p>\n    </blockquote>\n    <h4 {...{\n      \"id\": \"willsendresponse-is-called-more-consistently\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#willsendresponse-is-called-more-consistently\",\n        \"aria-label\": \"willsendresponse is called more consistently permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h4\" {...{\n        \"className\": \"language-text\"\n      }}>{`willSendResponse`}</code>{` is called more consistently`}</h4>\n    <p>{`In Apollo Server 2, some errors related to `}<a parentName=\"p\" {...{\n        \"href\": \"/performance/apq/\"\n      }}>{`persisted queries`}</a>{` invoke the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`requestDidStart`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`didEncounterError`}</code>{` plugin events `}<em parentName=\"p\">{`without`}</em>{` invoking the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`willSendResponse`}</code>{` event afterwards.`}</p>\n    <p>{`In Apollo Server 3, any request that makes it far enough to invoke `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`requestDidStart`}</code>{` also invokes `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`willSendResponse`}</code>{`. See `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/apollographql/apollo-server/pull/5287\"\n      }}>{`this PR`}</a>{` for details.`}</p>\n    <h4 {...{\n      \"id\": \"executiondidstart-can-no-longer-return-a-function\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#executiondidstart-can-no-longer-return-a-function\",\n        \"aria-label\": \"executiondidstart can no longer return a function permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h4\" {...{\n        \"className\": \"language-text\"\n      }}>{`executionDidStart`}</code>{` can no longer return a function`}</h4>\n    <p>{`In Apollo Server 2, the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`executionDidStart`}</code>{` plugin event could return nothing, an object, or a function. If a function was provided, it would be called when execution finished (one might imagine an `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`executionDidEnd`}</code>{`).`}</p>\n    <p>{`In Apollo Server 3, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`executionDidStart`}</code>{` must return either nothing or an object. If you previously returned a function, you can now return an object with an `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`executionDidEnd`}</code>{` field like so:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight has-highlighted-lines\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` server `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  schema`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`plugins`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`[`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`async`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`requestDidStart`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n      `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`return`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n        `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`async`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`executionDidStart`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`          `}<span parentName=\"span\" {...{\n              \"className\": \"token keyword\"\n            }}>{`return`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`            `}<span parentName=\"span\" {...{\n              \"className\": \"token keyword\"\n            }}>{`async`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token function\"\n            }}>{`executionDidEnd`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`              `}<span parentName=\"span\" {...{\n              \"className\": \"token comment\"\n            }}>{`// your code here`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`            `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`          `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span></span>{`        `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n      `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`]`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`For more information, you can check out the related plugin documentation on `}<a parentName=\"p\" {...{\n        \"href\": \"/integrations/plugins/#end-hooks\"\n      }}>{`end hooks`}</a>{`.`}</p>\n    <h4 {...{\n      \"id\": \"gateway-interface-renamed-and-simplified\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#gateway-interface-renamed-and-simplified\",\n        \"aria-label\": \"gateway interface renamed and simplified permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Gateway interface renamed and simplified`}</h4>\n    <p>{`In Apollo Server 2, the TypeScript type used for the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`gateway`}</code>{` constructor option is called `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`GraphQLService`}</code>{`. In Apollo Server 3, it's called `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`GatewayInterface`}</code>{`. (For now, an identical interface named `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`GraphQLService`}</code>{` continues to be exported.)`}</p>\n    <p>{`This interface now requires the following:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`The `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`stop`}</code>{` method must be present.`}</li>\n      <li parentName=\"ul\">{`The `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`executor`}</code>{` method must async`}</li>\n      <li parentName=\"ul\">{`The `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`apollo`}</code>{` option must always be passed to the `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`load`}</code>{` method.`}</li>\n    </ul>\n    <blockquote>\n      <p parentName=\"blockquote\">{`All recent versions of `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`@apollo/gateway`}</code>{` satisfy these stronger requirements.`}</p>\n    </blockquote>\n    <h3 {...{\n      \"id\": \"bad-request-errors-more-consistently-return-4xx\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#bad-request-errors-more-consistently-return-4xx\",\n        \"aria-label\": \"bad request errors more consistently return 4xx permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Bad request errors more consistently return 4xx`}</h3>\n    <p>{`In Apollo Server 2, certain poorly formatted requests receive HTTP responses with a 5xx status (indicating a server error) instead of 4xx (indicating a client error). For example, this occurs in some integrations for a missing POST body or a JSON parse error.`}</p>\n    <p>{`In Apollo Server 3, these errors are handled in a more consistent manner across integrations and consistently return HTTP responses with a 4xx status.`}</p>\n    <h3 {...{\n      \"id\": \"extensions-custom-details-on-apolloerror\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#extensions-custom-details-on-apolloerror\",\n        \"aria-label\": \"extensions custom details on apolloerror permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Extensions (custom details) on `}<code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`ApolloError`}</code></h3>\n    <h4 {...{\n      \"id\": \"initializing-an-error\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#initializing-an-error\",\n        \"aria-label\": \"initializing an error permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Initializing an error`}</h4>\n    <p>{`In Apollo Server 2, `}<a parentName=\"p\" {...{\n        \"href\": \"/data/errors/#including-custom-error-details\"\n      }}>{`error extensions`}</a>{` can be passed to the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ApolloError`}</code>{` constructor either as the third argument, `}<em parentName=\"p\">{`or`}</em>{` as an `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`extensions`}</code>{` option on the third argument.`}</p>\n    <p>{`In other words, these two lines are equivalent with Apollo Server 2:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"js\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-js line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-js\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloError`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span>{`message`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` code`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span><span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`key`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'value'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloError`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span>{`message`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` code`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span><span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`extensions`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span><span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`key`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'value'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`In Apollo Server 3, only the first line above is supported. If you try to use the second line, the constructor throws an error. Before upgrading, replace any code using the second form with the first form.`}</p>\n    <h4 {...{\n      \"id\": \"reading-error-extensions\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#reading-error-extensions\",\n        \"aria-label\": \"reading error extensions permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Reading error extensions`}</h4>\n    <p>{`In Apollo Server 2, an error extension (`}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`foo`}</code>{`) is present in two locations on an `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ApolloError`}</code>{` object (`}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`error`}</code>{`): `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`error.foo`}</code>{` `}<em parentName=\"p\">{`and`}</em>{` `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`error.extensions.foo`}</code>{`. When that object is serialized for a JSON response, the extension is `}<em parentName=\"p\">{`also`}</em>{` present in two locations in the JSON: `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`extensions.foo`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`extensions.exception.foo`}</code>{`.`}</p>\n    <p>{`In Apollo Server 3, an error extension is present in `}<em parentName=\"p\">{`one`}</em>{` `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ApolloError`}</code>{` location: `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`error.extensions.foo`}</code>{`. When the error is serialized to JSON, the extension is present only in `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`extensions.foo`}</code>{`.`}</p>\n    <p>{`See `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/apollographql/apollo-server/pull/5294\"\n      }}>{`this PR`}</a>{` for more details.`}</p>\n    <h3 {...{\n      \"id\": \"mocking\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#mocking\",\n        \"aria-label\": \"mocking permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Mocking`}</h3>\n    <p>{`In Apollo Server 2, the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`mocks`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`mockEntireSchema`}</code>{` constructor options are essentially implemented as follows:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` addMockFunctionsToSchema `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'graphql-tools'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`  `}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// v4.x`}</span>{`\n\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` mocks`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` mockEntireSchema `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` constructorOptions`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` schemaWithMocks `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`addMockFunctionsToSchema`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  schema`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`mocks`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`typeof`}</span>{` mocks `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`===`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'boolean'`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`||`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`typeof`}</span>{` mocks `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`===`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'undefined'`}</span>{`\n      `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`?`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` mocks`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`preserveResolvers`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`typeof`}</span>{` mockEntireSchema `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`===`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'undefined'`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`?`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`false`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`!`}</span>{`mockEntireSchema`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`In Apollo Server 3, we've upgraded from `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql-tools`}</code>{` v4 to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`@graphql-tools/mock`}</code>{` v8. The details of how mocking works in GraphQL Tools has changed, and the name of the function that implements it has changed too. The new implementation is as follows:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` addMocksToSchema `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'@graphql-tools/mock'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`  `}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// v8.x`}</span>{`\n\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` mocks`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` mockEntireSchema `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` constructorOptions`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` schemaWithMocks `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`addMocksToSchema`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  schema`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`mocks`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` mocks `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`===`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`true`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`||`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`typeof`}</span>{` mocks `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`===`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'undefined'`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`?`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` mocks`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`preserveResolvers`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`typeof`}</span>{` mockEntireSchema `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`===`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'undefined'`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`?`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`false`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`!`}</span>{`mockEntireSchema`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`So the name of the function has changed, and additionally, the semantics of the function have changed. You can `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.graphql-tools.com/docs/mocking/#migration-from-v7-and-below\"\n      }}>{`read the GraphQL Tools migration docs`}</a>{` to see if you use any mocking features that have changed between v4 and v8, and adjust the value of your `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`mocks`}</code>{` argument if so.`}</p>\n    <p>{`To use features of `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`addMocksToSchema`}</code>{` that require passing more options to it than the three that `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ApolloServer`}</code>{` passes through, you can use the library directly. To do so, run `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`npm install @graphql-tools/mock @graphql-tools/schema`}</code>{` in your app, and replace`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` typeDefs`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` resolvers`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` mocks `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span></span></pre></div>\n    <p>{`with`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` addMocksToSchema `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'@graphql-tools/mock'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` makeExecutableSchema `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'@graphql-tools/schema'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`schema`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`addMocksToSchema`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`schema`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`makeExecutableSchema`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` typeDefs`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` resolvers `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`mocks`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// ...`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// ...`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`Alternatively, to keep the current behavior without changing your mock functions at all, you can continue to use `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`graphql-tools`}</code>{` v4. To do this, run `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`npm install graphql-tools@v4.x`}</code>{` in your app, and replace`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`typeDefs`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` resolvers`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` mocks`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` preserveResolvers`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span></span></pre></div>\n    <p>{`with`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`import`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` makeExecutableSchema`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` addMockFunctionsToSchema `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`from`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'graphql-tools'`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n\n`}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`schema`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`addMockFunctionsToSchema`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`schema`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`makeExecutableSchema`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`typeDefs`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` resolvers`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n    mocks`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`preserveResolvers`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{`\n      `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`typeof`}</span>{` mockEntireSchema `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`===`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`'undefined'`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`?`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`false`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`!`}</span>{`mockEntireSchema`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <h3 {...{\n      \"id\": \"apollo-server-caching-test-suite-helpers\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#apollo-server-caching-test-suite-helpers\",\n        \"aria-label\": \"apollo server caching test suite helpers permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-caching`}</code>{` test suite helpers`}</h3>\n    <p>{`In Apollo Server 2, the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-caching`}</code>{` package exports functions like `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`testKeyValueCache`}</code>{`, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`testKeyValueCache_Basic`}</code>{`, and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`testKeyValueCache_Expiration`}</code>{`, which define Jest test suites. The package also exports a `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`TestableKeyValueCache`}</code>{` type that's required for these test suites to be able to flush and close the cache.`}</p>\n    <p>{`You can use this to define Jest test suites for your own implementation of the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`KeyValueCache`}</code>{` interface, although this requires intricate Jest and TypeScript config to set up.`}</p>\n    <p>{`In Apollo Server 3, these functions and type are removed. Instead, a `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`runKeyValueCacheTests`}</code>{` function is exported which can be run in any test suite (without any Jest-specific behavior). See the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-caching`}</code>{` README for more details.`}</p>\n    <h2 {...{\n      \"id\": \"changes-to-framework-integrations\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#changes-to-framework-integrations\",\n        \"aria-label\": \"changes to framework integrations permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Changes to framework integrations`}</h2>\n    <h3 {...{\n      \"id\": \"start-now-mandatory-for-non-serverless-framework-integrations\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#start-now-mandatory-for-non-serverless-framework-integrations\",\n        \"aria-label\": \"start now mandatory for non serverless framework integrations permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`start()`}</code>{` now mandatory for non-serverless framework integrations`}</h3>\n    <p>{`Apollo Server v2.22 introduced the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`server.start()`}</code>{` method for non-serverless framework integrations (Express, Fastify, Hapi, Koa, Micro, and Cloudflare). Users of these integrations were encouraged to await a call to it immediately after creating an `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ApolloServer`}</code>{` object:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`async`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`function`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`startServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` server `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`...`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`await`}</span>{` server`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`start`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n  server`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`applyMiddleware`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{` app `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`If any plugin `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`serverWillStart`}</code>{` events throw, or if the server fails to load its schema properly (for example, if the server is a gateway and cannot load its schema), then `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`await server.start()`}</code>{` will throw. This allows you to ensure that Apollo Server has successfully loaded its configuration before you start listening for HTTP requests.`}</p>\n    <p>{`In Apollo Server 2, calling this method was optional. If you didn't call it, you could still call methods like `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`applyMiddleware`}</code>{` and start listening. If a startup failure occurred, all GraphQL requests would fail.`}</p>\n    <p>{`In Apollo Server 3, you `}<em parentName=\"p\">{`must`}</em>{` `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`await server.start()`}</code>{` immediately after `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`new ApolloServer`}</code>{` before calling `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`applyMiddleware`}</code>{` (or `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`getMiddleware`}</code>{` or `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`getHandler`}</code>{`, depending on the integration). Note that you don't have to call it before calling the testing method `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`executeOperation`}</code>{`. Otherwise, that method will throw.`}</p>\n    <p>{`This does not apply to the batteries-included `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server`}</code>{` package (the server is started as part of the async method `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`server.listen()`}</code>{`) or to serverless framework integrations.`}</p>\n    <h3 {...{\n      \"id\": \"peer-deps-instead-of-direct-deps\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#peer-deps-instead-of-direct-deps\",\n        \"aria-label\": \"peer deps instead of direct deps permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Peer deps instead of direct deps`}</h3>\n    <p>{`In Apollo Server 2, the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-express`}</code>{`, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-koa`}</code>{`, and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-micro`}</code>{` packages have `}<em parentName=\"p\">{`direct`}</em>{` dependencies on `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`express`}</code>{`, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`koa`}</code>{`, and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`micro`}</code>{` respectively, and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-fastify`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-hapi`}</code>{` have no dependency on `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`fastify`}</code>{`, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`hapi`}</code>{`, or `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`@hapi/hapi`}</code>{`.`}</p>\n    <p>{`In Apollo Server 3, these packages have `}<em parentName=\"p\">{`peer`}</em>{` dependencies on their corresponding framework packages. This means that you need to install a version of that package of your choice yourself in your app (though most likely that was already the case).`}</p>\n    <h3 {...{\n      \"id\": \"cors--is-now-the-default\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#cors--is-now-the-default\",\n        \"aria-label\": \"cors  is now the default permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`CORS `}<code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`*`}</code>{` is now the default`}</h3>\n    <p>{`In Apollo Server 2, the default CORS configuration for most packages is to serve an `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`access-control-allow-origin: *`}</code>{` header for all responses.`}</p>\n    <p>{`However, this is not the case in Apollo Server 2 for `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-lambda`}</code>{`, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-cloud-functions`}</code>{`, or `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-azure-functions`}</code>{` (these serve no CORS headers by default), or for `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-koa`}</code>{` (this serves an `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`access-control-allow-origin`}</code>{` header with a value matching the request's origin by default).`}</p>\n    <p>{`In Apollo Server 3, all implementations of `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ApolloServer`}</code>{` that support CORS configuration have the same default of `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`access-control-allow-origin: *`}</code>{`.`}</p>\n    <p>{`To use your framework's Apollo Server 2 default CORS behavior in your Apollo Server 3 application, provide the options specified below to the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`createHandler`}</code>{`/`}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`getMiddleware`}</code>{` method.`}</p>\n    <h4 {...{\n      \"id\": \"lambda--cloud-functions\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#lambda--cloud-functions\",\n        \"aria-label\": \"lambda  cloud functions permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Lambda / Cloud Functions`}</h4>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"js\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-js line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-js\"\n        }}>{`server`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`createHandler`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span><span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`expressGetMiddlewareOptions`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span><span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`cors`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`false`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span></span></pre></div>\n    <h4 {...{\n      \"id\": \"azure-functions\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#azure-functions\",\n        \"aria-label\": \"azure functions permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Azure Functions`}</h4>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"js\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-js line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-js\"\n        }}>{`server`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`createHandler`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span><span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`cors`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`false`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span></span></pre></div>\n    <h4 {...{\n      \"id\": \"koa\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#koa\",\n        \"aria-label\": \"koa permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Koa`}</h4>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"js\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-js line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-js\"\n        }}>{`server`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`getMiddleware`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span><span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`cors`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span></span></pre></div>\n    <blockquote>\n      <p parentName=\"blockquote\"><code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`apollo-server-micro`}</code>{` and `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`apollo-server-cloudflare`}</code>{` do not support CORS configuration in Apollo Server 2 `}<em parentName=\"p\">{`or`}</em>{` 3.`}</p>\n    </blockquote>\n    <h3 {...{\n      \"id\": \"apollo-server-express\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#apollo-server-express\",\n        \"aria-label\": \"apollo server express permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-express`}</code></h3>\n    <p>{`In Apollo Server 2, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-express`}</code>{` officially supports both the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`express`}</code>{` framework and the older `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.npmjs.com/package/connect\"\n      }}><code parentName=\"a\" {...{\n          \"className\": \"language-text\"\n        }}>{`connect`}</code></a>{` framework.`}</p>\n    <p>{`In Apollo Server 3, we no longer guarantee future support for `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`connect`}</code>{`. We do still run a test suite against it and we will try not to `}<em parentName=\"p\">{`unintentionally`}</em>{` break functionality under `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`connect`}</code>{`, but if future changes are easier to implement in an Express-only fashion, we reserve the right to break `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`connect`}</code>{` compatibility within Apollo Server 3.`}</p>\n    <h3 {...{\n      \"id\": \"apollo-server-lambda\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#apollo-server-lambda\",\n        \"aria-label\": \"apollo server lambda permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-lambda`}</code></h3>\n    <h4 {...{\n      \"id\": \"now-based-on-express\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#now-based-on-express\",\n        \"aria-label\": \"now based on express permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Now based on Express`}</h4>\n    <p>{`In Apollo Server 2, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-lambda`}</code>{` implements parsing AWS Lambda events and performing standard web framework logic inside the package itself. As Lambda added new capabilities, the logic had to adapt, and as Apollo Server added new features, they had to be implemented from scratch in `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-lambda`}</code>{`. Additionally, there was no way to add additional HTTP functionality (e.g., \"middleware\") to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-lambda`}</code>{`.`}</p>\n    <p>{`In Apollo Server 3, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-lambda`}</code>{` is implemented as a wrapper around `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-express`}</code>{`, using an `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.npmjs.com/package/@vendia/serverless-express\"\n      }}>{`actively maintained package`}</a>{` to parse AWS Lambda events into Express requests. This simplifies the implementation and enables us to support new Lambda integrations such as Application Load Balancers. Additionally, because it now uses Express internally, you can extend HTTP functionality via Express middleware using the new `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`expressAppFromMiddleware`}</code>{` option to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`createHandler`}</code>{`.`}</p>\n    <h4 {...{\n      \"id\": \"createhandler-arguments-changed\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#createhandler-arguments-changed\",\n        \"aria-label\": \"createhandler arguments changed permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h4\" {...{\n        \"className\": \"language-text\"\n      }}>{`createHandler`}</code>{` arguments changed`}</h4>\n    <p>{`As part of the update described `}<a parentName=\"p\" {...{\n        \"href\": \"#now-based-on-express\"\n      }}>{`above`}</a>{`, the arguments to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`createHandler`}</code>{` have changed. Instead of taking only `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`cors`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`onHealthCheck`}</code>{`, the method takes an `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`expressGetMiddlewareOptions`}</code>{` option, which is an object that supports any of the options that the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-express`}</code>{` `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`applyMiddleware`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`getMiddleware`}</code>{` can take (other than `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`app`}</code>{`).`}</p>\n    <p>{`For example, instead of:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"js\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-js line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-js\"\n        }}>{`server`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`createHandler`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`onHealthCheck`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span></span></pre></div>\n    <p>{`you now write`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"js\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-js line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-js\"\n        }}>{`server`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`createHandler`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span><span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`expressGetMiddlewareOptions`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`onHealthCheck`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{`\\``}</code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span></span></pre></div>\n    <h4 {...{\n      \"id\": \"handler-is-always-async\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#handler-is-always-async\",\n        \"aria-label\": \"handler is always async permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Handler is always async`}</h4>\n    <p>{`In Apollo Server 2, the handler returned by `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`createHandler`}</code>{` can be called either as a function that takes a callback as a third argument, or (starting with Apollo Server v2.21.2) as an async function that returns a `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`Promise`}</code>{`.`}</p>\n    <p>{`In Apollo Server 3, the handler returned by `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`createHandler`}</code>{` is always an async function that returns a `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`Promise`}</code>{`. Any callback passed in will be ignored.`}</p>\n    <p>{`All currently supported Lambda runtimes support async handlers. However, if you are currently wrapping the handler returned from `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`createHandler`}</code>{` in your own larger handler and passing a callback into it, this no longer works. Rewrite your outer handler to be an async function and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`await`}</code>{` the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`Promise`}</code>{` returned from the handler returned by `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`createHandler`}</code>{`.`}</p>\n    <p>{`For example, if your server looked like this:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` apolloHandler `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` server`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`createHandler`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n\nexports`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function-variable function\"\n          }}>{`handler`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`function`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token parameter\"\n          }}>{`event`}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{` context`}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{` callback`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`doSomethingFirst`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`apolloHandler`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span>{`event`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` context`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token parameter\"\n          }}>{`error`}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{` result`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=>`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`doSomethingLater`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`callback`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span>{`error`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` result`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`you can change it to look like this:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"javascript\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-javascript line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-javascript\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` apolloHandler `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` server`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`createHandler`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n\nexports`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function-variable function\"\n          }}>{`handler`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`async`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`function`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token parameter\"\n          }}>{`event`}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{` context`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`doSomethingFirst`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`try`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`return`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`await`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`apolloHandler`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span>{`event`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{` context`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`finally`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`doSomethingLater`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <h3 {...{\n      \"id\": \"apollo-server-cloud-functions\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#apollo-server-cloud-functions\",\n        \"aria-label\": \"apollo server cloud functions permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-cloud-functions`}</code></h3>\n    <p>{`In Apollo Server 2, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-cloud-functions`}</code>{` implements standard web framework logic inside the package itself. Even though the Node.js API for Google Cloud Functions provides its request and response in the form of Express request and response objects, Apollo Server 2 has a bespoke implementation unrelated to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-express`}</code>{` and does not support all features supported by `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-express`}</code>{`. Additionally, there is no way to add additional HTTP functionality (e.g., \"middleware\") to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-cloud-functions`}</code>{`.`}</p>\n    <p>{`In Apollo Server 3, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-cloud-functions`}</code>{` is implemented on top of `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-express`}</code>{` and supports all features supported by `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-express`}</code>{`. You can add additional HTTP functionality via Express middleware using the new `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`expressAppFromMiddleware`}</code>{` option to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`createHandler`}</code>{`.`}</p>\n    <p>{`As part of this, the arguments to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`createHandler`}</code>{` have changed. Instead of taking only `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`cors`}</code>{`, it takes an `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`expressGetMiddlewareOptions`}</code>{` option, which is an object taking any of the options that the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-express`}</code>{` `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`applyMiddleware`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`getMiddleware`}</code>{` can take (other than `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`app`}</code>{`). For example, instead of:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"js\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-js line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-js\"\n        }}>{`server`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`createHandler`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`cors`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span></span></pre></div>\n    <p>{`you now write:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"js\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-js line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-js\"\n        }}>{`server`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`.`}</span><span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`createHandler`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span><span parentName=\"code\" {...{\n            \"className\": \"token literal-property property\"\n          }}>{`expressGetMiddlewareOptions`}</span><span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`cors`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span></span></pre></div>\n    <h3 {...{\n      \"id\": \"apollo-server-fastify\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#apollo-server-fastify\",\n        \"aria-label\": \"apollo server fastify permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-fastify`}</code></h3>\n    <p>{`In Apollo Server 2, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-fastify`}</code>{` supports Fastify v2 and does `}<em parentName=\"p\">{`not`}</em>{` support Fastify v3. There is no dependency or peer dependency making this requirement clear.`}</p>\n    <p>{`In Apollo Server 3, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-fastify`}</code>{` supports Fastify v3. It has not been tested with versions of Fastify older than v3. There is a peer dependency on `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`fastify`}</code>{` v3.`}</p>\n    <h3 {...{\n      \"id\": \"apollo-server-hapi\",\n      \"style\": {\n        \"position\": \"relative\"\n      }\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#apollo-server-hapi\",\n        \"aria-label\": \"apollo server hapi permalink\",\n        \"className\": \"anchor before\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a><code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-hapi`}</code></h3>\n    <p>{`We are not certain exactly which versions of Hapi are supported by `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-hapi`}</code>{` in Apollo Server 2. We `}<em parentName=\"p\">{`are`}</em>{` certain that only `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`@hapi/hapi`}</code>{` v20.1.2 and higher are supported by Node 16, and Apollo Server 2 was not tested with versions of `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`hapi`}</code>{` newer than v17.8.5. (Hapi's package name changed from `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`hapi`}</code>{` to `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`@hapi/hapi`}</code>{` between v18.1.0 and v18.2.0.)`}</p>\n    <p>{`In Apollo Server 3, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`apollo-server-hapi`}</code>{` works with `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`@hapi/hapi`}</code>{` v20.1.2 and Node 16. It is not tested with older versions of Hapi. Note that the Hapi project believes that `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/hapijs/hapi/issues/4114\"\n      }}>{`all versions older than v20 have security issues`}</a>{`.`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}