{"expireTime":9007200901521026000,"key":"transformer-remark-markdown-html-ast-764e9039b2602be45fcfc6f02adc0fdb-gatsby-remark-autolink-headersgatsby-remark-copy-linked-filesgatsby-remark-mermaidgatsby-remark-code-titlesgatsby-remark-prismjsgatsby-remark-rewrite-relative-linksgatsby-remark-check-links-","val":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Apollo Server integrates seamlessly with Apollo Studio to help you monitor the execution of your GraphQL operations. It also provides configurable mechanisms for logging each phase of a GraphQL operation.","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":205,"offset":205}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":205,"offset":205}}},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Using Federation? Check out the documentation for ","position":{"start":{"line":4,"column":3,"offset":209},"end":{"line":4,"column":53,"offset":259}}},{"type":"element","tagName":"a","properties":{"href":"https://www.apollographql.com/docs/federation/metrics/"},"children":[{"type":"text","value":"federated tracing","position":{"start":{"line":4,"column":54,"offset":260},"end":{"line":4,"column":71,"offset":277}}}],"position":{"start":{"line":4,"column":53,"offset":259},"end":{"line":4,"column":128,"offset":334}}},{"type":"text","value":".","position":{"start":{"line":4,"column":128,"offset":334},"end":{"line":4,"column":129,"offset":335}}}],"position":{"start":{"line":4,"column":3,"offset":209},"end":{"line":4,"column":129,"offset":335}}},{"type":"text","value":"\n"}],"position":{"start":{"line":4,"column":1,"offset":207},"end":{"line":4,"column":129,"offset":335}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"sending-metrics-to-apollo-studio","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#sending-metrics-to-apollo-studio","aria-label":"sending metrics to apollo studio permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Sending metrics to Apollo Studio","position":{"start":{"line":6,"column":4,"offset":340},"end":{"line":6,"column":36,"offset":372}}}],"position":{"start":{"line":6,"column":1,"offset":337},"end":{"line":6,"column":36,"offset":372}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.apollographql.com/docs/studio/"},"children":[{"type":"text","value":"Apollo Studio","position":{"start":{"line":8,"column":2,"offset":375},"end":{"line":8,"column":15,"offset":388}}}],"position":{"start":{"line":8,"column":1,"offset":374},"end":{"line":8,"column":60,"offset":433}}},{"type":"text","value":" provides an integrated hub for all of your GraphQL performance data. It ","position":{"start":{"line":8,"column":60,"offset":433},"end":{"line":8,"column":133,"offset":506}}},{"type":"element","tagName":"a","properties":{"href":"https://www.apollographql.com/docs/studio/performance/"},"children":[{"type":"text","value":"aggregates and displays information","position":{"start":{"line":8,"column":134,"offset":507},"end":{"line":8,"column":169,"offset":542}}}],"position":{"start":{"line":8,"column":133,"offset":506},"end":{"line":8,"column":226,"offset":599}}},{"type":"text","value":" for your schema, queries, requests, and errors. You can also configure alerts that support ","position":{"start":{"line":8,"column":226,"offset":599},"end":{"line":8,"column":318,"offset":691}}},{"type":"element","tagName":"a","properties":{"href":"https://www.apollographql.com/docs/studio/slack-integration/"},"children":[{"type":"text","value":"Slack","position":{"start":{"line":8,"column":319,"offset":692},"end":{"line":8,"column":324,"offset":697}}}],"position":{"start":{"line":8,"column":318,"offset":691},"end":{"line":8,"column":387,"offset":760}}},{"type":"text","value":" and ","position":{"start":{"line":8,"column":387,"offset":760},"end":{"line":8,"column":392,"offset":765}}},{"type":"element","tagName":"a","properties":{"href":"https://www.apollographql.com/docs/studio/datadog-integration/"},"children":[{"type":"text","value":"Datadog","position":{"start":{"line":8,"column":393,"offset":766},"end":{"line":8,"column":400,"offset":773}}}],"position":{"start":{"line":8,"column":392,"offset":765},"end":{"line":8,"column":465,"offset":838}}},{"type":"text","value":" integrations.","position":{"start":{"line":8,"column":465,"offset":838},"end":{"line":8,"column":479,"offset":852}}}],"position":{"start":{"line":8,"column":1,"offset":374},"end":{"line":8,"column":479,"offset":852}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"connecting-to-apollo-studio","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#connecting-to-apollo-studio","aria-label":"connecting to apollo studio permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Connecting to Apollo Studio","position":{"start":{"line":10,"column":5,"offset":858},"end":{"line":10,"column":32,"offset":885}}}],"position":{"start":{"line":10,"column":1,"offset":854},"end":{"line":10,"column":32,"offset":885}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To connect Apollo Server to Apollo Studio, first ","position":{"start":{"line":12,"column":1,"offset":887},"end":{"line":12,"column":50,"offset":936}}},{"type":"element","tagName":"a","properties":{"href":"https://www.apollographql.com/docs/studio/setup-analytics/#pushing-traces-from-apollo-server"},"children":[{"type":"text","value":"obtain a graph API key","position":{"start":{"line":12,"column":51,"offset":937},"end":{"line":12,"column":73,"offset":959}}}],"position":{"start":{"line":12,"column":50,"offset":936},"end":{"line":12,"column":168,"offset":1054}}},{"type":"text","value":". To provide this key to Apollo Server, assign it to the ","position":{"start":{"line":12,"column":168,"offset":1054},"end":{"line":12,"column":225,"offset":1111}}},{"type":"raw","value":"<code class=\"language-text\">APOLLO_KEY</code>","position":{"start":{"line":12,"column":225,"offset":1111},"end":{"line":12,"column":237,"offset":1123}}},{"type":"text","value":" environment variable in your server's environment.","position":{"start":{"line":12,"column":237,"offset":1123},"end":{"line":12,"column":288,"offset":1174}}}],"position":{"start":{"line":12,"column":1,"offset":887},"end":{"line":12,"column":288,"offset":1174}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Then associate your server instance with a particular graph ID and ","position":{"start":{"line":14,"column":1,"offset":1176},"end":{"line":14,"column":68,"offset":1243}}},{"type":"element","tagName":"a","properties":{"href":"https://www.apollographql.com/docs/studio/schema/registry/#managing-environments-with-variants"},"children":[{"type":"text","value":"graph variant","position":{"start":{"line":14,"column":69,"offset":1244},"end":{"line":14,"column":82,"offset":1257}}}],"position":{"start":{"line":14,"column":68,"offset":1243},"end":{"line":14,"column":179,"offset":1354}}},{"type":"text","value":" by  setting the ","position":{"start":{"line":14,"column":179,"offset":1354},"end":{"line":14,"column":196,"offset":1371}}},{"type":"raw","value":"<code class=\"language-text\">APOLLO_GRAPH_ID</code>","position":{"start":{"line":14,"column":196,"offset":1371},"end":{"line":14,"column":213,"offset":1388}}},{"type":"text","value":" and ","position":{"start":{"line":14,"column":213,"offset":1388},"end":{"line":14,"column":218,"offset":1393}}},{"type":"raw","value":"<code class=\"language-text\">APOLLO_GRAPH_VARIANT</code>","position":{"start":{"line":14,"column":218,"offset":1393},"end":{"line":14,"column":240,"offset":1415}}},{"type":"text","value":" environment variables.","position":{"start":{"line":14,"column":240,"offset":1415},"end":{"line":14,"column":263,"offset":1438}}}],"position":{"start":{"line":14,"column":1,"offset":1176},"end":{"line":14,"column":263,"offset":1438}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can set environment variable values on the command line as seen below, or with the ","position":{"start":{"line":16,"column":1,"offset":1440},"end":{"line":16,"column":88,"offset":1527}}},{"type":"element","tagName":"a","properties":{"href":"https://www.npmjs.com/package/dotenv"},"children":[{"type":"raw","value":"<code class=\"language-text\">dotenv</code>","position":{"start":{"line":16,"column":89,"offset":1528},"end":{"line":16,"column":97,"offset":1536}}},{"type":"text","value":" npm package","position":{"start":{"line":16,"column":97,"offset":1536},"end":{"line":16,"column":109,"offset":1548}}}],"position":{"start":{"line":16,"column":88,"offset":1527},"end":{"line":16,"column":148,"offset":1587}}},{"type":"text","value":" (or similar).","position":{"start":{"line":16,"column":148,"offset":1587},"end":{"line":16,"column":162,"offset":1601}}}],"position":{"start":{"line":16,"column":1,"offset":1440},"end":{"line":16,"column":162,"offset":1601}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\"># Replace the example values below with values specific to your use case.</span>\n<span class=\"token assign-left variable\">APOLLO_KEY</span><span class=\"token operator\">=</span>YOUR_API_KEY <span class=\"token assign-left variable\">APOLLO_GRAPH_ID</span><span class=\"token operator\">=</span>mygraph <span class=\"token assign-left variable\">APOLLO_GRAPH_VARIANT</span><span class=\"token operator\">=</span>development <span class=\"token function\">node</span> start-server.js</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>","position":{"start":{"line":18,"column":1,"offset":1603},"end":{"line":21,"column":4,"offset":1790}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"identifying-distinct-clients","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#identifying-distinct-clients","aria-label":"identifying distinct clients permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Identifying distinct clients","position":{"start":{"line":23,"column":5,"offset":1796},"end":{"line":23,"column":33,"offset":1824}}}],"position":{"start":{"line":23,"column":1,"offset":1792},"end":{"line":23,"column":33,"offset":1824}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Apollo Studio's ","position":{"start":{"line":25,"column":1,"offset":1826},"end":{"line":25,"column":17,"offset":1842}}},{"type":"element","tagName":"a","properties":{"href":"https://www.apollographql.com/docs/studio/client-awareness/"},"children":[{"type":"text","value":"client awareness feature","position":{"start":{"line":25,"column":18,"offset":1843},"end":{"line":25,"column":42,"offset":1867}}}],"position":{"start":{"line":25,"column":17,"offset":1842},"end":{"line":25,"column":104,"offset":1929}}},{"type":"text","value":" enables you to view metrics for distinct versions\nof your clients. To enable this, your clients need to include some or all of the following identifying information in the headers of GraphQL requests they\nsend to Apollo Server:","position":{"start":{"line":25,"column":104,"offset":1929},"end":{"line":27,"column":23,"offset":2157}}}],"position":{"start":{"line":25,"column":1,"offset":1826},"end":{"line":27,"column":23,"offset":2157}}},{"type":"text","value":"\n"},{"type":"element","tagName":"table","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"thead","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"th","properties":{"align":null},"children":[{"type":"text","value":"Identifier","position":{"start":{"line":29,"column":3,"offset":2161},"end":{"line":29,"column":13,"offset":2171}}}],"position":{"start":{"line":29,"column":1,"offset":2159},"end":{"line":29,"column":15,"offset":2173}}},{"type":"text","value":"\n"},{"type":"element","tagName":"th","properties":{"align":null},"children":[{"type":"text","value":"Header Name (default)","position":{"start":{"line":29,"column":16,"offset":2174},"end":{"line":29,"column":37,"offset":2195}}}],"position":{"start":{"line":29,"column":15,"offset":2173},"end":{"line":29,"column":39,"offset":2197}}},{"type":"text","value":"\n"},{"type":"element","tagName":"th","properties":{"align":null},"children":[{"type":"text","value":"Example Value","position":{"start":{"line":29,"column":40,"offset":2198},"end":{"line":29,"column":53,"offset":2211}}}],"position":{"start":{"line":29,"column":39,"offset":2197},"end":{"line":29,"column":55,"offset":2213}}},{"type":"text","value":"\n"}],"position":{"start":{"line":29,"column":1,"offset":2159},"end":{"line":29,"column":55,"offset":2213}}},{"type":"text","value":"\n"}],"position":{"start":{"line":29,"column":1,"offset":2159},"end":{"line":29,"column":55,"offset":2213}}},{"type":"text","value":"\n"},{"type":"element","tagName":"tbody","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"td","properties":{"align":null},"children":[{"type":"text","value":"Client name","position":{"start":{"line":31,"column":3,"offset":2233},"end":{"line":31,"column":14,"offset":2244}}}],"position":{"start":{"line":31,"column":1,"offset":2231},"end":{"line":31,"column":16,"offset":2246}}},{"type":"text","value":"\n"},{"type":"element","tagName":"td","properties":{"align":null},"children":[{"type":"raw","value":"<code class=\"language-text\">apollographql-client-name</code>","position":{"start":{"line":31,"column":17,"offset":2247},"end":{"line":31,"column":44,"offset":2274}}}],"position":{"start":{"line":31,"column":16,"offset":2246},"end":{"line":31,"column":46,"offset":2276}}},{"type":"text","value":"\n"},{"type":"element","tagName":"td","properties":{"align":null},"children":[{"type":"raw","value":"<code class=\"language-text\">iOS Native</code>","position":{"start":{"line":31,"column":47,"offset":2277},"end":{"line":31,"column":59,"offset":2289}}}],"position":{"start":{"line":31,"column":46,"offset":2276},"end":{"line":31,"column":61,"offset":2291}}},{"type":"text","value":"\n"}],"position":{"start":{"line":31,"column":1,"offset":2231},"end":{"line":31,"column":61,"offset":2291}}},{"type":"text","value":"\n"},{"type":"element","tagName":"tr","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"td","properties":{"align":null},"children":[{"type":"text","value":"Client version","position":{"start":{"line":32,"column":3,"offset":2294},"end":{"line":32,"column":17,"offset":2308}}}],"position":{"start":{"line":32,"column":1,"offset":2292},"end":{"line":32,"column":19,"offset":2310}}},{"type":"text","value":"\n"},{"type":"element","tagName":"td","properties":{"align":null},"children":[{"type":"raw","value":"<code class=\"language-text\">apollographql-client-version</code>","position":{"start":{"line":32,"column":20,"offset":2311},"end":{"line":32,"column":50,"offset":2341}}}],"position":{"start":{"line":32,"column":19,"offset":2310},"end":{"line":32,"column":52,"offset":2343}}},{"type":"text","value":"\n"},{"type":"element","tagName":"td","properties":{"align":null},"children":[{"type":"raw","value":"<code class=\"language-text\">1.0.1</code>","position":{"start":{"line":32,"column":53,"offset":2344},"end":{"line":32,"column":60,"offset":2351}}}],"position":{"start":{"line":32,"column":52,"offset":2343},"end":{"line":32,"column":62,"offset":2353}}},{"type":"text","value":"\n"}],"position":{"start":{"line":32,"column":1,"offset":2292},"end":{"line":32,"column":62,"offset":2353}}},{"type":"text","value":"\n"}],"position":{"start":{"line":31,"column":1,"offset":2231},"end":{"line":32,"column":62,"offset":2353}}},{"type":"text","value":"\n"}],"position":{"start":{"line":29,"column":1,"offset":2159},"end":{"line":32,"column":62,"offset":2353}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Each of these fields can have any string value that's useful for your application. To simplify the browsing and sorting of your client data in Studio, a three-part version number (such as ","position":{"start":{"line":34,"column":1,"offset":2355},"end":{"line":34,"column":189,"offset":2543}}},{"type":"raw","value":"<code class=\"language-text\">1.0.1</code>","position":{"start":{"line":34,"column":189,"offset":2543},"end":{"line":34,"column":196,"offset":2550}}},{"type":"text","value":") is recommended for client versions.","position":{"start":{"line":34,"column":196,"offset":2550},"end":{"line":34,"column":233,"offset":2587}}}],"position":{"start":{"line":34,"column":1,"offset":2355},"end":{"line":34,"column":233,"offset":2587}}},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Client version is ","position":{"start":{"line":36,"column":3,"offset":2591},"end":{"line":36,"column":21,"offset":2609}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"not","position":{"start":{"line":36,"column":23,"offset":2611},"end":{"line":36,"column":26,"offset":2614}}}],"position":{"start":{"line":36,"column":21,"offset":2609},"end":{"line":36,"column":28,"offset":2616}}},{"type":"text","value":" tied to your current version of Apollo Client (or any other client library). You define this value and are responsible for updating it whenever meaningful changes are made to your client.","position":{"start":{"line":36,"column":28,"offset":2616},"end":{"line":36,"column":216,"offset":2804}}}],"position":{"start":{"line":36,"column":3,"offset":2591},"end":{"line":36,"column":216,"offset":2804}}},{"type":"text","value":"\n"}],"position":{"start":{"line":36,"column":1,"offset":2589},"end":{"line":36,"column":216,"offset":2804}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"setting-client-awareness-headers-in-apollo-client","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#setting-client-awareness-headers-in-apollo-client","aria-label":"setting client awareness headers in apollo client permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Setting client awareness headers in Apollo Client","position":{"start":{"line":38,"column":6,"offset":2811},"end":{"line":38,"column":55,"offset":2860}}}],"position":{"start":{"line":38,"column":1,"offset":2806},"end":{"line":38,"column":55,"offset":2860}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you're using Apollo Client, you can set default values for client name and\nversion in the ","position":{"start":{"line":40,"column":1,"offset":2862},"end":{"line":41,"column":16,"offset":2955}}},{"type":"element","tagName":"a","properties":{"href":"https://www.apollographql.com/docs/react/api/apollo-client/#the-apolloclient-constructor"},"children":[{"type":"raw","value":"<code class=\"language-text\">ApolloClient</code>","position":{"start":{"line":41,"column":17,"offset":2956},"end":{"line":41,"column":31,"offset":2970}}},{"type":"text","value":" constructor","position":{"start":{"line":41,"column":31,"offset":2970},"end":{"line":41,"column":43,"offset":2982}}}],"position":{"start":{"line":41,"column":16,"offset":2955},"end":{"line":41,"column":134,"offset":3073}}},{"type":"text","value":". All requests to Apollo Server will automatically include these values in the appropriate headers.","position":{"start":{"line":41,"column":134,"offset":3073},"end":{"line":41,"column":233,"offset":3172}}}],"position":{"start":{"line":40,"column":1,"offset":2862},"end":{"line":41,"column":233,"offset":3172}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"using-custom-headers","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#using-custom-headers","aria-label":"using custom headers permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Using custom headers","position":{"start":{"line":43,"column":6,"offset":3179},"end":{"line":43,"column":26,"offset":3199}}}],"position":{"start":{"line":43,"column":1,"offset":3174},"end":{"line":43,"column":26,"offset":3199}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"For more advanced cases, or to use headers other than the default headers, pass a ","position":{"start":{"line":45,"column":1,"offset":3201},"end":{"line":45,"column":83,"offset":3283}}},{"type":"raw","value":"<code class=\"language-text\">generateClientInfo</code>","position":{"start":{"line":45,"column":83,"offset":3283},"end":{"line":45,"column":103,"offset":3303}}},{"type":"text","value":" function into the ","position":{"start":{"line":45,"column":103,"offset":3303},"end":{"line":45,"column":122,"offset":3322}}},{"type":"element","tagName":"a","properties":{"href":"/v2/api/plugin/usage-reporting/"},"children":[{"type":"text","value":"usage reporting plugin","position":{"start":{"line":45,"column":123,"offset":3323},"end":{"line":45,"column":145,"offset":3345}}}],"position":{"start":{"line":45,"column":122,"offset":3322},"end":{"line":45,"column":178,"offset":3378}}},{"type":"text","value":":","position":{"start":{"line":45,"column":178,"offset":3378},"end":{"line":45,"column":179,"offset":3379}}}],"position":{"start":{"line":45,"column":1,"offset":3201},"end":{"line":45,"column":179,"offset":3379}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> ApolloServer <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"apollo-server\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> ApolloServerPluginUsageReporting <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"apollo-server-core\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  typeDefs<span class=\"token punctuation\">,</span>\n  resolvers<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token function\">ApolloServerPluginUsageReporting</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      <span class=\"token function-variable function\">generateClientInfo</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        request</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">const</span> headers <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>http <span class=\"token operator\">&amp;&amp;</span> request<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>headers<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token literal-property property\">clientName</span><span class=\"token operator\">:</span> headers<span class=\"token punctuation\">[</span><span class=\"token string\">'apollographql-client-name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token literal-property property\">clientVersion</span><span class=\"token operator\">:</span> headers<span class=\"token punctuation\">[</span><span class=\"token string\">'apollographql-client-version'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token literal-property property\">clientName</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Unknown Client\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">            <span class=\"token literal-property property\">clientVersion</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Unversioned\"</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">        <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span>    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> url <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">ðŸš€  Server ready at </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":47,"column":1,"offset":3381},"end":{"line":79,"column":4,"offset":4195}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"logging","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#logging","aria-label":"logging permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Logging","position":{"start":{"line":81,"column":4,"offset":4200},"end":{"line":81,"column":11,"offset":4207}}}],"position":{"start":{"line":81,"column":1,"offset":4197},"end":{"line":81,"column":11,"offset":4207}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can set up fine-grained operation logging in Apollo Server by defining a custom ","position":{"start":{"line":83,"column":1,"offset":4209},"end":{"line":83,"column":85,"offset":4293}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"plugin","position":{"start":{"line":83,"column":87,"offset":4295},"end":{"line":83,"column":93,"offset":4301}}}],"position":{"start":{"line":83,"column":85,"offset":4293},"end":{"line":83,"column":95,"offset":4303}}},{"type":"text","value":". Apollo Server plugins enable you to perform actions in response to individual phases of the GraphQL request lifecycle, such as whenever a GraphQL request is received from a client.","position":{"start":{"line":83,"column":95,"offset":4303},"end":{"line":83,"column":277,"offset":4485}}}],"position":{"start":{"line":83,"column":1,"offset":4209},"end":{"line":83,"column":277,"offset":4485}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The example below defines a plugin that responds to three different operation events. As it shows, you provide an array of your defined ","position":{"start":{"line":85,"column":1,"offset":4487},"end":{"line":85,"column":137,"offset":4623}}},{"type":"raw","value":"<code class=\"language-text\">plugins</code>","position":{"start":{"line":85,"column":137,"offset":4623},"end":{"line":85,"column":146,"offset":4632}}},{"type":"text","value":" to the ","position":{"start":{"line":85,"column":146,"offset":4632},"end":{"line":85,"column":154,"offset":4640}}},{"type":"raw","value":"<code class=\"language-text\">ApolloServer</code>","position":{"start":{"line":85,"column":154,"offset":4640},"end":{"line":85,"column":168,"offset":4654}}},{"type":"text","value":" constructor.","position":{"start":{"line":85,"column":168,"offset":4654},"end":{"line":85,"column":181,"offset":4667}}}],"position":{"start":{"line":85,"column":1,"offset":4487},"end":{"line":85,"column":181,"offset":4667}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"For a list of available lifecycle events and their descriptions, see ","position":{"start":{"line":87,"column":1,"offset":4669},"end":{"line":87,"column":70,"offset":4738}}},{"type":"element","tagName":"a","properties":{"href":"/v2/integrations/plugins/"},"children":[{"type":"text","value":"Plugins","position":{"start":{"line":87,"column":71,"offset":4739},"end":{"line":87,"column":78,"offset":4746}}}],"position":{"start":{"line":87,"column":70,"offset":4738},"end":{"line":87,"column":105,"offset":4773}}},{"type":"text","value":".","position":{"start":{"line":87,"column":105,"offset":4773},"end":{"line":87,"column":106,"offset":4774}}}],"position":{"start":{"line":87,"column":1,"offset":4669},"end":{"line":87,"column":106,"offset":4774}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myPlugin <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\n  <span class=\"token comment\">// Fires whenever a GraphQL request is received from a client.</span>\n  <span class=\"token function\">requestDidStart</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestContext</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Request started! Query:\\n'</span> <span class=\"token operator\">+</span>\n      requestContext<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token comment\">// Fires whenever Apollo Server will parse a GraphQL</span>\n      <span class=\"token comment\">// request to create its associated document AST.</span>\n      <span class=\"token function\">parsingDidStart</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestContext</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Parsing started!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token comment\">// Fires whenever Apollo Server will validate a</span>\n      <span class=\"token comment\">// request's document AST against your GraphQL schema.</span>\n      <span class=\"token function\">validationDidStart</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestContext</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Validation started!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  typeDefs<span class=\"token punctuation\">,</span>\n  resolvers<span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    myPlugin\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":89,"column":1,"offset":4776},"end":{"line":122,"column":4,"offset":5530}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":123,"column":1,"offset":5531}}}}