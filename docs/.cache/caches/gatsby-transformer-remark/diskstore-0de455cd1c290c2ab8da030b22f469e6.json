{"expireTime":9007200901521028000,"key":"transformer-remark-markdown-html-ast-f7abec59c8f15ed7a1d3388e8ce07636-gatsby-remark-autolink-headersgatsby-remark-copy-linked-filesgatsby-remark-mermaidgatsby-remark-code-titlesgatsby-remark-prismjsgatsby-remark-rewrite-relative-linksgatsby-remark-check-links-","val":{"type":"root","children":[{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Plugins are available in Apollo Server 2.2.x and later.","position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":58,"offset":58}}}],"position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":58,"offset":58}}},{"type":"text","value":"\n"}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":58,"offset":58}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Plugins","position":{"start":{"line":4,"column":3,"offset":62},"end":{"line":4,"column":10,"offset":69}}}],"position":{"start":{"line":4,"column":1,"offset":60},"end":{"line":4,"column":12,"offset":71}}},{"type":"text","value":" enable you to extend Apollo Server's core functionality by performing\ncustom operations in response to certain events. Currently, these events correspond\nto individual phases of the GraphQL request lifecycle, and to the startup of Apollo Server itself.","position":{"start":{"line":4,"column":12,"offset":71},"end":{"line":6,"column":99,"offset":324}}}],"position":{"start":{"line":4,"column":1,"offset":60},"end":{"line":6,"column":99,"offset":324}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"For example, a basic logging plugin might log the GraphQL query string associated\nwith each request that's sent to Apollo Server.","position":{"start":{"line":8,"column":1,"offset":326},"end":{"line":9,"column":48,"offset":455}}}],"position":{"start":{"line":8,"column":1,"offset":326},"end":{"line":9,"column":48,"offset":455}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"creating-a-plugin","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#creating-a-plugin","aria-label":"creating a plugin permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Creating a plugin","position":{"start":{"line":11,"column":4,"offset":460},"end":{"line":11,"column":21,"offset":477}}}],"position":{"start":{"line":11,"column":1,"offset":457},"end":{"line":11,"column":21,"offset":477}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Plugins are JavaScript objects that implement one or more functions that respond to\nevents. Here's a basic plugin that responds to the ","position":{"start":{"line":13,"column":1,"offset":479},"end":{"line":14,"column":52,"offset":614}}},{"type":"raw","value":"<code class=\"language-text\">serverWillStart</code>","position":{"start":{"line":14,"column":52,"offset":614},"end":{"line":14,"column":69,"offset":631}}},{"type":"text","value":" event:","position":{"start":{"line":14,"column":69,"offset":631},"end":{"line":14,"column":76,"offset":638}}}],"position":{"start":{"line":13,"column":1,"offset":479},"end":{"line":14,"column":76,"offset":638}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-code-title\">index.js</div>"},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myPlugin <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">serverWillStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Server starting up!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":16,"column":1,"offset":640},"end":{"line":22,"column":4,"offset":753}}},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you're using TypeScript to create a plugin, the ","position":{"start":{"line":24,"column":3,"offset":757},"end":{"line":24,"column":54,"offset":808}}},{"type":"raw","value":"<code class=\"language-text\">apollo-server-plugin-base</code>","position":{"start":{"line":24,"column":54,"offset":808},"end":{"line":24,"column":81,"offset":835}}},{"type":"text","value":" module exports the ","position":{"start":{"line":24,"column":81,"offset":835},"end":{"line":24,"column":101,"offset":855}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/apollographql/apollo-server/blob/main/packages/apollo-server-plugin-base/src/index.ts"},"children":[{"type":"raw","value":"<code class=\"language-text\">ApolloServerPlugin</code>","position":{"start":{"line":24,"column":102,"offset":856},"end":{"line":24,"column":122,"offset":876}}},{"type":"text","value":" interface","position":{"start":{"line":24,"column":122,"offset":876},"end":{"line":24,"column":132,"offset":886}}}],"position":{"start":{"line":24,"column":101,"offset":855},"end":{"line":24,"column":239,"offset":993}}},{"type":"text","value":" for plugins to implement.","position":{"start":{"line":24,"column":239,"offset":993},"end":{"line":24,"column":265,"offset":1019}}}],"position":{"start":{"line":24,"column":3,"offset":757},"end":{"line":24,"column":265,"offset":1019}}},{"type":"text","value":"\n"}],"position":{"start":{"line":24,"column":1,"offset":755},"end":{"line":24,"column":265,"offset":1019}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You can define a plugin in the same file where you initialize Apollo Server, or\nyou can export it as a separate module:","position":{"start":{"line":26,"column":1,"offset":1021},"end":{"line":27,"column":40,"offset":1140}}}],"position":{"start":{"line":26,"column":1,"offset":1021},"end":{"line":27,"column":40,"offset":1140}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-code-title\">myplugin.js</div>"},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">serverWillStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Server starting up!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":29,"column":1,"offset":1142},"end":{"line":35,"column":4,"offset":1258}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To create a plugin that accepts options, create a function that accepts an\n","position":{"start":{"line":37,"column":1,"offset":1260},"end":{"line":38,"column":1,"offset":1335}}},{"type":"raw","value":"<code class=\"language-text\">options</code>","position":{"start":{"line":38,"column":1,"offset":1335},"end":{"line":38,"column":10,"offset":1344}}},{"type":"text","value":" object and returns a properly structured plugin object, like so:","position":{"start":{"line":38,"column":10,"offset":1344},"end":{"line":38,"column":75,"offset":1409}}}],"position":{"start":{"line":37,"column":1,"offset":1260},"end":{"line":38,"column":75,"offset":1409}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-code-title\">myplugin.js</div>"},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">options</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">serverWillStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">.</span>logMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":40,"column":1,"offset":1411},"end":{"line":48,"column":4,"offset":1559}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"responding-to-events","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#responding-to-events","aria-label":"responding to events permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Responding to events","position":{"start":{"line":51,"column":5,"offset":1566},"end":{"line":51,"column":25,"offset":1586}}}],"position":{"start":{"line":51,"column":1,"offset":1562},"end":{"line":51,"column":25,"offset":1586}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A plugin specifies exactly which ","position":{"start":{"line":53,"column":1,"offset":1588},"end":{"line":53,"column":34,"offset":1621}}},{"type":"element","tagName":"a","properties":{"href":"#apollo-server-event-reference"},"children":[{"type":"text","value":"events","position":{"start":{"line":53,"column":35,"offset":1622},"end":{"line":53,"column":41,"offset":1628}}}],"position":{"start":{"line":53,"column":34,"offset":1621},"end":{"line":53,"column":74,"offset":1661}}},{"type":"text","value":"\nit responds to by implementing functions that correspond to those events.\nThe plugin in the examples above responds to the ","position":{"start":{"line":53,"column":74,"offset":1661},"end":{"line":55,"column":50,"offset":1785}}},{"type":"raw","value":"<code class=\"language-text\">serverWillStart</code>","position":{"start":{"line":55,"column":50,"offset":1785},"end":{"line":55,"column":67,"offset":1802}}},{"type":"text","value":" event, which\nfires when Apollo Server is preparing to start up.","position":{"start":{"line":55,"column":67,"offset":1802},"end":{"line":56,"column":51,"offset":1866}}}],"position":{"start":{"line":53,"column":1,"offset":1588},"end":{"line":56,"column":51,"offset":1866}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"A plugin can respond to any combination of supported events.","position":{"start":{"line":58,"column":1,"offset":1868},"end":{"line":58,"column":61,"offset":1928}}}],"position":{"start":{"line":58,"column":1,"offset":1868},"end":{"line":58,"column":61,"offset":1928}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"responding-to-request-lifecycle-events","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#responding-to-request-lifecycle-events","aria-label":"responding to request lifecycle events permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Responding to request lifecycle events","position":{"start":{"line":60,"column":6,"offset":1935},"end":{"line":60,"column":44,"offset":1973}}}],"position":{"start":{"line":60,"column":1,"offset":1930},"end":{"line":60,"column":44,"offset":1973}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Plugins can respond to the following events associated with the GraphQL request\nlifecycle:","position":{"start":{"line":62,"column":1,"offset":1975},"end":{"line":63,"column":11,"offset":2065}}}],"position":{"start":{"line":62,"column":1,"offset":1975},"end":{"line":63,"column":11,"offset":2065}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#parsingdidstart"},"children":[{"type":"raw","value":"<code class=\"language-text\">parsingDidStart</code>","position":{"start":{"line":65,"column":4,"offset":2070},"end":{"line":65,"column":21,"offset":2087}}}],"position":{"start":{"line":65,"column":3,"offset":2069},"end":{"line":65,"column":40,"offset":2106}}}],"position":{"start":{"line":65,"column":1,"offset":2067},"end":{"line":65,"column":40,"offset":2106}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#validationdidstart"},"children":[{"type":"raw","value":"<code class=\"language-text\">validationDidStart</code>","position":{"start":{"line":66,"column":4,"offset":2110},"end":{"line":66,"column":24,"offset":2130}}}],"position":{"start":{"line":66,"column":3,"offset":2109},"end":{"line":66,"column":46,"offset":2152}}}],"position":{"start":{"line":66,"column":1,"offset":2107},"end":{"line":66,"column":46,"offset":2152}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#didresolveoperation"},"children":[{"type":"raw","value":"<code class=\"language-text\">didResolveOperation</code>","position":{"start":{"line":67,"column":4,"offset":2156},"end":{"line":67,"column":25,"offset":2177}}}],"position":{"start":{"line":67,"column":3,"offset":2155},"end":{"line":67,"column":48,"offset":2200}}}],"position":{"start":{"line":67,"column":1,"offset":2153},"end":{"line":67,"column":48,"offset":2200}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#responseforoperation"},"children":[{"type":"raw","value":"<code class=\"language-text\">responseForOperation</code>","position":{"start":{"line":68,"column":4,"offset":2204},"end":{"line":68,"column":26,"offset":2226}}}],"position":{"start":{"line":68,"column":3,"offset":2203},"end":{"line":68,"column":50,"offset":2250}}}],"position":{"start":{"line":68,"column":1,"offset":2201},"end":{"line":68,"column":50,"offset":2250}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#executiondidstart"},"children":[{"type":"raw","value":"<code class=\"language-text\">executionDidStart</code>","position":{"start":{"line":69,"column":4,"offset":2254},"end":{"line":69,"column":23,"offset":2273}}}],"position":{"start":{"line":69,"column":3,"offset":2253},"end":{"line":69,"column":44,"offset":2294}}}],"position":{"start":{"line":69,"column":1,"offset":2251},"end":{"line":69,"column":44,"offset":2294}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#didencountererrors"},"children":[{"type":"raw","value":"<code class=\"language-text\">didEncounterErrors</code>","position":{"start":{"line":70,"column":4,"offset":2298},"end":{"line":70,"column":24,"offset":2318}}}],"position":{"start":{"line":70,"column":3,"offset":2297},"end":{"line":70,"column":46,"offset":2340}}}],"position":{"start":{"line":70,"column":1,"offset":2295},"end":{"line":70,"column":46,"offset":2340}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#willsendresponse"},"children":[{"type":"raw","value":"<code class=\"language-text\">willSendResponse</code>","position":{"start":{"line":71,"column":4,"offset":2344},"end":{"line":71,"column":22,"offset":2362}}}],"position":{"start":{"line":71,"column":3,"offset":2343},"end":{"line":71,"column":42,"offset":2382}}}],"position":{"start":{"line":71,"column":1,"offset":2341},"end":{"line":71,"column":42,"offset":2382}}},{"type":"text","value":"\n"}],"position":{"start":{"line":65,"column":1,"offset":2067},"end":{"line":71,"column":42,"offset":2382}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"However","position":{"start":{"line":73,"column":3,"offset":2386},"end":{"line":73,"column":10,"offset":2393}}}],"position":{"start":{"line":73,"column":1,"offset":2384},"end":{"line":73,"column":12,"offset":2395}}},{"type":"text","value":", the way you define these functions is slightly different from the\n","position":{"start":{"line":73,"column":12,"offset":2395},"end":{"line":74,"column":1,"offset":2463}}},{"type":"raw","value":"<code class=\"language-text\">serverWillStart</code>","position":{"start":{"line":74,"column":1,"offset":2463},"end":{"line":74,"column":18,"offset":2480}}},{"type":"text","value":" example above. First, your plugin must define the ","position":{"start":{"line":74,"column":18,"offset":2480},"end":{"line":74,"column":69,"offset":2531}}},{"type":"raw","value":"<code class=\"language-text\">requestDidStart</code>","position":{"start":{"line":74,"column":69,"offset":2531},"end":{"line":74,"column":86,"offset":2548}}},{"type":"text","value":" function:","position":{"start":{"line":74,"column":86,"offset":2548},"end":{"line":74,"column":96,"offset":2558}}}],"position":{"start":{"line":73,"column":1,"offset":2384},"end":{"line":74,"column":96,"offset":2558}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myPlugin <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">requestDidStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Request started!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":76,"column":1,"offset":2560},"end":{"line":82,"column":4,"offset":2655}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The ","position":{"start":{"line":84,"column":1,"offset":2657},"end":{"line":84,"column":5,"offset":2661}}},{"type":"raw","value":"<code class=\"language-text\">requestDidStart</code>","position":{"start":{"line":84,"column":5,"offset":2661},"end":{"line":84,"column":22,"offset":2678}}},{"type":"text","value":" event fires whenever Apollo Server receives a GraphQL request,\n","position":{"start":{"line":84,"column":22,"offset":2678},"end":{"line":85,"column":1,"offset":2742}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"before","position":{"start":{"line":85,"column":2,"offset":2743},"end":{"line":85,"column":8,"offset":2749}}}],"position":{"start":{"line":85,"column":1,"offset":2742},"end":{"line":85,"column":9,"offset":2750}}},{"type":"text","value":" any of the lifecycle events listed above. You can respond to this event\njust like you respond to ","position":{"start":{"line":85,"column":9,"offset":2750},"end":{"line":86,"column":26,"offset":2848}}},{"type":"raw","value":"<code class=\"language-text\">serverWillStart</code>","position":{"start":{"line":86,"column":26,"offset":2848},"end":{"line":86,"column":43,"offset":2865}}},{"type":"text","value":", but you ","position":{"start":{"line":86,"column":43,"offset":2865},"end":{"line":86,"column":53,"offset":2875}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"also","position":{"start":{"line":86,"column":54,"offset":2876},"end":{"line":86,"column":58,"offset":2880}}}],"position":{"start":{"line":86,"column":53,"offset":2875},"end":{"line":86,"column":59,"offset":2881}}},{"type":"text","value":" use this function\nto define responses for a request's lifecycle events, like so:","position":{"start":{"line":86,"column":59,"offset":2881},"end":{"line":87,"column":64,"offset":2963}}}],"position":{"start":{"line":84,"column":1,"offset":2657},"end":{"line":87,"column":64,"offset":2963}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myPlugin <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">requestDidStart</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestContext</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Request started!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n\n      <span class=\"token function\">parsingDidStart</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestContext</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Parsing started!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token function\">validationDidStart</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestContext</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Validation started!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":89,"column":1,"offset":2965},"end":{"line":107,"column":4,"offset":3282}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"As shown, the ","position":{"start":{"line":109,"column":1,"offset":3284},"end":{"line":109,"column":15,"offset":3298}}},{"type":"raw","value":"<code class=\"language-text\">requestDidStart</code>","position":{"start":{"line":109,"column":15,"offset":3298},"end":{"line":109,"column":32,"offset":3315}}},{"type":"text","value":" function can optionally return an object that\ndefines functions that respond to request lifecycle events. This structure\norganizes and encapsulates all of your plugin's request lifecycle logic, making it\neasier to reason about.","position":{"start":{"line":109,"column":32,"offset":3315},"end":{"line":112,"column":24,"offset":3543}}}],"position":{"start":{"line":109,"column":1,"offset":3284},"end":{"line":112,"column":24,"offset":3543}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"request-lifecycle-event-flow","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#request-lifecycle-event-flow","aria-label":"request lifecycle event flow permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Request lifecycle event flow","position":{"start":{"line":114,"column":5,"offset":3549},"end":{"line":114,"column":33,"offset":3577}}}],"position":{"start":{"line":114,"column":1,"offset":3545},"end":{"line":114,"column":33,"offset":3577}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The following diagram illustrates the sequence of events that fire for each request. Each of these events is documented ","position":{"start":{"line":116,"column":1,"offset":3579},"end":{"line":116,"column":121,"offset":3699}}},{"type":"element","tagName":"a","properties":{"href":"#request-lifecycle-events"},"children":[{"type":"text","value":"below","position":{"start":{"line":116,"column":122,"offset":3700},"end":{"line":116,"column":127,"offset":3705}}}],"position":{"start":{"line":116,"column":121,"offset":3699},"end":{"line":116,"column":155,"offset":3733}}},{"type":"text","value":".","position":{"start":{"line":116,"column":155,"offset":3733},"end":{"line":116,"column":156,"offset":3734}}}],"position":{"start":{"line":116,"column":1,"offset":3579},"end":{"line":116,"column":156,"offset":3734}}},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Any event below that can result in \"Success\" can also result in an error. Whenever an error occurs, the ","position":{"start":{"line":118,"column":3,"offset":3738},"end":{"line":118,"column":107,"offset":3842}}},{"type":"raw","value":"<code class=\"language-text\">didEncounterErrors</code>","position":{"start":{"line":118,"column":107,"offset":3842},"end":{"line":118,"column":127,"offset":3862}}},{"type":"text","value":" event fires and the remainder of the \"Success\" path does ","position":{"start":{"line":118,"column":127,"offset":3862},"end":{"line":118,"column":185,"offset":3920}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"not","position":{"start":{"line":118,"column":186,"offset":3921},"end":{"line":118,"column":189,"offset":3924}}}],"position":{"start":{"line":118,"column":185,"offset":3920},"end":{"line":118,"column":190,"offset":3925}}},{"type":"text","value":".","position":{"start":{"line":118,"column":190,"offset":3925},"end":{"line":118,"column":191,"offset":3926}}}],"position":{"start":{"line":118,"column":3,"offset":3738},"end":{"line":118,"column":191,"offset":3926}}},{"type":"text","value":"\n"}],"position":{"start":{"line":118,"column":1,"offset":3736},"end":{"line":118,"column":191,"offset":3926}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"mermaid\" data-processed=\"true\"><svg id=\"mermaid-1646780037128\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" height=\"996\" style=\"max-width: 503.71875px;\" viewBox=\"0 0 503.71875 996\"><style>#mermaid-1646780037128 {font-family:\"trebuchet ms\",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1646780037128 .error-icon{fill:#552222;}#mermaid-1646780037128 .error-text{fill:#552222;stroke:#552222;}#mermaid-1646780037128 .edge-thickness-normal{stroke-width:2px;}#mermaid-1646780037128 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1646780037128 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1646780037128 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1646780037128 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1646780037128 .marker{fill:#333333;stroke:#333333;}#mermaid-1646780037128 .marker.cross{stroke:#333333;}#mermaid-1646780037128 svg{font-family:\"trebuchet ms\",verdana,arial,sans-serif;font-size:16px;}#mermaid-1646780037128 .label{font-family:\"trebuchet ms\",verdana,arial,sans-serif;color:#333;}#mermaid-1646780037128 .cluster-label text{fill:#333;}#mermaid-1646780037128 .cluster-label span{color:#333;}#mermaid-1646780037128 .label text,#mermaid-1646780037128 span{fill:#333;color:#333;}#mermaid-1646780037128 .node rect,#mermaid-1646780037128 .node circle,#mermaid-1646780037128 .node ellipse,#mermaid-1646780037128 .node polygon,#mermaid-1646780037128 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1646780037128 .node .label{text-align:center;}#mermaid-1646780037128 .node.clickable{cursor:pointer;}#mermaid-1646780037128 .arrowheadPath{fill:#333333;}#mermaid-1646780037128 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-1646780037128 .flowchart-link{stroke:#333333;fill:none;}#mermaid-1646780037128 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-1646780037128 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-1646780037128 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-1646780037128 .cluster text{fill:#333;}#mermaid-1646780037128 .cluster span{color:#333;}#mermaid-1646780037128 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:\"trebuchet ms\",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1646780037128 .node rect,#mermaid-1646780037128 .node circle,#mermaid-1646780037128 .node polygon,#mermaid-1646780037128 .node path{stroke-width:2px;stroke:#3f20ba;fill:#F4F6F8;}#mermaid-1646780037128 .node.secondary rect,#mermaid-1646780037128 .node.secondary circle,#mermaid-1646780037128 .node.secondary polygon,#mermaid-1646780037128 .node.tertiary rect,#mermaid-1646780037128 .node.tertiary circle,#mermaid-1646780037128 .node.tertiary polygon{fill:white;}#mermaid-1646780037128 .node.secondary rect,#mermaid-1646780037128 .node.secondary circle,#mermaid-1646780037128 .node.secondary polygon{stroke:#832363;}#mermaid-1646780037128 .cluster rect,#mermaid-1646780037128 .node.tertiary rect,#mermaid-1646780037128 .node.tertiary circle,#mermaid-1646780037128 .node.tertiary polygon{stroke:#1d7b78;}#mermaid-1646780037128 .cluster rect{fill:none;stroke-width:2px;}#mermaid-1646780037128 .label,#mermaid-1646780037128 .edgeLabel{background-color:white;line-height:1.3;}#mermaid-1646780037128 .edgeLabel rect{background:none;fill:none;}#mermaid-1646780037128 .messageText,#mermaid-1646780037128 .noteText,#mermaid-1646780037128 .loopText{font-size:12px;stroke:none;}#mermaid-1646780037128 g rect,#mermaid-1646780037128 polygon.labelBox{stroke-width:2px;}#mermaid-1646780037128 g rect.actor{stroke:#1d7b78;fill:white;}#mermaid-1646780037128 g rect.note{stroke:#832363;fill:white;}#mermaid-1646780037128 g line.loopLine,#mermaid-1646780037128 polygon.labelBox{stroke:#3f20ba;fill:white;}#mermaid-1646780037128 :root{--mermaid-font-family:\"trebuchet ms\",verdana,arial,sans-serif;}</style><g><g class=\"output\"><g class=\"clusters\"></g><g class=\"edgePaths\"><g class=\"edgePath LS-request LE-resolveSource\" id=\"L-request-resolveSource\" style=\"opacity: 1;\"><path class=\"path\" d=\"M297.62890625,47L297.62890625,51.166666666666664C297.62890625,55.333333333333336,297.62890625,63.666666666666664,297.62890625,72C297.62890625,80.33333333333333,297.62890625,88.66666666666667,297.62890625,92.83333333333333L297.62890625,97\" marker-end=\"url(#arrowhead66)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead66\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-resolveSource LE-parsing\" id=\"L-resolveSource-parsing\" style=\"opacity: 1;\"><path class=\"path\" d=\"M297.62890625,136L297.62890625,141.83333333333334C297.62890625,147.66666666666666,297.62890625,159.33333333333334,297.62890625,171C297.62890625,182.66666666666666,297.62890625,194.33333333333334,297.62890625,200.16666666666666L297.62890625,206\" marker-end=\"url(#arrowhead67)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead67\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-parsing LE-validation\" id=\"L-parsing-validation\" style=\"opacity: 1;\"><path class=\"path\" d=\"M297.62890625,245L297.62890625,250.83333333333334C297.62890625,256.6666666666667,297.62890625,268.3333333333333,297.62890625,280C297.62890625,291.6666666666667,297.62890625,303.3333333333333,297.62890625,309.1666666666667L297.62890625,315\" marker-end=\"url(#arrowhead68)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead68\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-validation LE-resolveOperation\" id=\"L-validation-resolveOperation\" style=\"opacity: 1;\"><path class=\"path\" d=\"M297.62890625,354L297.62890625,359.8333333333333C297.62890625,365.6666666666667,297.62890625,377.3333333333333,297.62890625,389C297.62890625,400.6666666666667,297.62890625,412.3333333333333,297.62890625,418.1666666666667L297.62890625,424\" marker-end=\"url(#arrowhead69)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead69\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-resolveOperation LE-response\" id=\"L-resolveOperation-response\" style=\"opacity: 1;\"><path class=\"path\" d=\"M297.62890625,463L297.62890625,468.8333333333333C297.62890625,474.6666666666667,297.62890625,486.3333333333333,297.62890625,498C297.62890625,509.6666666666667,297.62890625,521.3333333333334,297.62890625,527.1666666666666L297.62890625,533\" marker-end=\"url(#arrowhead70)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead70\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-errors LE-send\" id=\"L-errors-send\" style=\"opacity: 1;\"><path class=\"path\" d=\"M86.640625,899L86.640625,903.1666666666666C86.640625,907.3333333333334,86.640625,915.6666666666666,97.28113295880149,924C107.92164091760299,932.3333333333334,129.202656835206,940.6666666666666,139.8431647940075,944.8333333333334L150.48367275280899,949\" marker-end=\"url(#arrowhead71)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead71\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-response LE-send\" id=\"L-response-send\" style=\"opacity: 1;\"><path class=\"path\" d=\"M262.79809346330273,572L252.3786195527523,577.8333333333334C241.95914564220183,583.6666666666666,221.1201978211009,595.3333333333334,210.70072391055047,610.25C200.28125,625.1666666666666,200.28125,643.3333333333334,200.28125,661.5C200.28125,679.6666666666666,200.28125,697.8333333333334,200.28125,716C200.28125,734.1666666666666,200.28125,752.3333333333334,200.28125,770.5C200.28125,788.6666666666666,200.28125,806.8333333333334,200.28125,825C200.28125,843.1666666666666,200.28125,861.3333333333334,200.28125,877.8333333333334C200.28125,894.3333333333334,200.28125,909.1666666666666,200.28125,920.75C200.28125,932.3333333333334,200.28125,940.6666666666666,200.28125,944.8333333333334L200.28125,949\" marker-end=\"url(#arrowhead72)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead72\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-response LE-execution\" id=\"L-response-execution\" style=\"opacity: 1;\"><path class=\"path\" d=\"M317.71452121559633,572L323.72303851299694,577.8333333333334C329.73155581039754,583.6666666666666,341.74859040519874,595.3333333333334,347.7571077025994,607C353.765625,618.6666666666666,353.765625,630.3333333333334,353.765625,636.1666666666666L353.765625,642\" marker-end=\"url(#arrowhead73)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead73\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-execution LE-send\" id=\"L-execution-send\" style=\"opacity: 1;\"><path class=\"path\" d=\"M334.45011467889907,681L328.67197056574923,686.8333333333334C322.8938264525994,692.6666666666666,311.3375382262997,704.3333333333334,305.55939411314984,719.25C299.78125,734.1666666666666,299.78125,752.3333333333334,299.78125,770.5C299.78125,788.6666666666666,299.78125,806.8333333333334,299.78125,825C299.78125,843.1666666666666,299.78125,861.3333333333334,299.78125,877.8333333333334C299.78125,894.3333333333334,299.78125,909.1666666666666,290.4647705992509,920.75C281.1482911985019,932.3333333333334,262.51533239700376,940.6666666666666,253.1988529962547,944.8333333333334L243.8823735955056,949\" marker-end=\"url(#arrowhead74)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead74\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-execution LE-resolveField\" id=\"L-execution-resolveField\" style=\"opacity: 1;\"><path class=\"path\" d=\"M373.08113532110093,681L378.85927943425077,686.8333333333334C384.6374235474006,692.6666666666666,396.1937117737003,704.3333333333334,401.97185588685016,716C407.75,727.6666666666666,407.75,739.3333333333334,407.75,745.1666666666666L407.75,751\" marker-end=\"url(#arrowhead75)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead75\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g></g><g class=\"edgeLabels\"><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-request-resolveSource\" class=\"edgeLabel L-LS-request' L-LE-resolveSource\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(297.62890625,171)\" style=\"opacity: 1;\"><g transform=\"translate(-26.984375,-10)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"53.96875\" height=\"20\"></rect><foreignObject width=\"53.96875\" height=\"20\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-resolveSource-parsing\" class=\"edgeLabel L-LS-resolveSource' L-LE-parsing\">Success</span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(297.62890625,280)\" style=\"opacity: 1;\"><g transform=\"translate(-26.984375,-10)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"53.96875\" height=\"20\"></rect><foreignObject width=\"53.96875\" height=\"20\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-parsing-validation\" class=\"edgeLabel L-LS-parsing' L-LE-validation\">Success</span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(297.62890625,389)\" style=\"opacity: 1;\"><g transform=\"translate(-26.984375,-10)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"53.96875\" height=\"20\"></rect><foreignObject width=\"53.96875\" height=\"20\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-validation-resolveOperation\" class=\"edgeLabel L-LS-validation' L-LE-resolveOperation\">Success</span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(297.62890625,498)\" style=\"opacity: 1;\"><g transform=\"translate(-26.984375,-10)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"53.96875\" height=\"20\"></rect><foreignObject width=\"53.96875\" height=\"20\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-resolveOperation-response\" class=\"edgeLabel L-LS-resolveOperation' L-LE-response\">Success</span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-errors-send\" class=\"edgeLabel L-LS-errors' L-LE-send\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(200.28125,770.5)\" style=\"opacity: 1;\"><g transform=\"translate(-66.7265625,-10)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"133.453125\" height=\"20\"></rect><foreignObject width=\"133.453125\" height=\"20\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-response-send\" class=\"edgeLabel L-LS-response' L-LE-send\">Response provided</span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(353.765625,607)\" style=\"opacity: 1;\"><g transform=\"translate(-76.9921875,-10)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"153.984375\" height=\"20\"></rect><foreignObject width=\"153.984375\" height=\"20\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-response-execution\" class=\"edgeLabel L-LS-response' L-LE-execution\">No response provided</span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(299.78125,825)\" style=\"opacity: 1;\"><g transform=\"translate(-26.984375,-10)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"53.96875\" height=\"20\"></rect><foreignObject width=\"53.96875\" height=\"20\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-execution-send\" class=\"edgeLabel L-LS-execution' L-LE-send\">Success</span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(407.75,716)\" style=\"opacity: 1;\"><g transform=\"translate(-87.96875,-10)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"175.9375\" height=\"20\"></rect><foreignObject width=\"175.9375\" height=\"20\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-execution-resolveField\" class=\"edgeLabel L-LS-execution' L-LE-resolveField\">(Fires once per resolver)</span></div></foreignObject></g></g></g><g class=\"nodes\"><g class=\"node default\" id=\"flowchart-request-23\" transform=\"translate(297.62890625,27.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-66.2265625\" y=\"-19.5\" width=\"132.453125\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-56.2265625,-9.5)\"><foreignObject width=\"112.453125\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">requestDidStart</div></foreignObject></g></g></g><g class=\"node default\" id=\"flowchart-resolveSource-24\" transform=\"translate(297.62890625,116.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-72.3359375\" y=\"-19.5\" width=\"144.671875\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-62.3359375,-9.5)\"><foreignObject width=\"124.671875\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">didResolveSource</div></foreignObject></g></g></g><g class=\"node default\" id=\"flowchart-parsing-26\" transform=\"translate(297.62890625,225.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-67.765625\" y=\"-19.5\" width=\"135.53125\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-57.765625,-9.5)\"><foreignObject width=\"115.53125\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">parsingDidStart*</div></foreignObject></g></g></g><g class=\"node default\" id=\"flowchart-validation-28\" transform=\"translate(297.62890625,334.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-77.625\" y=\"-19.5\" width=\"155.25\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-67.625,-9.5)\"><foreignObject width=\"135.25\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">validationDidStart*</div></foreignObject></g></g></g><g class=\"node default\" id=\"flowchart-resolveOperation-30\" transform=\"translate(297.62890625,443.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-84.03125\" y=\"-19.5\" width=\"168.0625\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-74.03125,-9.5)\"><foreignObject width=\"148.0625\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">didResolveOperation</div></foreignObject></g></g></g><g class=\"node default\" id=\"flowchart-response-32\" transform=\"translate(297.62890625,552.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-88.6796875\" y=\"-19.5\" width=\"177.359375\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-78.6796875,-9.5)\"><foreignObject width=\"157.359375\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">responseForOperation</div></foreignObject></g></g></g><g class=\"node default\" id=\"flowchart-execution-33\" transform=\"translate(353.765625,661.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-77.2734375\" y=\"-19.5\" width=\"154.546875\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-67.2734375,-9.5)\"><foreignObject width=\"134.546875\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">executionDidStart*</div></foreignObject></g></g></g><g class=\"node default\" id=\"flowchart-resolveField-34\" transform=\"translate(407.75,770.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-70.7421875\" y=\"-19.5\" width=\"141.484375\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-60.7421875,-9.5)\"><foreignObject width=\"121.484375\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">willResolveField*</div></foreignObject></g></g></g><g class=\"node secondary\" id=\"flowchart-errors-35\" transform=\"translate(86.640625,879.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-78.640625\" y=\"-19.5\" width=\"157.28125\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-68.640625,-9.5)\"><foreignObject width=\"137.28125\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">didEncounterErrors</div></foreignObject></g></g></g><g class=\"node default\" id=\"flowchart-send-37\" transform=\"translate(200.28125,968.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-72.9765625\" y=\"-19.5\" width=\"145.953125\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-62.9765625,-9.5)\"><foreignObject width=\"125.953125\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">willSendResponse</div></foreignObject></g></g></g></g></g></g></svg></div>","position":{"start":{"line":120,"column":1,"offset":3928},"end":{"line":138,"column":4,"offset":4613}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"raw","value":"<sup>","position":{"start":{"line":140,"column":1,"offset":4615},"end":{"line":140,"column":6,"offset":4620}}},{"type":"text","value":"*The indicated events also support ","position":{"start":{"line":140,"column":6,"offset":4620},"end":{"line":140,"column":41,"offset":4655}}},{"type":"raw","value":"<a href=\"#end-hooks\">","position":{"start":{"line":140,"column":41,"offset":4655},"end":{"line":140,"column":62,"offset":4676}}},{"type":"text","value":"end hooks","position":{"start":{"line":140,"column":62,"offset":4676},"end":{"line":140,"column":71,"offset":4685}}},{"type":"raw","value":"</a>","position":{"start":{"line":140,"column":71,"offset":4685},"end":{"line":140,"column":75,"offset":4689}}},{"type":"text","value":" that are called when their associated step ","position":{"start":{"line":140,"column":75,"offset":4689},"end":{"line":140,"column":119,"offset":4733}}},{"type":"raw","value":"<em>","position":{"start":{"line":140,"column":119,"offset":4733},"end":{"line":140,"column":123,"offset":4737}}},{"type":"text","value":"completes","position":{"start":{"line":140,"column":123,"offset":4737},"end":{"line":140,"column":132,"offset":4746}}},{"type":"raw","value":"</em>","position":{"start":{"line":140,"column":132,"offset":4746},"end":{"line":140,"column":137,"offset":4751}}},{"type":"text","value":".","position":{"start":{"line":140,"column":137,"offset":4751},"end":{"line":140,"column":138,"offset":4752}}},{"type":"raw","value":"</sup>","position":{"start":{"line":140,"column":138,"offset":4752},"end":{"line":140,"column":144,"offset":4758}}}],"position":{"start":{"line":140,"column":1,"offset":4615},"end":{"line":140,"column":144,"offset":4758}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"end-hooks","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#end-hooks","aria-label":"end hooks permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"End hooks","position":{"start":{"line":142,"column":5,"offset":4764},"end":{"line":142,"column":14,"offset":4773}}}],"position":{"start":{"line":142,"column":1,"offset":4760},"end":{"line":142,"column":14,"offset":4773}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Event handlers for the following events can optionally return a function\nthat is invoked after the corresponding lifecycle phase ","position":{"start":{"line":144,"column":1,"offset":4775},"end":{"line":145,"column":57,"offset":4904}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"ends","position":{"start":{"line":145,"column":58,"offset":4905},"end":{"line":145,"column":62,"offset":4909}}}],"position":{"start":{"line":145,"column":57,"offset":4904},"end":{"line":145,"column":63,"offset":4910}}},{"type":"text","value":":","position":{"start":{"line":145,"column":63,"offset":4910},"end":{"line":145,"column":64,"offset":4911}}}],"position":{"start":{"line":144,"column":1,"offset":4775},"end":{"line":145,"column":64,"offset":4911}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#parsingdidstart"},"children":[{"type":"raw","value":"<code class=\"language-text\">parsingDidStart</code>","position":{"start":{"line":147,"column":4,"offset":4916},"end":{"line":147,"column":21,"offset":4933}}}],"position":{"start":{"line":147,"column":3,"offset":4915},"end":{"line":147,"column":40,"offset":4952}}}],"position":{"start":{"line":147,"column":1,"offset":4913},"end":{"line":147,"column":40,"offset":4952}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#validationdidstart"},"children":[{"type":"raw","value":"<code class=\"language-text\">validationDidStart</code>","position":{"start":{"line":148,"column":4,"offset":4956},"end":{"line":148,"column":24,"offset":4976}}}],"position":{"start":{"line":148,"column":3,"offset":4955},"end":{"line":148,"column":46,"offset":4998}}}],"position":{"start":{"line":148,"column":1,"offset":4953},"end":{"line":148,"column":46,"offset":4998}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#executiondidstart"},"children":[{"type":"raw","value":"<code class=\"language-text\">executionDidStart</code>","position":{"start":{"line":149,"column":4,"offset":5002},"end":{"line":149,"column":23,"offset":5021}}}],"position":{"start":{"line":149,"column":3,"offset":5001},"end":{"line":149,"column":44,"offset":5042}}},{"type":"text","value":" (this handler can alternatively return an ","position":{"start":{"line":149,"column":44,"offset":5042},"end":{"line":149,"column":87,"offset":5085}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"object","position":{"start":{"line":149,"column":88,"offset":5086},"end":{"line":149,"column":94,"offset":5092}}}],"position":{"start":{"line":149,"column":87,"offset":5085},"end":{"line":149,"column":95,"offset":5093}}},{"type":"text","value":" containing an ","position":{"start":{"line":149,"column":95,"offset":5093},"end":{"line":149,"column":110,"offset":5108}}},{"type":"raw","value":"<code class=\"language-text\">executionDidEnd</code>","position":{"start":{"line":149,"column":110,"offset":5108},"end":{"line":149,"column":127,"offset":5125}}},{"type":"text","value":" function)","position":{"start":{"line":149,"column":127,"offset":5125},"end":{"line":149,"column":137,"offset":5135}}}],"position":{"start":{"line":149,"column":1,"offset":4999},"end":{"line":149,"column":137,"offset":5135}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"#willresolvefield"},"children":[{"type":"raw","value":"<code class=\"language-text\">willResolveField</code>","position":{"start":{"line":150,"column":4,"offset":5139},"end":{"line":150,"column":22,"offset":5157}}}],"position":{"start":{"line":150,"column":3,"offset":5138},"end":{"line":150,"column":42,"offset":5177}}}],"position":{"start":{"line":150,"column":1,"offset":5136},"end":{"line":150,"column":42,"offset":5177}}},{"type":"text","value":"\n"}],"position":{"start":{"line":147,"column":1,"offset":4913},"end":{"line":150,"column":42,"offset":5177}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"These ","position":{"start":{"line":152,"column":1,"offset":5179},"end":{"line":152,"column":7,"offset":5185}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"end hooks","position":{"start":{"line":152,"column":9,"offset":5187},"end":{"line":152,"column":18,"offset":5196}}}],"position":{"start":{"line":152,"column":7,"offset":5185},"end":{"line":152,"column":20,"offset":5198}}},{"type":"text","value":" are passed any errors that occurred during the\nexecution of that lifecycle phase. For example, the following plugin logs\nany errors that occur during any of the above lifecycle events:","position":{"start":{"line":152,"column":20,"offset":5198},"end":{"line":154,"column":64,"offset":5383}}}],"position":{"start":{"line":152,"column":1,"offset":5179},"end":{"line":154,"column":64,"offset":5383}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myPlugin <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">requestDidStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">parsingDidStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">validationDidStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// This end hook is unique in that it can receive an array of errors,</span>\n        <span class=\"token comment\">// which will contain every validation error that occurred.</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">errs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>errs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            errs<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token function\">executionDidStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":156,"column":1,"offset":5385},"end":{"line":186,"column":4,"offset":6041}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Note that the ","position":{"start":{"line":188,"column":1,"offset":6043},"end":{"line":188,"column":15,"offset":6057}}},{"type":"raw","value":"<code class=\"language-text\">validationDidStart</code>","position":{"start":{"line":188,"column":15,"offset":6057},"end":{"line":188,"column":35,"offset":6077}}},{"type":"text","value":" end hook receives an ","position":{"start":{"line":188,"column":35,"offset":6077},"end":{"line":188,"column":57,"offset":6099}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"array","position":{"start":{"line":188,"column":58,"offset":6100},"end":{"line":188,"column":63,"offset":6105}}}],"position":{"start":{"line":188,"column":57,"offset":6099},"end":{"line":188,"column":64,"offset":6106}}},{"type":"text","value":" of errors that\ncontains every validation error that occurred (if any). The ","position":{"start":{"line":188,"column":64,"offset":6106},"end":{"line":189,"column":61,"offset":6182}}},{"type":"raw","value":"<code class=\"language-text\">willResolveField</code>","position":{"start":{"line":189,"column":61,"offset":6182},"end":{"line":189,"column":79,"offset":6200}}},{"type":"text","value":" end hook receives the error thrown by the resolver as the first argument and the result of the resolver as the second argument. The arguments to each\nend hook are documented in the type definitions in ","position":{"start":{"line":189,"column":79,"offset":6200},"end":{"line":190,"column":52,"offset":6402}}},{"type":"element","tagName":"a","properties":{"href":"#request-lifecycle-events"},"children":[{"type":"text","value":"Request lifecycle events","position":{"start":{"line":190,"column":53,"offset":6403},"end":{"line":190,"column":77,"offset":6427}}}],"position":{"start":{"line":190,"column":52,"offset":6402},"end":{"line":190,"column":105,"offset":6455}}},{"type":"text","value":".","position":{"start":{"line":190,"column":105,"offset":6455},"end":{"line":190,"column":106,"offset":6456}}}],"position":{"start":{"line":188,"column":1,"offset":6043},"end":{"line":190,"column":106,"offset":6456}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"inspecting-request-and-response-details","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#inspecting-request-and-response-details","aria-label":"inspecting request and response details permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Inspecting request and response details","position":{"start":{"line":192,"column":5,"offset":6462},"end":{"line":192,"column":44,"offset":6501}}}],"position":{"start":{"line":192,"column":1,"offset":6458},"end":{"line":192,"column":44,"offset":6501}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"As the example above shows, ","position":{"start":{"line":194,"column":1,"offset":6503},"end":{"line":194,"column":29,"offset":6531}}},{"type":"raw","value":"<code class=\"language-text\">requestDidStart</code>","position":{"start":{"line":194,"column":29,"offset":6531},"end":{"line":194,"column":46,"offset":6548}}},{"type":"text","value":" and request lifecycle functions accept a ","position":{"start":{"line":194,"column":46,"offset":6548},"end":{"line":194,"column":88,"offset":6590}}},{"type":"raw","value":"<code class=\"language-text\">requestContext</code>","position":{"start":{"line":194,"column":88,"offset":6590},"end":{"line":194,"column":104,"offset":6606}}},{"type":"text","value":"\nparameter. This parameter is of type ","position":{"start":{"line":194,"column":104,"offset":6606},"end":{"line":195,"column":38,"offset":6644}}},{"type":"raw","value":"<code class=\"language-text\">GraphQLRequestContext</code>","position":{"start":{"line":195,"column":38,"offset":6644},"end":{"line":195,"column":61,"offset":6667}}},{"type":"text","value":", which includes a\n","position":{"start":{"line":195,"column":61,"offset":6667},"end":{"line":196,"column":1,"offset":6686}}},{"type":"raw","value":"<code class=\"language-text\">request</code>","position":{"start":{"line":196,"column":1,"offset":6686},"end":{"line":196,"column":10,"offset":6695}}},{"type":"text","value":" (of type ","position":{"start":{"line":196,"column":10,"offset":6695},"end":{"line":196,"column":20,"offset":6705}}},{"type":"raw","value":"<code class=\"language-text\">GraphQLRequest</code>","position":{"start":{"line":196,"column":20,"offset":6705},"end":{"line":196,"column":36,"offset":6721}}},{"type":"text","value":"), along with a ","position":{"start":{"line":196,"column":36,"offset":6721},"end":{"line":196,"column":52,"offset":6737}}},{"type":"raw","value":"<code class=\"language-text\">response</code>","position":{"start":{"line":196,"column":52,"offset":6737},"end":{"line":196,"column":62,"offset":6747}}},{"type":"text","value":" field (of type ","position":{"start":{"line":196,"column":62,"offset":6747},"end":{"line":196,"column":78,"offset":6763}}},{"type":"raw","value":"<code class=\"language-text\">GraphQLResponse</code>","position":{"start":{"line":196,"column":78,"offset":6763},"end":{"line":196,"column":95,"offset":6780}}},{"type":"text","value":") if it's available.","position":{"start":{"line":196,"column":95,"offset":6780},"end":{"line":196,"column":115,"offset":6800}}}],"position":{"start":{"line":194,"column":1,"offset":6503},"end":{"line":196,"column":115,"offset":6800}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"These types and their related subtypes are all defined in ","position":{"start":{"line":198,"column":1,"offset":6802},"end":{"line":198,"column":59,"offset":6860}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/apollographql/apollo-server/blob/main/packages/apollo-server-types/src/index.ts"},"children":[{"type":"raw","value":"<code class=\"language-text\">apollo-server-types/src/index.ts</code>","position":{"start":{"line":198,"column":60,"offset":6861},"end":{"line":198,"column":94,"offset":6895}}}],"position":{"start":{"line":198,"column":59,"offset":6860},"end":{"line":198,"column":195,"offset":6996}}},{"type":"text","value":".","position":{"start":{"line":198,"column":195,"offset":6996},"end":{"line":198,"column":196,"offset":6997}}}],"position":{"start":{"line":198,"column":1,"offset":6802},"end":{"line":198,"column":196,"offset":6997}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"installing-a-plugin","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#installing-a-plugin","aria-label":"installing a plugin permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Installing a plugin","position":{"start":{"line":200,"column":4,"offset":7002},"end":{"line":200,"column":23,"offset":7021}}}],"position":{"start":{"line":200,"column":1,"offset":6999},"end":{"line":200,"column":23,"offset":7021}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Add your plugin to Apollo Server by providing a ","position":{"start":{"line":202,"column":1,"offset":7023},"end":{"line":202,"column":49,"offset":7071}}},{"type":"raw","value":"<code class=\"language-text\">plugins</code>","position":{"start":{"line":202,"column":49,"offset":7071},"end":{"line":202,"column":58,"offset":7080}}},{"type":"text","value":" configuration\noption to the ","position":{"start":{"line":202,"column":58,"offset":7080},"end":{"line":203,"column":15,"offset":7109}}},{"type":"raw","value":"<code class=\"language-text\">ApolloServer</code>","position":{"start":{"line":203,"column":15,"offset":7109},"end":{"line":203,"column":29,"offset":7123}}},{"type":"text","value":" constructor, like so:","position":{"start":{"line":203,"column":29,"offset":7123},"end":{"line":203,"column":51,"offset":7145}}}],"position":{"start":{"line":202,"column":1,"offset":7023},"end":{"line":203,"column":51,"offset":7145}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> ApolloServer <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'apollo-server'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> ApolloServerOperationRegistry <span class=\"token operator\">=</span>\n  <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'apollo-server-plugin-operation-registry'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/* This example doesn't provide `typeDefs` or `resolvers`,\n   both of which are required to start the server. */</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> typeDefs<span class=\"token punctuation\">,</span> resolvers <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./separatelyDefined'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  typeDefs<span class=\"token punctuation\">,</span>\n  resolvers<span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// You can import plugins or define them in-line, as shown:</span>\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\n    <span class=\"token comment\">/* This plugin is from a package that's imported above. */</span>\n    <span class=\"token function\">ApolloServerOperationRegistry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token comment\">/* options */</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">/* This plugin is imported in-place. */</span>\n    <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./localPluginModule'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">/* This plugin is defined in-line. */</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">serverWillStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Server starting up!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":205,"column":1,"offset":7147},"end":{"line":235,"column":4,"offset":7954}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"apollo-server-event-reference","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#apollo-server-event-reference","aria-label":"apollo server event reference permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Apollo Server event reference","position":{"start":{"line":237,"column":4,"offset":7959},"end":{"line":237,"column":33,"offset":7988}}}],"position":{"start":{"line":237,"column":1,"offset":7956},"end":{"line":237,"column":33,"offset":7988}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Apollo Server fires two types of events that plugins can hook into: ","position":{"start":{"line":239,"column":1,"offset":7990},"end":{"line":239,"column":69,"offset":8058}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"server lifecycle\nevents","position":{"start":{"line":239,"column":71,"offset":8060},"end":{"line":240,"column":7,"offset":8083}}}],"position":{"start":{"line":239,"column":69,"offset":8058},"end":{"line":240,"column":9,"offset":8085}}},{"type":"text","value":" and ","position":{"start":{"line":240,"column":9,"offset":8085},"end":{"line":240,"column":14,"offset":8090}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"request lifecycle events","position":{"start":{"line":240,"column":16,"offset":8092},"end":{"line":240,"column":40,"offset":8116}}}],"position":{"start":{"line":240,"column":14,"offset":8090},"end":{"line":240,"column":42,"offset":8118}}},{"type":"text","value":".","position":{"start":{"line":240,"column":42,"offset":8118},"end":{"line":240,"column":43,"offset":8119}}}],"position":{"start":{"line":239,"column":1,"offset":7990},"end":{"line":240,"column":43,"offset":8119}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Server lifecycle events are high-level events related to the lifecycle of Apollo Server itself.\nCurrently, two server lifecycle events are supported: ","position":{"start":{"line":242,"column":1,"offset":8121},"end":{"line":243,"column":55,"offset":8271}}},{"type":"element","tagName":"a","properties":{"href":"#serverwillstart"},"children":[{"type":"raw","value":"<code class=\"language-text\">serverWillStart</code>","position":{"start":{"line":243,"column":56,"offset":8272},"end":{"line":243,"column":73,"offset":8289}}}],"position":{"start":{"line":243,"column":55,"offset":8271},"end":{"line":243,"column":92,"offset":8308}}},{"type":"text","value":" and ","position":{"start":{"line":243,"column":92,"offset":8308},"end":{"line":243,"column":97,"offset":8313}}},{"type":"element","tagName":"a","properties":{"href":"#requestdidstart"},"children":[{"type":"raw","value":"<code class=\"language-text\">requestDidStart</code>","position":{"start":{"line":243,"column":98,"offset":8314},"end":{"line":243,"column":115,"offset":8331}}}],"position":{"start":{"line":243,"column":97,"offset":8313},"end":{"line":243,"column":134,"offset":8350}}},{"type":"text","value":".","position":{"start":{"line":243,"column":134,"offset":8350},"end":{"line":243,"column":135,"offset":8351}}}],"position":{"start":{"line":242,"column":1,"offset":8121},"end":{"line":243,"column":135,"offset":8351}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Request lifecycle events are associated with a specific request. You define responses to these events ","position":{"start":{"line":245,"column":1,"offset":8353},"end":{"line":245,"column":103,"offset":8455}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"within","position":{"start":{"line":245,"column":104,"offset":8456},"end":{"line":245,"column":110,"offset":8462}}}],"position":{"start":{"line":245,"column":103,"offset":8455},"end":{"line":245,"column":111,"offset":8463}}},{"type":"text","value":" the response to a ","position":{"start":{"line":245,"column":111,"offset":8463},"end":{"line":245,"column":130,"offset":8482}}},{"type":"raw","value":"<code class=\"language-text\">requestDidStart</code>","position":{"start":{"line":245,"column":130,"offset":8482},"end":{"line":245,"column":147,"offset":8499}}},{"type":"text","value":" event, as described in ","position":{"start":{"line":245,"column":147,"offset":8499},"end":{"line":245,"column":171,"offset":8523}}},{"type":"element","tagName":"a","properties":{"href":"#responding-to-request-lifecycle-events"},"children":[{"type":"text","value":"Responding to request lifecycle events","position":{"start":{"line":245,"column":172,"offset":8524},"end":{"line":245,"column":210,"offset":8562}}}],"position":{"start":{"line":245,"column":171,"offset":8523},"end":{"line":245,"column":252,"offset":8604}}},{"type":"text","value":".","position":{"start":{"line":245,"column":252,"offset":8604},"end":{"line":245,"column":253,"offset":8605}}}],"position":{"start":{"line":245,"column":1,"offset":8353},"end":{"line":245,"column":253,"offset":8605}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"server-lifecycle-events","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#server-lifecycle-events","aria-label":"server lifecycle events permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Server lifecycle events","position":{"start":{"line":247,"column":5,"offset":8611},"end":{"line":247,"column":28,"offset":8634}}}],"position":{"start":{"line":247,"column":1,"offset":8607},"end":{"line":247,"column":28,"offset":8634}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"serverwillstart","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#serverwillstart","aria-label":"serverwillstart permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"raw","value":"<code class=\"language-text\">serverWillStart</code>","position":{"start":{"line":249,"column":5,"offset":8640},"end":{"line":249,"column":22,"offset":8657}}}],"position":{"start":{"line":249,"column":1,"offset":8636},"end":{"line":249,"column":22,"offset":8657}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The ","position":{"start":{"line":251,"column":1,"offset":8659},"end":{"line":251,"column":5,"offset":8663}}},{"type":"raw","value":"<code class=\"language-text\">serverWillStart</code>","position":{"start":{"line":251,"column":5,"offset":8663},"end":{"line":251,"column":22,"offset":8680}}},{"type":"text","value":" event fires when Apollo Server is preparing to start serving GraphQL requests. If you respond to this event with an ","position":{"start":{"line":251,"column":22,"offset":8680},"end":{"line":251,"column":139,"offset":8797}}},{"type":"raw","value":"<code class=\"language-text\">async</code>","position":{"start":{"line":251,"column":139,"offset":8797},"end":{"line":251,"column":146,"offset":8804}}},{"type":"text","value":" function (or if the function returns a ","position":{"start":{"line":251,"column":146,"offset":8804},"end":{"line":251,"column":186,"offset":8844}}},{"type":"raw","value":"<code class=\"language-text\">Promise</code>","position":{"start":{"line":251,"column":186,"offset":8844},"end":{"line":251,"column":195,"offset":8853}}},{"type":"text","value":"), the server doesn't start until the asynchronous operation completes. If the ","position":{"start":{"line":251,"column":195,"offset":8853},"end":{"line":251,"column":274,"offset":8932}}},{"type":"raw","value":"<code class=\"language-text\">Promise</code>","position":{"start":{"line":251,"column":274,"offset":8932},"end":{"line":251,"column":283,"offset":8941}}},{"type":"text","value":" is ","position":{"start":{"line":251,"column":283,"offset":8941},"end":{"line":251,"column":287,"offset":8945}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"rejected","position":{"start":{"line":251,"column":288,"offset":8946},"end":{"line":251,"column":296,"offset":8954}}}],"position":{"start":{"line":251,"column":287,"offset":8945},"end":{"line":251,"column":297,"offset":8955}}},{"type":"text","value":", startup ","position":{"start":{"line":251,"column":297,"offset":8955},"end":{"line":251,"column":307,"offset":8965}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"fails","position":{"start":{"line":251,"column":308,"offset":8966},"end":{"line":251,"column":313,"offset":8971}}}],"position":{"start":{"line":251,"column":307,"offset":8965},"end":{"line":251,"column":314,"offset":8972}}},{"type":"text","value":" (","position":{"start":{"line":251,"column":314,"offset":8972},"end":{"line":251,"column":316,"offset":8974}}},{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"unless you're using ","position":{"start":{"line":251,"column":318,"offset":8976},"end":{"line":251,"column":338,"offset":8996}}},{"type":"element","tagName":"a","properties":{"href":"/integrations/middleware/"},"children":[{"type":"text","value":"Express middleware","position":{"start":{"line":251,"column":339,"offset":8997},"end":{"line":251,"column":357,"offset":9015}}}],"position":{"start":{"line":251,"column":338,"offset":8996},"end":{"line":251,"column":385,"offset":9043}}}],"position":{"start":{"line":251,"column":316,"offset":8974},"end":{"line":251,"column":387,"offset":9045}}},{"type":"text","value":"). This helps you make sure all\nof your server's dependencies are available before attempting to begin serving requests.","position":{"start":{"line":251,"column":387,"offset":9045},"end":{"line":252,"column":89,"offset":9165}}}],"position":{"start":{"line":251,"column":1,"offset":8659},"end":{"line":252,"column":89,"offset":9165}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"example","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#example","aria-label":"example permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Example","position":{"start":{"line":254,"column":6,"offset":9172},"end":{"line":254,"column":13,"offset":9179}}}],"position":{"start":{"line":254,"column":1,"offset":9167},"end":{"line":254,"column":13,"offset":9179}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* ... other necessary configuration ... */</span>\n\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">serverWillStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Server starting!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":256,"column":1,"offset":9181},"end":{"line":268,"column":4,"offset":9378}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"serverwillstop","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#serverwillstop","aria-label":"serverwillstop permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"raw","value":"<code class=\"language-text\">serverWillStop</code>","position":{"start":{"line":270,"column":5,"offset":9384},"end":{"line":270,"column":21,"offset":9400}}}],"position":{"start":{"line":270,"column":1,"offset":9380},"end":{"line":270,"column":21,"offset":9400}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The ","position":{"start":{"line":272,"column":1,"offset":9402},"end":{"line":272,"column":5,"offset":9406}}},{"type":"raw","value":"<code class=\"language-text\">serverWillStop</code>","position":{"start":{"line":272,"column":5,"offset":9406},"end":{"line":272,"column":21,"offset":9422}}},{"type":"text","value":" event fires when Apollo Server is starting to shut down because ","position":{"start":{"line":272,"column":21,"offset":9422},"end":{"line":272,"column":86,"offset":9487}}},{"type":"element","tagName":"a","properties":{"href":"/v2/api/apollo-server/#stop"},"children":[{"type":"raw","value":"<code class=\"language-text\">ApolloServer.stop()</code>","position":{"start":{"line":272,"column":87,"offset":9488},"end":{"line":272,"column":108,"offset":9509}}}],"position":{"start":{"line":272,"column":86,"offset":9487},"end":{"line":272,"column":137,"offset":9538}}},{"type":"text","value":" has been invoked (either explicitly by your code, or by one of the ","position":{"start":{"line":272,"column":137,"offset":9538},"end":{"line":272,"column":205,"offset":9606}}},{"type":"element","tagName":"a","properties":{"href":"/v2/api/apollo-server/#stoponterminationsignals"},"children":[{"type":"text","value":"termination signal handlers","position":{"start":{"line":272,"column":206,"offset":9607},"end":{"line":272,"column":233,"offset":9634}}}],"position":{"start":{"line":272,"column":205,"offset":9606},"end":{"line":272,"column":282,"offset":9683}}},{"type":"text","value":"). If your plugin is running any background tasks, this is a good place to shut them down.","position":{"start":{"line":272,"column":282,"offset":9683},"end":{"line":272,"column":372,"offset":9773}}}],"position":{"start":{"line":272,"column":1,"offset":9402},"end":{"line":272,"column":372,"offset":9773}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You define your ","position":{"start":{"line":274,"column":1,"offset":9775},"end":{"line":274,"column":17,"offset":9791}}},{"type":"raw","value":"<code class=\"language-text\">serverWillStop</code>","position":{"start":{"line":274,"column":17,"offset":9791},"end":{"line":274,"column":33,"offset":9807}}},{"type":"text","value":" handler in the object returned by your ","position":{"start":{"line":274,"column":33,"offset":9807},"end":{"line":274,"column":73,"offset":9847}}},{"type":"element","tagName":"a","properties":{"href":"#serverwillstart"},"children":[{"type":"raw","value":"<code class=\"language-text\">serverWillStart</code>","position":{"start":{"line":274,"column":74,"offset":9848},"end":{"line":274,"column":91,"offset":9865}}}],"position":{"start":{"line":274,"column":73,"offset":9847},"end":{"line":274,"column":110,"offset":9884}}},{"type":"text","value":" handler, because the two handlers usually interact with the same data. Currently, ","position":{"start":{"line":274,"column":110,"offset":9884},"end":{"line":274,"column":193,"offset":9967}}},{"type":"raw","value":"<code class=\"language-text\">serverWillStop</code>","position":{"start":{"line":274,"column":193,"offset":9967},"end":{"line":274,"column":209,"offset":9983}}},{"type":"text","value":" handlers do not take arguments (this might change in the future).","position":{"start":{"line":274,"column":209,"offset":9983},"end":{"line":274,"column":275,"offset":10049}}}],"position":{"start":{"line":274,"column":1,"offset":9775},"end":{"line":274,"column":275,"offset":10049}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"example-1","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#example-1","aria-label":"example 1 permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Example","position":{"start":{"line":276,"column":6,"offset":10056},"end":{"line":276,"column":13,"offset":10063}}}],"position":{"start":{"line":276,"column":1,"offset":10051},"end":{"line":276,"column":13,"offset":10063}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* ... other necessary configuration ... */</span>\n\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">serverWillStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> interval <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span>doSomethingPeriodically<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">serverWillStop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>interval<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":278,"column":1,"offset":10065},"end":{"line":295,"column":4,"offset":10395}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"requestdidstart","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#requestdidstart","aria-label":"requestdidstart permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"raw","value":"<code class=\"language-text\">requestDidStart</code>","position":{"start":{"line":297,"column":5,"offset":10401},"end":{"line":297,"column":22,"offset":10418}}}],"position":{"start":{"line":297,"column":1,"offset":10397},"end":{"line":297,"column":22,"offset":10418}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The ","position":{"start":{"line":299,"column":1,"offset":10420},"end":{"line":299,"column":5,"offset":10424}}},{"type":"raw","value":"<code class=\"language-text\">requestDidStart</code>","position":{"start":{"line":299,"column":5,"offset":10424},"end":{"line":299,"column":22,"offset":10441}}},{"type":"text","value":" event fires whenever Apollo Server begins fulfilling a GraphQL request.","position":{"start":{"line":299,"column":22,"offset":10441},"end":{"line":299,"column":94,"offset":10513}}}],"position":{"start":{"line":299,"column":1,"offset":10420},"end":{"line":299,"column":94,"offset":10513}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\">requestDidStart<span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>\n  requestContext<span class=\"token operator\">:</span> WithRequired<span class=\"token operator\">&lt;</span>\n    GraphQLRequestContext<span class=\"token operator\">&lt;</span>TContext<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'request'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'context'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'logger'</span>\n  <span class=\"token operator\">></span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> GraphQLRequestListener<span class=\"token operator\">&lt;</span>TContext<span class=\"token operator\">></span> <span class=\"token operator\">|</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":301,"column":1,"offset":10515},"end":{"line":308,"column":4,"offset":10704}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This function can optionally return an object that includes functions for responding\nto request lifecycle events that might follow ","position":{"start":{"line":310,"column":1,"offset":10706},"end":{"line":311,"column":47,"offset":10837}}},{"type":"raw","value":"<code class=\"language-text\">requestDidStart</code>","position":{"start":{"line":311,"column":47,"offset":10837},"end":{"line":311,"column":64,"offset":10854}}},{"type":"text","value":".","position":{"start":{"line":311,"column":64,"offset":10854},"end":{"line":311,"column":65,"offset":10855}}}],"position":{"start":{"line":310,"column":1,"offset":10706},"end":{"line":311,"column":65,"offset":10855}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* ... other necessary configuration ... */</span>\n\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">requestDidStart</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestContext</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\n        <span class=\"token comment\">/* Within this returned object, define functions that respond\n           to request-specific lifecycle events. */</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n\n          <span class=\"token comment\">/* The `parsingDidStart` request lifecycle event fires\n             when parsing begins. The event is scoped within an\n             associated `requestDidStart` server lifecycle event. */</span>\n          <span class=\"token function\">parsingDidStart</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestContext</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Parsing started!'</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":313,"column":1,"offset":10857},"end":{"line":336,"column":4,"offset":11478}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If your plugin doesn't need to respond to any request lifecycle events, ","position":{"start":{"line":338,"column":1,"offset":11480},"end":{"line":338,"column":73,"offset":11552}}},{"type":"raw","value":"<code class=\"language-text\">requestDidStart</code>","position":{"start":{"line":338,"column":73,"offset":11552},"end":{"line":338,"column":90,"offset":11569}}},{"type":"text","value":"\nshould not return a value.","position":{"start":{"line":338,"column":90,"offset":11569},"end":{"line":339,"column":27,"offset":11596}}}],"position":{"start":{"line":338,"column":1,"offset":11480},"end":{"line":339,"column":27,"offset":11596}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"request-lifecycle-events","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#request-lifecycle-events","aria-label":"request lifecycle events permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Request lifecycle events","position":{"start":{"line":341,"column":5,"offset":11602},"end":{"line":341,"column":29,"offset":11626}}}],"position":{"start":{"line":341,"column":1,"offset":11598},"end":{"line":341,"column":29,"offset":11626}}},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you're using TypeScript to create your plugin, implement the ","position":{"start":{"line":343,"column":3,"offset":11630},"end":{"line":343,"column":67,"offset":11694}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/apollographql/apollo-server/blob/main/packages/apollo-server-plugin-base/src/index.ts"},"children":[{"type":"text","value":" ","position":{"start":{"line":343,"column":68,"offset":11695},"end":{"line":343,"column":69,"offset":11696}}},{"type":"raw","value":"<code class=\"language-text\">GraphQLRequestListener</code>","position":{"start":{"line":343,"column":69,"offset":11696},"end":{"line":343,"column":93,"offset":11720}}},{"type":"text","value":" interface","position":{"start":{"line":343,"column":93,"offset":11720},"end":{"line":343,"column":103,"offset":11730}}}],"position":{"start":{"line":343,"column":67,"offset":11694},"end":{"line":343,"column":210,"offset":11837}}},{"type":"text","value":" from the ","position":{"start":{"line":343,"column":210,"offset":11837},"end":{"line":343,"column":220,"offset":11847}}},{"type":"raw","value":"<code class=\"language-text\">apollo-server-plugin-base</code>","position":{"start":{"line":343,"column":220,"offset":11847},"end":{"line":343,"column":247,"offset":11874}}},{"type":"text","value":" module to define functions for request lifecycle events.","position":{"start":{"line":343,"column":247,"offset":11874},"end":{"line":343,"column":304,"offset":11931}}}],"position":{"start":{"line":343,"column":3,"offset":11630},"end":{"line":343,"column":304,"offset":11931}}},{"type":"text","value":"\n"}],"position":{"start":{"line":343,"column":1,"offset":11628},"end":{"line":343,"column":304,"offset":11931}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"didresolvesource","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#didresolvesource","aria-label":"didresolvesource permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"raw","value":"<code class=\"language-text\">didResolveSource</code>","position":{"start":{"line":345,"column":5,"offset":11937},"end":{"line":345,"column":23,"offset":11955}}}],"position":{"start":{"line":345,"column":1,"offset":11933},"end":{"line":345,"column":23,"offset":11955}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The ","position":{"start":{"line":347,"column":1,"offset":11957},"end":{"line":347,"column":5,"offset":11961}}},{"type":"raw","value":"<code class=\"language-text\">didResolveSource</code>","position":{"start":{"line":347,"column":5,"offset":11961},"end":{"line":347,"column":23,"offset":11979}}},{"type":"text","value":" event is invoked after Apollo Server has determined the\n","position":{"start":{"line":347,"column":23,"offset":11979},"end":{"line":348,"column":1,"offset":12036}}},{"type":"raw","value":"<code class=\"language-text\">String</code>","position":{"start":{"line":348,"column":1,"offset":12036},"end":{"line":348,"column":9,"offset":12044}}},{"type":"text","value":"-representation of the incoming operation that it will act upon.  In the\nevent that this ","position":{"start":{"line":348,"column":9,"offset":12044},"end":{"line":349,"column":17,"offset":12133}}},{"type":"raw","value":"<code class=\"language-text\">String</code>","position":{"start":{"line":349,"column":17,"offset":12133},"end":{"line":349,"column":25,"offset":12141}}},{"type":"text","value":" was not directly passed in from the client, this\nmay be retrieved from a cache store (e.g., Automated Persisted Queries).","position":{"start":{"line":349,"column":25,"offset":12141},"end":{"line":350,"column":73,"offset":12263}}}],"position":{"start":{"line":347,"column":1,"offset":11957},"end":{"line":350,"column":73,"offset":12263}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"At this stage, there is not a guarantee that the operation is not malformed.","position":{"start":{"line":352,"column":1,"offset":12265},"end":{"line":352,"column":77,"offset":12341}}}],"position":{"start":{"line":352,"column":1,"offset":12265},"end":{"line":352,"column":77,"offset":12341}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\">didResolveSource<span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>\n  requestContext<span class=\"token operator\">:</span> WithRequired<span class=\"token operator\">&lt;</span>\n    GraphQLRequestContext<span class=\"token operator\">&lt;</span>TContext<span class=\"token operator\">></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'source'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'logger'</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n  <span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> ValueOrPromise<span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":354,"column":1,"offset":12343},"end":{"line":360,"column":4,"offset":12500}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"parsingdidstart","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#parsingdidstart","aria-label":"parsingdidstart permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"raw","value":"<code class=\"language-text\">parsingDidStart</code>","position":{"start":{"line":362,"column":5,"offset":12506},"end":{"line":362,"column":22,"offset":12523}}}],"position":{"start":{"line":362,"column":1,"offset":12502},"end":{"line":362,"column":22,"offset":12523}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The ","position":{"start":{"line":364,"column":1,"offset":12525},"end":{"line":364,"column":5,"offset":12529}}},{"type":"raw","value":"<code class=\"language-text\">parsingDidStart</code>","position":{"start":{"line":364,"column":5,"offset":12529},"end":{"line":364,"column":22,"offset":12546}}},{"type":"text","value":" event fires whenever Apollo Server will parse a GraphQL\nrequest to create its associated ","position":{"start":{"line":364,"column":22,"offset":12546},"end":{"line":365,"column":34,"offset":12636}}},{"type":"raw","value":"<code class=\"language-text\">document</code>","position":{"start":{"line":365,"column":34,"offset":12636},"end":{"line":365,"column":44,"offset":12646}}},{"type":"text","value":" AST.","position":{"start":{"line":365,"column":44,"offset":12646},"end":{"line":365,"column":49,"offset":12651}}}],"position":{"start":{"line":364,"column":1,"offset":12525},"end":{"line":365,"column":49,"offset":12651}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If Apollo Server receives a request with a query string that matches a ","position":{"start":{"line":367,"column":1,"offset":12653},"end":{"line":367,"column":72,"offset":12724}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"previous","position":{"start":{"line":367,"column":73,"offset":12725},"end":{"line":367,"column":81,"offset":12733}}}],"position":{"start":{"line":367,"column":72,"offset":12724},"end":{"line":367,"column":82,"offset":12734}}},{"type":"text","value":"\nrequest, the associated ","position":{"start":{"line":367,"column":82,"offset":12734},"end":{"line":368,"column":25,"offset":12759}}},{"type":"raw","value":"<code class=\"language-text\">document</code>","position":{"start":{"line":368,"column":25,"offset":12759},"end":{"line":368,"column":35,"offset":12769}}},{"type":"text","value":" might already be available in Apollo Server's cache.\nIn this case, ","position":{"start":{"line":368,"column":35,"offset":12769},"end":{"line":369,"column":15,"offset":12837}}},{"type":"raw","value":"<code class=\"language-text\">parsingDidStart</code>","position":{"start":{"line":369,"column":15,"offset":12837},"end":{"line":369,"column":32,"offset":12854}}},{"type":"text","value":" is ","position":{"start":{"line":369,"column":32,"offset":12854},"end":{"line":369,"column":36,"offset":12858}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"not","position":{"start":{"line":369,"column":37,"offset":12859},"end":{"line":369,"column":40,"offset":12862}}}],"position":{"start":{"line":369,"column":36,"offset":12858},"end":{"line":369,"column":41,"offset":12863}}},{"type":"text","value":" called for the request, because parsing\ndoes not occur.","position":{"start":{"line":369,"column":41,"offset":12863},"end":{"line":370,"column":16,"offset":12919}}}],"position":{"start":{"line":367,"column":1,"offset":12653},"end":{"line":370,"column":16,"offset":12919}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\">parsingDidStart<span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>\n  requestContext<span class=\"token operator\">:</span> WithRequired<span class=\"token operator\">&lt;</span>\n    GraphQLRequestContext<span class=\"token operator\">&lt;</span>TContext<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'metrics'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'source'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'logger'</span>\n  <span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>err<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Error<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":372,"column":1,"offset":12921},"end":{"line":379,"column":4,"offset":13099}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"validationdidstart","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#validationdidstart","aria-label":"validationdidstart permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"raw","value":"<code class=\"language-text\">validationDidStart</code>","position":{"start":{"line":381,"column":5,"offset":13105},"end":{"line":381,"column":25,"offset":13125}}}],"position":{"start":{"line":381,"column":1,"offset":13101},"end":{"line":381,"column":25,"offset":13125}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The ","position":{"start":{"line":383,"column":1,"offset":13127},"end":{"line":383,"column":5,"offset":13131}}},{"type":"raw","value":"<code class=\"language-text\">validationDidStart</code>","position":{"start":{"line":383,"column":5,"offset":13131},"end":{"line":383,"column":25,"offset":13151}}},{"type":"text","value":" event fires whenever Apollo Server will validate a\nrequest's ","position":{"start":{"line":383,"column":25,"offset":13151},"end":{"line":384,"column":11,"offset":13213}}},{"type":"raw","value":"<code class=\"language-text\">document</code>","position":{"start":{"line":384,"column":11,"offset":13213},"end":{"line":384,"column":21,"offset":13223}}},{"type":"text","value":" AST against your GraphQL schema.","position":{"start":{"line":384,"column":21,"offset":13223},"end":{"line":384,"column":54,"offset":13256}}}],"position":{"start":{"line":383,"column":1,"offset":13127},"end":{"line":384,"column":54,"offset":13256}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Like ","position":{"start":{"line":386,"column":1,"offset":13258},"end":{"line":386,"column":6,"offset":13263}}},{"type":"raw","value":"<code class=\"language-text\">parsingDidStart</code>","position":{"start":{"line":386,"column":6,"offset":13263},"end":{"line":386,"column":23,"offset":13280}}},{"type":"text","value":", this event does ","position":{"start":{"line":386,"column":23,"offset":13280},"end":{"line":386,"column":41,"offset":13298}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"not","position":{"start":{"line":386,"column":42,"offset":13299},"end":{"line":386,"column":45,"offset":13302}}}],"position":{"start":{"line":386,"column":41,"offset":13298},"end":{"line":386,"column":46,"offset":13303}}},{"type":"text","value":" fire if a request's ","position":{"start":{"line":386,"column":46,"offset":13303},"end":{"line":386,"column":67,"offset":13324}}},{"type":"raw","value":"<code class=\"language-text\">document</code>","position":{"start":{"line":386,"column":67,"offset":13324},"end":{"line":386,"column":77,"offset":13334}}},{"type":"text","value":" is\nalready available in Apollo Server's cache (only successfully validated ","position":{"start":{"line":386,"column":77,"offset":13334},"end":{"line":387,"column":73,"offset":13410}}},{"type":"raw","value":"<code class=\"language-text\">document</code>","position":{"start":{"line":387,"column":73,"offset":13410},"end":{"line":387,"column":83,"offset":13420}}},{"type":"text","value":"s are cached by Apollo Server).","position":{"start":{"line":387,"column":83,"offset":13420},"end":{"line":387,"column":114,"offset":13451}}}],"position":{"start":{"line":386,"column":1,"offset":13258},"end":{"line":387,"column":114,"offset":13451}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The ","position":{"start":{"line":389,"column":1,"offset":13453},"end":{"line":389,"column":5,"offset":13457}}},{"type":"raw","value":"<code class=\"language-text\">document</code>","position":{"start":{"line":389,"column":5,"offset":13457},"end":{"line":389,"column":15,"offset":13467}}},{"type":"text","value":" AST is guaranteed to be\navailable at this stage, because parsing must succeed for validation to occur.","position":{"start":{"line":389,"column":15,"offset":13467},"end":{"line":390,"column":79,"offset":13570}}}],"position":{"start":{"line":389,"column":1,"offset":13453},"end":{"line":390,"column":79,"offset":13570}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\">validationDidStart<span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>\n  requestContext<span class=\"token operator\">:</span> WithRequired<span class=\"token operator\">&lt;</span>\n    GraphQLRequestContext<span class=\"token operator\">&lt;</span>TContext<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'metrics'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'source'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'document'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'logger'</span>\n  <span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>err<span class=\"token operator\">?</span><span class=\"token operator\">:</span> ReadonlyArray<span class=\"token operator\">&lt;</span>Error<span class=\"token operator\">></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":392,"column":1,"offset":13572},"end":{"line":399,"column":4,"offset":13781}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"didresolveoperation","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#didresolveoperation","aria-label":"didresolveoperation permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"raw","value":"<code class=\"language-text\">didResolveOperation</code>","position":{"start":{"line":401,"column":5,"offset":13787},"end":{"line":401,"column":26,"offset":13808}}}],"position":{"start":{"line":401,"column":1,"offset":13783},"end":{"line":401,"column":26,"offset":13808}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The ","position":{"start":{"line":403,"column":1,"offset":13810},"end":{"line":403,"column":5,"offset":13814}}},{"type":"raw","value":"<code class=\"language-text\">didResolveOperation</code>","position":{"start":{"line":403,"column":5,"offset":13814},"end":{"line":403,"column":26,"offset":13835}}},{"type":"text","value":" event fires after the ","position":{"start":{"line":403,"column":26,"offset":13835},"end":{"line":403,"column":49,"offset":13858}}},{"type":"raw","value":"<code class=\"language-text\">graphql</code>","position":{"start":{"line":403,"column":49,"offset":13858},"end":{"line":403,"column":58,"offset":13867}}},{"type":"text","value":" library successfully\ndetermines the operation to execute from a request's ","position":{"start":{"line":403,"column":58,"offset":13867},"end":{"line":404,"column":54,"offset":13942}}},{"type":"raw","value":"<code class=\"language-text\">document</code>","position":{"start":{"line":404,"column":54,"offset":13942},"end":{"line":404,"column":64,"offset":13952}}},{"type":"text","value":" AST. At this stage,\nboth the ","position":{"start":{"line":404,"column":64,"offset":13952},"end":{"line":405,"column":10,"offset":13982}}},{"type":"raw","value":"<code class=\"language-text\">operationName</code>","position":{"start":{"line":405,"column":10,"offset":13982},"end":{"line":405,"column":25,"offset":13997}}},{"type":"text","value":" string and ","position":{"start":{"line":405,"column":25,"offset":13997},"end":{"line":405,"column":37,"offset":14009}}},{"type":"raw","value":"<code class=\"language-text\">operation</code>","position":{"start":{"line":405,"column":37,"offset":14009},"end":{"line":405,"column":48,"offset":14020}}},{"type":"text","value":" AST are available.","position":{"start":{"line":405,"column":48,"offset":14020},"end":{"line":405,"column":67,"offset":14039}}}],"position":{"start":{"line":403,"column":1,"offset":13810},"end":{"line":405,"column":67,"offset":14039}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This event is ","position":{"start":{"line":407,"column":1,"offset":14041},"end":{"line":407,"column":15,"offset":14055}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"not","position":{"start":{"line":407,"column":16,"offset":14056},"end":{"line":407,"column":19,"offset":14059}}}],"position":{"start":{"line":407,"column":15,"offset":14055},"end":{"line":407,"column":20,"offset":14060}}},{"type":"text","value":" associated with your GraphQL server's ","position":{"start":{"line":407,"column":20,"offset":14060},"end":{"line":407,"column":59,"offset":14099}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"resolvers","position":{"start":{"line":407,"column":60,"offset":14100},"end":{"line":407,"column":69,"offset":14109}}}],"position":{"start":{"line":407,"column":59,"offset":14099},"end":{"line":407,"column":70,"offset":14110}}},{"type":"text","value":". When this event fires, your resolvers have not yet executed (they execute after ","position":{"start":{"line":407,"column":70,"offset":14110},"end":{"line":407,"column":152,"offset":14192}}},{"type":"element","tagName":"a","properties":{"href":"#executiondidstart"},"children":[{"type":"raw","value":"<code class=\"language-text\">executionDidStart</code>","position":{"start":{"line":407,"column":153,"offset":14193},"end":{"line":407,"column":172,"offset":14212}}}],"position":{"start":{"line":407,"column":152,"offset":14192},"end":{"line":407,"column":193,"offset":14233}}},{"type":"text","value":").","position":{"start":{"line":407,"column":193,"offset":14233},"end":{"line":407,"column":195,"offset":14235}}}],"position":{"start":{"line":407,"column":1,"offset":14041},"end":{"line":407,"column":195,"offset":14235}}},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If the operation is anonymous (i.e., the operation is ","position":{"start":{"line":409,"column":3,"offset":14239},"end":{"line":409,"column":57,"offset":14293}}},{"type":"raw","value":"<code class=\"language-text\">query { ... }</code>","position":{"start":{"line":409,"column":57,"offset":14293},"end":{"line":409,"column":72,"offset":14308}}},{"type":"text","value":" instead of ","position":{"start":{"line":409,"column":72,"offset":14308},"end":{"line":409,"column":84,"offset":14320}}},{"type":"raw","value":"<code class=\"language-text\">query NamedQuery { ... }</code>","position":{"start":{"line":409,"column":84,"offset":14320},"end":{"line":409,"column":110,"offset":14346}}},{"type":"text","value":"), then ","position":{"start":{"line":409,"column":110,"offset":14346},"end":{"line":409,"column":118,"offset":14354}}},{"type":"raw","value":"<code class=\"language-text\">operationName</code>","position":{"start":{"line":409,"column":118,"offset":14354},"end":{"line":409,"column":133,"offset":14369}}},{"type":"text","value":" is ","position":{"start":{"line":409,"column":133,"offset":14369},"end":{"line":409,"column":137,"offset":14373}}},{"type":"raw","value":"<code class=\"language-text\">null</code>","position":{"start":{"line":409,"column":137,"offset":14373},"end":{"line":409,"column":143,"offset":14379}}},{"type":"text","value":".","position":{"start":{"line":409,"column":143,"offset":14379},"end":{"line":409,"column":144,"offset":14380}}}],"position":{"start":{"line":409,"column":3,"offset":14239},"end":{"line":409,"column":144,"offset":14380}}},{"type":"text","value":"\n"}],"position":{"start":{"line":409,"column":1,"offset":14237},"end":{"line":409,"column":144,"offset":14380}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\">didResolveOperation<span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>\n  requestContext<span class=\"token operator\">:</span> WithRequired<span class=\"token operator\">&lt;</span>\n    GraphQLRequestContext<span class=\"token operator\">&lt;</span>TContext<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'metrics'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'source'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'document'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'operationName'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'operation'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'logger'</span>\n  <span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> ValueOrPromise<span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":411,"column":1,"offset":14382},"end":{"line":418,"column":4,"offset":14601}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"responseforoperation","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#responseforoperation","aria-label":"responseforoperation permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"raw","value":"<code class=\"language-text\">responseForOperation</code>","position":{"start":{"line":420,"column":5,"offset":14607},"end":{"line":420,"column":27,"offset":14629}}}],"position":{"start":{"line":420,"column":1,"offset":14603},"end":{"line":420,"column":27,"offset":14629}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The ","position":{"start":{"line":422,"column":1,"offset":14631},"end":{"line":422,"column":5,"offset":14635}}},{"type":"raw","value":"<code class=\"language-text\">responseForOperation</code>","position":{"start":{"line":422,"column":5,"offset":14635},"end":{"line":422,"column":27,"offset":14657}}},{"type":"text","value":" event is fired immediately before GraphQL execution\nwould take place. If its return value resolves to a non-null ","position":{"start":{"line":422,"column":27,"offset":14657},"end":{"line":423,"column":62,"offset":14771}}},{"type":"raw","value":"<code class=\"language-text\">GraphQLResponse</code>","position":{"start":{"line":423,"column":62,"offset":14771},"end":{"line":423,"column":79,"offset":14788}}},{"type":"text","value":",\nthat result is used instead of executing the query. Hooks from different plugins\nare invoked in series, and the first non-null response is used.","position":{"start":{"line":423,"column":79,"offset":14788},"end":{"line":425,"column":64,"offset":14934}}}],"position":{"start":{"line":422,"column":1,"offset":14631},"end":{"line":425,"column":64,"offset":14934}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\">responseForOperation<span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>\n  requestContext<span class=\"token operator\">:</span> WithRequired<span class=\"token operator\">&lt;</span>\n    GraphQLRequestContext<span class=\"token operator\">&lt;</span>TContext<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'metrics'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'source'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'document'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'operationName'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'operation'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'logger'</span>\n  <span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> ValueOrPromise<span class=\"token operator\">&lt;</span>GraphQLResponse <span class=\"token operator\">|</span> <span class=\"token keyword\">null</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":427,"column":1,"offset":14936},"end":{"line":434,"column":4,"offset":15174}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"executiondidstart","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#executiondidstart","aria-label":"executiondidstart permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"raw","value":"<code class=\"language-text\">executionDidStart</code>","position":{"start":{"line":436,"column":5,"offset":15180},"end":{"line":436,"column":24,"offset":15199}}}],"position":{"start":{"line":436,"column":1,"offset":15176},"end":{"line":436,"column":24,"offset":15199}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The ","position":{"start":{"line":438,"column":1,"offset":15201},"end":{"line":438,"column":5,"offset":15205}}},{"type":"raw","value":"<code class=\"language-text\">executionDidStart</code>","position":{"start":{"line":438,"column":5,"offset":15205},"end":{"line":438,"column":24,"offset":15224}}},{"type":"text","value":" event fires whenever Apollo Server begins executing the\nGraphQL operation specified by a request's ","position":{"start":{"line":438,"column":24,"offset":15224},"end":{"line":439,"column":44,"offset":15324}}},{"type":"raw","value":"<code class=\"language-text\">document</code>","position":{"start":{"line":439,"column":44,"offset":15324},"end":{"line":439,"column":54,"offset":15334}}},{"type":"text","value":" AST.","position":{"start":{"line":439,"column":54,"offset":15334},"end":{"line":439,"column":59,"offset":15339}}}],"position":{"start":{"line":438,"column":1,"offset":15201},"end":{"line":439,"column":59,"offset":15339}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\">executionDidStart<span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>\n  requestContext<span class=\"token operator\">:</span> WithRequired<span class=\"token operator\">&lt;</span>\n    GraphQLRequestContext<span class=\"token operator\">&lt;</span>TContext<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'metrics'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'source'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'document'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'operationName'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'operation'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'logger'</span>\n  <span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>err<span class=\"token operator\">?</span><span class=\"token operator\">:</span> Error<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">void</span> <span class=\"token operator\">|</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":441,"column":1,"offset":15341},"end":{"line":448,"column":4,"offset":15566}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"raw","value":"<code class=\"language-text\">executionDidStart</code>","position":{"start":{"line":450,"column":1,"offset":15568},"end":{"line":450,"column":20,"offset":15587}}},{"type":"text","value":" may return an ","position":{"start":{"line":450,"column":20,"offset":15587},"end":{"line":450,"column":35,"offset":15602}}},{"type":"element","tagName":"a","properties":{"href":"#end-hooks"},"children":[{"type":"text","value":"\"end hook\"","position":{"start":{"line":450,"column":36,"offset":15603},"end":{"line":450,"column":46,"offset":15613}}}],"position":{"start":{"line":450,"column":35,"offset":15602},"end":{"line":450,"column":59,"offset":15626}}},{"type":"text","value":" function. Alternatively, it may return an object with one or both of the methods ","position":{"start":{"line":450,"column":59,"offset":15626},"end":{"line":450,"column":141,"offset":15708}}},{"type":"raw","value":"<code class=\"language-text\">executionDidEnd</code>","position":{"start":{"line":450,"column":141,"offset":15708},"end":{"line":450,"column":158,"offset":15725}}},{"type":"text","value":" and ","position":{"start":{"line":450,"column":158,"offset":15725},"end":{"line":450,"column":163,"offset":15730}}},{"type":"raw","value":"<code class=\"language-text\">willResolveField</code>","position":{"start":{"line":450,"column":163,"offset":15730},"end":{"line":450,"column":181,"offset":15748}}},{"type":"text","value":".  ","position":{"start":{"line":450,"column":181,"offset":15748},"end":{"line":450,"column":184,"offset":15751}}},{"type":"raw","value":"<code class=\"language-text\">executionDidEnd</code>","position":{"start":{"line":450,"column":184,"offset":15751},"end":{"line":450,"column":201,"offset":15768}}},{"type":"text","value":" is treated identically to an end hook: it is called after execution with any errors that occurred. ","position":{"start":{"line":450,"column":201,"offset":15768},"end":{"line":450,"column":301,"offset":15868}}},{"type":"raw","value":"<code class=\"language-text\">willResolveField</code>","position":{"start":{"line":450,"column":301,"offset":15868},"end":{"line":450,"column":319,"offset":15886}}},{"type":"text","value":" is documented in the next section.","position":{"start":{"line":450,"column":319,"offset":15886},"end":{"line":450,"column":354,"offset":15921}}}],"position":{"start":{"line":450,"column":1,"offset":15568},"end":{"line":450,"column":354,"offset":15921}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"willresolvefield","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#willresolvefield","aria-label":"willresolvefield permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"raw","value":"<code class=\"language-text\">willResolveField</code>","position":{"start":{"line":452,"column":5,"offset":15927},"end":{"line":452,"column":23,"offset":15945}}}],"position":{"start":{"line":452,"column":1,"offset":15923},"end":{"line":452,"column":23,"offset":15945}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The ","position":{"start":{"line":454,"column":1,"offset":15947},"end":{"line":454,"column":5,"offset":15951}}},{"type":"raw","value":"<code class=\"language-text\">willResolveField</code>","position":{"start":{"line":454,"column":5,"offset":15951},"end":{"line":454,"column":23,"offset":15969}}},{"type":"text","value":" event fires whenever Apollo Server is about to resolve a single field during the execution of an operation. The handler is passed an object with four fields (","position":{"start":{"line":454,"column":23,"offset":15969},"end":{"line":454,"column":182,"offset":16128}}},{"type":"raw","value":"<code class=\"language-text\">source</code>","position":{"start":{"line":454,"column":182,"offset":16128},"end":{"line":454,"column":190,"offset":16136}}},{"type":"text","value":", ","position":{"start":{"line":454,"column":190,"offset":16136},"end":{"line":454,"column":192,"offset":16138}}},{"type":"raw","value":"<code class=\"language-text\">args</code>","position":{"start":{"line":454,"column":192,"offset":16138},"end":{"line":454,"column":198,"offset":16144}}},{"type":"text","value":", ","position":{"start":{"line":454,"column":198,"offset":16144},"end":{"line":454,"column":200,"offset":16146}}},{"type":"raw","value":"<code class=\"language-text\">context</code>","position":{"start":{"line":454,"column":200,"offset":16146},"end":{"line":454,"column":209,"offset":16155}}},{"type":"text","value":", and ","position":{"start":{"line":454,"column":209,"offset":16155},"end":{"line":454,"column":215,"offset":16161}}},{"type":"raw","value":"<code class=\"language-text\">info</code>","position":{"start":{"line":454,"column":215,"offset":16161},"end":{"line":454,"column":221,"offset":16167}}},{"type":"text","value":") that correspond to the ","position":{"start":{"line":454,"column":221,"offset":16167},"end":{"line":454,"column":246,"offset":16192}}},{"type":"element","tagName":"a","properties":{"href":"/v2/data/resolvers/#resolver-arguments"},"children":[{"type":"text","value":"four positional arguments passed to resolvers","position":{"start":{"line":454,"column":247,"offset":16193},"end":{"line":454,"column":292,"offset":16238}}}],"position":{"start":{"line":454,"column":246,"offset":16192},"end":{"line":454,"column":332,"offset":16278}}},{"type":"text","value":". (Note that ","position":{"start":{"line":454,"column":332,"offset":16278},"end":{"line":454,"column":345,"offset":16291}}},{"type":"raw","value":"<code class=\"language-text\">source</code>","position":{"start":{"line":454,"column":345,"offset":16291},"end":{"line":454,"column":353,"offset":16299}}},{"type":"text","value":" corresponds to the argument often called ","position":{"start":{"line":454,"column":353,"offset":16299},"end":{"line":454,"column":395,"offset":16341}}},{"type":"raw","value":"<code class=\"language-text\">parent</code>","position":{"start":{"line":454,"column":395,"offset":16341},"end":{"line":454,"column":403,"offset":16349}}},{"type":"text","value":" in these docs.)","position":{"start":{"line":454,"column":403,"offset":16349},"end":{"line":454,"column":419,"offset":16365}}}],"position":{"start":{"line":454,"column":1,"offset":15947},"end":{"line":454,"column":419,"offset":16365}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"You provide your ","position":{"start":{"line":456,"column":1,"offset":16367},"end":{"line":456,"column":18,"offset":16384}}},{"type":"raw","value":"<code class=\"language-text\">willResolveField</code>","position":{"start":{"line":456,"column":18,"offset":16384},"end":{"line":456,"column":36,"offset":16402}}},{"type":"text","value":" handler in the object returned by your ","position":{"start":{"line":456,"column":36,"offset":16402},"end":{"line":456,"column":76,"offset":16442}}},{"type":"element","tagName":"a","properties":{"href":"#executiondidstart"},"children":[{"type":"raw","value":"<code class=\"language-text\">executionDidStart</code>","position":{"start":{"line":456,"column":77,"offset":16443},"end":{"line":456,"column":96,"offset":16462}}}],"position":{"start":{"line":456,"column":76,"offset":16442},"end":{"line":456,"column":117,"offset":16483}}},{"type":"text","value":" handler.","position":{"start":{"line":456,"column":117,"offset":16483},"end":{"line":456,"column":126,"offset":16492}}}],"position":{"start":{"line":456,"column":1,"offset":16367},"end":{"line":456,"column":126,"offset":16492}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Your ","position":{"start":{"line":458,"column":1,"offset":16494},"end":{"line":458,"column":6,"offset":16499}}},{"type":"raw","value":"<code class=\"language-text\">willResolveField</code>","position":{"start":{"line":458,"column":6,"offset":16499},"end":{"line":458,"column":24,"offset":16517}}},{"type":"text","value":" handler can optionally return an ","position":{"start":{"line":458,"column":24,"offset":16517},"end":{"line":458,"column":58,"offset":16551}}},{"type":"element","tagName":"a","properties":{"href":"#end-hooks"},"children":[{"type":"text","value":"\"end hook\"","position":{"start":{"line":458,"column":59,"offset":16552},"end":{"line":458,"column":69,"offset":16562}}}],"position":{"start":{"line":458,"column":58,"offset":16551},"end":{"line":458,"column":82,"offset":16575}}},{"type":"text","value":" function that's invoked with the resolver's result (or the error that it throws). The end hook is called when your resolver has ","position":{"start":{"line":458,"column":82,"offset":16575},"end":{"line":458,"column":211,"offset":16704}}},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"fully","position":{"start":{"line":458,"column":212,"offset":16705},"end":{"line":458,"column":217,"offset":16710}}}],"position":{"start":{"line":458,"column":211,"offset":16704},"end":{"line":458,"column":218,"offset":16711}}},{"type":"text","value":" resolved (e.g., if the resolver returns a Promise, the hook is called with the Promise's eventual resolved result).","position":{"start":{"line":458,"column":218,"offset":16711},"end":{"line":458,"column":334,"offset":16827}}}],"position":{"start":{"line":458,"column":1,"offset":16494},"end":{"line":458,"column":334,"offset":16827}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h4","properties":{"id":"example-2","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#example-2","aria-label":"example 2 permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Example","position":{"start":{"line":460,"column":6,"offset":16834},"end":{"line":460,"column":13,"offset":16841}}}],"position":{"start":{"line":460,"column":1,"offset":16829},"end":{"line":460,"column":13,"offset":16841}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">/* ... other necessary configuration ... */</span>\n\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">requestDidStart</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">initialRequestContext</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token function\">executionDidStart</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">executionRequestContext</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n              <span class=\"token function\">willResolveField</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span>source<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> info<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                <span class=\"token keyword\">const</span> start <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>hrtime<span class=\"token punctuation\">.</span><span class=\"token function\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">error<span class=\"token punctuation\">,</span> result</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                  <span class=\"token keyword\">const</span> end <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>hrtime<span class=\"token punctuation\">.</span><span class=\"token function\">bigint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Field </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>info<span class=\"token punctuation\">.</span>parentType<span class=\"token punctuation\">.</span>name<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>info<span class=\"token punctuation\">.</span>fieldName<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\"> took </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>end <span class=\"token operator\">-</span> start<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">ns</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>error<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n                    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">It failed with </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>error<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n                    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">It returned </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>result<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                  <span class=\"token punctuation\">}</span>\n                <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n              <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":462,"column":1,"offset":16843},"end":{"line":491,"column":4,"offset":17702}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"didencountererrors","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#didencountererrors","aria-label":"didencountererrors permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"raw","value":"<code class=\"language-text\">didEncounterErrors</code>","position":{"start":{"line":493,"column":5,"offset":17708},"end":{"line":493,"column":25,"offset":17728}}}],"position":{"start":{"line":493,"column":1,"offset":17704},"end":{"line":493,"column":25,"offset":17728}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The ","position":{"start":{"line":495,"column":1,"offset":17730},"end":{"line":495,"column":5,"offset":17734}}},{"type":"raw","value":"<code class=\"language-text\">didEncounterErrors</code>","position":{"start":{"line":495,"column":5,"offset":17734},"end":{"line":495,"column":25,"offset":17754}}},{"type":"text","value":" event fires when Apollo Server encounters errors while\nparsing, validating, or executing a GraphQL operation.","position":{"start":{"line":495,"column":25,"offset":17754},"end":{"line":496,"column":55,"offset":17864}}}],"position":{"start":{"line":495,"column":1,"offset":17730},"end":{"line":496,"column":55,"offset":17864}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\">didEncounterErrors<span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>\n  requestContext<span class=\"token operator\">:</span> WithRequired<span class=\"token operator\">&lt;</span>\n    GraphQLRequestContext<span class=\"token operator\">&lt;</span>TContext<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'metrics'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'source'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'errors'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'logger'</span>\n  <span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> ValueOrPromise<span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":498,"column":1,"offset":17866},"end":{"line":505,"column":4,"offset":18050}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"willsendresponse","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#willsendresponse","aria-label":"willsendresponse permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"raw","value":"<code class=\"language-text\">willSendResponse</code>","position":{"start":{"line":507,"column":5,"offset":18056},"end":{"line":507,"column":23,"offset":18074}}}],"position":{"start":{"line":507,"column":1,"offset":18052},"end":{"line":507,"column":23,"offset":18074}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The ","position":{"start":{"line":509,"column":1,"offset":18076},"end":{"line":509,"column":5,"offset":18080}}},{"type":"raw","value":"<code class=\"language-text\">willSendResponse</code>","position":{"start":{"line":509,"column":5,"offset":18080},"end":{"line":509,"column":23,"offset":18098}}},{"type":"text","value":" event fires whenever Apollo Server is about to send a response\nfor a GraphQL operation. This event fires (and Apollo Server sends a response) even\nif the GraphQL operation encounters one or more errors.","position":{"start":{"line":509,"column":23,"offset":18098},"end":{"line":511,"column":56,"offset":18301}}}],"position":{"start":{"line":509,"column":1,"offset":18076},"end":{"line":511,"column":56,"offset":18301}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-typescript line-numbers\"><code class=\"language-typescript\">willSendResponse<span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>\n  requestContext<span class=\"token operator\">:</span> WithRequired<span class=\"token operator\">&lt;</span>\n    GraphQLRequestContext<span class=\"token operator\">&lt;</span>TContext<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n    <span class=\"token string\">'metrics'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'response'</span> <span class=\"token operator\">|</span> <span class=\"token string\">'logger'</span>\n  <span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> ValueOrPromise<span class=\"token operator\">&lt;</span><span class=\"token keyword\">void</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":513,"column":1,"offset":18303},"end":{"line":520,"column":4,"offset":18476}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":521,"column":1,"offset":18477}}}}