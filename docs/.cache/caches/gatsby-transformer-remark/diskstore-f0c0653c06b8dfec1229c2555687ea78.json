{"expireTime":9007200901520846000,"key":"transformer-remark-markdown-ast-336456f651d07bf1ee0e6e30537c4a98-gatsby-remark-autolink-headersgatsby-remark-copy-linked-filesgatsby-remark-mermaidgatsby-remark-code-titlesgatsby-remark-prismjsgatsby-remark-rewrite-relative-linksgatsby-remark-check-links-","val":{"type":"root","children":[{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"New in Apollo Server 3","position":{"start":{"line":2,"column":5,"offset":5},"end":{"line":2,"column":27,"offset":27}}}],"position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":29,"offset":29}}},{"type":"text","value":": You must manually define the ","position":{"start":{"line":2,"column":29,"offset":29},"end":{"line":2,"column":60,"offset":60}}},{"type":"html","value":"<code class=\"language-text\">@cacheControl</code>","position":{"start":{"line":2,"column":60,"offset":60},"end":{"line":2,"column":75,"offset":75}}},{"type":"text","value":" directive in your schema to use static cache hints. ","position":{"start":{"line":2,"column":75,"offset":75},"end":{"line":2,"column":128,"offset":128}}},{"type":"link","title":null,"url":"#in-your-schema-static","children":[{"type":"text","value":"See below.","position":{"start":{"line":2,"column":129,"offset":129},"end":{"line":2,"column":139,"offset":139}}}],"position":{"start":{"line":2,"column":128,"offset":128},"end":{"line":2,"column":164,"offset":164}}}],"position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":164,"offset":164}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":164,"offset":164}}},{"type":"paragraph","children":[{"type":"text","value":"Apollo Server enables you to define cache control settings (","position":{"start":{"line":4,"column":1,"offset":166},"end":{"line":4,"column":61,"offset":226}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":4,"column":61,"offset":226},"end":{"line":4,"column":69,"offset":234}}},{"type":"text","value":" and ","position":{"start":{"line":4,"column":69,"offset":234},"end":{"line":4,"column":74,"offset":239}}},{"type":"html","value":"<code class=\"language-text\">scope</code>","position":{"start":{"line":4,"column":74,"offset":239},"end":{"line":4,"column":81,"offset":246}}},{"type":"text","value":") for each field in your schema:","position":{"start":{"line":4,"column":81,"offset":246},"end":{"line":4,"column":113,"offset":278}}}],"position":{"start":{"line":4,"column":1,"offset":166},"end":{"line":4,"column":113,"offset":278}}},{"type":"html","lang":"graphql{5,7}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Post</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">ID</span><span class=\"token operator\">!</span>\n  <span class=\"token attr-name\">title</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span>\n  <span class=\"token attr-name\">author</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">Author</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token attr-name\">votes</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">Int</span> <span class=\"token directive function\">@cacheControl</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">maxAge</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>  <span class=\"token attr-name\">comments</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">Comment</span><span class=\"token punctuation\">]</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token attr-name\">readByCurrentUser</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">Boolean</span><span class=\"token operator\">!</span> <span class=\"token directive function\">@cacheControl</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">maxAge</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">scope</span><span class=\"token punctuation\">:</span> <span class=\"token constant\">PRIVATE</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":6,"column":1,"offset":280},"end":{"line":15,"column":4,"offset":489}}},{"type":"paragraph","children":[{"type":"text","value":"When Apollo Server resolves an operation, it calculates the result's correct cache behavior based on the ","position":{"start":{"line":17,"column":1,"offset":491},"end":{"line":17,"column":106,"offset":596}}},{"type":"link","title":null,"url":"#calculating-cache-behavior","children":[{"type":"emphasis","children":[{"type":"text","value":"most restrictive","position":{"start":{"line":17,"column":108,"offset":598},"end":{"line":17,"column":124,"offset":614}}}],"position":{"start":{"line":17,"column":107,"offset":597},"end":{"line":17,"column":125,"offset":615}}},{"type":"text","value":" settings","position":{"start":{"line":17,"column":125,"offset":615},"end":{"line":17,"column":134,"offset":624}}}],"position":{"start":{"line":17,"column":106,"offset":596},"end":{"line":17,"column":164,"offset":654}}},{"type":"text","value":" among the result's fields. You can then use this calculation to support any form of cache implementation you want, such as by providing it to your CDN via a ","position":{"start":{"line":17,"column":164,"offset":654},"end":{"line":17,"column":322,"offset":812}}},{"type":"html","value":"<code class=\"language-text\">Cache-Control</code>","position":{"start":{"line":17,"column":322,"offset":812},"end":{"line":17,"column":337,"offset":827}}},{"type":"text","value":" header.","position":{"start":{"line":17,"column":337,"offset":827},"end":{"line":17,"column":345,"offset":835}}}],"position":{"start":{"line":17,"column":1,"offset":491},"end":{"line":17,"column":345,"offset":835}}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#setting-cache-hints","title":null,"children":[],"data":{"hProperties":{"aria-label":"setting cache hints permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Setting cache hints","position":{"start":{"line":19,"column":4,"offset":840},"end":{"line":19,"column":23,"offset":859}}}],"position":{"start":{"line":19,"column":1,"offset":837},"end":{"line":19,"column":23,"offset":859}},"data":{"id":"setting-cache-hints","htmlAttributes":{"id":"setting-cache-hints"},"hProperties":{"id":"setting-cache-hints","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"You can define field-level cache hints ","position":{"start":{"line":21,"column":1,"offset":861},"end":{"line":21,"column":40,"offset":900}}},{"type":"link","title":null,"url":"#in-your-schema-static","children":[{"type":"text","value":"statically","position":{"start":{"line":21,"column":41,"offset":901},"end":{"line":21,"column":51,"offset":911}}}],"position":{"start":{"line":21,"column":40,"offset":900},"end":{"line":21,"column":76,"offset":936}}},{"type":"text","value":"  in your schema definition or ","position":{"start":{"line":21,"column":76,"offset":936},"end":{"line":21,"column":107,"offset":967}}},{"type":"link","title":null,"url":"#in-your-resolvers-dynamic","children":[{"type":"text","value":"dynamically","position":{"start":{"line":21,"column":108,"offset":968},"end":{"line":21,"column":119,"offset":979}}}],"position":{"start":{"line":21,"column":107,"offset":967},"end":{"line":21,"column":148,"offset":1008}}},{"type":"text","value":" in your resolvers (or both).","position":{"start":{"line":21,"column":148,"offset":1008},"end":{"line":21,"column":177,"offset":1037}}}],"position":{"start":{"line":21,"column":1,"offset":861},"end":{"line":21,"column":177,"offset":1037}}},{"type":"paragraph","children":[{"type":"text","value":"Note that when setting cache hints, it's important to understand:","position":{"start":{"line":23,"column":1,"offset":1039},"end":{"line":23,"column":66,"offset":1104}}}],"position":{"start":{"line":23,"column":1,"offset":1039},"end":{"line":23,"column":66,"offset":1104}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Which fields of your schema can be cached safely","position":{"start":{"line":25,"column":3,"offset":1108},"end":{"line":25,"column":51,"offset":1156}}}],"position":{"start":{"line":25,"column":3,"offset":1108},"end":{"line":25,"column":51,"offset":1156}}}],"position":{"start":{"line":25,"column":1,"offset":1106},"end":{"line":25,"column":51,"offset":1156}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"How long a cached value should remain valid","position":{"start":{"line":26,"column":3,"offset":1159},"end":{"line":26,"column":46,"offset":1202}}}],"position":{"start":{"line":26,"column":3,"offset":1159},"end":{"line":26,"column":46,"offset":1202}}}],"position":{"start":{"line":26,"column":1,"offset":1157},"end":{"line":26,"column":46,"offset":1202}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Whether a cached value is global or user-specific","position":{"start":{"line":27,"column":3,"offset":1205},"end":{"line":27,"column":52,"offset":1254}}}],"position":{"start":{"line":27,"column":3,"offset":1205},"end":{"line":27,"column":52,"offset":1254}}}],"position":{"start":{"line":27,"column":1,"offset":1203},"end":{"line":27,"column":52,"offset":1254}}}],"position":{"start":{"line":25,"column":1,"offset":1106},"end":{"line":27,"column":52,"offset":1254}}},{"type":"paragraph","children":[{"type":"text","value":"These details can vary significantly, even among the fields of a single object type.","position":{"start":{"line":29,"column":1,"offset":1256},"end":{"line":29,"column":85,"offset":1340}}}],"position":{"start":{"line":29,"column":1,"offset":1256},"end":{"line":29,"column":85,"offset":1340}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#in-your-schema-static","title":null,"children":[],"data":{"hProperties":{"aria-label":"in your schema static permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"In your schema (static)","position":{"start":{"line":31,"column":5,"offset":1346},"end":{"line":31,"column":28,"offset":1369}}}],"position":{"start":{"line":31,"column":1,"offset":1342},"end":{"line":31,"column":28,"offset":1369}},"data":{"id":"in-your-schema-static","htmlAttributes":{"id":"in-your-schema-static"},"hProperties":{"id":"in-your-schema-static","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Apollo Server recognizes the ","position":{"start":{"line":33,"column":1,"offset":1371},"end":{"line":33,"column":30,"offset":1400}}},{"type":"html","value":"<code class=\"language-text\">@cacheControl</code>","position":{"start":{"line":33,"column":30,"offset":1400},"end":{"line":33,"column":45,"offset":1415}}},{"type":"text","value":" directive, which you can use in your schema to define caching behavior either for a ","position":{"start":{"line":33,"column":45,"offset":1415},"end":{"line":33,"column":130,"offset":1500}}},{"type":"link","title":null,"url":"#field-level-definitions","children":[{"type":"text","value":"single field","position":{"start":{"line":33,"column":131,"offset":1501},"end":{"line":33,"column":143,"offset":1513}}}],"position":{"start":{"line":33,"column":130,"offset":1500},"end":{"line":33,"column":170,"offset":1540}}},{"type":"text","value":", or for ","position":{"start":{"line":33,"column":170,"offset":1540},"end":{"line":33,"column":179,"offset":1549}}},{"type":"emphasis","children":[{"type":"text","value":"all","position":{"start":{"line":33,"column":180,"offset":1550},"end":{"line":33,"column":183,"offset":1553}}}],"position":{"start":{"line":33,"column":179,"offset":1549},"end":{"line":33,"column":184,"offset":1554}}},{"type":"text","value":" fields that return a particular ","position":{"start":{"line":33,"column":184,"offset":1554},"end":{"line":33,"column":217,"offset":1587}}},{"type":"link","title":null,"url":"#type-level-definitions","children":[{"type":"text","value":"type","position":{"start":{"line":33,"column":218,"offset":1588},"end":{"line":33,"column":222,"offset":1592}}}],"position":{"start":{"line":33,"column":217,"offset":1587},"end":{"line":33,"column":248,"offset":1618}}},{"type":"text","value":".","position":{"start":{"line":33,"column":248,"offset":1618},"end":{"line":33,"column":249,"offset":1619}}}],"position":{"start":{"line":33,"column":1,"offset":1371},"end":{"line":33,"column":249,"offset":1619}}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"To use the ","position":{"start":{"line":35,"column":3,"offset":1623},"end":{"line":35,"column":14,"offset":1634}}},{"type":"html","value":"<code class=\"language-text\">@cacheControl</code>","position":{"start":{"line":35,"column":14,"offset":1634},"end":{"line":35,"column":29,"offset":1649}}},{"type":"text","value":" directive, you must add the following definitions to your server's schema:","position":{"start":{"line":35,"column":29,"offset":1649},"end":{"line":35,"column":104,"offset":1724}}}],"position":{"start":{"line":35,"column":1,"offset":1621},"end":{"line":35,"column":106,"offset":1726}}}],"position":{"start":{"line":35,"column":1,"offset":1621},"end":{"line":35,"column":106,"offset":1726}}},{"type":"html","lang":"graphql","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">enum</span> <span class=\"token class-name\">CacheControlScope</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token constant\">PUBLIC</span>\n  <span class=\"token constant\">PRIVATE</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">directive</span> <span class=\"token directive function\">@cacheControl</span><span class=\"token punctuation\">(</span>\n  <span class=\"token attr-name\">maxAge</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">Int</span>\n  <span class=\"token attr-name\">scope</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">CacheControlScope</span>\n  <span class=\"token attr-name\">inheritMaxAge</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">Boolean</span>\n<span class=\"token punctuation\">)</span> <span class=\"token keyword\">on</span> <span class=\"token constant\">FIELD_DEFINITION</span> <span class=\"token operator\">|</span> <span class=\"token constant\">OBJECT</span> <span class=\"token operator\">|</span> <span class=\"token constant\">INTERFACE</span> <span class=\"token operator\">|</span> <span class=\"token constant\">UNION</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":37,"column":1,"offset":1728},"end":{"line":48,"column":4,"offset":1931}}},{"type":"paragraph","children":[{"type":"text","value":"If you don't add these definitions, Apollo Server throws an ","position":{"start":{"line":50,"column":1,"offset":1933},"end":{"line":50,"column":61,"offset":1993}}},{"type":"html","value":"<code class=\"language-text\">Unknown directive \"@cacheControl\"</code>","position":{"start":{"line":50,"column":61,"offset":1993},"end":{"line":50,"column":96,"offset":2028}}},{"type":"text","value":" error on startup.","position":{"start":{"line":50,"column":96,"offset":2028},"end":{"line":50,"column":114,"offset":2046}}}],"position":{"start":{"line":50,"column":1,"offset":1933},"end":{"line":50,"column":114,"offset":2046}}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":53,"column":1,"offset":2049},"end":{"line":53,"column":5,"offset":2053}}},{"type":"html","value":"<code class=\"language-text\">@cacheControl</code>","position":{"start":{"line":53,"column":5,"offset":2053},"end":{"line":53,"column":20,"offset":2068}}},{"type":"text","value":" directive accepts the following arguments:","position":{"start":{"line":53,"column":20,"offset":2068},"end":{"line":53,"column":63,"offset":2111}}}],"position":{"start":{"line":53,"column":1,"offset":2049},"end":{"line":53,"column":63,"offset":2111}}},{"type":"table","align":[null,null],"children":[{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Name","position":{"start":{"line":55,"column":3,"offset":2115},"end":{"line":55,"column":7,"offset":2119}}}],"position":{"start":{"line":55,"column":1,"offset":2113},"end":{"line":55,"column":9,"offset":2121}}},{"type":"tableCell","children":[{"type":"text","value":"Description","position":{"start":{"line":55,"column":10,"offset":2122},"end":{"line":55,"column":21,"offset":2133}}}],"position":{"start":{"line":55,"column":9,"offset":2121},"end":{"line":55,"column":23,"offset":2135}}}],"position":{"start":{"line":55,"column":1,"offset":2113},"end":{"line":55,"column":23,"offset":2135}}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":57,"column":3,"offset":2161},"end":{"line":57,"column":11,"offset":2169}}}],"position":{"start":{"line":57,"column":1,"offset":2159},"end":{"line":57,"column":13,"offset":2171}}},{"type":"tableCell","children":[{"type":"text","value":"The maximum amount of time the field's cached value is valid, in seconds. The default value is ","position":{"start":{"line":57,"column":14,"offset":2172},"end":{"line":57,"column":109,"offset":2267}}},{"type":"html","value":"<code class=\"language-text\">0</code>","position":{"start":{"line":57,"column":109,"offset":2267},"end":{"line":57,"column":112,"offset":2270}}},{"type":"text","value":", but you can ","position":{"start":{"line":57,"column":112,"offset":2270},"end":{"line":57,"column":126,"offset":2284}}},{"type":"link","title":null,"url":"#setting-a-different-default-maxage","children":[{"type":"text","value":"set a different default","position":{"start":{"line":57,"column":127,"offset":2285},"end":{"line":57,"column":150,"offset":2308}}}],"position":{"start":{"line":57,"column":126,"offset":2284},"end":{"line":57,"column":188,"offset":2346}}},{"type":"text","value":".","position":{"start":{"line":57,"column":188,"offset":2346},"end":{"line":57,"column":189,"offset":2347}}}],"position":{"start":{"line":57,"column":13,"offset":2171},"end":{"line":57,"column":191,"offset":2349}}}],"position":{"start":{"line":57,"column":1,"offset":2159},"end":{"line":57,"column":191,"offset":2349}}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"html","value":"<code class=\"language-text\">scope</code>","position":{"start":{"line":58,"column":3,"offset":2352},"end":{"line":58,"column":10,"offset":2359}}}],"position":{"start":{"line":58,"column":1,"offset":2350},"end":{"line":58,"column":12,"offset":2361}}},{"type":"tableCell","children":[{"type":"text","value":"If ","position":{"start":{"line":58,"column":13,"offset":2362},"end":{"line":58,"column":16,"offset":2365}}},{"type":"html","value":"<code class=\"language-text\">PRIVATE</code>","position":{"start":{"line":58,"column":16,"offset":2365},"end":{"line":58,"column":25,"offset":2374}}},{"type":"text","value":", the field's value is specific to a single user. The default value is ","position":{"start":{"line":58,"column":25,"offset":2374},"end":{"line":58,"column":96,"offset":2445}}},{"type":"html","value":"<code class=\"language-text\">PUBLIC</code>","position":{"start":{"line":58,"column":96,"offset":2445},"end":{"line":58,"column":104,"offset":2453}}},{"type":"text","value":". See also ","position":{"start":{"line":58,"column":104,"offset":2453},"end":{"line":58,"column":115,"offset":2464}}},{"type":"link","title":null,"url":"#identifying-users-for-private-responses","children":[{"type":"text","value":"Identifying users for ","position":{"start":{"line":58,"column":116,"offset":2465},"end":{"line":58,"column":138,"offset":2487}}},{"type":"html","value":"<code class=\"language-text\">PRIVATE</code>","position":{"start":{"line":58,"column":138,"offset":2487},"end":{"line":58,"column":147,"offset":2496}}},{"type":"text","value":" responses","position":{"start":{"line":58,"column":147,"offset":2496},"end":{"line":58,"column":157,"offset":2506}}}],"position":{"start":{"line":58,"column":115,"offset":2464},"end":{"line":58,"column":200,"offset":2549}}},{"type":"text","value":".","position":{"start":{"line":58,"column":200,"offset":2549},"end":{"line":58,"column":201,"offset":2550}}}],"position":{"start":{"line":58,"column":12,"offset":2361},"end":{"line":58,"column":203,"offset":2552}}}],"position":{"start":{"line":58,"column":1,"offset":2350},"end":{"line":58,"column":203,"offset":2552}}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"html","value":"<code class=\"language-text\">inheritMaxAge</code>","position":{"start":{"line":59,"column":3,"offset":2555},"end":{"line":59,"column":18,"offset":2570}}}],"position":{"start":{"line":59,"column":1,"offset":2553},"end":{"line":59,"column":20,"offset":2572}}},{"type":"tableCell","children":[{"type":"text","value":"If ","position":{"start":{"line":59,"column":21,"offset":2573},"end":{"line":59,"column":24,"offset":2576}}},{"type":"html","value":"<code class=\"language-text\">true</code>","position":{"start":{"line":59,"column":24,"offset":2576},"end":{"line":59,"column":30,"offset":2582}}},{"type":"text","value":", this field inherits the ","position":{"start":{"line":59,"column":30,"offset":2582},"end":{"line":59,"column":56,"offset":2608}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":59,"column":56,"offset":2608},"end":{"line":59,"column":64,"offset":2616}}},{"type":"text","value":" of its parent field instead of using the ","position":{"start":{"line":59,"column":64,"offset":2616},"end":{"line":59,"column":106,"offset":2658}}},{"type":"link","title":null,"url":"#setting-a-different-default-maxage","children":[{"type":"text","value":"default ","position":{"start":{"line":59,"column":107,"offset":2659},"end":{"line":59,"column":115,"offset":2667}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":59,"column":115,"offset":2667},"end":{"line":59,"column":123,"offset":2675}}}],"position":{"start":{"line":59,"column":106,"offset":2658},"end":{"line":59,"column":161,"offset":2713}}},{"type":"text","value":". Do not provide ","position":{"start":{"line":59,"column":161,"offset":2713},"end":{"line":59,"column":178,"offset":2730}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":59,"column":178,"offset":2730},"end":{"line":59,"column":186,"offset":2738}}},{"type":"text","value":" if you provide this argument.","position":{"start":{"line":59,"column":186,"offset":2738},"end":{"line":59,"column":216,"offset":2768}}}],"position":{"start":{"line":59,"column":20,"offset":2572},"end":{"line":59,"column":218,"offset":2770}}}],"position":{"start":{"line":59,"column":1,"offset":2553},"end":{"line":59,"column":218,"offset":2770}}}],"position":{"start":{"line":55,"column":1,"offset":2113},"end":{"line":59,"column":218,"offset":2770}}},{"type":"paragraph","children":[{"type":"text","value":"Use ","position":{"start":{"line":61,"column":1,"offset":2772},"end":{"line":61,"column":5,"offset":2776}}},{"type":"html","value":"<code class=\"language-text\">@cacheControl</code>","position":{"start":{"line":61,"column":5,"offset":2776},"end":{"line":61,"column":20,"offset":2791}}},{"type":"text","value":" for fields that should usually be cached with the same settings. If caching settings might change at runtime, you can use the ","position":{"start":{"line":61,"column":20,"offset":2791},"end":{"line":61,"column":147,"offset":2918}}},{"type":"link","title":null,"url":"#in-your-resolvers-dynamic","children":[{"type":"text","value":"dynamic method","position":{"start":{"line":61,"column":148,"offset":2919},"end":{"line":61,"column":162,"offset":2933}}}],"position":{"start":{"line":61,"column":147,"offset":2918},"end":{"line":61,"column":191,"offset":2962}}},{"type":"text","value":".","position":{"start":{"line":61,"column":191,"offset":2962},"end":{"line":61,"column":192,"offset":2963}}}],"position":{"start":{"line":61,"column":1,"offset":2772},"end":{"line":61,"column":192,"offset":2963}}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Important:","position":{"start":{"line":63,"column":5,"offset":2969},"end":{"line":63,"column":15,"offset":2979}}}],"position":{"start":{"line":63,"column":3,"offset":2967},"end":{"line":63,"column":17,"offset":2981}}},{"type":"text","value":" Apollo Server assigns each GraphQL response a ","position":{"start":{"line":63,"column":17,"offset":2981},"end":{"line":63,"column":64,"offset":3028}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":63,"column":64,"offset":3028},"end":{"line":63,"column":72,"offset":3036}}},{"type":"text","value":" equal to the ","position":{"start":{"line":63,"column":72,"offset":3036},"end":{"line":63,"column":86,"offset":3050}}},{"type":"emphasis","children":[{"type":"text","value":"lowest","position":{"start":{"line":63,"column":87,"offset":3051},"end":{"line":63,"column":93,"offset":3057}}}],"position":{"start":{"line":63,"column":86,"offset":3050},"end":{"line":63,"column":94,"offset":3058}}},{"type":"text","value":" ","position":{"start":{"line":63,"column":94,"offset":3058},"end":{"line":63,"column":95,"offset":3059}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":63,"column":95,"offset":3059},"end":{"line":63,"column":103,"offset":3067}}},{"type":"text","value":" among included fields. If any field has a ","position":{"start":{"line":63,"column":103,"offset":3067},"end":{"line":63,"column":146,"offset":3110}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":63,"column":146,"offset":3110},"end":{"line":63,"column":154,"offset":3118}}},{"type":"text","value":" of ","position":{"start":{"line":63,"column":154,"offset":3118},"end":{"line":63,"column":158,"offset":3122}}},{"type":"html","value":"<code class=\"language-text\">0</code>","position":{"start":{"line":63,"column":158,"offset":3122},"end":{"line":63,"column":161,"offset":3125}}},{"type":"text","value":", the response will not be cached at all.","position":{"start":{"line":63,"column":161,"offset":3125},"end":{"line":63,"column":202,"offset":3166}}}],"position":{"start":{"line":63,"column":3,"offset":2967},"end":{"line":63,"column":202,"offset":3166}}},{"type":"paragraph","children":[{"type":"text","value":"Similarly, Apollo Server sets a response's ","position":{"start":{"line":65,"column":3,"offset":3171},"end":{"line":65,"column":46,"offset":3214}}},{"type":"html","value":"<code class=\"language-text\">scope</code>","position":{"start":{"line":65,"column":46,"offset":3214},"end":{"line":65,"column":53,"offset":3221}}},{"type":"text","value":" to ","position":{"start":{"line":65,"column":53,"offset":3221},"end":{"line":65,"column":57,"offset":3225}}},{"type":"html","value":"<code class=\"language-text\">PRIVATE</code>","position":{"start":{"line":65,"column":57,"offset":3225},"end":{"line":65,"column":66,"offset":3234}}},{"type":"text","value":" if ","position":{"start":{"line":65,"column":66,"offset":3234},"end":{"line":65,"column":70,"offset":3238}}},{"type":"emphasis","children":[{"type":"text","value":"any","position":{"start":{"line":65,"column":71,"offset":3239},"end":{"line":65,"column":74,"offset":3242}}}],"position":{"start":{"line":65,"column":70,"offset":3238},"end":{"line":65,"column":75,"offset":3243}}},{"type":"text","value":" included field is ","position":{"start":{"line":65,"column":75,"offset":3243},"end":{"line":65,"column":94,"offset":3262}}},{"type":"html","value":"<code class=\"language-text\">PRIVATE</code>","position":{"start":{"line":65,"column":94,"offset":3262},"end":{"line":65,"column":103,"offset":3271}}},{"type":"text","value":".","position":{"start":{"line":65,"column":103,"offset":3271},"end":{"line":65,"column":104,"offset":3272}}}],"position":{"start":{"line":65,"column":3,"offset":3171},"end":{"line":65,"column":104,"offset":3272}}}],"position":{"start":{"line":63,"column":1,"offset":2965},"end":{"line":65,"column":104,"offset":3272}}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#field-level-definitions","title":null,"children":[],"data":{"hProperties":{"aria-label":"field level definitions permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Field-level definitions","position":{"start":{"line":67,"column":6,"offset":3279},"end":{"line":67,"column":29,"offset":3302}}}],"position":{"start":{"line":67,"column":1,"offset":3274},"end":{"line":67,"column":29,"offset":3302}},"data":{"id":"field-level-definitions","htmlAttributes":{"id":"field-level-definitions"},"hProperties":{"id":"field-level-definitions","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"This example defines cache control settings for two fields of the ","position":{"start":{"line":69,"column":1,"offset":3304},"end":{"line":69,"column":67,"offset":3370}}},{"type":"html","value":"<code class=\"language-text\">Post</code>","position":{"start":{"line":69,"column":67,"offset":3370},"end":{"line":69,"column":73,"offset":3376}}},{"type":"text","value":" type: ","position":{"start":{"line":69,"column":73,"offset":3376},"end":{"line":69,"column":80,"offset":3383}}},{"type":"html","value":"<code class=\"language-text\">votes</code>","position":{"start":{"line":69,"column":80,"offset":3383},"end":{"line":69,"column":87,"offset":3390}}},{"type":"text","value":" and ","position":{"start":{"line":69,"column":87,"offset":3390},"end":{"line":69,"column":92,"offset":3395}}},{"type":"html","value":"<code class=\"language-text\">readByCurrentUser</code>","position":{"start":{"line":69,"column":92,"offset":3395},"end":{"line":69,"column":111,"offset":3414}}},{"type":"text","value":":","position":{"start":{"line":69,"column":111,"offset":3414},"end":{"line":69,"column":112,"offset":3415}}}],"position":{"start":{"line":69,"column":1,"offset":3304},"end":{"line":69,"column":112,"offset":3415}}},{"type":"html","value":"<div class=\"gatsby-code-title\">schema.graphql</div>"},{"type":"html","lang":"graphql{5,7}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Post</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">ID</span><span class=\"token operator\">!</span>\n  <span class=\"token attr-name\">title</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span>\n  <span class=\"token attr-name\">author</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">Author</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token attr-name\">votes</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">Int</span> <span class=\"token directive function\">@cacheControl</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">maxAge</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span></span>  <span class=\"token attr-name\">comments</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">Comment</span><span class=\"token punctuation\">]</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token attr-name\">readByCurrentUser</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">Boolean</span><span class=\"token operator\">!</span> <span class=\"token directive function\">@cacheControl</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">maxAge</span><span class=\"token punctuation\">:</span> <span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token attr-name\">scope</span><span class=\"token punctuation\">:</span> <span class=\"token constant\">PRIVATE</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":71,"column":1,"offset":3417},"end":{"line":80,"column":4,"offset":3647}}},{"type":"paragraph","children":[{"type":"text","value":"In this example:","position":{"start":{"line":82,"column":1,"offset":3649},"end":{"line":82,"column":17,"offset":3665}}}],"position":{"start":{"line":82,"column":1,"offset":3649},"end":{"line":82,"column":17,"offset":3665}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The value of the ","position":{"start":{"line":84,"column":3,"offset":3669},"end":{"line":84,"column":20,"offset":3686}}},{"type":"html","value":"<code class=\"language-text\">votes</code>","position":{"start":{"line":84,"column":20,"offset":3686},"end":{"line":84,"column":27,"offset":3693}}},{"type":"text","value":" field is cached for a maximum of 30 seconds.","position":{"start":{"line":84,"column":27,"offset":3693},"end":{"line":84,"column":72,"offset":3738}}}],"position":{"start":{"line":84,"column":3,"offset":3669},"end":{"line":84,"column":72,"offset":3738}}}],"position":{"start":{"line":84,"column":1,"offset":3667},"end":{"line":84,"column":72,"offset":3738}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The value of the ","position":{"start":{"line":85,"column":3,"offset":3741},"end":{"line":85,"column":20,"offset":3758}}},{"type":"html","value":"<code class=\"language-text\">readByCurrentUser</code>","position":{"start":{"line":85,"column":20,"offset":3758},"end":{"line":85,"column":39,"offset":3777}}},{"type":"text","value":" field is cached for a maximum of 10 seconds, and its visibility is restricted to a single user.","position":{"start":{"line":85,"column":39,"offset":3777},"end":{"line":85,"column":135,"offset":3873}}}],"position":{"start":{"line":85,"column":3,"offset":3741},"end":{"line":85,"column":135,"offset":3873}}}],"position":{"start":{"line":85,"column":1,"offset":3739},"end":{"line":85,"column":135,"offset":3873}}}],"position":{"start":{"line":84,"column":1,"offset":3667},"end":{"line":85,"column":135,"offset":3873}}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#type-level-definitions","title":null,"children":[],"data":{"hProperties":{"aria-label":"type level definitions permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Type-level definitions","position":{"start":{"line":87,"column":6,"offset":3880},"end":{"line":87,"column":28,"offset":3902}}}],"position":{"start":{"line":87,"column":1,"offset":3875},"end":{"line":87,"column":28,"offset":3902}},"data":{"id":"type-level-definitions","htmlAttributes":{"id":"type-level-definitions"},"hProperties":{"id":"type-level-definitions","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"This example defines cache control settings for ","position":{"start":{"line":89,"column":1,"offset":3904},"end":{"line":89,"column":49,"offset":3952}}},{"type":"emphasis","children":[{"type":"text","value":"all","position":{"start":{"line":89,"column":50,"offset":3953},"end":{"line":89,"column":53,"offset":3956}}}],"position":{"start":{"line":89,"column":49,"offset":3952},"end":{"line":89,"column":54,"offset":3957}}},{"type":"text","value":" schema fields that return a ","position":{"start":{"line":89,"column":54,"offset":3957},"end":{"line":89,"column":83,"offset":3986}}},{"type":"html","value":"<code class=\"language-text\">Post</code>","position":{"start":{"line":89,"column":83,"offset":3986},"end":{"line":89,"column":89,"offset":3992}}},{"type":"text","value":" object:","position":{"start":{"line":89,"column":89,"offset":3992},"end":{"line":89,"column":97,"offset":4000}}}],"position":{"start":{"line":89,"column":1,"offset":3904},"end":{"line":89,"column":97,"offset":4000}}},{"type":"html","value":"<div class=\"gatsby-code-title\">schema.graphql</div>"},{"type":"html","lang":"graphql{1}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Post</span> <span class=\"token directive function\">@cacheControl</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">maxAge</span><span class=\"token punctuation\">:</span> <span class=\"token number\">240</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span>  <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">Int</span><span class=\"token operator\">!</span>\n  <span class=\"token attr-name\">title</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span>\n  <span class=\"token attr-name\">author</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">Author</span>\n  <span class=\"token attr-name\">votes</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">Int</span>\n  <span class=\"token attr-name\">comments</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token class-name\">Comment</span><span class=\"token punctuation\">]</span>\n  <span class=\"token attr-name\">readByCurrentUser</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">Boolean</span><span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":91,"column":1,"offset":4002},"end":{"line":100,"column":4,"offset":4190}}},{"type":"paragraph","children":[{"type":"text","value":"If another object type in this schema includes a field of type ","position":{"start":{"line":102,"column":1,"offset":4192},"end":{"line":102,"column":64,"offset":4255}}},{"type":"html","value":"<code class=\"language-text\">Post</code>","position":{"start":{"line":102,"column":64,"offset":4255},"end":{"line":102,"column":70,"offset":4261}}},{"type":"text","value":" (or a list of ","position":{"start":{"line":102,"column":70,"offset":4261},"end":{"line":102,"column":85,"offset":4276}}},{"type":"html","value":"<code class=\"language-text\">Post</code>","position":{"start":{"line":102,"column":85,"offset":4276},"end":{"line":102,"column":91,"offset":4282}}},{"type":"text","value":"s), that field's value is cached for a maximum of 240 seconds:","position":{"start":{"line":102,"column":91,"offset":4282},"end":{"line":102,"column":153,"offset":4344}}}],"position":{"start":{"line":102,"column":1,"offset":4192},"end":{"line":102,"column":153,"offset":4344}}},{"type":"html","value":"<div class=\"gatsby-code-title\">schema.graphql</div>"},{"type":"html","lang":"graphql","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Comment</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">post</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">Post</span><span class=\"token operator\">!</span> <span class=\"token comment\"># Cached for up to 240 seconds</span>\n  <span class=\"token attr-name\">body</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span><span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":104,"column":1,"offset":4346},"end":{"line":109,"column":4,"offset":4459}}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Note that ","position":{"start":{"line":111,"column":3,"offset":4463},"end":{"line":111,"column":13,"offset":4473}}},{"type":"link","title":null,"url":"#field-level-definitions","children":[{"type":"text","value":"field-level settings","position":{"start":{"line":111,"column":14,"offset":4474},"end":{"line":111,"column":34,"offset":4494}}}],"position":{"start":{"line":111,"column":13,"offset":4473},"end":{"line":111,"column":61,"offset":4521}}},{"type":"text","value":" override type-level settings.","position":{"start":{"line":111,"column":61,"offset":4521},"end":{"line":111,"column":91,"offset":4551}}}],"position":{"start":{"line":111,"column":1,"offset":4461},"end":{"line":111,"column":93,"offset":4553}}},{"type":"text","value":" In the following case, ","position":{"start":{"line":111,"column":93,"offset":4553},"end":{"line":111,"column":117,"offset":4577}}},{"type":"html","value":"<code class=\"language-text\">Comment.post</code>","position":{"start":{"line":111,"column":117,"offset":4577},"end":{"line":111,"column":131,"offset":4591}}},{"type":"text","value":" is cached for a maximum of 120 seconds, ","position":{"start":{"line":111,"column":131,"offset":4591},"end":{"line":111,"column":172,"offset":4632}}},{"type":"emphasis","children":[{"type":"text","value":"not","position":{"start":{"line":111,"column":173,"offset":4633},"end":{"line":111,"column":176,"offset":4636}}}],"position":{"start":{"line":111,"column":172,"offset":4632},"end":{"line":111,"column":177,"offset":4637}}},{"type":"text","value":" 240 seconds:","position":{"start":{"line":111,"column":177,"offset":4637},"end":{"line":111,"column":190,"offset":4650}}}],"position":{"start":{"line":111,"column":1,"offset":4461},"end":{"line":111,"column":190,"offset":4650}}},{"type":"html","value":"<div class=\"gatsby-code-title\">schema.graphql</div>"},{"type":"html","lang":"graphql","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Comment</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">post</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">Post</span><span class=\"token operator\">!</span> <span class=\"token directive function\">@cacheControl</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">maxAge</span><span class=\"token punctuation\">:</span> <span class=\"token number\">120</span><span class=\"token punctuation\">)</span>\n  <span class=\"token attr-name\">body</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span><span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":113,"column":1,"offset":4652},"end":{"line":118,"column":4,"offset":4761}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#in-your-resolvers-dynamic","title":null,"children":[],"data":{"hProperties":{"aria-label":"in your resolvers dynamic permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"In your resolvers (dynamic)","position":{"start":{"line":120,"column":5,"offset":4767},"end":{"line":120,"column":32,"offset":4794}}}],"position":{"start":{"line":120,"column":1,"offset":4763},"end":{"line":120,"column":32,"offset":4794}},"data":{"id":"in-your-resolvers-dynamic","htmlAttributes":{"id":"in-your-resolvers-dynamic"},"hProperties":{"id":"in-your-resolvers-dynamic","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"You can decide how to cache a particular field's result ","position":{"start":{"line":122,"column":1,"offset":4796},"end":{"line":122,"column":57,"offset":4852}}},{"type":"emphasis","children":[{"type":"text","value":"while","position":{"start":{"line":122,"column":58,"offset":4853},"end":{"line":122,"column":63,"offset":4858}}}],"position":{"start":{"line":122,"column":57,"offset":4852},"end":{"line":122,"column":64,"offset":4859}}},{"type":"text","value":" you're resolving it. To support this, Apollo Server provides a ","position":{"start":{"line":122,"column":64,"offset":4859},"end":{"line":122,"column":128,"offset":4923}}},{"type":"html","value":"<code class=\"language-text\">cacheControl</code>","position":{"start":{"line":122,"column":128,"offset":4923},"end":{"line":122,"column":142,"offset":4937}}},{"type":"text","value":" object in the ","position":{"start":{"line":122,"column":142,"offset":4937},"end":{"line":122,"column":157,"offset":4952}}},{"type":"link","title":null,"url":"/data/resolvers/#resolver-arguments","children":[{"type":"html","value":"<code class=\"language-text\">info</code>","position":{"start":{"line":122,"column":158,"offset":4953},"end":{"line":122,"column":164,"offset":4959}}},{"type":"text","value":" parameter","position":{"start":{"line":122,"column":164,"offset":4959},"end":{"line":122,"column":174,"offset":4969}}}],"position":{"start":{"line":122,"column":157,"offset":4952},"end":{"line":122,"column":214,"offset":5009}}},{"type":"text","value":" that's passed to every resolver.","position":{"start":{"line":122,"column":214,"offset":5009},"end":{"line":122,"column":247,"offset":5042}}}],"position":{"start":{"line":122,"column":1,"offset":4796},"end":{"line":122,"column":247,"offset":5042}}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"If you set a field's cache hint in its resolver, it ","position":{"start":{"line":124,"column":3,"offset":5046},"end":{"line":124,"column":55,"offset":5098}}},{"type":"strong","children":[{"type":"text","value":"overrides","position":{"start":{"line":124,"column":57,"offset":5100},"end":{"line":124,"column":66,"offset":5109}}}],"position":{"start":{"line":124,"column":55,"offset":5098},"end":{"line":124,"column":68,"offset":5111}}},{"type":"text","value":" any cache hint you ","position":{"start":{"line":124,"column":68,"offset":5111},"end":{"line":124,"column":88,"offset":5131}}},{"type":"link","title":null,"url":"#in-your-schema-static","children":[{"type":"text","value":"provided in your schema","position":{"start":{"line":124,"column":89,"offset":5132},"end":{"line":124,"column":112,"offset":5155}}}],"position":{"start":{"line":124,"column":88,"offset":5131},"end":{"line":124,"column":137,"offset":5180}}},{"type":"text","value":".","position":{"start":{"line":124,"column":137,"offset":5180},"end":{"line":124,"column":138,"offset":5181}}}],"position":{"start":{"line":124,"column":3,"offset":5046},"end":{"line":124,"column":138,"offset":5181}}}],"position":{"start":{"line":124,"column":1,"offset":5044},"end":{"line":124,"column":138,"offset":5181}}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#cachecontrolsetcachehint","title":null,"children":[],"data":{"hProperties":{"aria-label":"cachecontrolsetcachehint permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"html","value":"<code class=\"language-text\">cacheControl.setCacheHint</code>","position":{"start":{"line":126,"column":6,"offset":5188},"end":{"line":126,"column":33,"offset":5215}}}],"position":{"start":{"line":126,"column":1,"offset":5183},"end":{"line":126,"column":33,"offset":5215}},"data":{"id":"cachecontrolsetcachehint","htmlAttributes":{"id":"cachecontrolsetcachehint"},"hProperties":{"id":"cachecontrolsetcachehint","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":128,"column":1,"offset":5217},"end":{"line":128,"column":5,"offset":5221}}},{"type":"html","value":"<code class=\"language-text\">cacheControl</code>","position":{"start":{"line":128,"column":5,"offset":5221},"end":{"line":128,"column":19,"offset":5235}}},{"type":"text","value":" object includes a ","position":{"start":{"line":128,"column":19,"offset":5235},"end":{"line":128,"column":38,"offset":5254}}},{"type":"html","value":"<code class=\"language-text\">setCacheHint</code>","position":{"start":{"line":128,"column":38,"offset":5254},"end":{"line":128,"column":52,"offset":5268}}},{"type":"text","value":" method, which you call like so:","position":{"start":{"line":128,"column":52,"offset":5268},"end":{"line":128,"column":84,"offset":5300}}}],"position":{"start":{"line":128,"column":1,"offset":5217},"end":{"line":128,"column":84,"offset":5300}}},{"type":"html","lang":"js{4}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> resolvers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">Query</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">post</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> _<span class=\"token punctuation\">,</span> info</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n<span class=\"gatsby-highlight-code-line\">      info<span class=\"token punctuation\">.</span>cacheControl<span class=\"token punctuation\">.</span><span class=\"token function\">setCacheHint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">maxAge</span><span class=\"token operator\">:</span> <span class=\"token number\">60</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">scope</span><span class=\"token operator\">:</span> <span class=\"token string\">'PRIVATE'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>      <span class=\"token keyword\">return</span> <span class=\"token function\">find</span><span class=\"token punctuation\">(</span>posts<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":131,"column":1,"offset":5303},"end":{"line":140,"column":4,"offset":5500}}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":142,"column":1,"offset":5502},"end":{"line":142,"column":5,"offset":5506}}},{"type":"html","value":"<code class=\"language-text\">setCacheHint</code>","position":{"start":{"line":142,"column":5,"offset":5506},"end":{"line":142,"column":19,"offset":5520}}},{"type":"text","value":" method accepts an object with ","position":{"start":{"line":142,"column":19,"offset":5520},"end":{"line":142,"column":50,"offset":5551}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":142,"column":50,"offset":5551},"end":{"line":142,"column":58,"offset":5559}}},{"type":"text","value":" and ","position":{"start":{"line":142,"column":58,"offset":5559},"end":{"line":142,"column":63,"offset":5564}}},{"type":"html","value":"<code class=\"language-text\">scope</code>","position":{"start":{"line":142,"column":63,"offset":5564},"end":{"line":142,"column":70,"offset":5571}}},{"type":"text","value":" fields.","position":{"start":{"line":142,"column":70,"offset":5571},"end":{"line":142,"column":78,"offset":5579}}}],"position":{"start":{"line":142,"column":1,"offset":5502},"end":{"line":142,"column":78,"offset":5579}}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#cachecontrolcachehint","title":null,"children":[],"data":{"hProperties":{"aria-label":"cachecontrolcachehint permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"html","value":"<code class=\"language-text\">cacheControl.cacheHint</code>","position":{"start":{"line":144,"column":6,"offset":5586},"end":{"line":144,"column":30,"offset":5610}}}],"position":{"start":{"line":144,"column":1,"offset":5581},"end":{"line":144,"column":30,"offset":5610}},"data":{"id":"cachecontrolcachehint","htmlAttributes":{"id":"cachecontrolcachehint"},"hProperties":{"id":"cachecontrolcachehint","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"This object represents the field's current cache hint. Its fields include the following:","position":{"start":{"line":146,"column":1,"offset":5612},"end":{"line":146,"column":89,"offset":5700}}}],"position":{"start":{"line":146,"column":1,"offset":5612},"end":{"line":146,"column":89,"offset":5700}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The field's current ","position":{"start":{"line":148,"column":3,"offset":5704},"end":{"line":148,"column":23,"offset":5724}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":148,"column":23,"offset":5724},"end":{"line":148,"column":31,"offset":5732}}},{"type":"text","value":" and ","position":{"start":{"line":148,"column":31,"offset":5732},"end":{"line":148,"column":36,"offset":5737}}},{"type":"html","value":"<code class=\"language-text\">scope</code>","position":{"start":{"line":148,"column":36,"offset":5737},"end":{"line":148,"column":43,"offset":5744}}},{"type":"text","value":" (which might have been set ","position":{"start":{"line":148,"column":43,"offset":5744},"end":{"line":148,"column":71,"offset":5772}}},{"type":"link","title":null,"url":"#in-your-schema-static","children":[{"type":"text","value":"statically","position":{"start":{"line":148,"column":72,"offset":5773},"end":{"line":148,"column":82,"offset":5783}}}],"position":{"start":{"line":148,"column":71,"offset":5772},"end":{"line":148,"column":107,"offset":5808}}},{"type":"text","value":")","position":{"start":{"line":148,"column":107,"offset":5808},"end":{"line":148,"column":108,"offset":5809}}}],"position":{"start":{"line":148,"column":3,"offset":5704},"end":{"line":148,"column":108,"offset":5809}}}],"position":{"start":{"line":148,"column":1,"offset":5702},"end":{"line":148,"column":108,"offset":5809}}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A ","position":{"start":{"line":149,"column":3,"offset":5812},"end":{"line":149,"column":5,"offset":5814}}},{"type":"html","value":"<code class=\"language-text\">restrict</code>","position":{"start":{"line":149,"column":5,"offset":5814},"end":{"line":149,"column":15,"offset":5824}}},{"type":"text","value":" method, which is similar to ","position":{"start":{"line":149,"column":15,"offset":5824},"end":{"line":149,"column":44,"offset":5853}}},{"type":"html","value":"<code class=\"language-text\">setCacheHint</code>","position":{"start":{"line":149,"column":44,"offset":5853},"end":{"line":149,"column":58,"offset":5867}}},{"type":"text","value":" but it can't ","position":{"start":{"line":149,"column":58,"offset":5867},"end":{"line":149,"column":72,"offset":5881}}},{"type":"emphasis","children":[{"type":"text","value":"relax","position":{"start":{"line":149,"column":73,"offset":5882},"end":{"line":149,"column":78,"offset":5887}}}],"position":{"start":{"line":149,"column":72,"offset":5881},"end":{"line":149,"column":79,"offset":5888}}},{"type":"text","value":" existing hint settings:","position":{"start":{"line":149,"column":79,"offset":5888},"end":{"line":149,"column":103,"offset":5912}}}],"position":{"start":{"line":149,"column":3,"offset":5812},"end":{"line":149,"column":103,"offset":5912}}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// If we call this first...</span>\ninfo<span class=\"token punctuation\">.</span>cacheControl<span class=\"token punctuation\">.</span><span class=\"token function\">setCacheHint</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">maxAge</span><span class=\"token operator\">:</span> <span class=\"token number\">60</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">scope</span><span class=\"token operator\">:</span> <span class=\"token string\">'PRIVATE'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// ...then this changes maxAge (more restrictive) but NOT scope (less restrictive)</span>\ninfo<span class=\"token punctuation\">.</span>cacheControl<span class=\"token punctuation\">.</span>cacheHint<span class=\"token punctuation\">.</span><span class=\"token function\">restrict</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">maxAge</span><span class=\"token operator\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span> <span class=\"token literal-property property\">scope</span><span class=\"token operator\">:</span> <span class=\"token string\">'PUBLIC'</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":151,"column":5,"offset":5918},"end":{"line":157,"column":8,"offset":6195}}}],"position":{"start":{"line":149,"column":1,"offset":5810},"end":{"line":157,"column":8,"offset":6195}}}],"position":{"start":{"line":148,"column":1,"offset":5702},"end":{"line":157,"column":8,"offset":6195}}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#cachecontrolcachehintfromtype","title":null,"children":[],"data":{"hProperties":{"aria-label":"cachecontrolcachehintfromtype permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"html","value":"<code class=\"language-text\">cacheControl.cacheHintFromType</code>","position":{"start":{"line":159,"column":6,"offset":6202},"end":{"line":159,"column":38,"offset":6234}}}],"position":{"start":{"line":159,"column":1,"offset":6197},"end":{"line":159,"column":38,"offset":6234}},"data":{"id":"cachecontrolcachehintfromtype","htmlAttributes":{"id":"cachecontrolcachehintfromtype"},"hProperties":{"id":"cachecontrolcachehintfromtype","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"This method enables you to get the default cache hint for a particular object type. This can be useful when resolving a union or interface field, which might return one of multiple object types.","position":{"start":{"line":161,"column":1,"offset":6236},"end":{"line":161,"column":195,"offset":6430}}}],"position":{"start":{"line":161,"column":1,"offset":6236},"end":{"line":161,"column":195,"offset":6430}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#calculating-cache-behavior","title":null,"children":[],"data":{"hProperties":{"aria-label":"calculating cache behavior permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Calculating cache behavior","position":{"start":{"line":163,"column":5,"offset":6436},"end":{"line":163,"column":31,"offset":6462}}}],"position":{"start":{"line":163,"column":1,"offset":6432},"end":{"line":163,"column":31,"offset":6462}},"data":{"id":"calculating-cache-behavior","htmlAttributes":{"id":"calculating-cache-behavior"},"hProperties":{"id":"calculating-cache-behavior","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"For security, each operation response's cache behavior is calculated based on the ","position":{"start":{"line":165,"column":1,"offset":6464},"end":{"line":165,"column":83,"offset":6546}}},{"type":"emphasis","children":[{"type":"text","value":"most restrictive","position":{"start":{"line":165,"column":84,"offset":6547},"end":{"line":165,"column":100,"offset":6563}}}],"position":{"start":{"line":165,"column":83,"offset":6546},"end":{"line":165,"column":101,"offset":6564}}},{"type":"text","value":" cache hints among the result's fields:","position":{"start":{"line":165,"column":101,"offset":6564},"end":{"line":165,"column":140,"offset":6603}}}],"position":{"start":{"line":165,"column":1,"offset":6464},"end":{"line":165,"column":140,"offset":6603}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The response's ","position":{"start":{"line":167,"column":3,"offset":6607},"end":{"line":167,"column":18,"offset":6622}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":167,"column":18,"offset":6622},"end":{"line":167,"column":26,"offset":6630}}},{"type":"text","value":" equals the lowest ","position":{"start":{"line":167,"column":26,"offset":6630},"end":{"line":167,"column":45,"offset":6649}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":167,"column":45,"offset":6649},"end":{"line":167,"column":53,"offset":6657}}},{"type":"text","value":" among all fields. If that value is ","position":{"start":{"line":167,"column":53,"offset":6657},"end":{"line":167,"column":89,"offset":6693}}},{"type":"html","value":"<code class=\"language-text\">0</code>","position":{"start":{"line":167,"column":89,"offset":6693},"end":{"line":167,"column":92,"offset":6696}}},{"type":"text","value":", the entire result is ","position":{"start":{"line":167,"column":92,"offset":6696},"end":{"line":167,"column":115,"offset":6719}}},{"type":"emphasis","children":[{"type":"text","value":"not","position":{"start":{"line":167,"column":116,"offset":6720},"end":{"line":167,"column":119,"offset":6723}}}],"position":{"start":{"line":167,"column":115,"offset":6719},"end":{"line":167,"column":120,"offset":6724}}},{"type":"text","value":" cached.","position":{"start":{"line":167,"column":120,"offset":6724},"end":{"line":167,"column":128,"offset":6732}}}],"position":{"start":{"line":167,"column":3,"offset":6607},"end":{"line":167,"column":128,"offset":6732}}}],"position":{"start":{"line":167,"column":1,"offset":6605},"end":{"line":167,"column":128,"offset":6732}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The response's ","position":{"start":{"line":168,"column":3,"offset":6735},"end":{"line":168,"column":18,"offset":6750}}},{"type":"html","value":"<code class=\"language-text\">scope</code>","position":{"start":{"line":168,"column":18,"offset":6750},"end":{"line":168,"column":25,"offset":6757}}},{"type":"text","value":" is ","position":{"start":{"line":168,"column":25,"offset":6757},"end":{"line":168,"column":29,"offset":6761}}},{"type":"html","value":"<code class=\"language-text\">PRIVATE</code>","position":{"start":{"line":168,"column":29,"offset":6761},"end":{"line":168,"column":38,"offset":6770}}},{"type":"text","value":" if ","position":{"start":{"line":168,"column":38,"offset":6770},"end":{"line":168,"column":42,"offset":6774}}},{"type":"emphasis","children":[{"type":"text","value":"any","position":{"start":{"line":168,"column":43,"offset":6775},"end":{"line":168,"column":46,"offset":6778}}}],"position":{"start":{"line":168,"column":42,"offset":6774},"end":{"line":168,"column":47,"offset":6779}}},{"type":"text","value":" field's ","position":{"start":{"line":168,"column":47,"offset":6779},"end":{"line":168,"column":56,"offset":6788}}},{"type":"html","value":"<code class=\"language-text\">scope</code>","position":{"start":{"line":168,"column":56,"offset":6788},"end":{"line":168,"column":63,"offset":6795}}},{"type":"text","value":" is ","position":{"start":{"line":168,"column":63,"offset":6795},"end":{"line":168,"column":67,"offset":6799}}},{"type":"html","value":"<code class=\"language-text\">PRIVATE</code>","position":{"start":{"line":168,"column":67,"offset":6799},"end":{"line":168,"column":76,"offset":6808}}},{"type":"text","value":".","position":{"start":{"line":168,"column":76,"offset":6808},"end":{"line":168,"column":77,"offset":6809}}}],"position":{"start":{"line":168,"column":3,"offset":6735},"end":{"line":168,"column":77,"offset":6809}}}],"position":{"start":{"line":168,"column":1,"offset":6733},"end":{"line":168,"column":77,"offset":6809}}}],"position":{"start":{"line":167,"column":1,"offset":6605},"end":{"line":168,"column":77,"offset":6809}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#default-maxage","title":null,"children":[],"data":{"hProperties":{"aria-label":"default maxage permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Default ","position":{"start":{"line":170,"column":5,"offset":6815},"end":{"line":170,"column":13,"offset":6823}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":170,"column":13,"offset":6823},"end":{"line":170,"column":21,"offset":6831}}}],"position":{"start":{"line":170,"column":1,"offset":6811},"end":{"line":170,"column":21,"offset":6831}},"data":{"id":"default-maxage","htmlAttributes":{"id":"default-maxage"},"hProperties":{"id":"default-maxage","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"By default, the following schema fields have a ","position":{"start":{"line":172,"column":1,"offset":6833},"end":{"line":172,"column":48,"offset":6880}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":172,"column":48,"offset":6880},"end":{"line":172,"column":56,"offset":6888}}},{"type":"text","value":" of ","position":{"start":{"line":172,"column":56,"offset":6888},"end":{"line":172,"column":60,"offset":6892}}},{"type":"html","value":"<code class=\"language-text\">0</code>","position":{"start":{"line":172,"column":60,"offset":6892},"end":{"line":172,"column":63,"offset":6895}}},{"type":"text","value":" ","position":{"start":{"line":172,"column":63,"offset":6895},"end":{"line":172,"column":64,"offset":6896}}},{"type":"emphasis","children":[{"type":"text","value":"if you don't specify one","position":{"start":{"line":172,"column":65,"offset":6897},"end":{"line":172,"column":89,"offset":6921}}}],"position":{"start":{"line":172,"column":64,"offset":6896},"end":{"line":172,"column":90,"offset":6922}}},{"type":"text","value":":","position":{"start":{"line":172,"column":90,"offset":6922},"end":{"line":172,"column":91,"offset":6923}}}],"position":{"start":{"line":172,"column":1,"offset":6833},"end":{"line":172,"column":91,"offset":6923}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Root fields","position":{"start":{"line":174,"column":5,"offset":6929},"end":{"line":174,"column":16,"offset":6940}}}],"position":{"start":{"line":174,"column":3,"offset":6927},"end":{"line":174,"column":18,"offset":6942}}},{"type":"text","value":" (i.e., the fields of the ","position":{"start":{"line":174,"column":18,"offset":6942},"end":{"line":174,"column":44,"offset":6968}}},{"type":"html","value":"<code class=\"language-text\">Query</code>","position":{"start":{"line":174,"column":44,"offset":6968},"end":{"line":174,"column":51,"offset":6975}}},{"type":"text","value":", ","position":{"start":{"line":174,"column":51,"offset":6975},"end":{"line":174,"column":53,"offset":6977}}},{"type":"html","value":"<code class=\"language-text\">Mutation</code>","position":{"start":{"line":174,"column":53,"offset":6977},"end":{"line":174,"column":63,"offset":6987}}},{"type":"text","value":", and ","position":{"start":{"line":174,"column":63,"offset":6987},"end":{"line":174,"column":69,"offset":6993}}},{"type":"html","value":"<code class=\"language-text\">Subscription</code>","position":{"start":{"line":174,"column":69,"offset":6993},"end":{"line":174,"column":83,"offset":7007}}},{"type":"text","value":" types)","position":{"start":{"line":174,"column":83,"offset":7007},"end":{"line":174,"column":90,"offset":7014}}}],"position":{"start":{"line":174,"column":3,"offset":6927},"end":{"line":174,"column":90,"offset":7014}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Because ","position":{"start":{"line":175,"column":5,"offset":7019},"end":{"line":175,"column":13,"offset":7027}}},{"type":"emphasis","children":[{"type":"text","value":"every","position":{"start":{"line":175,"column":14,"offset":7028},"end":{"line":175,"column":19,"offset":7033}}}],"position":{"start":{"line":175,"column":13,"offset":7027},"end":{"line":175,"column":20,"offset":7034}}},{"type":"text","value":" GraphQL operation includes a root field, this means that by default, ","position":{"start":{"line":175,"column":20,"offset":7034},"end":{"line":175,"column":90,"offset":7104}}},{"type":"strong","children":[{"type":"text","value":"no operation results are cached unless you set cache hints!","position":{"start":{"line":175,"column":92,"offset":7106},"end":{"line":175,"column":151,"offset":7165}}}],"position":{"start":{"line":175,"column":90,"offset":7104},"end":{"line":175,"column":153,"offset":7167}}}],"position":{"start":{"line":175,"column":5,"offset":7019},"end":{"line":175,"column":153,"offset":7167}}}],"position":{"start":{"line":175,"column":3,"offset":7017},"end":{"line":175,"column":153,"offset":7167}}}],"position":{"start":{"line":175,"column":3,"offset":7017},"end":{"line":175,"column":153,"offset":7167}}}],"position":{"start":{"line":174,"column":1,"offset":6925},"end":{"line":175,"column":153,"offset":7167}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Fields that return a non-scalar type","position":{"start":{"line":176,"column":5,"offset":7172},"end":{"line":176,"column":41,"offset":7208}}}],"position":{"start":{"line":176,"column":3,"offset":7170},"end":{"line":176,"column":43,"offset":7210}}},{"type":"text","value":" (object, interface, or union) or a list of non-scalar types.","position":{"start":{"line":176,"column":43,"offset":7210},"end":{"line":176,"column":104,"offset":7271}}}],"position":{"start":{"line":176,"column":3,"offset":7170},"end":{"line":176,"column":104,"offset":7271}}}],"position":{"start":{"line":176,"column":1,"offset":7168},"end":{"line":176,"column":104,"offset":7271}}}],"position":{"start":{"line":174,"column":1,"offset":6925},"end":{"line":176,"column":104,"offset":7271}}},{"type":"paragraph","children":[{"type":"text","value":"You can ","position":{"start":{"line":178,"column":1,"offset":7273},"end":{"line":178,"column":9,"offset":7281}}},{"type":"link","title":null,"url":"#setting-a-different-default-maxage","children":[{"type":"text","value":"customize this default","position":{"start":{"line":178,"column":10,"offset":7282},"end":{"line":178,"column":32,"offset":7304}}}],"position":{"start":{"line":178,"column":9,"offset":7281},"end":{"line":178,"column":70,"offset":7342}}},{"type":"text","value":".","position":{"start":{"line":178,"column":70,"offset":7342},"end":{"line":178,"column":71,"offset":7343}}}],"position":{"start":{"line":178,"column":1,"offset":7273},"end":{"line":178,"column":71,"offset":7343}}},{"type":"paragraph","children":[{"type":"text","value":"All other schema fields (i.e., ","position":{"start":{"line":180,"column":1,"offset":7345},"end":{"line":180,"column":32,"offset":7376}}},{"type":"strong","children":[{"type":"text","value":"non-root fields that return scalar types","position":{"start":{"line":180,"column":34,"offset":7378},"end":{"line":180,"column":74,"offset":7418}}}],"position":{"start":{"line":180,"column":32,"offset":7376},"end":{"line":180,"column":76,"offset":7420}}},{"type":"text","value":") instead inherit their default ","position":{"start":{"line":180,"column":76,"offset":7420},"end":{"line":180,"column":108,"offset":7452}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":180,"column":108,"offset":7452},"end":{"line":180,"column":116,"offset":7460}}},{"type":"text","value":" from their parent field.","position":{"start":{"line":180,"column":116,"offset":7460},"end":{"line":180,"column":141,"offset":7485}}}],"position":{"start":{"line":180,"column":1,"offset":7345},"end":{"line":180,"column":141,"offset":7485}}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#why-are-these-the-maxage-defaults","title":null,"children":[],"data":{"hProperties":{"aria-label":"why are these the maxage defaults permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Why are these the ","position":{"start":{"line":182,"column":6,"offset":7492},"end":{"line":182,"column":24,"offset":7510}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":182,"column":24,"offset":7510},"end":{"line":182,"column":32,"offset":7518}}},{"type":"text","value":" defaults?","position":{"start":{"line":182,"column":32,"offset":7518},"end":{"line":182,"column":42,"offset":7528}}}],"position":{"start":{"line":182,"column":1,"offset":7487},"end":{"line":182,"column":42,"offset":7528}},"data":{"id":"why-are-these-the-maxage-defaults","htmlAttributes":{"id":"why-are-these-the-maxage-defaults"},"hProperties":{"id":"why-are-these-the-maxage-defaults","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Our philosophy behind Apollo Server caching is that a response should only be considered cacheable if every part of that response ","position":{"start":{"line":184,"column":1,"offset":7530},"end":{"line":184,"column":131,"offset":7660}}},{"type":"emphasis","children":[{"type":"text","value":"opts in","position":{"start":{"line":184,"column":132,"offset":7661},"end":{"line":184,"column":139,"offset":7668}}}],"position":{"start":{"line":184,"column":131,"offset":7660},"end":{"line":184,"column":140,"offset":7669}}},{"type":"text","value":" to being cacheable. At the same time, we don't think developers should have to specify cache hints for every single field in their schema.","position":{"start":{"line":184,"column":140,"offset":7669},"end":{"line":184,"column":279,"offset":7808}}}],"position":{"start":{"line":184,"column":1,"offset":7530},"end":{"line":184,"column":279,"offset":7808}}},{"type":"paragraph","children":[{"type":"text","value":"So, we follow these heuristics:","position":{"start":{"line":186,"column":1,"offset":7810},"end":{"line":186,"column":32,"offset":7841}}}],"position":{"start":{"line":186,"column":1,"offset":7810},"end":{"line":186,"column":32,"offset":7841}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Root field resolvers are extremely likely to fetch data (because these fields have no parent), so we set their default ","position":{"start":{"line":188,"column":3,"offset":7845},"end":{"line":188,"column":122,"offset":7964}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":188,"column":122,"offset":7964},"end":{"line":188,"column":130,"offset":7972}}},{"type":"text","value":" to ","position":{"start":{"line":188,"column":130,"offset":7972},"end":{"line":188,"column":134,"offset":7976}}},{"type":"html","value":"<code class=\"language-text\">0</code>","position":{"start":{"line":188,"column":134,"offset":7976},"end":{"line":188,"column":137,"offset":7979}}},{"type":"text","value":" to avoid automatically caching data that ","position":{"start":{"line":188,"column":137,"offset":7979},"end":{"line":188,"column":179,"offset":8021}}},{"type":"emphasis","children":[{"type":"text","value":"shouldn't","position":{"start":{"line":188,"column":180,"offset":8022},"end":{"line":188,"column":189,"offset":8031}}}],"position":{"start":{"line":188,"column":179,"offset":8021},"end":{"line":188,"column":190,"offset":8032}}},{"type":"text","value":" be cached.","position":{"start":{"line":188,"column":190,"offset":8032},"end":{"line":188,"column":201,"offset":8043}}}],"position":{"start":{"line":188,"column":3,"offset":7845},"end":{"line":188,"column":201,"offset":8043}}}],"position":{"start":{"line":188,"column":1,"offset":7843},"end":{"line":188,"column":201,"offset":8043}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Resolvers for other non-scalar fields (objects, interfaces, and unions) ","position":{"start":{"line":189,"column":3,"offset":8046},"end":{"line":189,"column":75,"offset":8118}}},{"type":"emphasis","children":[{"type":"text","value":"also","position":{"start":{"line":189,"column":76,"offset":8119},"end":{"line":189,"column":80,"offset":8123}}}],"position":{"start":{"line":189,"column":75,"offset":8118},"end":{"line":189,"column":81,"offset":8124}}},{"type":"text","value":" commonly fetch data because they contain arbitrarily many fields. Consequently, we also set their default ","position":{"start":{"line":189,"column":81,"offset":8124},"end":{"line":189,"column":188,"offset":8231}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":189,"column":188,"offset":8231},"end":{"line":189,"column":196,"offset":8239}}},{"type":"text","value":" to ","position":{"start":{"line":189,"column":196,"offset":8239},"end":{"line":189,"column":200,"offset":8243}}},{"type":"html","value":"<code class=\"language-text\">0</code>","position":{"start":{"line":189,"column":200,"offset":8243},"end":{"line":189,"column":203,"offset":8246}}},{"type":"text","value":".","position":{"start":{"line":189,"column":203,"offset":8246},"end":{"line":189,"column":204,"offset":8247}}}],"position":{"start":{"line":189,"column":3,"offset":8046},"end":{"line":189,"column":204,"offset":8247}}}],"position":{"start":{"line":189,"column":1,"offset":8044},"end":{"line":189,"column":204,"offset":8247}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Resolvers for scalar, non-root fields ","position":{"start":{"line":190,"column":3,"offset":8250},"end":{"line":190,"column":41,"offset":8288}}},{"type":"emphasis","children":[{"type":"text","value":"rarely","position":{"start":{"line":190,"column":42,"offset":8289},"end":{"line":190,"column":48,"offset":8295}}}],"position":{"start":{"line":190,"column":41,"offset":8288},"end":{"line":190,"column":49,"offset":8296}}},{"type":"text","value":" fetch data and instead usually populate data via the ","position":{"start":{"line":190,"column":49,"offset":8296},"end":{"line":190,"column":103,"offset":8350}}},{"type":"html","value":"<code class=\"language-text\">parent</code>","position":{"start":{"line":190,"column":103,"offset":8350},"end":{"line":190,"column":111,"offset":8358}}},{"type":"text","value":" argument. Consequently, these fields inherit their default ","position":{"start":{"line":190,"column":111,"offset":8358},"end":{"line":190,"column":171,"offset":8418}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":190,"column":171,"offset":8418},"end":{"line":190,"column":179,"offset":8426}}},{"type":"text","value":" from their parent to reduce schema clutter.","position":{"start":{"line":190,"column":179,"offset":8426},"end":{"line":190,"column":223,"offset":8470}}}],"position":{"start":{"line":190,"column":3,"offset":8250},"end":{"line":190,"column":223,"offset":8470}}}],"position":{"start":{"line":190,"column":1,"offset":8248},"end":{"line":190,"column":223,"offset":8470}}}],"position":{"start":{"line":188,"column":1,"offset":7843},"end":{"line":190,"column":223,"offset":8470}}},{"type":"paragraph","children":[{"type":"text","value":"Of course, these heuristics aren't always correct! For example, the resolver for a non-root scalar field might indeed fetch remote data. You can always set your own cache hint for any field with an undesirable default behavior.","position":{"start":{"line":192,"column":1,"offset":8472},"end":{"line":192,"column":228,"offset":8699}}}],"position":{"start":{"line":192,"column":1,"offset":8472},"end":{"line":192,"column":228,"offset":8699}}},{"type":"paragraph","children":[{"type":"text","value":"Ideally, you can provide a ","position":{"start":{"line":194,"column":1,"offset":8701},"end":{"line":194,"column":28,"offset":8728}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":194,"column":28,"offset":8728},"end":{"line":194,"column":36,"offset":8736}}},{"type":"text","value":" for every field with a resolver that actually fetches data from a data source (such as a database or REST API). ","position":{"start":{"line":194,"column":36,"offset":8736},"end":{"line":194,"column":149,"offset":8849}}},{"type":"emphasis","children":[{"type":"text","value":"Most","position":{"start":{"line":194,"column":150,"offset":8850},"end":{"line":194,"column":154,"offset":8854}}}],"position":{"start":{"line":194,"column":149,"offset":8849},"end":{"line":194,"column":155,"offset":8855}}},{"type":"text","value":" other fields can then inherit their cache hint from their parent (fields with resolvers that ","position":{"start":{"line":194,"column":155,"offset":8855},"end":{"line":194,"column":249,"offset":8949}}},{"type":"emphasis","children":[{"type":"text","value":"don't","position":{"start":{"line":194,"column":250,"offset":8950},"end":{"line":194,"column":255,"offset":8955}}}],"position":{"start":{"line":194,"column":249,"offset":8949},"end":{"line":194,"column":256,"offset":8956}}},{"type":"text","value":" fetch data less commonly have specific caching needs). For more on this, see ","position":{"start":{"line":194,"column":256,"offset":8956},"end":{"line":194,"column":334,"offset":9034}}},{"type":"link","title":null,"url":"#recommended-starting-usage","children":[{"type":"text","value":"Recommended starting usage","position":{"start":{"line":194,"column":335,"offset":9035},"end":{"line":194,"column":361,"offset":9061}}}],"position":{"start":{"line":194,"column":334,"offset":9034},"end":{"line":194,"column":391,"offset":9091}}},{"type":"text","value":".","position":{"start":{"line":194,"column":391,"offset":9091},"end":{"line":194,"column":392,"offset":9092}}}],"position":{"start":{"line":194,"column":1,"offset":8701},"end":{"line":194,"column":392,"offset":9092}}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#setting-a-different-default-maxage","title":null,"children":[],"data":{"hProperties":{"aria-label":"setting a different default maxage permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Setting a different default ","position":{"start":{"line":196,"column":6,"offset":9099},"end":{"line":196,"column":34,"offset":9127}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":196,"column":34,"offset":9127},"end":{"line":196,"column":42,"offset":9135}}}],"position":{"start":{"line":196,"column":1,"offset":9094},"end":{"line":196,"column":42,"offset":9135}},"data":{"id":"setting-a-different-default-maxage","htmlAttributes":{"id":"setting-a-different-default-maxage"},"hProperties":{"id":"setting-a-different-default-maxage","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"You can set a default ","position":{"start":{"line":198,"column":1,"offset":9137},"end":{"line":198,"column":23,"offset":9159}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":198,"column":23,"offset":9159},"end":{"line":198,"column":31,"offset":9167}}},{"type":"text","value":" that's applied to fields that otherwise receive the ","position":{"start":{"line":198,"column":31,"offset":9167},"end":{"line":198,"column":84,"offset":9220}}},{"type":"link","title":null,"url":"#default-maxage","children":[{"type":"text","value":"default ","position":{"start":{"line":198,"column":85,"offset":9221},"end":{"line":198,"column":93,"offset":9229}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":198,"column":93,"offset":9229},"end":{"line":198,"column":101,"offset":9237}}},{"type":"text","value":" of ","position":{"start":{"line":198,"column":101,"offset":9237},"end":{"line":198,"column":105,"offset":9241}}},{"type":"html","value":"<code class=\"language-text\">0</code>","position":{"start":{"line":198,"column":105,"offset":9241},"end":{"line":198,"column":108,"offset":9244}}}],"position":{"start":{"line":198,"column":84,"offset":9220},"end":{"line":198,"column":126,"offset":9262}}},{"type":"text","value":".","position":{"start":{"line":198,"column":126,"offset":9262},"end":{"line":198,"column":127,"offset":9263}}}],"position":{"start":{"line":198,"column":1,"offset":9137},"end":{"line":198,"column":127,"offset":9263}}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"You should identify and address all exceptions to your default ","position":{"start":{"line":200,"column":3,"offset":9267},"end":{"line":200,"column":66,"offset":9330}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":200,"column":66,"offset":9330},"end":{"line":200,"column":74,"offset":9338}}},{"type":"text","value":" before you enable it in production, but this is a great way to get started with cache control.","position":{"start":{"line":200,"column":74,"offset":9338},"end":{"line":200,"column":169,"offset":9433}}}],"position":{"start":{"line":200,"column":3,"offset":9267},"end":{"line":200,"column":169,"offset":9433}}}],"position":{"start":{"line":200,"column":1,"offset":9265},"end":{"line":200,"column":169,"offset":9433}}},{"type":"paragraph","children":[{"type":"text","value":"Set your default ","position":{"start":{"line":202,"column":1,"offset":9435},"end":{"line":202,"column":18,"offset":9452}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":202,"column":18,"offset":9452},"end":{"line":202,"column":26,"offset":9460}}},{"type":"text","value":" by passing the cache control plugin to the ","position":{"start":{"line":202,"column":26,"offset":9460},"end":{"line":202,"column":70,"offset":9504}}},{"type":"html","value":"<code class=\"language-text\">ApolloServer</code>","position":{"start":{"line":202,"column":70,"offset":9504},"end":{"line":202,"column":84,"offset":9518}}},{"type":"text","value":" constructor, like so:","position":{"start":{"line":202,"column":84,"offset":9518},"end":{"line":202,"column":106,"offset":9540}}}],"position":{"start":{"line":202,"column":1,"offset":9435},"end":{"line":202,"column":106,"offset":9540}}},{"type":"html","lang":"javascript","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ApolloServerPluginCacheControl <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'apollo-server-core'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...other options...</span>\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token function\">ApolloServerPluginCacheControl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">defaultMaxAge</span><span class=\"token operator\">:</span> <span class=\"token number\">5</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\">// 5 seconds</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":204,"column":1,"offset":9542},"end":{"line":211,"column":4,"offset":9774}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#recommended-starting-usage","title":null,"children":[],"data":{"hProperties":{"aria-label":"recommended starting usage permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Recommended starting usage","position":{"start":{"line":213,"column":5,"offset":9780},"end":{"line":213,"column":31,"offset":9806}}}],"position":{"start":{"line":213,"column":1,"offset":9776},"end":{"line":213,"column":31,"offset":9806}},"data":{"id":"recommended-starting-usage","htmlAttributes":{"id":"recommended-starting-usage"},"hProperties":{"id":"recommended-starting-usage","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"You usually don't need to specify cache hints for every field in your schema. Instead, we recommend doing the following as a starting point:","position":{"start":{"line":215,"column":1,"offset":9808},"end":{"line":215,"column":141,"offset":9948}}}],"position":{"start":{"line":215,"column":1,"offset":9808},"end":{"line":215,"column":141,"offset":9948}}},{"type":"list","ordered":false,"start":null,"spread":true,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"For fields that should ","position":{"start":{"line":217,"column":3,"offset":9952},"end":{"line":217,"column":26,"offset":9975}}},{"type":"emphasis","children":[{"type":"text","value":"never","position":{"start":{"line":217,"column":27,"offset":9976},"end":{"line":217,"column":32,"offset":9981}}}],"position":{"start":{"line":217,"column":26,"offset":9975},"end":{"line":217,"column":33,"offset":9982}}},{"type":"text","value":" be cached, explicitly set ","position":{"start":{"line":217,"column":33,"offset":9982},"end":{"line":217,"column":60,"offset":10009}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":217,"column":60,"offset":10009},"end":{"line":217,"column":68,"offset":10017}}},{"type":"text","value":" to ","position":{"start":{"line":217,"column":68,"offset":10017},"end":{"line":217,"column":72,"offset":10021}}},{"type":"html","value":"<code class=\"language-text\">0</code>","position":{"start":{"line":217,"column":72,"offset":10021},"end":{"line":217,"column":75,"offset":10024}}},{"type":"text","value":".","position":{"start":{"line":217,"column":75,"offset":10024},"end":{"line":217,"column":76,"offset":10025}}}],"position":{"start":{"line":217,"column":3,"offset":9952},"end":{"line":217,"column":76,"offset":10025}}}],"position":{"start":{"line":217,"column":1,"offset":9950},"end":{"line":217,"column":76,"offset":10025}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Set a ","position":{"start":{"line":219,"column":3,"offset":10029},"end":{"line":219,"column":9,"offset":10035}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":219,"column":9,"offset":10035},"end":{"line":219,"column":17,"offset":10043}}},{"type":"text","value":" for every field with a resolver that ","position":{"start":{"line":219,"column":17,"offset":10043},"end":{"line":219,"column":55,"offset":10081}}},{"type":"emphasis","children":[{"type":"text","value":"actually fetches data from a data source","position":{"start":{"line":219,"column":56,"offset":10082},"end":{"line":219,"column":96,"offset":10122}}}],"position":{"start":{"line":219,"column":55,"offset":10081},"end":{"line":219,"column":97,"offset":10123}}},{"type":"text","value":" (such as a database or REST API). You can base the value of ","position":{"start":{"line":219,"column":97,"offset":10123},"end":{"line":219,"column":158,"offset":10184}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":219,"column":158,"offset":10184},"end":{"line":219,"column":166,"offset":10192}}},{"type":"text","value":" on the frequency of updates that are made to the relevant data.","position":{"start":{"line":219,"column":166,"offset":10192},"end":{"line":219,"column":230,"offset":10256}}}],"position":{"start":{"line":219,"column":3,"offset":10029},"end":{"line":219,"column":230,"offset":10256}}}],"position":{"start":{"line":219,"column":1,"offset":10027},"end":{"line":219,"column":230,"offset":10256}}},{"type":"listItem","spread":true,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Set ","position":{"start":{"line":221,"column":3,"offset":10260},"end":{"line":221,"column":7,"offset":10264}}},{"type":"html","value":"<code class=\"language-text\">inheritMaxAge: true</code>","position":{"start":{"line":221,"column":7,"offset":10264},"end":{"line":221,"column":28,"offset":10285}}},{"type":"text","value":" for each other non-root field that returns a non-scalar type.","position":{"start":{"line":221,"column":28,"offset":10285},"end":{"line":221,"column":90,"offset":10347}}}],"position":{"start":{"line":221,"column":3,"offset":10260},"end":{"line":221,"column":90,"offset":10347}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Note that you can only set ","position":{"start":{"line":223,"column":7,"offset":10355},"end":{"line":223,"column":34,"offset":10382}}},{"type":"html","value":"<code class=\"language-text\">inheritMaxAge</code>","position":{"start":{"line":223,"column":34,"offset":10382},"end":{"line":223,"column":49,"offset":10397}}},{"type":"text","value":" ","position":{"start":{"line":223,"column":49,"offset":10397},"end":{"line":223,"column":50,"offset":10398}}},{"type":"link","title":null,"url":"#in-your-schema-static","children":[{"type":"text","value":"statically","position":{"start":{"line":223,"column":51,"offset":10399},"end":{"line":223,"column":61,"offset":10409}}}],"position":{"start":{"line":223,"column":50,"offset":10398},"end":{"line":223,"column":86,"offset":10434}}},{"type":"text","value":".","position":{"start":{"line":223,"column":86,"offset":10434},"end":{"line":223,"column":87,"offset":10435}}}],"position":{"start":{"line":223,"column":7,"offset":10355},"end":{"line":223,"column":87,"offset":10435}}}],"position":{"start":{"line":223,"column":5,"offset":10353},"end":{"line":223,"column":87,"offset":10435}}}],"position":{"start":{"line":223,"column":5,"offset":10353},"end":{"line":223,"column":87,"offset":10435}}}],"position":{"start":{"line":221,"column":1,"offset":10258},"end":{"line":223,"column":87,"offset":10435}}}],"position":{"start":{"line":217,"column":1,"offset":9950},"end":{"line":223,"column":87,"offset":10435}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#example-maxage-calculations","title":null,"children":[],"data":{"hProperties":{"aria-label":"example maxage calculations permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Example ","position":{"start":{"line":225,"column":5,"offset":10441},"end":{"line":225,"column":13,"offset":10449}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":225,"column":13,"offset":10449},"end":{"line":225,"column":21,"offset":10457}}},{"type":"text","value":" calculations","position":{"start":{"line":225,"column":21,"offset":10457},"end":{"line":225,"column":34,"offset":10470}}}],"position":{"start":{"line":225,"column":1,"offset":10437},"end":{"line":225,"column":34,"offset":10470}},"data":{"id":"example-maxage-calculations","htmlAttributes":{"id":"example-maxage-calculations"},"hProperties":{"id":"example-maxage-calculations","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Consider the following schema:","position":{"start":{"line":227,"column":1,"offset":10472},"end":{"line":227,"column":31,"offset":10502}}}],"position":{"start":{"line":227,"column":1,"offset":10472},"end":{"line":227,"column":31,"offset":10502}}},{"type":"html","lang":"graphql","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Query</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">book</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">Book</span>\n  <span class=\"token attr-name\">cachedBook</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">Book</span> <span class=\"token directive function\">@cacheControl</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">maxAge</span><span class=\"token punctuation\">:</span> <span class=\"token number\">60</span><span class=\"token punctuation\">)</span>\n  <span class=\"token attr-name\">reader</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">Reader</span> <span class=\"token directive function\">@cacheControl</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">maxAge</span><span class=\"token punctuation\">:</span> <span class=\"token number\">40</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Book</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">title</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span>\n  <span class=\"token attr-name\">cachedTitle</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span> <span class=\"token directive function\">@cacheControl</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">maxAge</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">type</span> <span class=\"token class-name\">Reader</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">book</span><span class=\"token punctuation\">:</span> <span class=\"token class-name\">Book</span> <span class=\"token directive function\">@cacheControl</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">inheritMaxAge</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":229,"column":1,"offset":10504},"end":{"line":244,"column":4,"offset":10778}}},{"type":"paragraph","children":[{"type":"text","value":"Let's look at some queries and their resulting ","position":{"start":{"line":246,"column":1,"offset":10780},"end":{"line":246,"column":48,"offset":10827}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":246,"column":48,"offset":10827},"end":{"line":246,"column":56,"offset":10835}}},{"type":"text","value":" values:","position":{"start":{"line":246,"column":56,"offset":10835},"end":{"line":246,"column":64,"offset":10843}}}],"position":{"start":{"line":246,"column":1,"offset":10780},"end":{"line":246,"column":64,"offset":10843}}},{"type":"html","lang":"graphql","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token comment\"># maxAge: 0</span>\n<span class=\"token comment\"># Query.book doesn't set a maxAge and it's a root field (default 0).</span>\n<span class=\"token keyword\">query</span> <span class=\"token definition-query function\">GetBookTitle</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token object\">book</span> <span class=\"token punctuation\">{</span>        <span class=\"token comment\"># 0</span>\n    <span class=\"token property\">cachedTitle</span> <span class=\"token comment\"># 30</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\"># maxAge: 60</span>\n<span class=\"token comment\"># Query.cachedBook has a maxAge of 60, and Book.title is a scalar, so it</span>\n<span class=\"token comment\"># inherits maxAge from its parent by default.</span>\n<span class=\"token keyword\">query</span> <span class=\"token definition-query function\">GetCachedBookTitle</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token object\">cachedBook</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\"># 60</span>\n    <span class=\"token property\">title</span>      <span class=\"token comment\"># inherits</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\"># maxAge: 30</span>\n<span class=\"token comment\"># Query.cachedBook has a maxAge of 60, but Book.cachedTitle has</span>\n<span class=\"token comment\"># a maxAge of 30.</span>\n<span class=\"token keyword\">query</span> <span class=\"token definition-query function\">GetCachedBookCachedTitle</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token object\">cachedBook</span> <span class=\"token punctuation\">{</span>  <span class=\"token comment\"># 60</span>\n    <span class=\"token property\">cachedTitle</span> <span class=\"token comment\"># 30</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\"># maxAge: 40</span>\n<span class=\"token comment\"># Query.reader has a maxAge of 40. Reader.Book is set to</span>\n<span class=\"token comment\"># inheritMaxAge from its parent, and Book.title is a scalar</span>\n<span class=\"token comment\"># that inherits maxAge from its parent by default.</span>\n<span class=\"token keyword\">query</span> <span class=\"token definition-query function\">GetReaderBookTitle</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token object\">reader</span> <span class=\"token punctuation\">{</span>  <span class=\"token comment\"># 40</span>\n    <span class=\"token object\">book</span> <span class=\"token punctuation\">{</span>  <span class=\"token comment\"># inherits</span>\n      <span class=\"token property\">title</span> <span class=\"token comment\"># inherits</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":248,"column":1,"offset":10845},"end":{"line":286,"column":4,"offset":11681}}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#using-with-federation","title":null,"children":[],"data":{"hProperties":{"aria-label":"using with federation permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Using with federation","position":{"start":{"line":288,"column":4,"offset":11686},"end":{"line":288,"column":25,"offset":11707}}}],"position":{"start":{"line":288,"column":1,"offset":11683},"end":{"line":288,"column":25,"offset":11707}},"data":{"id":"using-with-federation","htmlAttributes":{"id":"using-with-federation"},"hProperties":{"id":"using-with-federation","style":"position:relative;"}}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"Using cache control with Apollo Federation requires v0.28 of ","position":{"start":{"line":290,"column":3,"offset":11711},"end":{"line":290,"column":64,"offset":11772}}},{"type":"html","value":"<code class=\"language-text\">@apollo/federation</code>","position":{"start":{"line":290,"column":64,"offset":11772},"end":{"line":290,"column":84,"offset":11792}}},{"type":"text","value":" in your subgraph, v0.36 of ","position":{"start":{"line":290,"column":84,"offset":11792},"end":{"line":290,"column":112,"offset":11820}}},{"type":"html","value":"<code class=\"language-text\">@apollo/gateway</code>","position":{"start":{"line":290,"column":112,"offset":11820},"end":{"line":290,"column":129,"offset":11837}}},{"type":"text","value":" in your router, and v3.0.2 of Apollo Server in both servers.","position":{"start":{"line":290,"column":129,"offset":11837},"end":{"line":290,"column":190,"offset":11898}}}],"position":{"start":{"line":290,"column":3,"offset":11711},"end":{"line":290,"column":190,"offset":11898}}}],"position":{"start":{"line":290,"column":1,"offset":11709},"end":{"line":290,"column":190,"offset":11898}}},{"type":"paragraph","children":[{"type":"text","value":"When using ","position":{"start":{"line":292,"column":1,"offset":11900},"end":{"line":292,"column":12,"offset":11911}}},{"type":"link","title":null,"url":"https://www.apollographql.com/docs/federation","children":[{"type":"text","value":"Apollo Federation","position":{"start":{"line":292,"column":13,"offset":11912},"end":{"line":292,"column":30,"offset":11929}}}],"position":{"start":{"line":292,"column":12,"offset":11911},"end":{"line":292,"column":78,"offset":11977}}},{"type":"text","value":", the ","position":{"start":{"line":292,"column":78,"offset":11977},"end":{"line":292,"column":84,"offset":11983}}},{"type":"html","value":"<code class=\"language-text\">@cacheControl</code>","position":{"start":{"line":292,"column":84,"offset":11983},"end":{"line":292,"column":99,"offset":11998}}},{"type":"text","value":" directive and ","position":{"start":{"line":292,"column":99,"offset":11998},"end":{"line":292,"column":114,"offset":12013}}},{"type":"html","value":"<code class=\"language-text\">CacheControlScope</code>","position":{"start":{"line":292,"column":114,"offset":12013},"end":{"line":292,"column":133,"offset":12032}}},{"type":"text","value":" enum may be defined in a subgraph's schema. An Apollo Server-based subgraph will calculate and set the cache hint for the response that it sends to the gateway as it would for a non-federated Apollo Server sending a response to a client. The gateway will then calculate the cache hint for the overall response based on the most restrictive settings among all of the responses received from the subgraphs involved in query plan execution.","position":{"start":{"line":292,"column":133,"offset":12032},"end":{"line":292,"column":571,"offset":12470}}}],"position":{"start":{"line":292,"column":1,"offset":11900},"end":{"line":292,"column":571,"offset":12470}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#setting-entity-cache-hints","title":null,"children":[],"data":{"hProperties":{"aria-label":"setting entity cache hints permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Setting entity cache hints","position":{"start":{"line":294,"column":5,"offset":12476},"end":{"line":294,"column":31,"offset":12502}}}],"position":{"start":{"line":294,"column":1,"offset":12472},"end":{"line":294,"column":31,"offset":12502}},"data":{"id":"setting-entity-cache-hints","htmlAttributes":{"id":"setting-entity-cache-hints"},"hProperties":{"id":"setting-entity-cache-hints","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Subgraph schemas contain an ","position":{"start":{"line":296,"column":1,"offset":12504},"end":{"line":296,"column":29,"offset":12532}}},{"type":"html","value":"<code class=\"language-text\">_entities</code>","position":{"start":{"line":296,"column":29,"offset":12532},"end":{"line":296,"column":40,"offset":12543}}},{"type":"text","value":" root field on the ","position":{"start":{"line":296,"column":40,"offset":12543},"end":{"line":296,"column":59,"offset":12562}}},{"type":"html","value":"<code class=\"language-text\">Query</code>","position":{"start":{"line":296,"column":59,"offset":12562},"end":{"line":296,"column":66,"offset":12569}}},{"type":"text","value":" type, so all query plans that require entity resolution will have a ","position":{"start":{"line":296,"column":66,"offset":12569},"end":{"line":296,"column":135,"offset":12638}}},{"type":"link","title":null,"url":"#default-maxage","children":[{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":296,"column":136,"offset":12639},"end":{"line":296,"column":144,"offset":12647}}},{"type":"text","value":" of ","position":{"start":{"line":296,"column":144,"offset":12647},"end":{"line":296,"column":148,"offset":12651}}},{"type":"html","value":"<code class=\"language-text\">0</code>","position":{"start":{"line":296,"column":148,"offset":12651},"end":{"line":296,"column":151,"offset":12654}}},{"type":"text","value":" set by default","position":{"start":{"line":296,"column":151,"offset":12654},"end":{"line":296,"column":166,"offset":12669}}}],"position":{"start":{"line":296,"column":135,"offset":12638},"end":{"line":296,"column":184,"offset":12687}}},{"type":"text","value":". To override this default behavior, you can add a ","position":{"start":{"line":296,"column":184,"offset":12687},"end":{"line":296,"column":235,"offset":12738}}},{"type":"html","value":"<code class=\"language-text\">@cacheControl</code>","position":{"start":{"line":296,"column":235,"offset":12738},"end":{"line":296,"column":250,"offset":12753}}},{"type":"text","value":" directive to an entity's definition:","position":{"start":{"line":296,"column":250,"offset":12753},"end":{"line":296,"column":287,"offset":12790}}}],"position":{"start":{"line":296,"column":1,"offset":12504},"end":{"line":296,"column":287,"offset":12790}}},{"type":"html","lang":"graphql","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Book</span> <span class=\"token directive function\">@key</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">fields</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"isbn\"</span><span class=\"token punctuation\">)</span> <span class=\"token directive function\">@cacheControl</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">maxAge</span><span class=\"token punctuation\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">isbn</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span><span class=\"token operator\">!</span>\n  <span class=\"token attr-name\">title</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":298,"column":1,"offset":12792},"end":{"line":303,"column":4,"offset":12899}}},{"type":"paragraph","children":[{"type":"text","value":"When the ","position":{"start":{"line":305,"column":1,"offset":12901},"end":{"line":305,"column":10,"offset":12910}}},{"type":"html","value":"<code class=\"language-text\">_entities</code>","position":{"start":{"line":305,"column":10,"offset":12910},"end":{"line":305,"column":21,"offset":12921}}},{"type":"text","value":" field is resolved it will check the applicable concrete type for a cache hint (which would be the ","position":{"start":{"line":305,"column":21,"offset":12921},"end":{"line":305,"column":120,"offset":13020}}},{"type":"html","value":"<code class=\"language-text\">Book</code>","position":{"start":{"line":305,"column":120,"offset":13020},"end":{"line":305,"column":126,"offset":13026}}},{"type":"text","value":" type in the example above) and apply that hint instead.","position":{"start":{"line":305,"column":126,"offset":13026},"end":{"line":305,"column":182,"offset":13082}}}],"position":{"start":{"line":305,"column":1,"offset":12901},"end":{"line":305,"column":182,"offset":13082}}},{"type":"paragraph","children":[{"type":"text","value":"To set cache hints dynamically, the ","position":{"start":{"line":307,"column":1,"offset":13084},"end":{"line":307,"column":37,"offset":13120}}},{"type":"link","title":null,"url":"#in-your-resolvers-dynamic","children":[{"type":"html","value":"<code class=\"language-text\">cacheControl</code>","position":{"start":{"line":307,"column":38,"offset":13121},"end":{"line":307,"column":52,"offset":13135}}},{"type":"text","value":" object and its methods","position":{"start":{"line":307,"column":52,"offset":13135},"end":{"line":307,"column":75,"offset":13158}}}],"position":{"start":{"line":307,"column":37,"offset":13120},"end":{"line":307,"column":104,"offset":13187}}},{"type":"text","value":" are also available in the ","position":{"start":{"line":307,"column":104,"offset":13187},"end":{"line":307,"column":131,"offset":13214}}},{"type":"html","value":"<code class=\"language-text\">info</code>","position":{"start":{"line":307,"column":131,"offset":13214},"end":{"line":307,"column":137,"offset":13220}}},{"type":"text","value":" parameter of the ","position":{"start":{"line":307,"column":137,"offset":13220},"end":{"line":307,"column":155,"offset":13238}}},{"type":"html","value":"<code class=\"language-text\">__resolveReference</code>","position":{"start":{"line":307,"column":155,"offset":13238},"end":{"line":307,"column":175,"offset":13258}}},{"type":"text","value":" resolver.","position":{"start":{"line":307,"column":175,"offset":13258},"end":{"line":307,"column":185,"offset":13268}}}],"position":{"start":{"line":307,"column":1,"offset":13084},"end":{"line":307,"column":185,"offset":13268}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#overriding-subgraph-cache-hints-in-the-gateway","title":null,"children":[],"data":{"hProperties":{"aria-label":"overriding subgraph cache hints in the gateway permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Overriding subgraph cache hints in the gateway","position":{"start":{"line":309,"column":5,"offset":13274},"end":{"line":309,"column":51,"offset":13320}}}],"position":{"start":{"line":309,"column":1,"offset":13270},"end":{"line":309,"column":51,"offset":13320}},"data":{"id":"overriding-subgraph-cache-hints-in-the-gateway","htmlAttributes":{"id":"overriding-subgraph-cache-hints-in-the-gateway"},"hProperties":{"id":"overriding-subgraph-cache-hints-in-the-gateway","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"If a subgraph does not specify a ","position":{"start":{"line":311,"column":1,"offset":13322},"end":{"line":311,"column":34,"offset":13355}}},{"type":"html","value":"<code class=\"language-text\">max-age</code>","position":{"start":{"line":311,"column":34,"offset":13355},"end":{"line":311,"column":43,"offset":13364}}},{"type":"text","value":", the gateway will assume its response (and\nin turn, the overall response) cannot be cached. To override this behavior, you can set the ","position":{"start":{"line":311,"column":43,"offset":13364},"end":{"line":312,"column":93,"offset":13500}}},{"type":"html","value":"<code class=\"language-text\">Cache-Control</code>","position":{"start":{"line":312,"column":93,"offset":13500},"end":{"line":312,"column":108,"offset":13515}}},{"type":"text","value":" header in the ","position":{"start":{"line":312,"column":108,"offset":13515},"end":{"line":312,"column":123,"offset":13530}}},{"type":"html","value":"<code class=\"language-text\">didReceiveResponse</code>","position":{"start":{"line":312,"column":123,"offset":13530},"end":{"line":312,"column":143,"offset":13550}}},{"type":"text","value":" method of a ","position":{"start":{"line":312,"column":143,"offset":13550},"end":{"line":312,"column":156,"offset":13563}}},{"type":"html","value":"<code class=\"language-text\">RemoteGraphQLDataSource</code>","position":{"start":{"line":312,"column":156,"offset":13563},"end":{"line":312,"column":181,"offset":13588}}},{"type":"text","value":".","position":{"start":{"line":312,"column":181,"offset":13588},"end":{"line":312,"column":182,"offset":13589}}}],"position":{"start":{"line":311,"column":1,"offset":13322},"end":{"line":312,"column":182,"offset":13589}}},{"type":"paragraph","children":[{"type":"text","value":"Additionally, if the gateway should ignore ","position":{"start":{"line":314,"column":1,"offset":13591},"end":{"line":314,"column":44,"offset":13634}}},{"type":"html","value":"<code class=\"language-text\">Cache-Control</code>","position":{"start":{"line":314,"column":44,"offset":13634},"end":{"line":314,"column":59,"offset":13649}}},{"type":"text","value":" response headers from subgraphs that will affect the operation's cache policy, then you can set the ","position":{"start":{"line":314,"column":59,"offset":13649},"end":{"line":314,"column":160,"offset":13750}}},{"type":"html","value":"<code class=\"language-text\">honorSubgraphCacheControlHeader</code>","position":{"start":{"line":314,"column":160,"offset":13750},"end":{"line":314,"column":193,"offset":13783}}},{"type":"text","value":" property of a ","position":{"start":{"line":314,"column":193,"offset":13783},"end":{"line":314,"column":208,"offset":13798}}},{"type":"html","value":"<code class=\"language-text\">RemoteGraphQLDataSource</code>","position":{"start":{"line":314,"column":208,"offset":13798},"end":{"line":314,"column":233,"offset":13823}}},{"type":"text","value":" to ","position":{"start":{"line":314,"column":233,"offset":13823},"end":{"line":314,"column":237,"offset":13827}}},{"type":"html","value":"<code class=\"language-text\">false</code>","position":{"start":{"line":314,"column":237,"offset":13827},"end":{"line":314,"column":244,"offset":13834}}},{"type":"text","value":" (this value is ","position":{"start":{"line":314,"column":244,"offset":13834},"end":{"line":314,"column":260,"offset":13850}}},{"type":"html","value":"<code class=\"language-text\">true</code>","position":{"start":{"line":314,"column":260,"offset":13850},"end":{"line":314,"column":266,"offset":13856}}},{"type":"text","value":" by default):","position":{"start":{"line":314,"column":266,"offset":13856},"end":{"line":314,"column":279,"offset":13869}}}],"position":{"start":{"line":314,"column":1,"offset":13591},"end":{"line":314,"column":279,"offset":13869}}},{"type":"html","lang":"javascript","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> gateway <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloGateway</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...</span>\n  <span class=\"token function\">buildService</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> url <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">RemoteGraphQLDataSource</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      url<span class=\"token punctuation\">,</span>\n      <span class=\"token literal-property property\">honorSubgraphCacheControlHeader</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":316,"column":1,"offset":13871},"end":{"line":326,"column":4,"offset":14073}}},{"type":"paragraph","children":[{"type":"text","value":"The effect of setting ","position":{"start":{"line":328,"column":1,"offset":14075},"end":{"line":328,"column":23,"offset":14097}}},{"type":"html","value":"<code class=\"language-text\">honorSubgraphCacheControlHeader</code>","position":{"start":{"line":328,"column":23,"offset":14097},"end":{"line":328,"column":56,"offset":14130}}},{"type":"text","value":" to ","position":{"start":{"line":328,"column":56,"offset":14130},"end":{"line":328,"column":60,"offset":14134}}},{"type":"html","value":"<code class=\"language-text\">false</code>","position":{"start":{"line":328,"column":60,"offset":14134},"end":{"line":328,"column":67,"offset":14141}}},{"type":"text","value":" is to have no impact on the cacheability of the response in either direction. In other words, this property wont determine whether the response can be cached, but it does exclude a subgraph's ","position":{"start":{"line":328,"column":67,"offset":14141},"end":{"line":328,"column":261,"offset":14335}}},{"type":"html","value":"<code class=\"language-text\">Cache-Control</code>","position":{"start":{"line":328,"column":261,"offset":14335},"end":{"line":328,"column":276,"offset":14350}}},{"type":"text","value":" header from consideration in the gateway's calculation. If all subgraphs are excluded from consideration when calculating the overall ","position":{"start":{"line":328,"column":276,"offset":14350},"end":{"line":328,"column":411,"offset":14485}}},{"type":"html","value":"<code class=\"language-text\">Cache-Control</code>","position":{"start":{"line":328,"column":411,"offset":14485},"end":{"line":328,"column":426,"offset":14500}}},{"type":"text","value":" header, the response sent to the client will not be cached.","position":{"start":{"line":328,"column":426,"offset":14500},"end":{"line":328,"column":486,"offset":14560}}}],"position":{"start":{"line":328,"column":1,"offset":14075},"end":{"line":328,"column":486,"offset":14560}}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#caching-with-a-cdn","title":null,"children":[],"data":{"hProperties":{"aria-label":"caching with a cdn permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Caching with a CDN","position":{"start":{"line":330,"column":4,"offset":14565},"end":{"line":330,"column":22,"offset":14583}}}],"position":{"start":{"line":330,"column":1,"offset":14562},"end":{"line":330,"column":22,"offset":14583}},"data":{"id":"caching-with-a-cdn","htmlAttributes":{"id":"caching-with-a-cdn"},"hProperties":{"id":"caching-with-a-cdn","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Whenever Apollo Server sends an operation response that has a non-zero ","position":{"start":{"line":332,"column":1,"offset":14585},"end":{"line":332,"column":72,"offset":14656}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":332,"column":72,"offset":14656},"end":{"line":332,"column":80,"offset":14664}}},{"type":"text","value":", it includes a ","position":{"start":{"line":332,"column":80,"offset":14664},"end":{"line":332,"column":96,"offset":14680}}},{"type":"html","value":"<code class=\"language-text\">Cache-Control</code>","position":{"start":{"line":332,"column":96,"offset":14680},"end":{"line":332,"column":111,"offset":14695}}},{"type":"text","value":" HTTP header that describes the response's cache policy.","position":{"start":{"line":332,"column":111,"offset":14695},"end":{"line":332,"column":167,"offset":14751}}}],"position":{"start":{"line":332,"column":1,"offset":14585},"end":{"line":332,"column":167,"offset":14751}}},{"type":"paragraph","children":[{"type":"text","value":"The header has this format:","position":{"start":{"line":334,"column":1,"offset":14753},"end":{"line":334,"column":28,"offset":14780}}}],"position":{"start":{"line":334,"column":1,"offset":14753},"end":{"line":334,"column":28,"offset":14780}}},{"type":"html","lang":null,"meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Cache-Control: max-age=60, private</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>","position":{"start":{"line":336,"column":1,"offset":14782},"end":{"line":338,"column":4,"offset":14824}}},{"type":"paragraph","children":[{"type":"text","value":"If you run Apollo Server behind a CDN or another caching proxy, you can configure it to use this header's value to cache responses appropriately. See your CDN's documentation for details (for example, here's the ","position":{"start":{"line":340,"column":1,"offset":14826},"end":{"line":340,"column":213,"offset":15038}}},{"type":"link","title":null,"url":"https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/Expiration.html#expiration-individual-objects","children":[{"type":"text","value":"documentation for Amazon CloudFront","position":{"start":{"line":340,"column":214,"offset":15039},"end":{"line":340,"column":249,"offset":15074}}}],"position":{"start":{"line":340,"column":213,"offset":15038},"end":{"line":340,"column":364,"offset":15189}}},{"type":"text","value":").","position":{"start":{"line":340,"column":364,"offset":15189},"end":{"line":340,"column":366,"offset":15191}}}],"position":{"start":{"line":340,"column":1,"offset":14826},"end":{"line":340,"column":366,"offset":15191}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#using-get-requests","title":null,"children":[],"data":{"hProperties":{"aria-label":"using get requests permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Using GET requests","position":{"start":{"line":342,"column":5,"offset":15197},"end":{"line":342,"column":23,"offset":15215}}}],"position":{"start":{"line":342,"column":1,"offset":15193},"end":{"line":342,"column":23,"offset":15215}},"data":{"id":"using-get-requests","htmlAttributes":{"id":"using-get-requests"},"hProperties":{"id":"using-get-requests","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Because CDNs and caching proxies only cache GET requests (not POST requests, which Apollo Client sends for all operations by default), we recommend enabling ","position":{"start":{"line":344,"column":1,"offset":15217},"end":{"line":344,"column":158,"offset":15374}}},{"type":"link","title":null,"url":"/performance/apq/","children":[{"type":"text","value":"automatic persisted queries","position":{"start":{"line":344,"column":159,"offset":15375},"end":{"line":344,"column":186,"offset":15402}}}],"position":{"start":{"line":344,"column":158,"offset":15374},"end":{"line":344,"column":195,"offset":15411}}},{"type":"text","value":" and the ","position":{"start":{"line":344,"column":195,"offset":15411},"end":{"line":344,"column":204,"offset":15420}}},{"type":"link","title":null,"url":"/performance/apq/","children":[{"type":"html","value":"<code class=\"language-text\">useGETForHashedQueries</code>","position":{"start":{"line":344,"column":205,"offset":15421},"end":{"line":344,"column":229,"offset":15445}}},{"type":"text","value":" option","position":{"start":{"line":344,"column":229,"offset":15445},"end":{"line":344,"column":236,"offset":15452}}}],"position":{"start":{"line":344,"column":204,"offset":15420},"end":{"line":344,"column":245,"offset":15461}}},{"type":"text","value":" in Apollo Client.","position":{"start":{"line":344,"column":245,"offset":15461},"end":{"line":344,"column":263,"offset":15479}}}],"position":{"start":{"line":344,"column":1,"offset":15217},"end":{"line":344,"column":263,"offset":15479}}},{"type":"paragraph","children":[{"type":"text","value":"Alternatively, you can set the ","position":{"start":{"line":346,"column":1,"offset":15481},"end":{"line":346,"column":32,"offset":15512}}},{"type":"html","value":"<code class=\"language-text\">useGETForQueries</code>","position":{"start":{"line":346,"column":32,"offset":15512},"end":{"line":346,"column":50,"offset":15530}}},{"type":"text","value":" option of ","position":{"start":{"line":346,"column":50,"offset":15530},"end":{"line":346,"column":61,"offset":15541}}},{"type":"link","title":null,"url":"https://www.apollographql.com/docs/react/api/link/apollo-link-http","children":[{"type":"text","value":"HttpLink","position":{"start":{"line":346,"column":62,"offset":15542},"end":{"line":346,"column":70,"offset":15550}}}],"position":{"start":{"line":346,"column":61,"offset":15541},"end":{"line":346,"column":139,"offset":15619}}},{"type":"text","value":" in your ","position":{"start":{"line":346,"column":139,"offset":15619},"end":{"line":346,"column":148,"offset":15628}}},{"type":"html","value":"<code class=\"language-text\">ApolloClient</code>","position":{"start":{"line":346,"column":148,"offset":15628},"end":{"line":346,"column":162,"offset":15642}}},{"type":"text","value":" instance. However, most browsers enforce a size limit on GET requests, and large query strings might exceed this limit.","position":{"start":{"line":346,"column":162,"offset":15642},"end":{"line":346,"column":282,"offset":15762}}}],"position":{"start":{"line":346,"column":1,"offset":15481},"end":{"line":346,"column":282,"offset":15762}}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#disabling-cache-control","title":null,"children":[],"data":{"hProperties":{"aria-label":"disabling cache control permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Disabling cache control","position":{"start":{"line":348,"column":4,"offset":15767},"end":{"line":348,"column":27,"offset":15790}}}],"position":{"start":{"line":348,"column":1,"offset":15764},"end":{"line":348,"column":27,"offset":15790}},"data":{"id":"disabling-cache-control","htmlAttributes":{"id":"disabling-cache-control"},"hProperties":{"id":"disabling-cache-control","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"You can prevent Apollo Server from setting ","position":{"start":{"line":350,"column":1,"offset":15792},"end":{"line":350,"column":44,"offset":15835}}},{"type":"html","value":"<code class=\"language-text\">Cache-Control</code>","position":{"start":{"line":350,"column":44,"offset":15835},"end":{"line":350,"column":59,"offset":15850}}},{"type":"text","value":" headers by installing the ","position":{"start":{"line":350,"column":59,"offset":15850},"end":{"line":350,"column":86,"offset":15877}}},{"type":"html","value":"<code class=\"language-text\">ApolloServerPluginCacheControl</code>","position":{"start":{"line":350,"column":86,"offset":15877},"end":{"line":350,"column":118,"offset":15909}}},{"type":"text","value":" plugin yourself and setting ","position":{"start":{"line":350,"column":118,"offset":15909},"end":{"line":350,"column":147,"offset":15938}}},{"type":"html","value":"<code class=\"language-text\">calculateHttpHeaders</code>","position":{"start":{"line":350,"column":147,"offset":15938},"end":{"line":350,"column":169,"offset":15960}}},{"type":"text","value":" to ","position":{"start":{"line":350,"column":169,"offset":15960},"end":{"line":350,"column":173,"offset":15964}}},{"type":"html","value":"<code class=\"language-text\">false</code>","position":{"start":{"line":350,"column":173,"offset":15964},"end":{"line":350,"column":180,"offset":15971}}},{"type":"text","value":":","position":{"start":{"line":350,"column":180,"offset":15971},"end":{"line":350,"column":181,"offset":15972}}}],"position":{"start":{"line":350,"column":1,"offset":15792},"end":{"line":350,"column":181,"offset":15972}}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ApolloServerPluginCacheControl <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'apollo-server-core'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...other options...</span>\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token function\">ApolloServerPluginCacheControl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">calculateHttpHeaders</span><span class=\"token operator\">:</span> <span class=\"token boolean\">false</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":352,"column":1,"offset":15974},"end":{"line":359,"column":4,"offset":16195}}},{"type":"paragraph","children":[{"type":"text","value":"If you do this, the cache control plugin still calculates caching behavior for each operation response. You can then use this information with other plugins (like the ","position":{"start":{"line":361,"column":1,"offset":16197},"end":{"line":361,"column":168,"offset":16364}}},{"type":"link","title":null,"url":"#caching-with-responsecacheplugin-advanced","children":[{"type":"text","value":"response cache plugin","position":{"start":{"line":361,"column":169,"offset":16365},"end":{"line":361,"column":190,"offset":16386}}}],"position":{"start":{"line":361,"column":168,"offset":16364},"end":{"line":361,"column":235,"offset":16431}}},{"type":"text","value":").","position":{"start":{"line":361,"column":235,"offset":16431},"end":{"line":361,"column":237,"offset":16433}}}],"position":{"start":{"line":361,"column":1,"offset":16197},"end":{"line":361,"column":237,"offset":16433}}},{"type":"paragraph","children":[{"type":"text","value":"To disable cache control calculations entirely, instead install the ","position":{"start":{"line":363,"column":1,"offset":16435},"end":{"line":363,"column":69,"offset":16503}}},{"type":"html","value":"<code class=\"language-text\">ApolloServerPluginCacheControlDisabled</code>","position":{"start":{"line":363,"column":69,"offset":16503},"end":{"line":363,"column":109,"offset":16543}}},{"type":"text","value":" plugin (this plugin has no effect other than preventing the cache control plugin from being installed):","position":{"start":{"line":363,"column":109,"offset":16543},"end":{"line":363,"column":213,"offset":16647}}}],"position":{"start":{"line":363,"column":1,"offset":16435},"end":{"line":363,"column":213,"offset":16647}}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ApolloServerPluginCacheControlDisabled <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'apollo-server-core'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...other options...</span>\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token function\">ApolloServerPluginCacheControlDisabled</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":365,"column":1,"offset":16649},"end":{"line":372,"column":4,"offset":16855}}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#caching-with-responsecacheplugin-advanced","title":null,"children":[],"data":{"hProperties":{"aria-label":"caching with responsecacheplugin advanced permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Caching with ","position":{"start":{"line":373,"column":4,"offset":16859},"end":{"line":373,"column":17,"offset":16872}}},{"type":"html","value":"<code class=\"language-text\">responseCachePlugin</code>","position":{"start":{"line":373,"column":17,"offset":16872},"end":{"line":373,"column":38,"offset":16893}}},{"type":"text","value":" (advanced)","position":{"start":{"line":373,"column":38,"offset":16893},"end":{"line":373,"column":49,"offset":16904}}}],"position":{"start":{"line":373,"column":1,"offset":16856},"end":{"line":373,"column":49,"offset":16904}},"data":{"id":"caching-with-responsecacheplugin-advanced","htmlAttributes":{"id":"caching-with-responsecacheplugin-advanced"},"hProperties":{"id":"caching-with-responsecacheplugin-advanced","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"You can cache Apollo Server query responses in stores like Redis, Memcached, or Apollo Server's in-memory cache.","position":{"start":{"line":375,"column":1,"offset":16906},"end":{"line":375,"column":113,"offset":17018}}}],"position":{"start":{"line":375,"column":1,"offset":16906},"end":{"line":375,"column":113,"offset":17018}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#in-memory-cache-setup","title":null,"children":[],"data":{"hProperties":{"aria-label":"in memory cache setup permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"In-memory cache setup","position":{"start":{"line":377,"column":5,"offset":17024},"end":{"line":377,"column":26,"offset":17045}}}],"position":{"start":{"line":377,"column":1,"offset":17020},"end":{"line":377,"column":26,"offset":17045}},"data":{"id":"in-memory-cache-setup","htmlAttributes":{"id":"in-memory-cache-setup"},"hProperties":{"id":"in-memory-cache-setup","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"To set up your in-memory response cache, you first import the ","position":{"start":{"line":379,"column":1,"offset":17047},"end":{"line":379,"column":63,"offset":17109}}},{"type":"html","value":"<code class=\"language-text\">responseCachePlugin</code>","position":{"start":{"line":379,"column":63,"offset":17109},"end":{"line":379,"column":84,"offset":17130}}},{"type":"text","value":" and provide it to the ","position":{"start":{"line":379,"column":84,"offset":17130},"end":{"line":379,"column":107,"offset":17153}}},{"type":"html","value":"<code class=\"language-text\">ApolloServer</code>","position":{"start":{"line":379,"column":107,"offset":17153},"end":{"line":379,"column":121,"offset":17167}}},{"type":"text","value":" constructor:","position":{"start":{"line":379,"column":121,"offset":17167},"end":{"line":379,"column":134,"offset":17180}}}],"position":{"start":{"line":379,"column":1,"offset":17047},"end":{"line":379,"column":134,"offset":17180}}},{"type":"html","lang":"javascript","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> responseCachePlugin <span class=\"token keyword\">from</span> <span class=\"token string\">'apollo-server-plugin-response-cache'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...other options...</span>\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token function\">responseCachePlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":381,"column":1,"offset":17182},"end":{"line":388,"column":4,"offset":17370}}},{"type":"paragraph","children":[{"type":"text","value":"On initialization, this plugin automatically begins caching responses according to ","position":{"start":{"line":390,"column":1,"offset":17372},"end":{"line":390,"column":84,"offset":17455}}},{"type":"link","title":null,"url":"#in-your-schema-static","children":[{"type":"text","value":"field settings","position":{"start":{"line":390,"column":85,"offset":17456},"end":{"line":390,"column":99,"offset":17470}}}],"position":{"start":{"line":390,"column":84,"offset":17455},"end":{"line":390,"column":124,"offset":17495}}},{"type":"text","value":".","position":{"start":{"line":390,"column":124,"offset":17495},"end":{"line":390,"column":125,"offset":17496}}}],"position":{"start":{"line":390,"column":1,"offset":17372},"end":{"line":390,"column":125,"offset":17496}}},{"type":"paragraph","children":[{"type":"text","value":"The plugin uses the same in-memory LRU cache as Apollo Server's other features. For environments with multiple server instances, you might instead want to use a shared cache backend, such as ","position":{"start":{"line":392,"column":1,"offset":17498},"end":{"line":392,"column":192,"offset":17689}}},{"type":"link","title":null,"url":"#memcachedredis-setup","children":[{"type":"text","value":"Memcached or Redis","position":{"start":{"line":392,"column":193,"offset":17690},"end":{"line":392,"column":211,"offset":17708}}}],"position":{"start":{"line":392,"column":192,"offset":17689},"end":{"line":392,"column":235,"offset":17732}}},{"type":"text","value":".","position":{"start":{"line":392,"column":235,"offset":17732},"end":{"line":392,"column":236,"offset":17733}}}],"position":{"start":{"line":392,"column":1,"offset":17498},"end":{"line":392,"column":236,"offset":17733}}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"In addition to the ","position":{"start":{"line":394,"column":2,"offset":17736},"end":{"line":394,"column":21,"offset":17755}}},{"type":"link","title":null,"url":"#caching-with-a-cdn","children":[{"type":"html","value":"<code class=\"language-text\">Cache-Control</code>","position":{"start":{"line":394,"column":22,"offset":17756},"end":{"line":394,"column":37,"offset":17771}}},{"type":"text","value":" HTTP header","position":{"start":{"line":394,"column":37,"offset":17771},"end":{"line":394,"column":49,"offset":17783}}}],"position":{"start":{"line":394,"column":21,"offset":17755},"end":{"line":394,"column":71,"offset":17805}}},{"type":"text","value":", the ","position":{"start":{"line":394,"column":71,"offset":17805},"end":{"line":394,"column":77,"offset":17811}}},{"type":"html","value":"<code class=\"language-text\">responseCachePlugin</code>","position":{"start":{"line":394,"column":77,"offset":17811},"end":{"line":394,"column":98,"offset":17832}}},{"type":"text","value":" also sets the ","position":{"start":{"line":394,"column":98,"offset":17832},"end":{"line":394,"column":113,"offset":17847}}},{"type":"html","value":"<code class=\"language-text\">Age</code>","position":{"start":{"line":394,"column":113,"offset":17847},"end":{"line":394,"column":118,"offset":17852}}},{"type":"text","value":" HTTP header to the number of seconds the returned value has been in the cache.","position":{"start":{"line":394,"column":118,"offset":17852},"end":{"line":394,"column":197,"offset":17931}}}],"position":{"start":{"line":394,"column":2,"offset":17736},"end":{"line":394,"column":197,"offset":17931}}}],"position":{"start":{"line":394,"column":1,"offset":17735},"end":{"line":394,"column":197,"offset":17931}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#memcachedredis-setup","title":null,"children":[],"data":{"hProperties":{"aria-label":"memcachedredis setup permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Memcached/Redis setup","position":{"start":{"line":396,"column":5,"offset":17937},"end":{"line":396,"column":26,"offset":17958}}}],"position":{"start":{"line":396,"column":1,"offset":17933},"end":{"line":396,"column":26,"offset":17958}},"data":{"id":"memcachedredis-setup","htmlAttributes":{"id":"memcachedredis-setup"},"hProperties":{"id":"memcachedredis-setup","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"See ","position":{"start":{"line":398,"column":1,"offset":17960},"end":{"line":398,"column":5,"offset":17964}}},{"type":"link","title":null,"url":"/data/data-sources/#using-memcachedredis-as-a-cache-storage-backend","children":[{"type":"text","value":"Using Memcached/Redis as a cache storage backend","position":{"start":{"line":398,"column":6,"offset":17965},"end":{"line":398,"column":54,"offset":18013}}}],"position":{"start":{"line":398,"column":5,"offset":17964},"end":{"line":398,"column":126,"offset":18085}}},{"type":"text","value":".","position":{"start":{"line":398,"column":126,"offset":18085},"end":{"line":398,"column":127,"offset":18086}}}],"position":{"start":{"line":398,"column":1,"offset":17960},"end":{"line":398,"column":127,"offset":18086}}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"You can also ","position":{"start":{"line":400,"column":3,"offset":18090},"end":{"line":400,"column":16,"offset":18103}}},{"type":"link","title":null,"url":"/data/data-sources/#implementing-your-own-cache-backend","children":[{"type":"text","value":"implement your own cache backend","position":{"start":{"line":400,"column":17,"offset":18104},"end":{"line":400,"column":49,"offset":18136}}}],"position":{"start":{"line":400,"column":16,"offset":18103},"end":{"line":400,"column":109,"offset":18196}}},{"type":"text","value":".","position":{"start":{"line":400,"column":109,"offset":18196},"end":{"line":400,"column":110,"offset":18197}}}],"position":{"start":{"line":400,"column":3,"offset":18090},"end":{"line":400,"column":110,"offset":18197}}}],"position":{"start":{"line":400,"column":1,"offset":18088},"end":{"line":400,"column":110,"offset":18197}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#identifying-users-for-private-responses","title":null,"children":[],"data":{"hProperties":{"aria-label":"identifying users for private responses permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Identifying users for ","position":{"start":{"line":403,"column":5,"offset":18204},"end":{"line":403,"column":27,"offset":18226}}},{"type":"html","value":"<code class=\"language-text\">PRIVATE</code>","position":{"start":{"line":403,"column":27,"offset":18226},"end":{"line":403,"column":36,"offset":18235}}},{"type":"text","value":" responses","position":{"start":{"line":403,"column":36,"offset":18235},"end":{"line":403,"column":46,"offset":18245}}}],"position":{"start":{"line":403,"column":1,"offset":18200},"end":{"line":403,"column":46,"offset":18245}},"data":{"id":"identifying-users-for-private-responses","htmlAttributes":{"id":"identifying-users-for-private-responses"},"hProperties":{"id":"identifying-users-for-private-responses","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"If a cached response has a ","position":{"start":{"line":405,"column":1,"offset":18247},"end":{"line":405,"column":28,"offset":18274}}},{"type":"link","title":null,"url":"#in-your-schema-static","children":[{"type":"html","value":"<code class=\"language-text\">PRIVATE</code>","position":{"start":{"line":405,"column":29,"offset":18275},"end":{"line":405,"column":38,"offset":18284}}},{"type":"text","value":" scope","position":{"start":{"line":405,"column":38,"offset":18284},"end":{"line":405,"column":44,"offset":18290}}}],"position":{"start":{"line":405,"column":28,"offset":18274},"end":{"line":405,"column":69,"offset":18315}}},{"type":"text","value":", its value is accessible by only a single user. To enforce this restriction, the cache needs to know how to ","position":{"start":{"line":405,"column":69,"offset":18315},"end":{"line":405,"column":178,"offset":18424}}},{"type":"emphasis","children":[{"type":"text","value":"identify","position":{"start":{"line":405,"column":179,"offset":18425},"end":{"line":405,"column":187,"offset":18433}}}],"position":{"start":{"line":405,"column":178,"offset":18424},"end":{"line":405,"column":188,"offset":18434}}},{"type":"text","value":" that user.","position":{"start":{"line":405,"column":188,"offset":18434},"end":{"line":405,"column":199,"offset":18445}}}],"position":{"start":{"line":405,"column":1,"offset":18247},"end":{"line":405,"column":199,"offset":18445}}},{"type":"paragraph","children":[{"type":"text","value":"To enable this identification, you provide a ","position":{"start":{"line":407,"column":1,"offset":18447},"end":{"line":407,"column":46,"offset":18492}}},{"type":"html","value":"<code class=\"language-text\">sessionId</code>","position":{"start":{"line":407,"column":46,"offset":18492},"end":{"line":407,"column":57,"offset":18503}}},{"type":"text","value":" function to your ","position":{"start":{"line":407,"column":57,"offset":18503},"end":{"line":407,"column":75,"offset":18521}}},{"type":"html","value":"<code class=\"language-text\">responseCachePlugin</code>","position":{"start":{"line":407,"column":75,"offset":18521},"end":{"line":407,"column":96,"offset":18542}}},{"type":"text","value":", like so:","position":{"start":{"line":407,"column":96,"offset":18542},"end":{"line":407,"column":106,"offset":18552}}}],"position":{"start":{"line":407,"column":1,"offset":18447},"end":{"line":407,"column":106,"offset":18552}}},{"type":"html","lang":"javascript","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> responseCachePlugin <span class=\"token keyword\">from</span> <span class=\"token string\">'apollo-server-plugin-response-cache'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// ...other settings...</span>\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token function\">responseCachePlugin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">sessionId</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">requestContext</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>requestContext<span class=\"token punctuation\">.</span>request<span class=\"token punctuation\">.</span>http<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'session-id'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":409,"column":1,"offset":18554},"end":{"line":417,"column":4,"offset":18847}}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Important:","position":{"start":{"line":419,"column":5,"offset":18853},"end":{"line":419,"column":15,"offset":18863}}}],"position":{"start":{"line":419,"column":3,"offset":18851},"end":{"line":419,"column":17,"offset":18865}}},{"type":"text","value":" If you don't define a ","position":{"start":{"line":419,"column":17,"offset":18865},"end":{"line":419,"column":40,"offset":18888}}},{"type":"html","value":"<code class=\"language-text\">sessionId</code>","position":{"start":{"line":419,"column":40,"offset":18888},"end":{"line":419,"column":51,"offset":18899}}},{"type":"text","value":" function, ","position":{"start":{"line":419,"column":51,"offset":18899},"end":{"line":419,"column":62,"offset":18910}}},{"type":"html","value":"<code class=\"language-text\">PRIVATE</code>","position":{"start":{"line":419,"column":62,"offset":18910},"end":{"line":419,"column":71,"offset":18919}}},{"type":"text","value":" responses are not cached at all.","position":{"start":{"line":419,"column":71,"offset":18919},"end":{"line":419,"column":104,"offset":18952}}}],"position":{"start":{"line":419,"column":3,"offset":18851},"end":{"line":419,"column":104,"offset":18952}}}],"position":{"start":{"line":419,"column":1,"offset":18849},"end":{"line":419,"column":104,"offset":18952}}},{"type":"paragraph","children":[{"type":"text","value":"The cache uses the return value of this function to identify the user who can later access the cached ","position":{"start":{"line":421,"column":1,"offset":18954},"end":{"line":421,"column":103,"offset":19056}}},{"type":"html","value":"<code class=\"language-text\">PRIVATE</code>","position":{"start":{"line":421,"column":103,"offset":19056},"end":{"line":421,"column":112,"offset":19065}}},{"type":"text","value":" response. In the example above, the function uses a ","position":{"start":{"line":421,"column":112,"offset":19065},"end":{"line":421,"column":165,"offset":19118}}},{"type":"html","value":"<code class=\"language-text\">session-id</code>","position":{"start":{"line":421,"column":165,"offset":19118},"end":{"line":421,"column":177,"offset":19130}}},{"type":"text","value":" header from the original operation request.","position":{"start":{"line":421,"column":177,"offset":19130},"end":{"line":421,"column":221,"offset":19174}}}],"position":{"start":{"line":421,"column":1,"offset":18954},"end":{"line":421,"column":221,"offset":19174}}},{"type":"paragraph","children":[{"type":"text","value":"If a client later executes the exact same query ","position":{"start":{"line":423,"column":1,"offset":19176},"end":{"line":423,"column":49,"offset":19224}}},{"type":"emphasis","children":[{"type":"text","value":"and","position":{"start":{"line":423,"column":50,"offset":19225},"end":{"line":423,"column":53,"offset":19228}}}],"position":{"start":{"line":423,"column":49,"offset":19224},"end":{"line":423,"column":54,"offset":19229}}},{"type":"text","value":" has the same identifier, Apollo Server returns the ","position":{"start":{"line":423,"column":54,"offset":19229},"end":{"line":423,"column":106,"offset":19281}}},{"type":"html","value":"<code class=\"language-text\">PRIVATE</code>","position":{"start":{"line":423,"column":106,"offset":19281},"end":{"line":423,"column":115,"offset":19290}}},{"type":"text","value":" cached response if it's still available.","position":{"start":{"line":423,"column":115,"offset":19290},"end":{"line":423,"column":156,"offset":19331}}}],"position":{"start":{"line":423,"column":1,"offset":19176},"end":{"line":423,"column":156,"offset":19331}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#separating-responses-for-logged-in-and-logged-out-users","title":null,"children":[],"data":{"hProperties":{"aria-label":"separating responses for logged in and logged out users permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Separating responses for logged-in and logged-out users","position":{"start":{"line":425,"column":5,"offset":19337},"end":{"line":425,"column":60,"offset":19392}}}],"position":{"start":{"line":425,"column":1,"offset":19333},"end":{"line":425,"column":60,"offset":19392}},"data":{"id":"separating-responses-for-logged-in-and-logged-out-users","htmlAttributes":{"id":"separating-responses-for-logged-in-and-logged-out-users"},"hProperties":{"id":"separating-responses-for-logged-in-and-logged-out-users","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"By default, ","position":{"start":{"line":427,"column":1,"offset":19394},"end":{"line":427,"column":13,"offset":19406}}},{"type":"html","value":"<code class=\"language-text\">PUBLIC</code>","position":{"start":{"line":427,"column":13,"offset":19406},"end":{"line":427,"column":21,"offset":19414}}},{"type":"text","value":" cached responses are accessible by all users. However, if you define a ","position":{"start":{"line":427,"column":21,"offset":19414},"end":{"line":427,"column":93,"offset":19486}}},{"type":"html","value":"<code class=\"language-text\">sessionId</code>","position":{"start":{"line":427,"column":93,"offset":19486},"end":{"line":427,"column":104,"offset":19497}}},{"type":"text","value":" function (","position":{"start":{"line":427,"column":104,"offset":19497},"end":{"line":427,"column":115,"offset":19508}}},{"type":"link","title":null,"url":"#identifying-users-for-private-responses","children":[{"type":"text","value":"as shown above","position":{"start":{"line":427,"column":116,"offset":19509},"end":{"line":427,"column":130,"offset":19523}}}],"position":{"start":{"line":427,"column":115,"offset":19508},"end":{"line":427,"column":173,"offset":19566}}},{"type":"text","value":"), Apollo Server caches up to ","position":{"start":{"line":427,"column":173,"offset":19566},"end":{"line":427,"column":203,"offset":19596}}},{"type":"emphasis","children":[{"type":"text","value":"two versions","position":{"start":{"line":427,"column":204,"offset":19597},"end":{"line":427,"column":216,"offset":19609}}}],"position":{"start":{"line":427,"column":203,"offset":19596},"end":{"line":427,"column":217,"offset":19610}}},{"type":"text","value":" of each ","position":{"start":{"line":427,"column":217,"offset":19610},"end":{"line":427,"column":226,"offset":19619}}},{"type":"html","value":"<code class=\"language-text\">PUBLIC</code>","position":{"start":{"line":427,"column":226,"offset":19619},"end":{"line":427,"column":234,"offset":19627}}},{"type":"text","value":" response:","position":{"start":{"line":427,"column":234,"offset":19627},"end":{"line":427,"column":244,"offset":19637}}}],"position":{"start":{"line":427,"column":1,"offset":19394},"end":{"line":427,"column":244,"offset":19637}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"One version for users with a ","position":{"start":{"line":429,"column":3,"offset":19641},"end":{"line":429,"column":32,"offset":19670}}},{"type":"strong","children":[{"type":"text","value":"null ","position":{"start":{"line":429,"column":34,"offset":19672},"end":{"line":429,"column":39,"offset":19677}}},{"type":"html","value":"<code class=\"language-text\">sessionId</code>","position":{"start":{"line":429,"column":39,"offset":19677},"end":{"line":429,"column":50,"offset":19688}}}],"position":{"start":{"line":429,"column":32,"offset":19670},"end":{"line":429,"column":52,"offset":19690}}}],"position":{"start":{"line":429,"column":3,"offset":19641},"end":{"line":429,"column":52,"offset":19690}}}],"position":{"start":{"line":429,"column":1,"offset":19639},"end":{"line":429,"column":52,"offset":19690}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"One version for users with a ","position":{"start":{"line":430,"column":3,"offset":19693},"end":{"line":430,"column":32,"offset":19722}}},{"type":"strong","children":[{"type":"text","value":"non-null ","position":{"start":{"line":430,"column":34,"offset":19724},"end":{"line":430,"column":43,"offset":19733}}},{"type":"html","value":"<code class=\"language-text\">sessionId</code>","position":{"start":{"line":430,"column":43,"offset":19733},"end":{"line":430,"column":54,"offset":19744}}}],"position":{"start":{"line":430,"column":32,"offset":19722},"end":{"line":430,"column":56,"offset":19746}}}],"position":{"start":{"line":430,"column":3,"offset":19693},"end":{"line":430,"column":56,"offset":19746}}}],"position":{"start":{"line":430,"column":1,"offset":19691},"end":{"line":430,"column":56,"offset":19746}}}],"position":{"start":{"line":429,"column":1,"offset":19639},"end":{"line":430,"column":56,"offset":19746}}},{"type":"paragraph","children":[{"type":"text","value":"This enables you to cache different responses for logged-in and logged-out users. For example, you might want your page header to display different menu items depending on a user's logged-in status.","position":{"start":{"line":432,"column":1,"offset":19748},"end":{"line":432,"column":199,"offset":19946}}}],"position":{"start":{"line":432,"column":1,"offset":19748},"end":{"line":432,"column":199,"offset":19946}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#configuring-reads-and-writes","title":null,"children":[],"data":{"hProperties":{"aria-label":"configuring reads and writes permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Configuring reads and writes","position":{"start":{"line":434,"column":5,"offset":19952},"end":{"line":434,"column":33,"offset":19980}}}],"position":{"start":{"line":434,"column":1,"offset":19948},"end":{"line":434,"column":33,"offset":19980}},"data":{"id":"configuring-reads-and-writes","htmlAttributes":{"id":"configuring-reads-and-writes"},"hProperties":{"id":"configuring-reads-and-writes","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"In addition to ","position":{"start":{"line":436,"column":1,"offset":19982},"end":{"line":436,"column":16,"offset":19997}}},{"type":"link","title":null,"url":"#identifying-users-for-private-responses","children":[{"type":"text","value":"the ","position":{"start":{"line":436,"column":17,"offset":19998},"end":{"line":436,"column":21,"offset":20002}}},{"type":"html","value":"<code class=\"language-text\">sessionId</code>","position":{"start":{"line":436,"column":21,"offset":20002},"end":{"line":436,"column":32,"offset":20013}}},{"type":"text","value":" function","position":{"start":{"line":436,"column":32,"offset":20013},"end":{"line":436,"column":41,"offset":20022}}}],"position":{"start":{"line":436,"column":16,"offset":19997},"end":{"line":436,"column":84,"offset":20065}}},{"type":"text","value":", you can provide the following functions to your ","position":{"start":{"line":436,"column":84,"offset":20065},"end":{"line":436,"column":134,"offset":20115}}},{"type":"html","value":"<code class=\"language-text\">responseCachePlugin</code>","position":{"start":{"line":436,"column":134,"offset":20115},"end":{"line":436,"column":155,"offset":20136}}},{"type":"text","value":" to configure cache reads and writes. Each of these functions takes a ","position":{"start":{"line":436,"column":155,"offset":20136},"end":{"line":436,"column":225,"offset":20206}}},{"type":"html","value":"<code class=\"language-text\">GraphQLRequestContext</code>","position":{"start":{"line":436,"column":225,"offset":20206},"end":{"line":436,"column":248,"offset":20229}}},{"type":"text","value":" (representing the incoming operation) as a parameter.","position":{"start":{"line":436,"column":248,"offset":20229},"end":{"line":436,"column":302,"offset":20283}}}],"position":{"start":{"line":436,"column":1,"offset":19982},"end":{"line":436,"column":302,"offset":20283}}},{"type":"table","align":[null,null],"children":[{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"text","value":"Function","position":{"start":{"line":438,"column":3,"offset":20287},"end":{"line":438,"column":11,"offset":20295}}}],"position":{"start":{"line":438,"column":1,"offset":20285},"end":{"line":438,"column":13,"offset":20297}}},{"type":"tableCell","children":[{"type":"text","value":"Description","position":{"start":{"line":438,"column":14,"offset":20298},"end":{"line":438,"column":25,"offset":20309}}}],"position":{"start":{"line":438,"column":13,"offset":20297},"end":{"line":438,"column":27,"offset":20311}}}],"position":{"start":{"line":438,"column":1,"offset":20285},"end":{"line":438,"column":27,"offset":20311}}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"html","value":"<code class=\"language-text\">extraCacheKeyData</code>","position":{"start":{"line":440,"column":3,"offset":20341},"end":{"line":440,"column":22,"offset":20360}}}],"position":{"start":{"line":440,"column":1,"offset":20339},"end":{"line":440,"column":24,"offset":20362}}},{"type":"tableCell","children":[{"type":"text","value":"This function's return value (any JSON-stringifiable object) is added to the key for the cached response. For example, if your API includes translatable text, this function can return a string derived from ","position":{"start":{"line":440,"column":25,"offset":20363},"end":{"line":440,"column":231,"offset":20569}}},{"type":"html","value":"<code class=\"language-text\">requestContext.request.http.headers.get('Accept-Language')</code>","position":{"start":{"line":440,"column":231,"offset":20569},"end":{"line":440,"column":291,"offset":20629}}},{"type":"text","value":".","position":{"start":{"line":440,"column":291,"offset":20629},"end":{"line":440,"column":292,"offset":20630}}}],"position":{"start":{"line":440,"column":24,"offset":20362},"end":{"line":440,"column":294,"offset":20632}}}],"position":{"start":{"line":440,"column":1,"offset":20339},"end":{"line":440,"column":294,"offset":20632}}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"html","value":"<code class=\"language-text\">shouldReadFromCache</code>","position":{"start":{"line":441,"column":3,"offset":20635},"end":{"line":441,"column":24,"offset":20656}}}],"position":{"start":{"line":441,"column":1,"offset":20633},"end":{"line":441,"column":26,"offset":20658}}},{"type":"tableCell","children":[{"type":"text","value":"If this function returns ","position":{"start":{"line":441,"column":27,"offset":20659},"end":{"line":441,"column":52,"offset":20684}}},{"type":"html","value":"<code class=\"language-text\">false</code>","position":{"start":{"line":441,"column":52,"offset":20684},"end":{"line":441,"column":59,"offset":20691}}},{"type":"text","value":", Apollo Server ","position":{"start":{"line":441,"column":59,"offset":20691},"end":{"line":441,"column":75,"offset":20707}}},{"type":"emphasis","children":[{"type":"text","value":"skips","position":{"start":{"line":441,"column":76,"offset":20708},"end":{"line":441,"column":81,"offset":20713}}}],"position":{"start":{"line":441,"column":75,"offset":20707},"end":{"line":441,"column":82,"offset":20714}}},{"type":"text","value":" the cache for the incoming operation, even if a valid response is available.","position":{"start":{"line":441,"column":82,"offset":20714},"end":{"line":441,"column":159,"offset":20791}}}],"position":{"start":{"line":441,"column":26,"offset":20658},"end":{"line":441,"column":161,"offset":20793}}}],"position":{"start":{"line":441,"column":1,"offset":20633},"end":{"line":441,"column":161,"offset":20793}}},{"type":"tableRow","children":[{"type":"tableCell","children":[{"type":"html","value":"<code class=\"language-text\">shouldWriteToCache</code>","position":{"start":{"line":442,"column":3,"offset":20796},"end":{"line":442,"column":23,"offset":20816}}}],"position":{"start":{"line":442,"column":1,"offset":20794},"end":{"line":442,"column":25,"offset":20818}}},{"type":"tableCell","children":[{"type":"text","value":"If this function returns ","position":{"start":{"line":442,"column":26,"offset":20819},"end":{"line":442,"column":51,"offset":20844}}},{"type":"html","value":"<code class=\"language-text\">false</code>","position":{"start":{"line":442,"column":51,"offset":20844},"end":{"line":442,"column":58,"offset":20851}}},{"type":"text","value":", Apollo Server doesn't cache its response for the incoming operation, even if the response's ","position":{"start":{"line":442,"column":58,"offset":20851},"end":{"line":442,"column":152,"offset":20945}}},{"type":"html","value":"<code class=\"language-text\">maxAge</code>","position":{"start":{"line":442,"column":152,"offset":20945},"end":{"line":442,"column":160,"offset":20953}}},{"type":"text","value":" is greater than ","position":{"start":{"line":442,"column":160,"offset":20953},"end":{"line":442,"column":177,"offset":20970}}},{"type":"html","value":"<code class=\"language-text\">0</code>","position":{"start":{"line":442,"column":177,"offset":20970},"end":{"line":442,"column":180,"offset":20973}}},{"type":"text","value":".","position":{"start":{"line":442,"column":180,"offset":20973},"end":{"line":442,"column":181,"offset":20974}}}],"position":{"start":{"line":442,"column":25,"offset":20818},"end":{"line":442,"column":183,"offset":20976}}}],"position":{"start":{"line":442,"column":1,"offset":20794},"end":{"line":442,"column":183,"offset":20976}}}],"position":{"start":{"line":438,"column":1,"offset":20285},"end":{"line":442,"column":183,"offset":20976}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":443,"column":1,"offset":20977}}}}