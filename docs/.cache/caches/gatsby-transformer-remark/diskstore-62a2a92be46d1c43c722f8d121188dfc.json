{"expireTime":9007200901519681000,"key":"transformer-remark-markdown-ast-204c41f2c49de81a6fcc095bbeeb00f9-gatsby-remark-autolink-headersgatsby-remark-copy-linked-filesgatsby-remark-mermaidgatsby-remark-code-titlesgatsby-remark-prismjsgatsby-remark-rewrite-relative-linksgatsby-remark-check-links-","val":{"type":"root","children":[{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"New in Apollo Server 3:","position":{"start":{"line":2,"column":5,"offset":5},"end":{"line":2,"column":28,"offset":28}}}],"position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":30,"offset":30}}},{"type":"text","value":" All plugin lifecycle methods are ","position":{"start":{"line":2,"column":30,"offset":30},"end":{"line":2,"column":64,"offset":64}}},{"type":"html","value":"<code class=\"language-text\">async</code>","position":{"start":{"line":2,"column":64,"offset":64},"end":{"line":2,"column":71,"offset":71}}},{"type":"text","value":", ","position":{"start":{"line":2,"column":71,"offset":71},"end":{"line":2,"column":73,"offset":73}}},{"type":"emphasis","children":[{"type":"text","value":"except for ","position":{"start":{"line":2,"column":74,"offset":74},"end":{"line":2,"column":85,"offset":85}}},{"type":"link","title":null,"url":"/integrations/plugins-event-reference/#willresolvefield","children":[{"type":"html","value":"<code class=\"language-text\">willResolveField</code>","position":{"start":{"line":2,"column":86,"offset":86},"end":{"line":2,"column":104,"offset":104}}}],"position":{"start":{"line":2,"column":85,"offset":85},"end":{"line":2,"column":150,"offset":150}}},{"type":"text","value":" and ","position":{"start":{"line":2,"column":150,"offset":150},"end":{"line":2,"column":155,"offset":155}}},{"type":"link","title":null,"url":"/integrations/plugins-event-reference/#schemadidloadorupdate","children":[{"type":"html","value":"<code class=\"language-text\">schemaDidLoadOrUpdate</code>","position":{"start":{"line":2,"column":156,"offset":156},"end":{"line":2,"column":179,"offset":179}}}],"position":{"start":{"line":2,"column":155,"offset":155},"end":{"line":2,"column":230,"offset":230}}}],"position":{"start":{"line":2,"column":73,"offset":73},"end":{"line":2,"column":231,"offset":231}}},{"type":"text","value":".","position":{"start":{"line":2,"column":231,"offset":231},"end":{"line":2,"column":232,"offset":232}}}],"position":{"start":{"line":2,"column":3,"offset":3},"end":{"line":2,"column":232,"offset":232}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":232,"offset":232}}},{"type":"paragraph","children":[{"type":"text","value":"You can create your own Apollo Server plugins to perform custom operations in response to certain events. For example, a basic logging plugin might log the GraphQL query string associated with each request that's sent to Apollo Server.","position":{"start":{"line":4,"column":1,"offset":234},"end":{"line":4,"column":236,"offset":469}}}],"position":{"start":{"line":4,"column":1,"offset":234},"end":{"line":4,"column":236,"offset":469}}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#the-anatomy-of-a-plugin","title":null,"children":[],"data":{"hProperties":{"aria-label":"the anatomy of a plugin permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"The anatomy of a plugin","position":{"start":{"line":6,"column":4,"offset":474},"end":{"line":6,"column":27,"offset":497}}}],"position":{"start":{"line":6,"column":1,"offset":471},"end":{"line":6,"column":27,"offset":497}},"data":{"id":"the-anatomy-of-a-plugin","htmlAttributes":{"id":"the-anatomy-of-a-plugin"},"hProperties":{"id":"the-anatomy-of-a-plugin","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Plugins are JavaScript objects that implement one or more functions that respond to events. Here's a basic plugin that responds to the ","position":{"start":{"line":8,"column":1,"offset":499},"end":{"line":8,"column":136,"offset":634}}},{"type":"html","value":"<code class=\"language-text\">serverWillStart</code>","position":{"start":{"line":8,"column":136,"offset":634},"end":{"line":8,"column":153,"offset":651}}},{"type":"text","value":" event:","position":{"start":{"line":8,"column":153,"offset":651},"end":{"line":8,"column":160,"offset":658}}}],"position":{"start":{"line":8,"column":1,"offset":499},"end":{"line":8,"column":160,"offset":658}}},{"type":"html","value":"<div class=\"gatsby-code-title\">index.js</div>"},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myPlugin <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">serverWillStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Server starting up!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":10,"column":1,"offset":660},"end":{"line":16,"column":4,"offset":779}}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"If you're using TypeScript to create a plugin, the ","position":{"start":{"line":18,"column":3,"offset":783},"end":{"line":18,"column":54,"offset":834}}},{"type":"html","value":"<code class=\"language-text\">apollo-server-plugin-base</code>","position":{"start":{"line":18,"column":54,"offset":834},"end":{"line":18,"column":81,"offset":861}}},{"type":"text","value":" module exports the ","position":{"start":{"line":18,"column":81,"offset":861},"end":{"line":18,"column":101,"offset":881}}},{"type":"link","title":null,"url":"https://github.com/apollographql/apollo-server/blob/main/packages/apollo-server-plugin-base/src/index.ts","children":[{"type":"html","value":"<code class=\"language-text\">ApolloServerPlugin</code>","position":{"start":{"line":18,"column":102,"offset":882},"end":{"line":18,"column":122,"offset":902}}},{"type":"text","value":" interface","position":{"start":{"line":18,"column":122,"offset":902},"end":{"line":18,"column":132,"offset":912}}}],"position":{"start":{"line":18,"column":101,"offset":881},"end":{"line":18,"column":239,"offset":1019}}},{"type":"text","value":" for plugins to implement.","position":{"start":{"line":18,"column":239,"offset":1019},"end":{"line":18,"column":265,"offset":1045}}}],"position":{"start":{"line":18,"column":3,"offset":783},"end":{"line":18,"column":265,"offset":1045}}}],"position":{"start":{"line":18,"column":1,"offset":781},"end":{"line":18,"column":265,"offset":1045}}},{"type":"paragraph","children":[{"type":"text","value":"You can define a plugin in the same file where you initialize Apollo Server, or\nyou can export it as a separate module:","position":{"start":{"line":20,"column":1,"offset":1047},"end":{"line":21,"column":40,"offset":1166}}}],"position":{"start":{"line":20,"column":1,"offset":1047},"end":{"line":21,"column":40,"offset":1166}}},{"type":"html","value":"<div class=\"gatsby-code-title\">myPlugin.js</div>"},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">serverWillStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Server starting up!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":23,"column":1,"offset":1168},"end":{"line":29,"column":4,"offset":1290}}},{"type":"paragraph","children":[{"type":"text","value":"To create a plugin that accepts options, create a function that accepts an\n","position":{"start":{"line":31,"column":1,"offset":1292},"end":{"line":32,"column":1,"offset":1367}}},{"type":"html","value":"<code class=\"language-text\">options</code>","position":{"start":{"line":32,"column":1,"offset":1367},"end":{"line":32,"column":10,"offset":1376}}},{"type":"text","value":" object and returns a properly structured plugin object, like so:","position":{"start":{"line":32,"column":10,"offset":1376},"end":{"line":32,"column":75,"offset":1441}}}],"position":{"start":{"line":31,"column":1,"offset":1292},"end":{"line":32,"column":75,"offset":1441}}},{"type":"html","value":"<div class=\"gatsby-code-title\">myPlugin.js</div>"},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">exports</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">options</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">serverWillStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>options<span class=\"token punctuation\">.</span>logMessage<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":34,"column":1,"offset":1443},"end":{"line":42,"column":4,"offset":1597}}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#responding-to-events","title":null,"children":[],"data":{"hProperties":{"aria-label":"responding to events permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Responding to events","position":{"start":{"line":45,"column":4,"offset":1603},"end":{"line":45,"column":24,"offset":1623}}}],"position":{"start":{"line":45,"column":1,"offset":1600},"end":{"line":45,"column":24,"offset":1623}},"data":{"id":"responding-to-events","htmlAttributes":{"id":"responding-to-events"},"hProperties":{"id":"responding-to-events","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"A plugin specifies exactly which events it responds to by implementing functions that correspond to those events. The plugin in the examples above responds to the ","position":{"start":{"line":47,"column":1,"offset":1625},"end":{"line":47,"column":164,"offset":1788}}},{"type":"html","value":"<code class=\"language-text\">serverWillStart</code>","position":{"start":{"line":47,"column":164,"offset":1788},"end":{"line":47,"column":181,"offset":1805}}},{"type":"text","value":" event, which fires when Apollo Server is preparing to start up. Almost all plugin events are ","position":{"start":{"line":47,"column":181,"offset":1805},"end":{"line":47,"column":275,"offset":1899}}},{"type":"html","value":"<code class=\"language-text\">async</code>","position":{"start":{"line":47,"column":275,"offset":1899},"end":{"line":47,"column":282,"offset":1906}}},{"type":"text","value":" functions (i.e., functions that return ","position":{"start":{"line":47,"column":282,"offset":1906},"end":{"line":47,"column":322,"offset":1946}}},{"type":"html","value":"<code class=\"language-text\">Promise</code>","position":{"start":{"line":47,"column":322,"offset":1946},"end":{"line":47,"column":331,"offset":1955}}},{"type":"text","value":"s). The only exceptions\nare ","position":{"start":{"line":47,"column":331,"offset":1955},"end":{"line":48,"column":5,"offset":1983}}},{"type":"link","title":null,"url":"/integrations/plugins-event-reference/#willresolvefield","children":[{"type":"html","value":"<code class=\"language-text\">willResolveField</code>","position":{"start":{"line":48,"column":6,"offset":1984},"end":{"line":48,"column":24,"offset":2002}}}],"position":{"start":{"line":48,"column":5,"offset":1983},"end":{"line":48,"column":70,"offset":2048}}},{"type":"text","value":" and ","position":{"start":{"line":48,"column":70,"offset":2048},"end":{"line":48,"column":75,"offset":2053}}},{"type":"link","title":null,"url":"/integrations/plugins-event-reference/#schemadidloadorupdate","children":[{"type":"html","value":"<code class=\"language-text\">schemaDidLoadOrUpdate</code>","position":{"start":{"line":48,"column":76,"offset":2054},"end":{"line":48,"column":99,"offset":2077}}}],"position":{"start":{"line":48,"column":75,"offset":2053},"end":{"line":48,"column":150,"offset":2128}}},{"type":"text","value":".","position":{"start":{"line":48,"column":150,"offset":2128},"end":{"line":48,"column":151,"offset":2129}}}],"position":{"start":{"line":47,"column":1,"offset":1625},"end":{"line":48,"column":151,"offset":2129}}},{"type":"paragraph","children":[{"type":"text","value":"A plugin can respond to any combination of ","position":{"start":{"line":50,"column":1,"offset":2131},"end":{"line":50,"column":44,"offset":2174}}},{"type":"link","title":null,"url":"/integrations/plugins-event-reference/","children":[{"type":"text","value":"supported events","position":{"start":{"line":50,"column":45,"offset":2175},"end":{"line":50,"column":61,"offset":2191}}}],"position":{"start":{"line":50,"column":44,"offset":2174},"end":{"line":50,"column":90,"offset":2220}}},{"type":"text","value":".","position":{"start":{"line":50,"column":90,"offset":2220},"end":{"line":50,"column":91,"offset":2221}}}],"position":{"start":{"line":50,"column":1,"offset":2131},"end":{"line":50,"column":91,"offset":2221}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#responding-to-request-lifecycle-events","title":null,"children":[],"data":{"hProperties":{"aria-label":"responding to request lifecycle events permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Responding to request lifecycle events","position":{"start":{"line":52,"column":5,"offset":2227},"end":{"line":52,"column":43,"offset":2265}}}],"position":{"start":{"line":52,"column":1,"offset":2223},"end":{"line":52,"column":43,"offset":2265}},"data":{"id":"responding-to-request-lifecycle-events","htmlAttributes":{"id":"responding-to-request-lifecycle-events"},"hProperties":{"id":"responding-to-request-lifecycle-events","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Plugins can respond to the following events associated with the GraphQL request\nlifecycle:","position":{"start":{"line":54,"column":1,"offset":2267},"end":{"line":55,"column":11,"offset":2357}}}],"position":{"start":{"line":54,"column":1,"offset":2267},"end":{"line":55,"column":11,"offset":2357}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"/integrations/plugins-event-reference/#didresolvesource","children":[{"type":"html","value":"<code class=\"language-text\">didResolveSource</code>","position":{"start":{"line":57,"column":4,"offset":2362},"end":{"line":57,"column":22,"offset":2380}}}],"position":{"start":{"line":57,"column":3,"offset":2361},"end":{"line":57,"column":68,"offset":2426}}}],"position":{"start":{"line":57,"column":3,"offset":2361},"end":{"line":57,"column":68,"offset":2426}}}],"position":{"start":{"line":57,"column":1,"offset":2359},"end":{"line":57,"column":68,"offset":2426}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"/integrations/plugins-event-reference/#parsingdidstart","children":[{"type":"html","value":"<code class=\"language-text\">parsingDidStart</code>","position":{"start":{"line":58,"column":4,"offset":2430},"end":{"line":58,"column":21,"offset":2447}}}],"position":{"start":{"line":58,"column":3,"offset":2429},"end":{"line":58,"column":66,"offset":2492}}}],"position":{"start":{"line":58,"column":3,"offset":2429},"end":{"line":58,"column":66,"offset":2492}}}],"position":{"start":{"line":58,"column":1,"offset":2427},"end":{"line":58,"column":66,"offset":2492}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"/integrations/plugins-event-reference/#validationdidstart","children":[{"type":"html","value":"<code class=\"language-text\">validationDidStart</code>","position":{"start":{"line":59,"column":4,"offset":2496},"end":{"line":59,"column":24,"offset":2516}}}],"position":{"start":{"line":59,"column":3,"offset":2495},"end":{"line":59,"column":72,"offset":2564}}}],"position":{"start":{"line":59,"column":3,"offset":2495},"end":{"line":59,"column":72,"offset":2564}}}],"position":{"start":{"line":59,"column":1,"offset":2493},"end":{"line":59,"column":72,"offset":2564}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"/integrations/plugins-event-reference/#didresolveoperation","children":[{"type":"html","value":"<code class=\"language-text\">didResolveOperation</code>","position":{"start":{"line":60,"column":4,"offset":2568},"end":{"line":60,"column":25,"offset":2589}}}],"position":{"start":{"line":60,"column":3,"offset":2567},"end":{"line":60,"column":74,"offset":2638}}}],"position":{"start":{"line":60,"column":3,"offset":2567},"end":{"line":60,"column":74,"offset":2638}}}],"position":{"start":{"line":60,"column":1,"offset":2565},"end":{"line":60,"column":74,"offset":2638}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"/integrations/plugins-event-reference/#responseforoperation","children":[{"type":"html","value":"<code class=\"language-text\">responseForOperation</code>","position":{"start":{"line":61,"column":4,"offset":2642},"end":{"line":61,"column":26,"offset":2664}}}],"position":{"start":{"line":61,"column":3,"offset":2641},"end":{"line":61,"column":76,"offset":2714}}}],"position":{"start":{"line":61,"column":3,"offset":2641},"end":{"line":61,"column":76,"offset":2714}}}],"position":{"start":{"line":61,"column":1,"offset":2639},"end":{"line":61,"column":76,"offset":2714}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"/integrations/plugins-event-reference/#executiondidstart","children":[{"type":"html","value":"<code class=\"language-text\">executionDidStart</code>","position":{"start":{"line":62,"column":4,"offset":2718},"end":{"line":62,"column":23,"offset":2737}}}],"position":{"start":{"line":62,"column":3,"offset":2717},"end":{"line":62,"column":70,"offset":2784}}}],"position":{"start":{"line":62,"column":3,"offset":2717},"end":{"line":62,"column":70,"offset":2784}}}],"position":{"start":{"line":62,"column":1,"offset":2715},"end":{"line":62,"column":70,"offset":2784}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"/integrations/plugins-event-reference/#didencountererrors","children":[{"type":"html","value":"<code class=\"language-text\">didEncounterErrors</code>","position":{"start":{"line":63,"column":4,"offset":2788},"end":{"line":63,"column":24,"offset":2808}}}],"position":{"start":{"line":63,"column":3,"offset":2787},"end":{"line":63,"column":72,"offset":2856}}}],"position":{"start":{"line":63,"column":3,"offset":2787},"end":{"line":63,"column":72,"offset":2856}}}],"position":{"start":{"line":63,"column":1,"offset":2785},"end":{"line":63,"column":72,"offset":2856}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"/integrations/plugins-event-reference/#willsendresponse","children":[{"type":"html","value":"<code class=\"language-text\">willSendResponse</code>","position":{"start":{"line":64,"column":4,"offset":2860},"end":{"line":64,"column":22,"offset":2878}}}],"position":{"start":{"line":64,"column":3,"offset":2859},"end":{"line":64,"column":68,"offset":2924}}}],"position":{"start":{"line":64,"column":3,"offset":2859},"end":{"line":64,"column":68,"offset":2924}}}],"position":{"start":{"line":64,"column":1,"offset":2857},"end":{"line":64,"column":68,"offset":2924}}}],"position":{"start":{"line":57,"column":1,"offset":2359},"end":{"line":64,"column":68,"offset":2924}}},{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"However","position":{"start":{"line":66,"column":3,"offset":2928},"end":{"line":66,"column":10,"offset":2935}}}],"position":{"start":{"line":66,"column":1,"offset":2926},"end":{"line":66,"column":12,"offset":2937}}},{"type":"text","value":", the way you define these functions is slightly different from the\n","position":{"start":{"line":66,"column":12,"offset":2937},"end":{"line":67,"column":1,"offset":3005}}},{"type":"html","value":"<code class=\"language-text\">serverWillStart</code>","position":{"start":{"line":67,"column":1,"offset":3005},"end":{"line":67,"column":18,"offset":3022}}},{"type":"text","value":" example above. First, your plugin must define the ","position":{"start":{"line":67,"column":18,"offset":3022},"end":{"line":67,"column":69,"offset":3073}}},{"type":"html","value":"<code class=\"language-text\">requestDidStart</code>","position":{"start":{"line":67,"column":69,"offset":3073},"end":{"line":67,"column":86,"offset":3090}}},{"type":"text","value":" function:","position":{"start":{"line":67,"column":86,"offset":3090},"end":{"line":67,"column":96,"offset":3100}}}],"position":{"start":{"line":66,"column":1,"offset":2926},"end":{"line":67,"column":96,"offset":3100}}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myPlugin <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">requestDidStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Request started!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":69,"column":1,"offset":3102},"end":{"line":75,"column":4,"offset":3203}}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":77,"column":1,"offset":3205},"end":{"line":77,"column":5,"offset":3209}}},{"type":"html","value":"<code class=\"language-text\">requestDidStart</code>","position":{"start":{"line":77,"column":5,"offset":3209},"end":{"line":77,"column":22,"offset":3226}}},{"type":"text","value":" event fires whenever Apollo Server receives a GraphQL request,\n","position":{"start":{"line":77,"column":22,"offset":3226},"end":{"line":78,"column":1,"offset":3290}}},{"type":"emphasis","children":[{"type":"text","value":"before","position":{"start":{"line":78,"column":2,"offset":3291},"end":{"line":78,"column":8,"offset":3297}}}],"position":{"start":{"line":78,"column":1,"offset":3290},"end":{"line":78,"column":9,"offset":3298}}},{"type":"text","value":" any of the lifecycle events listed above. You can respond to this event\njust like you respond to ","position":{"start":{"line":78,"column":9,"offset":3298},"end":{"line":79,"column":26,"offset":3396}}},{"type":"html","value":"<code class=\"language-text\">serverWillStart</code>","position":{"start":{"line":79,"column":26,"offset":3396},"end":{"line":79,"column":43,"offset":3413}}},{"type":"text","value":", but you ","position":{"start":{"line":79,"column":43,"offset":3413},"end":{"line":79,"column":53,"offset":3423}}},{"type":"emphasis","children":[{"type":"text","value":"also","position":{"start":{"line":79,"column":54,"offset":3424},"end":{"line":79,"column":58,"offset":3428}}}],"position":{"start":{"line":79,"column":53,"offset":3423},"end":{"line":79,"column":59,"offset":3429}}},{"type":"text","value":" use this function\nto define responses for a request's lifecycle events, like so:","position":{"start":{"line":79,"column":59,"offset":3429},"end":{"line":80,"column":64,"offset":3511}}}],"position":{"start":{"line":77,"column":1,"offset":3205},"end":{"line":80,"column":64,"offset":3511}}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myPlugin <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">requestDidStart</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestContext</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Request started!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">async</span> <span class=\"token function\">parsingDidStart</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestContext</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Parsing started!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n      <span class=\"token keyword\">async</span> <span class=\"token function\">validationDidStart</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">requestContext</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Validation started!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":82,"column":1,"offset":3513},"end":{"line":98,"column":4,"offset":3846}}},{"type":"paragraph","children":[{"type":"text","value":"As shown, the ","position":{"start":{"line":100,"column":1,"offset":3848},"end":{"line":100,"column":15,"offset":3862}}},{"type":"html","value":"<code class=\"language-text\">requestDidStart</code>","position":{"start":{"line":100,"column":15,"offset":3862},"end":{"line":100,"column":32,"offset":3879}}},{"type":"text","value":" function can optionally return an object that\ndefines functions that respond to request lifecycle events. This structure\norganizes and encapsulates all of your plugin's request lifecycle logic, making it\neasier to reason about.","position":{"start":{"line":100,"column":32,"offset":3879},"end":{"line":103,"column":24,"offset":4107}}}],"position":{"start":{"line":100,"column":1,"offset":3848},"end":{"line":103,"column":24,"offset":4107}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#request-lifecycle-event-flow","title":null,"children":[],"data":{"hProperties":{"aria-label":"request lifecycle event flow permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Request lifecycle event flow","position":{"start":{"line":105,"column":5,"offset":4113},"end":{"line":105,"column":33,"offset":4141}}}],"position":{"start":{"line":105,"column":1,"offset":4109},"end":{"line":105,"column":33,"offset":4141}},"data":{"id":"request-lifecycle-event-flow","htmlAttributes":{"id":"request-lifecycle-event-flow"},"hProperties":{"id":"request-lifecycle-event-flow","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"The following diagram illustrates the sequence of events that fire for each request. Each of these events is documented in ","position":{"start":{"line":107,"column":1,"offset":4143},"end":{"line":107,"column":124,"offset":4266}}},{"type":"link","title":null,"url":"/integrations/plugins-event-reference/","children":[{"type":"text","value":"Apollo Server plugin events","position":{"start":{"line":107,"column":125,"offset":4267},"end":{"line":107,"column":152,"offset":4294}}}],"position":{"start":{"line":107,"column":124,"offset":4266},"end":{"line":107,"column":181,"offset":4323}}},{"type":"text","value":".","position":{"start":{"line":107,"column":181,"offset":4323},"end":{"line":107,"column":182,"offset":4324}}}],"position":{"start":{"line":107,"column":1,"offset":4143},"end":{"line":107,"column":182,"offset":4324}}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Important:","position":{"start":{"line":109,"column":5,"offset":4330},"end":{"line":109,"column":15,"offset":4340}}}],"position":{"start":{"line":109,"column":3,"offset":4328},"end":{"line":109,"column":17,"offset":4342}}},{"type":"text","value":" Any event below that can result in \"Success\" can also result in an error. Whenever an error occurs, the ","position":{"start":{"line":109,"column":17,"offset":4342},"end":{"line":109,"column":122,"offset":4447}}},{"type":"html","value":"<code class=\"language-text\">didEncounterErrors</code>","position":{"start":{"line":109,"column":122,"offset":4447},"end":{"line":109,"column":142,"offset":4467}}},{"type":"text","value":" event fires and the remainder of the \"Success\" path does ","position":{"start":{"line":109,"column":142,"offset":4467},"end":{"line":109,"column":200,"offset":4525}}},{"type":"emphasis","children":[{"type":"text","value":"not","position":{"start":{"line":109,"column":201,"offset":4526},"end":{"line":109,"column":204,"offset":4529}}}],"position":{"start":{"line":109,"column":200,"offset":4525},"end":{"line":109,"column":205,"offset":4530}}},{"type":"text","value":".","position":{"start":{"line":109,"column":205,"offset":4530},"end":{"line":109,"column":206,"offset":4531}}}],"position":{"start":{"line":109,"column":3,"offset":4328},"end":{"line":109,"column":206,"offset":4531}}}],"position":{"start":{"line":109,"column":1,"offset":4326},"end":{"line":109,"column":206,"offset":4531}}},{"type":"html","lang":"mermaid","meta":null,"value":"<div class=\"mermaid\" data-processed=\"true\"><svg id=\"mermaid-1646778688990\" width=\"100%\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" height=\"996\" style=\"max-width: 503.71875px;\" viewBox=\"0 0 503.71875 996\"><style>#mermaid-1646778688990 {font-family:\"trebuchet ms\",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1646778688990 .error-icon{fill:#552222;}#mermaid-1646778688990 .error-text{fill:#552222;stroke:#552222;}#mermaid-1646778688990 .edge-thickness-normal{stroke-width:2px;}#mermaid-1646778688990 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1646778688990 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1646778688990 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1646778688990 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1646778688990 .marker{fill:#333333;stroke:#333333;}#mermaid-1646778688990 .marker.cross{stroke:#333333;}#mermaid-1646778688990 svg{font-family:\"trebuchet ms\",verdana,arial,sans-serif;font-size:16px;}#mermaid-1646778688990 .label{font-family:\"trebuchet ms\",verdana,arial,sans-serif;color:#333;}#mermaid-1646778688990 .cluster-label text{fill:#333;}#mermaid-1646778688990 .cluster-label span{color:#333;}#mermaid-1646778688990 .label text,#mermaid-1646778688990 span{fill:#333;color:#333;}#mermaid-1646778688990 .node rect,#mermaid-1646778688990 .node circle,#mermaid-1646778688990 .node ellipse,#mermaid-1646778688990 .node polygon,#mermaid-1646778688990 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1646778688990 .node .label{text-align:center;}#mermaid-1646778688990 .node.clickable{cursor:pointer;}#mermaid-1646778688990 .arrowheadPath{fill:#333333;}#mermaid-1646778688990 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-1646778688990 .flowchart-link{stroke:#333333;fill:none;}#mermaid-1646778688990 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-1646778688990 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-1646778688990 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-1646778688990 .cluster text{fill:#333;}#mermaid-1646778688990 .cluster span{color:#333;}#mermaid-1646778688990 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:\"trebuchet ms\",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1646778688990 .node rect,#mermaid-1646778688990 .node circle,#mermaid-1646778688990 .node polygon,#mermaid-1646778688990 .node path{stroke-width:2px;stroke:#3f20ba;fill:#F4F6F8;}#mermaid-1646778688990 .node.secondary rect,#mermaid-1646778688990 .node.secondary circle,#mermaid-1646778688990 .node.secondary polygon,#mermaid-1646778688990 .node.tertiary rect,#mermaid-1646778688990 .node.tertiary circle,#mermaid-1646778688990 .node.tertiary polygon{fill:white;}#mermaid-1646778688990 .node.secondary rect,#mermaid-1646778688990 .node.secondary circle,#mermaid-1646778688990 .node.secondary polygon{stroke:#832363;}#mermaid-1646778688990 .cluster rect,#mermaid-1646778688990 .node.tertiary rect,#mermaid-1646778688990 .node.tertiary circle,#mermaid-1646778688990 .node.tertiary polygon{stroke:#1d7b78;}#mermaid-1646778688990 .cluster rect{fill:none;stroke-width:2px;}#mermaid-1646778688990 .label,#mermaid-1646778688990 .edgeLabel{background-color:white;line-height:1.3;}#mermaid-1646778688990 .edgeLabel rect{background:none;fill:none;}#mermaid-1646778688990 .messageText,#mermaid-1646778688990 .noteText,#mermaid-1646778688990 .loopText{font-size:12px;stroke:none;}#mermaid-1646778688990 g rect,#mermaid-1646778688990 polygon.labelBox{stroke-width:2px;}#mermaid-1646778688990 g rect.actor{stroke:#1d7b78;fill:white;}#mermaid-1646778688990 g rect.note{stroke:#832363;fill:white;}#mermaid-1646778688990 g line.loopLine,#mermaid-1646778688990 polygon.labelBox{stroke:#3f20ba;fill:white;}#mermaid-1646778688990 :root{--mermaid-font-family:\"trebuchet ms\",verdana,arial,sans-serif;}</style><g><g class=\"output\"><g class=\"clusters\"></g><g class=\"edgePaths\"><g class=\"edgePath LS-request LE-resolveSource\" id=\"L-request-resolveSource\" style=\"opacity: 1;\"><path class=\"path\" d=\"M297.62890625,47L297.62890625,51.166666666666664C297.62890625,55.333333333333336,297.62890625,63.666666666666664,297.62890625,72C297.62890625,80.33333333333333,297.62890625,88.66666666666667,297.62890625,92.83333333333333L297.62890625,97\" marker-end=\"url(#arrowhead66)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead66\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-resolveSource LE-parsing\" id=\"L-resolveSource-parsing\" style=\"opacity: 1;\"><path class=\"path\" d=\"M297.62890625,136L297.62890625,141.83333333333334C297.62890625,147.66666666666666,297.62890625,159.33333333333334,297.62890625,171C297.62890625,182.66666666666666,297.62890625,194.33333333333334,297.62890625,200.16666666666666L297.62890625,206\" marker-end=\"url(#arrowhead67)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead67\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-parsing LE-validation\" id=\"L-parsing-validation\" style=\"opacity: 1;\"><path class=\"path\" d=\"M297.62890625,245L297.62890625,250.83333333333334C297.62890625,256.6666666666667,297.62890625,268.3333333333333,297.62890625,280C297.62890625,291.6666666666667,297.62890625,303.3333333333333,297.62890625,309.1666666666667L297.62890625,315\" marker-end=\"url(#arrowhead68)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead68\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-validation LE-resolveOperation\" id=\"L-validation-resolveOperation\" style=\"opacity: 1;\"><path class=\"path\" d=\"M297.62890625,354L297.62890625,359.8333333333333C297.62890625,365.6666666666667,297.62890625,377.3333333333333,297.62890625,389C297.62890625,400.6666666666667,297.62890625,412.3333333333333,297.62890625,418.1666666666667L297.62890625,424\" marker-end=\"url(#arrowhead69)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead69\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-resolveOperation LE-response\" id=\"L-resolveOperation-response\" style=\"opacity: 1;\"><path class=\"path\" d=\"M297.62890625,463L297.62890625,468.8333333333333C297.62890625,474.6666666666667,297.62890625,486.3333333333333,297.62890625,498C297.62890625,509.6666666666667,297.62890625,521.3333333333334,297.62890625,527.1666666666666L297.62890625,533\" marker-end=\"url(#arrowhead70)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead70\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-errors LE-send\" id=\"L-errors-send\" style=\"opacity: 1;\"><path class=\"path\" d=\"M86.640625,899L86.640625,903.1666666666666C86.640625,907.3333333333334,86.640625,915.6666666666666,97.28113295880149,924C107.92164091760299,932.3333333333334,129.202656835206,940.6666666666666,139.8431647940075,944.8333333333334L150.48367275280899,949\" marker-end=\"url(#arrowhead71)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead71\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-response LE-send\" id=\"L-response-send\" style=\"opacity: 1;\"><path class=\"path\" d=\"M262.79809346330273,572L252.3786195527523,577.8333333333334C241.95914564220183,583.6666666666666,221.1201978211009,595.3333333333334,210.70072391055047,610.25C200.28125,625.1666666666666,200.28125,643.3333333333334,200.28125,661.5C200.28125,679.6666666666666,200.28125,697.8333333333334,200.28125,716C200.28125,734.1666666666666,200.28125,752.3333333333334,200.28125,770.5C200.28125,788.6666666666666,200.28125,806.8333333333334,200.28125,825C200.28125,843.1666666666666,200.28125,861.3333333333334,200.28125,877.8333333333334C200.28125,894.3333333333334,200.28125,909.1666666666666,200.28125,920.75C200.28125,932.3333333333334,200.28125,940.6666666666666,200.28125,944.8333333333334L200.28125,949\" marker-end=\"url(#arrowhead72)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead72\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-response LE-execution\" id=\"L-response-execution\" style=\"opacity: 1;\"><path class=\"path\" d=\"M317.71452121559633,572L323.72303851299694,577.8333333333334C329.73155581039754,583.6666666666666,341.74859040519874,595.3333333333334,347.7571077025994,607C353.765625,618.6666666666666,353.765625,630.3333333333334,353.765625,636.1666666666666L353.765625,642\" marker-end=\"url(#arrowhead73)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead73\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-execution LE-send\" id=\"L-execution-send\" style=\"opacity: 1;\"><path class=\"path\" d=\"M334.45011467889907,681L328.67197056574923,686.8333333333334C322.8938264525994,692.6666666666666,311.3375382262997,704.3333333333334,305.55939411314984,719.25C299.78125,734.1666666666666,299.78125,752.3333333333334,299.78125,770.5C299.78125,788.6666666666666,299.78125,806.8333333333334,299.78125,825C299.78125,843.1666666666666,299.78125,861.3333333333334,299.78125,877.8333333333334C299.78125,894.3333333333334,299.78125,909.1666666666666,290.4647705992509,920.75C281.1482911985019,932.3333333333334,262.51533239700376,940.6666666666666,253.1988529962547,944.8333333333334L243.8823735955056,949\" marker-end=\"url(#arrowhead74)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead74\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g><g class=\"edgePath LS-execution LE-resolveField\" id=\"L-execution-resolveField\" style=\"opacity: 1;\"><path class=\"path\" d=\"M373.08113532110093,681L378.85927943425077,686.8333333333334C384.6374235474006,692.6666666666666,396.1937117737003,704.3333333333334,401.97185588685016,716C407.75,727.6666666666666,407.75,739.3333333333334,407.75,745.1666666666666L407.75,751\" marker-end=\"url(#arrowhead75)\" style=\"fill:none\"></path><defs><marker id=\"arrowhead75\" viewBox=\"0 0 10 10\" refX=\"9\" refY=\"5\" markerUnits=\"strokeWidth\" markerWidth=\"8\" markerHeight=\"6\" orient=\"auto\"><path d=\"M 0 0 L 10 5 L 0 10 z\" class=\"arrowheadPath\" style=\"stroke-width: 1; stroke-dasharray: 1, 0;\"></path></marker></defs></g></g><g class=\"edgeLabels\"><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-request-resolveSource\" class=\"edgeLabel L-LS-request' L-LE-resolveSource\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(297.62890625,171)\" style=\"opacity: 1;\"><g transform=\"translate(-26.984375,-10)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"53.96875\" height=\"20\"></rect><foreignObject width=\"53.96875\" height=\"20\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-resolveSource-parsing\" class=\"edgeLabel L-LS-resolveSource' L-LE-parsing\">Success</span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(297.62890625,280)\" style=\"opacity: 1;\"><g transform=\"translate(-26.984375,-10)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"53.96875\" height=\"20\"></rect><foreignObject width=\"53.96875\" height=\"20\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-parsing-validation\" class=\"edgeLabel L-LS-parsing' L-LE-validation\">Success</span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(297.62890625,389)\" style=\"opacity: 1;\"><g transform=\"translate(-26.984375,-10)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"53.96875\" height=\"20\"></rect><foreignObject width=\"53.96875\" height=\"20\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-validation-resolveOperation\" class=\"edgeLabel L-LS-validation' L-LE-resolveOperation\">Success</span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(297.62890625,498)\" style=\"opacity: 1;\"><g transform=\"translate(-26.984375,-10)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"53.96875\" height=\"20\"></rect><foreignObject width=\"53.96875\" height=\"20\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-resolveOperation-response\" class=\"edgeLabel L-LS-resolveOperation' L-LE-response\">Success</span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"\" style=\"opacity: 1;\"><g transform=\"translate(0,0)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"0\" height=\"0\"></rect><foreignObject width=\"0\" height=\"0\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-errors-send\" class=\"edgeLabel L-LS-errors' L-LE-send\"></span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(200.28125,770.5)\" style=\"opacity: 1;\"><g transform=\"translate(-66.7265625,-10)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"133.453125\" height=\"20\"></rect><foreignObject width=\"133.453125\" height=\"20\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-response-send\" class=\"edgeLabel L-LS-response' L-LE-send\">Response provided</span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(353.765625,607)\" style=\"opacity: 1;\"><g transform=\"translate(-76.9921875,-10)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"153.984375\" height=\"20\"></rect><foreignObject width=\"153.984375\" height=\"20\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-response-execution\" class=\"edgeLabel L-LS-response' L-LE-execution\">No response provided</span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(299.78125,825)\" style=\"opacity: 1;\"><g transform=\"translate(-26.984375,-10)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"53.96875\" height=\"20\"></rect><foreignObject width=\"53.96875\" height=\"20\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-execution-send\" class=\"edgeLabel L-LS-execution' L-LE-send\">Success</span></div></foreignObject></g></g><g class=\"edgeLabel\" transform=\"translate(407.75,716)\" style=\"opacity: 1;\"><g transform=\"translate(-87.96875,-10)\" class=\"label\"><rect rx=\"0\" ry=\"0\" width=\"175.9375\" height=\"20\"></rect><foreignObject width=\"175.9375\" height=\"20\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\"><span id=\"L-L-execution-resolveField\" class=\"edgeLabel L-LS-execution' L-LE-resolveField\">(Fires once per resolver)</span></div></foreignObject></g></g></g><g class=\"nodes\"><g class=\"node default\" id=\"flowchart-request-23\" transform=\"translate(297.62890625,27.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-66.2265625\" y=\"-19.5\" width=\"132.453125\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-56.2265625,-9.5)\"><foreignObject width=\"112.453125\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">requestDidStart</div></foreignObject></g></g></g><g class=\"node default\" id=\"flowchart-resolveSource-24\" transform=\"translate(297.62890625,116.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-72.3359375\" y=\"-19.5\" width=\"144.671875\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-62.3359375,-9.5)\"><foreignObject width=\"124.671875\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">didResolveSource</div></foreignObject></g></g></g><g class=\"node default\" id=\"flowchart-parsing-26\" transform=\"translate(297.62890625,225.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-67.765625\" y=\"-19.5\" width=\"135.53125\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-57.765625,-9.5)\"><foreignObject width=\"115.53125\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">parsingDidStart*</div></foreignObject></g></g></g><g class=\"node default\" id=\"flowchart-validation-28\" transform=\"translate(297.62890625,334.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-77.625\" y=\"-19.5\" width=\"155.25\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-67.625,-9.5)\"><foreignObject width=\"135.25\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">validationDidStart*</div></foreignObject></g></g></g><g class=\"node default\" id=\"flowchart-resolveOperation-30\" transform=\"translate(297.62890625,443.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-84.03125\" y=\"-19.5\" width=\"168.0625\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-74.03125,-9.5)\"><foreignObject width=\"148.0625\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">didResolveOperation</div></foreignObject></g></g></g><g class=\"node default\" id=\"flowchart-response-32\" transform=\"translate(297.62890625,552.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-88.6796875\" y=\"-19.5\" width=\"177.359375\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-78.6796875,-9.5)\"><foreignObject width=\"157.359375\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">responseForOperation</div></foreignObject></g></g></g><g class=\"node default\" id=\"flowchart-execution-33\" transform=\"translate(353.765625,661.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-77.2734375\" y=\"-19.5\" width=\"154.546875\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-67.2734375,-9.5)\"><foreignObject width=\"134.546875\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">executionDidStart*</div></foreignObject></g></g></g><g class=\"node default\" id=\"flowchart-resolveField-34\" transform=\"translate(407.75,770.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-70.7421875\" y=\"-19.5\" width=\"141.484375\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-60.7421875,-9.5)\"><foreignObject width=\"121.484375\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">willResolveField*</div></foreignObject></g></g></g><g class=\"node secondary\" id=\"flowchart-errors-35\" transform=\"translate(86.640625,879.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-78.640625\" y=\"-19.5\" width=\"157.28125\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-68.640625,-9.5)\"><foreignObject width=\"137.28125\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">didEncounterErrors</div></foreignObject></g></g></g><g class=\"node default\" id=\"flowchart-send-37\" transform=\"translate(200.28125,968.5)\" style=\"opacity: 1;\"><rect rx=\"5\" ry=\"5\" x=\"-72.9765625\" y=\"-19.5\" width=\"145.953125\" height=\"39\" class=\"label-container\"></rect><g class=\"label\" transform=\"translate(0,0)\"><g transform=\"translate(-62.9765625,-9.5)\"><foreignObject width=\"125.953125\" height=\"19\"><div xmlns=\"http://www.w3.org/1999/xhtml\" style=\"display: inline-block; white-space: nowrap;\">willSendResponse</div></foreignObject></g></g></g></g></g></g></svg></div>","position":{"start":{"line":111,"column":1,"offset":4533},"end":{"line":129,"column":4,"offset":5218}}},{"type":"paragraph","children":[{"type":"html","value":"<sup>","position":{"start":{"line":131,"column":1,"offset":5220},"end":{"line":131,"column":6,"offset":5225}}},{"type":"text","value":"*The indicated events also support ","position":{"start":{"line":131,"column":6,"offset":5225},"end":{"line":131,"column":41,"offset":5260}}},{"type":"html","value":"<a href=\"#end-hooks\">","position":{"start":{"line":131,"column":41,"offset":5260},"end":{"line":131,"column":62,"offset":5281}}},{"type":"text","value":"end hooks","position":{"start":{"line":131,"column":62,"offset":5281},"end":{"line":131,"column":71,"offset":5290}}},{"type":"html","value":"</a>","position":{"start":{"line":131,"column":71,"offset":5290},"end":{"line":131,"column":75,"offset":5294}}},{"type":"text","value":" that are called when their associated step ","position":{"start":{"line":131,"column":75,"offset":5294},"end":{"line":131,"column":119,"offset":5338}}},{"type":"html","value":"<em>","position":{"start":{"line":131,"column":119,"offset":5338},"end":{"line":131,"column":123,"offset":5342}}},{"type":"text","value":"completes","position":{"start":{"line":131,"column":123,"offset":5342},"end":{"line":131,"column":132,"offset":5351}}},{"type":"html","value":"</em>","position":{"start":{"line":131,"column":132,"offset":5351},"end":{"line":131,"column":137,"offset":5356}}},{"type":"text","value":".","position":{"start":{"line":131,"column":137,"offset":5356},"end":{"line":131,"column":138,"offset":5357}}},{"type":"html","value":"</sup>","position":{"start":{"line":131,"column":138,"offset":5357},"end":{"line":131,"column":144,"offset":5363}}}],"position":{"start":{"line":131,"column":1,"offset":5220},"end":{"line":131,"column":144,"offset":5363}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#end-hooks","title":null,"children":[],"data":{"hProperties":{"aria-label":"end hooks permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"End hooks","position":{"start":{"line":133,"column":5,"offset":5369},"end":{"line":133,"column":14,"offset":5378}}}],"position":{"start":{"line":133,"column":1,"offset":5365},"end":{"line":133,"column":14,"offset":5378}},"data":{"id":"end-hooks","htmlAttributes":{"id":"end-hooks"},"hProperties":{"id":"end-hooks","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Event handlers for the following events can optionally return a function that is invoked after the corresponding lifecycle phase ","position":{"start":{"line":135,"column":1,"offset":5380},"end":{"line":135,"column":130,"offset":5509}}},{"type":"emphasis","children":[{"type":"text","value":"ends","position":{"start":{"line":135,"column":131,"offset":5510},"end":{"line":135,"column":135,"offset":5514}}}],"position":{"start":{"line":135,"column":130,"offset":5509},"end":{"line":135,"column":136,"offset":5515}}},{"type":"text","value":":","position":{"start":{"line":135,"column":136,"offset":5515},"end":{"line":135,"column":137,"offset":5516}}}],"position":{"start":{"line":135,"column":1,"offset":5380},"end":{"line":135,"column":137,"offset":5516}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"/integrations/plugins-event-reference/#parsingdidstart","children":[{"type":"html","value":"<code class=\"language-text\">parsingDidStart</code>","position":{"start":{"line":137,"column":4,"offset":5521},"end":{"line":137,"column":21,"offset":5538}}}],"position":{"start":{"line":137,"column":3,"offset":5520},"end":{"line":137,"column":66,"offset":5583}}}],"position":{"start":{"line":137,"column":3,"offset":5520},"end":{"line":137,"column":66,"offset":5583}}}],"position":{"start":{"line":137,"column":1,"offset":5518},"end":{"line":137,"column":66,"offset":5583}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"/integrations/plugins-event-reference/#validationdidstart","children":[{"type":"html","value":"<code class=\"language-text\">validationDidStart</code>","position":{"start":{"line":138,"column":4,"offset":5587},"end":{"line":138,"column":24,"offset":5607}}}],"position":{"start":{"line":138,"column":3,"offset":5586},"end":{"line":138,"column":72,"offset":5655}}}],"position":{"start":{"line":138,"column":3,"offset":5586},"end":{"line":138,"column":72,"offset":5655}}}],"position":{"start":{"line":138,"column":1,"offset":5584},"end":{"line":138,"column":72,"offset":5655}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"/integrations/plugins-event-reference/#willresolvefield","children":[{"type":"html","value":"<code class=\"language-text\">willResolveField</code>","position":{"start":{"line":139,"column":4,"offset":5659},"end":{"line":139,"column":22,"offset":5677}}}],"position":{"start":{"line":139,"column":3,"offset":5658},"end":{"line":139,"column":68,"offset":5723}}}],"position":{"start":{"line":139,"column":3,"offset":5658},"end":{"line":139,"column":68,"offset":5723}}}],"position":{"start":{"line":139,"column":1,"offset":5656},"end":{"line":139,"column":68,"offset":5723}}}],"position":{"start":{"line":137,"column":1,"offset":5518},"end":{"line":139,"column":68,"offset":5723}}},{"type":"paragraph","children":[{"type":"text","value":"(","position":{"start":{"line":141,"column":1,"offset":5725},"end":{"line":141,"column":2,"offset":5726}}},{"type":"link","title":null,"url":"/integrations/plugins-event-reference/#executiondidstart","children":[{"type":"html","value":"<code class=\"language-text\">executionDidStart</code>","position":{"start":{"line":141,"column":3,"offset":5727},"end":{"line":141,"column":22,"offset":5746}}}],"position":{"start":{"line":141,"column":2,"offset":5726},"end":{"line":141,"column":69,"offset":5793}}},{"type":"text","value":" returns an ","position":{"start":{"line":141,"column":69,"offset":5793},"end":{"line":141,"column":81,"offset":5805}}},{"type":"emphasis","children":[{"type":"text","value":"object","position":{"start":{"line":141,"column":82,"offset":5806},"end":{"line":141,"column":88,"offset":5812}}}],"position":{"start":{"line":141,"column":81,"offset":5805},"end":{"line":141,"column":89,"offset":5813}}},{"type":"text","value":" containing an ","position":{"start":{"line":141,"column":89,"offset":5813},"end":{"line":141,"column":104,"offset":5828}}},{"type":"html","value":"<code class=\"language-text\">executionDidEnd</code>","position":{"start":{"line":141,"column":104,"offset":5828},"end":{"line":141,"column":121,"offset":5845}}},{"type":"text","value":" function instead of just a function as an end hook. This is because the returned object can also contain ","position":{"start":{"line":141,"column":121,"offset":5845},"end":{"line":141,"column":227,"offset":5951}}},{"type":"html","value":"<code class=\"language-text\">willResolveField</code>","position":{"start":{"line":141,"column":227,"offset":5951},"end":{"line":141,"column":245,"offset":5969}}},{"type":"text","value":".)","position":{"start":{"line":141,"column":245,"offset":5969},"end":{"line":141,"column":247,"offset":5971}}}],"position":{"start":{"line":141,"column":1,"offset":5725},"end":{"line":141,"column":247,"offset":5971}}},{"type":"paragraph","children":[{"type":"text","value":"Just like the event handlers themselves, these end hooks are async functions (except for the end hook for ","position":{"start":{"line":143,"column":1,"offset":5973},"end":{"line":143,"column":107,"offset":6079}}},{"type":"html","value":"<code class=\"language-text\">willResolveField</code>","position":{"start":{"line":143,"column":107,"offset":6079},"end":{"line":143,"column":125,"offset":6097}}},{"type":"text","value":").","position":{"start":{"line":143,"column":125,"offset":6097},"end":{"line":143,"column":127,"offset":6099}}}],"position":{"start":{"line":143,"column":1,"offset":5973},"end":{"line":143,"column":127,"offset":6099}}},{"type":"paragraph","children":[{"type":"text","value":"End hooks are passed any errors that occurred during the execution of that lifecycle phase. For example, the following plugin logs any errors that occur during any of the above lifecycle events:","position":{"start":{"line":145,"column":1,"offset":6101},"end":{"line":145,"column":195,"offset":6295}}}],"position":{"start":{"line":145,"column":1,"offset":6101},"end":{"line":145,"column":195,"offset":6295}}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> myPlugin <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">async</span> <span class=\"token function\">requestDidStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">async</span> <span class=\"token function\">parsingDidStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">async</span> <span class=\"token function\">validationDidStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// This end hook is unique in that it can receive an array of errors,</span>\n        <span class=\"token comment\">// which will contain every validation error that occurred.</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">errs</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>errs<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            errs<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span> <span class=\"token operator\">=></span> console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">async</span> <span class=\"token function\">executionDidStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">async</span> <span class=\"token function\">executionDidEnd</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n              console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":147,"column":1,"offset":6297},"end":{"line":179,"column":4,"offset":7041}}},{"type":"paragraph","children":[{"type":"text","value":"Note that the ","position":{"start":{"line":181,"column":1,"offset":7043},"end":{"line":181,"column":15,"offset":7057}}},{"type":"html","value":"<code class=\"language-text\">validationDidStart</code>","position":{"start":{"line":181,"column":15,"offset":7057},"end":{"line":181,"column":35,"offset":7077}}},{"type":"text","value":" end hook receives an ","position":{"start":{"line":181,"column":35,"offset":7077},"end":{"line":181,"column":57,"offset":7099}}},{"type":"emphasis","children":[{"type":"text","value":"array","position":{"start":{"line":181,"column":58,"offset":7100},"end":{"line":181,"column":63,"offset":7105}}}],"position":{"start":{"line":181,"column":57,"offset":7099},"end":{"line":181,"column":64,"offset":7106}}},{"type":"text","value":" of errors that contains every validation error that occurred (if any). The ","position":{"start":{"line":181,"column":64,"offset":7106},"end":{"line":181,"column":140,"offset":7182}}},{"type":"html","value":"<code class=\"language-text\">willResolveField</code>","position":{"start":{"line":181,"column":140,"offset":7182},"end":{"line":181,"column":158,"offset":7200}}},{"type":"text","value":" end hook receives the error thrown by the resolver as the first argument and the result of the resolver as the second argument. The arguments to each end hook are documented in the type definitions in ","position":{"start":{"line":181,"column":158,"offset":7200},"end":{"line":181,"column":360,"offset":7402}}},{"type":"link","title":null,"url":"/integrations/plugins-event-reference/#request-lifecycle-events","children":[{"type":"text","value":"Request lifecycle events","position":{"start":{"line":181,"column":361,"offset":7403},"end":{"line":181,"column":385,"offset":7427}}}],"position":{"start":{"line":181,"column":360,"offset":7402},"end":{"line":181,"column":439,"offset":7481}}},{"type":"text","value":".","position":{"start":{"line":181,"column":439,"offset":7481},"end":{"line":181,"column":440,"offset":7482}}}],"position":{"start":{"line":181,"column":1,"offset":7043},"end":{"line":181,"column":440,"offset":7482}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#inspecting-request-and-response-details","title":null,"children":[],"data":{"hProperties":{"aria-label":"inspecting request and response details permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Inspecting request and response details","position":{"start":{"line":183,"column":5,"offset":7488},"end":{"line":183,"column":44,"offset":7527}}}],"position":{"start":{"line":183,"column":1,"offset":7484},"end":{"line":183,"column":44,"offset":7527}},"data":{"id":"inspecting-request-and-response-details","htmlAttributes":{"id":"inspecting-request-and-response-details"},"hProperties":{"id":"inspecting-request-and-response-details","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"As the example above shows, ","position":{"start":{"line":185,"column":1,"offset":7529},"end":{"line":185,"column":29,"offset":7557}}},{"type":"html","value":"<code class=\"language-text\">requestDidStart</code>","position":{"start":{"line":185,"column":29,"offset":7557},"end":{"line":185,"column":46,"offset":7574}}},{"type":"text","value":" and request lifecycle functions accept a ","position":{"start":{"line":185,"column":46,"offset":7574},"end":{"line":185,"column":88,"offset":7616}}},{"type":"html","value":"<code class=\"language-text\">requestContext</code>","position":{"start":{"line":185,"column":88,"offset":7616},"end":{"line":185,"column":104,"offset":7632}}},{"type":"text","value":" parameter. This parameter is of type ","position":{"start":{"line":185,"column":104,"offset":7632},"end":{"line":185,"column":142,"offset":7670}}},{"type":"html","value":"<code class=\"language-text\">GraphQLRequestContext</code>","position":{"start":{"line":185,"column":142,"offset":7670},"end":{"line":185,"column":165,"offset":7693}}},{"type":"text","value":", which includes a ","position":{"start":{"line":185,"column":165,"offset":7693},"end":{"line":185,"column":184,"offset":7712}}},{"type":"html","value":"<code class=\"language-text\">request</code>","position":{"start":{"line":185,"column":184,"offset":7712},"end":{"line":185,"column":193,"offset":7721}}},{"type":"text","value":" (of type ","position":{"start":{"line":185,"column":193,"offset":7721},"end":{"line":185,"column":203,"offset":7731}}},{"type":"html","value":"<code class=\"language-text\">GraphQLRequest</code>","position":{"start":{"line":185,"column":203,"offset":7731},"end":{"line":185,"column":219,"offset":7747}}},{"type":"text","value":"), along with a ","position":{"start":{"line":185,"column":219,"offset":7747},"end":{"line":185,"column":235,"offset":7763}}},{"type":"html","value":"<code class=\"language-text\">response</code>","position":{"start":{"line":185,"column":235,"offset":7763},"end":{"line":185,"column":245,"offset":7773}}},{"type":"text","value":" field (of type ","position":{"start":{"line":185,"column":245,"offset":7773},"end":{"line":185,"column":261,"offset":7789}}},{"type":"html","value":"<code class=\"language-text\">GraphQLResponse</code>","position":{"start":{"line":185,"column":261,"offset":7789},"end":{"line":185,"column":278,"offset":7806}}},{"type":"text","value":") if it's available.","position":{"start":{"line":185,"column":278,"offset":7806},"end":{"line":185,"column":298,"offset":7826}}}],"position":{"start":{"line":185,"column":1,"offset":7529},"end":{"line":185,"column":298,"offset":7826}}},{"type":"paragraph","children":[{"type":"text","value":"These types and their related subtypes are all defined in ","position":{"start":{"line":187,"column":1,"offset":7828},"end":{"line":187,"column":59,"offset":7886}}},{"type":"link","title":null,"url":"https://github.com/apollographql/apollo-server/blob/main/packages/apollo-server-types/src/index.ts","children":[{"type":"html","value":"<code class=\"language-text\">apollo-server-types/src/index.ts</code>","position":{"start":{"line":187,"column":60,"offset":7887},"end":{"line":187,"column":94,"offset":7921}}}],"position":{"start":{"line":187,"column":59,"offset":7886},"end":{"line":187,"column":195,"offset":8022}}},{"type":"text","value":".","position":{"start":{"line":187,"column":195,"offset":8022},"end":{"line":187,"column":196,"offset":8023}}}],"position":{"start":{"line":187,"column":1,"offset":7828},"end":{"line":187,"column":196,"offset":8023}}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#installing-custom-plugins","title":null,"children":[],"data":{"hProperties":{"aria-label":"installing custom plugins permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Installing custom plugins","position":{"start":{"line":189,"column":4,"offset":8028},"end":{"line":189,"column":29,"offset":8053}}}],"position":{"start":{"line":189,"column":1,"offset":8025},"end":{"line":189,"column":29,"offset":8053}},"data":{"id":"installing-custom-plugins","htmlAttributes":{"id":"installing-custom-plugins"},"hProperties":{"id":"installing-custom-plugins","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Add your plugins to Apollo Server by providing a ","position":{"start":{"line":191,"column":1,"offset":8055},"end":{"line":191,"column":50,"offset":8104}}},{"type":"html","value":"<code class=\"language-text\">plugins</code>","position":{"start":{"line":191,"column":50,"offset":8104},"end":{"line":191,"column":59,"offset":8113}}},{"type":"text","value":" configuration option to the ","position":{"start":{"line":191,"column":59,"offset":8113},"end":{"line":191,"column":88,"offset":8142}}},{"type":"html","value":"<code class=\"language-text\">ApolloServer</code>","position":{"start":{"line":191,"column":88,"offset":8142},"end":{"line":191,"column":102,"offset":8156}}},{"type":"text","value":" constructor, like so:","position":{"start":{"line":191,"column":102,"offset":8156},"end":{"line":191,"column":124,"offset":8178}}}],"position":{"start":{"line":191,"column":1,"offset":8055},"end":{"line":191,"column":124,"offset":8178}}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> ApolloServer <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'apollo-server'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> ApolloServerOperationRegistry <span class=\"token operator\">=</span>\n  <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'@apollo/server-plugin-operation-registry'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/* This example doesn't provide `typeDefs` or `resolvers`,\n   both of which are required to start the server. */</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> typeDefs<span class=\"token punctuation\">,</span> resolvers <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./separatelyDefined'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  typeDefs<span class=\"token punctuation\">,</span>\n  resolvers<span class=\"token punctuation\">,</span>\n\n  <span class=\"token comment\">// You can import plugins or define them in-line, as shown:</span>\n  <span class=\"token literal-property property\">plugins</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\n    <span class=\"token comment\">/* This plugin is from a package that's imported above. */</span>\n    <span class=\"token function\">ApolloServerOperationRegistry</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token comment\">/* options */</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">/* This plugin is imported in-place. */</span>\n    <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./localPluginModule'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">/* This plugin is defined in-line. */</span>\n    <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">async</span> <span class=\"token function\">serverWillStart</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Server starting up!'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":193,"column":1,"offset":8180},"end":{"line":223,"column":4,"offset":8994}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":224,"column":1,"offset":8995}}}}