{"expireTime":9007200901521024000,"key":"transformer-remark-markdown-html-ast-a2f3cd334b697669ebe16276612bb35e-gatsby-remark-autolink-headersgatsby-remark-copy-linked-filesgatsby-remark-mermaidgatsby-remark-code-titlesgatsby-remark-prismjsgatsby-remark-rewrite-relative-linksgatsby-remark-check-links-","val":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://www.netlify.com/docs/functions/"},"children":[{"type":"text","value":"Netlify Functions","position":{"start":{"line":2,"column":2,"offset":2},"end":{"line":2,"column":19,"offset":19}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":61,"offset":61}}},{"type":"text","value":" allow deploying server-side code, directly from GitHub, to AWS Lambda.  This guide demonstrates how to use Netlify Functions to deploy a GraphQL server and reference the server in Apollo Client. Some benefits of Netlify Functions include:","position":{"start":{"line":2,"column":61,"offset":61},"end":{"line":2,"column":300,"offset":300}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":300,"offset":300}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ol","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Use the same platform to deploy your frontend and API code.","position":{"start":{"line":4,"column":4,"offset":305},"end":{"line":4,"column":63,"offset":364}}}],"position":{"start":{"line":4,"column":1,"offset":302},"end":{"line":4,"column":63,"offset":364}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"Deploy previews of both your frontend and API on every pull request.","position":{"start":{"line":5,"column":4,"offset":368},"end":{"line":5,"column":72,"offset":436}}}],"position":{"start":{"line":5,"column":1,"offset":365},"end":{"line":5,"column":72,"offset":436}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"text","value":"No need to worry about scaling containers due to a \"serverless\" infrastructure.","position":{"start":{"line":6,"column":4,"offset":440},"end":{"line":6,"column":83,"offset":519}}}],"position":{"start":{"line":6,"column":1,"offset":437},"end":{"line":6,"column":83,"offset":519}}},{"type":"text","value":"\n"}],"position":{"start":{"line":4,"column":1,"offset":302},"end":{"line":6,"column":83,"offset":519}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In the following sections, we'll set up a \"Hello World\" API and frontend for an Apollo app on Netlify. Let's get started!","position":{"start":{"line":8,"column":1,"offset":521},"end":{"line":8,"column":122,"offset":642}}}],"position":{"start":{"line":8,"column":1,"offset":521},"end":{"line":8,"column":122,"offset":642}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"download-and-run-the-netlify-starter-kit","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#download-and-run-the-netlify-starter-kit","aria-label":"download and run the netlify starter kit permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Download and Run the Netlify Starter Kit","position":{"start":{"line":10,"column":4,"offset":647},"end":{"line":10,"column":44,"offset":687}}}],"position":{"start":{"line":10,"column":1,"offset":644},"end":{"line":10,"column":44,"offset":687}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Download and run the ","position":{"start":{"line":12,"column":1,"offset":689},"end":{"line":12,"column":22,"offset":710}}},{"type":"element","tagName":"a","properties":{"href":"https://github.com/netlify/create-react-app-lambda"},"children":[{"type":"text","value":"official Netlify ","position":{"start":{"line":12,"column":23,"offset":711},"end":{"line":12,"column":40,"offset":728}}},{"type":"raw","value":"<code class=\"language-text\">create-react-app</code>","position":{"start":{"line":12,"column":40,"offset":728},"end":{"line":12,"column":58,"offset":746}}},{"type":"text","value":" and Lambda starter kit","position":{"start":{"line":12,"column":58,"offset":746},"end":{"line":12,"column":81,"offset":769}}}],"position":{"start":{"line":12,"column":22,"offset":710},"end":{"line":12,"column":134,"offset":822}}},{"type":"text","value":". This will set us up with a base for our frontend and API code.","position":{"start":{"line":12,"column":134,"offset":822},"end":{"line":12,"column":198,"offset":886}}}],"position":{"start":{"line":12,"column":1,"offset":689},"end":{"line":12,"column":198,"offset":886}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">git</span> clone https://github.com/netlify/create-react-app-lambda.git\n<span class=\"token builtin class-name\">cd</span> create-react-app-lambda\n<span class=\"token function\">npm</span> <span class=\"token function\">install</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":14,"column":1,"offset":888},"end":{"line":18,"column":4,"offset":1003}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let’s take a quick look at the file structure here:","position":{"start":{"line":20,"column":1,"offset":1005},"end":{"line":20,"column":52,"offset":1056}}}],"position":{"start":{"line":20,"column":1,"offset":1005},"end":{"line":20,"column":52,"offset":1056}}},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"package.json:","position":{"start":{"line":22,"column":5,"offset":1062},"end":{"line":22,"column":18,"offset":1075}}}],"position":{"start":{"line":22,"column":3,"offset":1060},"end":{"line":22,"column":20,"offset":1077}}},{"type":"text","value":" This application's dependencies, shared between client and server code. You can also split them up into separate directories later, depending on your preference.","position":{"start":{"line":22,"column":20,"offset":1077},"end":{"line":22,"column":182,"offset":1239}}}],"position":{"start":{"line":22,"column":1,"offset":1058},"end":{"line":22,"column":182,"offset":1239}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"netlify.toml:","position":{"start":{"line":23,"column":5,"offset":1244},"end":{"line":23,"column":18,"offset":1257}}}],"position":{"start":{"line":23,"column":3,"offset":1242},"end":{"line":23,"column":20,"offset":1259}}},{"type":"text","value":" The configuration for Netlify.","position":{"start":{"line":23,"column":20,"offset":1259},"end":{"line":23,"column":51,"offset":1290}}}],"position":{"start":{"line":23,"column":1,"offset":1240},"end":{"line":23,"column":51,"offset":1290}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"src/:","position":{"start":{"line":24,"column":5,"offset":1295},"end":{"line":24,"column":10,"offset":1300}}}],"position":{"start":{"line":24,"column":3,"offset":1293},"end":{"line":24,"column":12,"offset":1302}}},{"type":"text","value":" The source code for the React frontend app.","position":{"start":{"line":24,"column":12,"offset":1302},"end":{"line":24,"column":56,"offset":1346}}}],"position":{"start":{"line":24,"column":1,"offset":1291},"end":{"line":24,"column":56,"offset":1346}}},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"src/lambda/:","position":{"start":{"line":25,"column":5,"offset":1351},"end":{"line":25,"column":17,"offset":1363}}}],"position":{"start":{"line":25,"column":3,"offset":1349},"end":{"line":25,"column":19,"offset":1365}}},{"type":"text","value":" The server source code that will be deployed to Netlify Functions.","position":{"start":{"line":25,"column":19,"offset":1365},"end":{"line":25,"column":86,"offset":1432}}}],"position":{"start":{"line":25,"column":1,"offset":1347},"end":{"line":25,"column":86,"offset":1432}}},{"type":"text","value":"\n"}],"position":{"start":{"line":22,"column":1,"offset":1058},"end":{"line":25,"column":86,"offset":1432}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In ","position":{"start":{"line":27,"column":1,"offset":1434},"end":{"line":27,"column":4,"offset":1437}}},{"type":"raw","value":"<code class=\"language-text\">package.json</code>","position":{"start":{"line":27,"column":4,"offset":1437},"end":{"line":27,"column":18,"offset":1451}}},{"type":"text","value":", you'll find scripts to run the frontend and lambda code:","position":{"start":{"line":27,"column":18,"offset":1451},"end":{"line":27,"column":76,"offset":1509}}}],"position":{"start":{"line":27,"column":1,"offset":1434},"end":{"line":27,"column":76,"offset":1509}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token string-property property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token string-property property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts start\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"start:lambda\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"netlify-lambda serve src/lambda\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts build\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string-property property\">\"build:lambda\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"netlify-lambda build src/lambda\"</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":29,"column":1,"offset":1511},"end":{"line":36,"column":4,"offset":1709}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Run the code to see that everything is working. We have to open two terminal windows to run the frontend and functions at the same time:","position":{"start":{"line":38,"column":1,"offset":1711},"end":{"line":38,"column":137,"offset":1847}}}],"position":{"start":{"line":38,"column":1,"offset":1711},"end":{"line":38,"column":137,"offset":1847}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\"># In the first terminal, run the local development server.</span>\n<span class=\"token comment\"># This emulates the Netlify Functions runtime environment.</span>\n<span class=\"token function\">npm</span> run start:lambda\n<span class=\"token comment\"># In the second terminal, start the React frontend application.</span>\n<span class=\"token function\">npm</span> start</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":40,"column":1,"offset":1849},"end":{"line":46,"column":4,"offset":2073}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If everything looks like it started correctly, let's add a GraphQL API with Apollo Server!","position":{"start":{"line":48,"column":1,"offset":2075},"end":{"line":48,"column":91,"offset":2165}}}],"position":{"start":{"line":48,"column":1,"offset":2075},"end":{"line":48,"column":91,"offset":2165}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"set-up-apollo-server","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#set-up-apollo-server","aria-label":"set up apollo server permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Set up Apollo Server","position":{"start":{"line":50,"column":5,"offset":2171},"end":{"line":50,"column":25,"offset":2191}}}],"position":{"start":{"line":50,"column":1,"offset":2167},"end":{"line":50,"column":25,"offset":2191}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Netlify Functions run on AWS Lambda, so we can use the ","position":{"start":{"line":52,"column":1,"offset":2193},"end":{"line":52,"column":56,"offset":2248}}},{"type":"raw","value":"<code class=\"language-text\">apollo-server-lambda</code>","position":{"start":{"line":52,"column":56,"offset":2248},"end":{"line":52,"column":78,"offset":2270}}},{"type":"text","value":" package to easily integrate Apollo Server for our API layer. Let’s install the packages we need for that:","position":{"start":{"line":52,"column":78,"offset":2270},"end":{"line":52,"column":184,"offset":2376}}}],"position":{"start":{"line":52,"column":1,"offset":2193},"end":{"line":52,"column":184,"offset":2376}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> --save apollo-server-lambda graphql</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>","position":{"start":{"line":54,"column":1,"offset":2378},"end":{"line":56,"column":4,"offset":2437}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now, we can create a \"Hello world\" GraphQL API. Let's put that in a new file in the ","position":{"start":{"line":58,"column":1,"offset":2439},"end":{"line":58,"column":85,"offset":2523}}},{"type":"raw","value":"<code class=\"language-text\">lambda</code>","position":{"start":{"line":58,"column":85,"offset":2523},"end":{"line":58,"column":93,"offset":2531}}},{"type":"text","value":" folder, at ","position":{"start":{"line":58,"column":93,"offset":2531},"end":{"line":58,"column":105,"offset":2543}}},{"type":"raw","value":"<code class=\"language-text\">src/lambda/graphql.js</code>","position":{"start":{"line":58,"column":105,"offset":2543},"end":{"line":58,"column":128,"offset":2566}}},{"type":"text","value":":","position":{"start":{"line":58,"column":128,"offset":2566},"end":{"line":58,"column":129,"offset":2567}}}],"position":{"start":{"line":58,"column":1,"offset":2439},"end":{"line":58,"column":129,"offset":2567}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// src/lambda/graphql.js</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> ApolloServer<span class=\"token punctuation\">,</span> gql <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"apollo-server-lambda\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> typeDefs <span class=\"token operator\">=</span> gql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  type Query {\n    hello: String\n  }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> resolvers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">Query</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">hello</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">parent<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">,</span> context</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">return</span> <span class=\"token string\">\"Hello, world!\"</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  typeDefs<span class=\"token punctuation\">,</span>\n  resolvers\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nexports<span class=\"token punctuation\">.</span>handler <span class=\"token operator\">=</span> server<span class=\"token punctuation\">.</span><span class=\"token function\">createHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":60,"column":1,"offset":2569},"end":{"line":84,"column":4,"offset":2950}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now, make sure you've run ","position":{"start":{"line":86,"column":1,"offset":2952},"end":{"line":86,"column":27,"offset":2978}}},{"type":"raw","value":"<code class=\"language-text\">NODE_ENV=development npm run start:lambda</code>","position":{"start":{"line":86,"column":27,"offset":2978},"end":{"line":86,"column":70,"offset":3021}}},{"type":"text","value":", and navigate to ","position":{"start":{"line":86,"column":70,"offset":3021},"end":{"line":86,"column":88,"offset":3039}}},{"type":"raw","value":"<code class=\"language-text\">localhost:9000/graphql</code>","position":{"start":{"line":86,"column":88,"offset":3039},"end":{"line":86,"column":112,"offset":3063}}},{"type":"text","value":" in your browser. You should see GraphQL Playground, where you can run queries against your API!","position":{"start":{"line":86,"column":112,"offset":3063},"end":{"line":86,"column":208,"offset":3159}}}],"position":{"start":{"line":86,"column":1,"offset":2952},"end":{"line":86,"column":208,"offset":3159}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Note - The GraphQL Playground will only run if your ","position":{"start":{"line":88,"column":2,"offset":3162},"end":{"line":88,"column":54,"offset":3214}}},{"type":"raw","value":"<code class=\"language-text\">NODE_ENV</code>","position":{"start":{"line":88,"column":54,"offset":3214},"end":{"line":88,"column":64,"offset":3224}}},{"type":"text","value":" is set to ","position":{"start":{"line":88,"column":64,"offset":3224},"end":{"line":88,"column":75,"offset":3235}}},{"type":"raw","value":"<code class=\"language-text\">development</code>","position":{"start":{"line":88,"column":75,"offset":3235},"end":{"line":88,"column":88,"offset":3248}}},{"type":"text","value":". If you don't pass this, or your ","position":{"start":{"line":88,"column":88,"offset":3248},"end":{"line":88,"column":122,"offset":3282}}},{"type":"raw","value":"<code class=\"language-text\">NODE_ENV</code>","position":{"start":{"line":88,"column":122,"offset":3282},"end":{"line":88,"column":132,"offset":3292}}},{"type":"text","value":" is set to ","position":{"start":{"line":88,"column":132,"offset":3292},"end":{"line":88,"column":143,"offset":3303}}},{"type":"raw","value":"<code class=\"language-text\">production</code>","position":{"start":{"line":88,"column":143,"offset":3303},"end":{"line":88,"column":155,"offset":3315}}},{"type":"text","value":", you will not see the GraphQL Playground.","position":{"start":{"line":88,"column":155,"offset":3315},"end":{"line":88,"column":197,"offset":3357}}}],"position":{"start":{"line":88,"column":1,"offset":3161},"end":{"line":88,"column":198,"offset":3358}}}],"position":{"start":{"line":88,"column":1,"offset":3161},"end":{"line":88,"column":198,"offset":3358}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"../images/graphql.png","alt":"Local GraphQL Server"},"children":[],"position":{"start":{"line":90,"column":1,"offset":3360},"end":{"line":90,"column":47,"offset":3406}}}],"position":{"start":{"line":90,"column":1,"offset":3360},"end":{"line":90,"column":47,"offset":3406}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"If you can see GraphQL Playground and run a simple query, you've done everything properly. Now, let's add Apollo Client to the frontend.","position":{"start":{"line":92,"column":1,"offset":3408},"end":{"line":92,"column":137,"offset":3544}}}],"position":{"start":{"line":92,"column":1,"offset":3408},"end":{"line":92,"column":137,"offset":3544}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"add-endpoint-to-apollo-client","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#add-endpoint-to-apollo-client","aria-label":"add endpoint to apollo client permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Add endpoint to Apollo Client","position":{"start":{"line":94,"column":5,"offset":3550},"end":{"line":94,"column":34,"offset":3579}}}],"position":{"start":{"line":94,"column":1,"offset":3546},"end":{"line":94,"column":34,"offset":3579}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The starter kit is set up so that requests that start with ","position":{"start":{"line":96,"column":1,"offset":3581},"end":{"line":96,"column":60,"offset":3640}}},{"type":"raw","value":"<code class=\"language-text\">.netlify/functions</code>","position":{"start":{"line":96,"column":60,"offset":3640},"end":{"line":96,"column":80,"offset":3660}}},{"type":"text","value":" are automatically redirected to the Lambda functions in our project. Since our API is defined with the filename ","position":{"start":{"line":96,"column":80,"offset":3660},"end":{"line":96,"column":193,"offset":3773}}},{"type":"raw","value":"<code class=\"language-text\">graphql.js</code>","position":{"start":{"line":96,"column":193,"offset":3773},"end":{"line":96,"column":205,"offset":3785}}},{"type":"text","value":", we can call it with ","position":{"start":{"line":96,"column":205,"offset":3785},"end":{"line":96,"column":227,"offset":3807}}},{"type":"raw","value":"<code class=\"language-text\">.netlify/functions/graphql</code>","position":{"start":{"line":96,"column":227,"offset":3807},"end":{"line":96,"column":255,"offset":3835}}},{"type":"text","value":" from our frontend.","position":{"start":{"line":96,"column":255,"offset":3835},"end":{"line":96,"column":274,"offset":3854}}}],"position":{"start":{"line":96,"column":1,"offset":3581},"end":{"line":96,"column":274,"offset":3854}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// src/App.js</span>\n<span class=\"token keyword\">import</span> ApolloClient <span class=\"token keyword\">from</span> <span class=\"token string\">\"apollo-boost\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> client <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">uri</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/.netlify/functions/graphql\"</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":98,"column":1,"offset":3856},"end":{"line":104,"column":4,"offset":3995}}},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"For more information, take a look at the ","position":{"start":{"line":106,"column":3,"offset":3999},"end":{"line":106,"column":44,"offset":4040}}},{"type":"element","tagName":"a","properties":{"href":"https://www.apollographql.com/docs/react/essentials/get-started/"},"children":[{"type":"text","value":"Getting Started Guide for React","position":{"start":{"line":106,"column":45,"offset":4041},"end":{"line":106,"column":76,"offset":4072}}}],"position":{"start":{"line":106,"column":44,"offset":4040},"end":{"line":106,"column":143,"offset":4139}}}],"position":{"start":{"line":106,"column":3,"offset":3999},"end":{"line":106,"column":143,"offset":4139}}},{"type":"text","value":"\n"}],"position":{"start":{"line":106,"column":1,"offset":3997},"end":{"line":106,"column":143,"offset":4139}}},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"deploy-to-netlify","style":"position:relative;"},"children":[{"type":"element","tagName":"a","properties":{"href":"#deploy-to-netlify","aria-label":"deploy to netlify permalink","class":"anchor before"},"children":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]},{"type":"text","value":"Deploy to Netlify","position":{"start":{"line":108,"column":5,"offset":4145},"end":{"line":108,"column":22,"offset":4162}}}],"position":{"start":{"line":108,"column":1,"offset":4141},"end":{"line":108,"column":22,"offset":4162}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Netlify can deploy automatically from a linked GitHub repository, so we'll use that technique for the rest of this tutorial which will allow each ","position":{"start":{"line":110,"column":1,"offset":4164},"end":{"line":110,"column":147,"offset":4310}}},{"type":"raw","value":"<code class=\"language-text\">git push</code>","position":{"start":{"line":110,"column":147,"offset":4310},"end":{"line":110,"column":157,"offset":4320}}},{"type":"text","value":" to automatically deploy. To enable this, first ","position":{"start":{"line":110,"column":157,"offset":4320},"end":{"line":110,"column":205,"offset":4368}}},{"type":"element","tagName":"a","properties":{"href":"https://help.github.com/articles/create-a-repo/"},"children":[{"type":"text","value":"create a new, empty repository on GitHub","position":{"start":{"line":110,"column":206,"offset":4369},"end":{"line":110,"column":246,"offset":4409}}}],"position":{"start":{"line":110,"column":205,"offset":4368},"end":{"line":110,"column":296,"offset":4459}}},{"type":"text","value":".","position":{"start":{"line":110,"column":296,"offset":4459},"end":{"line":110,"column":297,"offset":4460}}}],"position":{"start":{"line":110,"column":1,"offset":4164},"end":{"line":110,"column":297,"offset":4460}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"To start the project, we cloned the Netlify starter kit. If we want the local repository to point to our new GitHub repo instead of the starter kit, we need to change the ","position":{"start":{"line":112,"column":1,"offset":4462},"end":{"line":112,"column":172,"offset":4633}}},{"type":"raw","value":"<code class=\"language-text\">origin</code>","position":{"start":{"line":112,"column":172,"offset":4633},"end":{"line":112,"column":180,"offset":4641}}},{"type":"text","value":", like this:","position":{"start":{"line":112,"column":180,"offset":4641},"end":{"line":112,"column":192,"offset":4653}}}],"position":{"start":{"line":112,"column":1,"offset":4462},"end":{"line":112,"column":192,"offset":4653}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token comment\"># Replace the following URL with the appropriate URL obtained when</span>\n<span class=\"token comment\"># creating the new GitHub repository in the previous step!</span>\n<span class=\"token function\">git</span> remote set-url origin git@github.com:username/repository.git</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":114,"column":1,"offset":4655},"end":{"line":118,"column":4,"offset":4857}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Now, commit and push:","position":{"start":{"line":120,"column":1,"offset":4859},"end":{"line":120,"column":22,"offset":4880}}}],"position":{"start":{"line":120,"column":1,"offset":4859},"end":{"line":120,"column":22,"offset":4880}}},{"type":"text","value":"\n"},{"type":"raw","value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">git</span> <span class=\"token function\">add</span> <span class=\"token builtin class-name\">.</span>\n<span class=\"token function\">git</span> commit -m <span class=\"token string\">\"Add Apollo Server and Client\"</span>\n<span class=\"token function\">git</span> push -u origin <span class=\"token comment\"># Specify your branch name, if necessary.</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":122,"column":1,"offset":4882},"end":{"line":126,"column":4,"offset":5009}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Check the repository to make sure the code showed up.","position":{"start":{"line":128,"column":1,"offset":5011},"end":{"line":128,"column":54,"offset":5064}}}],"position":{"start":{"line":128,"column":1,"offset":5011},"end":{"line":128,"column":54,"offset":5064}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"a","properties":{"href":"https://app.netlify.com/"},"children":[{"type":"text","value":"Sign up for a Netlify account","position":{"start":{"line":130,"column":2,"offset":5067},"end":{"line":130,"column":31,"offset":5096}}}],"position":{"start":{"line":130,"column":1,"offset":5066},"end":{"line":130,"column":58,"offset":5123}}},{"type":"text","value":" if you don’t have one yet. Then, make a new site, and select the right repository:","position":{"start":{"line":130,"column":58,"offset":5123},"end":{"line":130,"column":141,"offset":5206}}}],"position":{"start":{"line":130,"column":1,"offset":5066},"end":{"line":130,"column":141,"offset":5206}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"/21c82ab370d8410bcbe40f5c15fc2766/selectrep.png","alt":"Select Repo on Netlify"},"children":[],"position":{"start":{"line":132,"column":1,"offset":5208},"end":{"line":132,"column":51,"offset":5258}}}],"position":{"start":{"line":132,"column":1,"offset":5208},"end":{"line":132,"column":51,"offset":5258}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The starter kit came with a ","position":{"start":{"line":134,"column":1,"offset":5260},"end":{"line":134,"column":29,"offset":5288}}},{"type":"raw","value":"<code class=\"language-text\">netlify.toml</code>","position":{"start":{"line":134,"column":29,"offset":5288},"end":{"line":134,"column":43,"offset":5302}}},{"type":"text","value":" configuration file, so we don’t have to change any settings in the UI. Just continue to the deploy step right away.","position":{"start":{"line":134,"column":43,"offset":5302},"end":{"line":134,"column":159,"offset":5418}}}],"position":{"start":{"line":134,"column":1,"offset":5260},"end":{"line":134,"column":159,"offset":5418}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"element","tagName":"img","properties":{"src":"/0a54a2a30c968aec7ea3476e099f0829/sitedeployinprogress.png","alt":"Site deploy in progress"},"children":[],"position":{"start":{"line":136,"column":1,"offset":5420},"end":{"line":136,"column":63,"offset":5482}}}],"position":{"start":{"line":136,"column":1,"offset":5420},"end":{"line":136,"column":63,"offset":5482}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Wait for it to deploy, and in the meanwhile you can set a custom name for your app. Once it’s done, you’re live!","position":{"start":{"line":138,"column":1,"offset":5484},"end":{"line":138,"column":113,"offset":5596}}}],"position":{"start":{"line":138,"column":1,"offset":5484},"end":{"line":138,"column":113,"offset":5596}}},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The best part is, you don’t need to do anything special to scale this up. Since the frontend is running on Netlify’s CDN and the API is a serverless function on Lambda, you don’t have to worry about adding or removing servers.","position":{"start":{"line":140,"column":1,"offset":5598},"end":{"line":140,"column":227,"offset":5824}}}],"position":{"start":{"line":140,"column":1,"offset":5598},"end":{"line":140,"column":227,"offset":5824}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":141,"column":1,"offset":5825}}}}