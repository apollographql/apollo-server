{"expireTime":9007200901520845000,"key":"transformer-remark-markdown-ast-1b1daaed6f44def70ae7ba728a382fe4-gatsby-remark-autolink-headersgatsby-remark-copy-linked-filesgatsby-remark-mermaidgatsby-remark-code-titlesgatsby-remark-prismjsgatsby-remark-rewrite-relative-linksgatsby-remark-check-links-","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"AWS Lambda is a service that allows users to run code without provisioning or managing servers. Cost is based on the compute time that is consumed, and there is no charge when code is not running.","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":197,"offset":197}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":197,"offset":197}}},{"type":"paragraph","children":[{"type":"text","value":"This guide explains how to setup Apollo Server 2 to run on AWS Lambda using Serverless Framework. To use CDK and SST instead, ","position":{"start":{"line":4,"column":1,"offset":199},"end":{"line":4,"column":127,"offset":325}}},{"type":"link","title":null,"url":"https://serverless-stack.com/examples/how-to-create-an-apollo-graphql-api-with-serverless.html","children":[{"type":"text","value":"follow this tutorial","position":{"start":{"line":4,"column":128,"offset":326},"end":{"line":4,"column":148,"offset":346}}}],"position":{"start":{"line":4,"column":127,"offset":325},"end":{"line":4,"column":245,"offset":443}}},{"type":"text","value":".","position":{"start":{"line":4,"column":245,"offset":443},"end":{"line":4,"column":246,"offset":444}}}],"position":{"start":{"line":4,"column":1,"offset":199},"end":{"line":4,"column":246,"offset":444}}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#prerequisites","title":null,"children":[],"data":{"hProperties":{"aria-label":"prerequisites permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Prerequisites","position":{"start":{"line":6,"column":4,"offset":449},"end":{"line":6,"column":17,"offset":462}}}],"position":{"start":{"line":6,"column":1,"offset":446},"end":{"line":6,"column":17,"offset":462}},"data":{"id":"prerequisites","htmlAttributes":{"id":"prerequisites"},"hProperties":{"id":"prerequisites","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"The following must be done before following this guide:","position":{"start":{"line":8,"column":1,"offset":464},"end":{"line":8,"column":56,"offset":519}}}],"position":{"start":{"line":8,"column":1,"offset":464},"end":{"line":8,"column":56,"offset":519}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Setup an AWS account","position":{"start":{"line":10,"column":3,"offset":523},"end":{"line":10,"column":23,"offset":543}}}],"position":{"start":{"line":10,"column":3,"offset":523},"end":{"line":10,"column":23,"offset":543}}}],"position":{"start":{"line":10,"column":1,"offset":521},"end":{"line":10,"column":23,"offset":543}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://docs.aws.amazon.com/cli/latest/userguide/installing.html","children":[{"type":"text","value":"Install the AWS CLI","position":{"start":{"line":11,"column":4,"offset":547},"end":{"line":11,"column":23,"offset":566}}}],"position":{"start":{"line":11,"column":3,"offset":546},"end":{"line":11,"column":90,"offset":633}}}],"position":{"start":{"line":11,"column":3,"offset":546},"end":{"line":11,"column":90,"offset":633}}}],"position":{"start":{"line":11,"column":1,"offset":544},"end":{"line":11,"column":90,"offset":633}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-getting-started.html","children":[{"type":"text","value":"Configure the AWS CLI with user credentials","position":{"start":{"line":12,"column":4,"offset":637},"end":{"line":12,"column":47,"offset":680}}}],"position":{"start":{"line":12,"column":3,"offset":636},"end":{"line":12,"column":128,"offset":761}}}],"position":{"start":{"line":12,"column":3,"offset":636},"end":{"line":12,"column":128,"offset":761}}}],"position":{"start":{"line":12,"column":1,"offset":634},"end":{"line":12,"column":128,"offset":761}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Install the serverless framework from NPM","position":{"start":{"line":13,"column":3,"offset":764},"end":{"line":13,"column":44,"offset":805}}}],"position":{"start":{"line":13,"column":3,"offset":764},"end":{"line":13,"column":44,"offset":805}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">npm install -g serverless</code>","position":{"start":{"line":14,"column":5,"offset":810},"end":{"line":14,"column":32,"offset":837}}}],"position":{"start":{"line":14,"column":5,"offset":810},"end":{"line":14,"column":32,"offset":837}}}],"position":{"start":{"line":14,"column":3,"offset":808},"end":{"line":14,"column":32,"offset":837}}}],"position":{"start":{"line":14,"column":3,"offset":808},"end":{"line":14,"column":32,"offset":837}}}],"position":{"start":{"line":13,"column":1,"offset":762},"end":{"line":14,"column":32,"offset":837}}}],"position":{"start":{"line":10,"column":1,"offset":521},"end":{"line":14,"column":32,"offset":837}}},{"type":"thematicBreak","position":{"start":{"line":16,"column":1,"offset":839},"end":{"line":16,"column":4,"offset":842}}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#setting-up-your-project","title":null,"children":[],"data":{"hProperties":{"aria-label":"setting up your project permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Setting up your project","position":{"start":{"line":18,"column":4,"offset":847},"end":{"line":18,"column":27,"offset":870}}}],"position":{"start":{"line":18,"column":1,"offset":844},"end":{"line":18,"column":27,"offset":870}},"data":{"id":"setting-up-your-project","htmlAttributes":{"id":"setting-up-your-project"},"hProperties":{"id":"setting-up-your-project","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Setting up a project to work with Lambda isn't that different from a typical NodeJS project.","position":{"start":{"line":20,"column":1,"offset":872},"end":{"line":20,"column":93,"offset":964}}}],"position":{"start":{"line":20,"column":1,"offset":872},"end":{"line":20,"column":93,"offset":964}}},{"type":"paragraph","children":[{"type":"text","value":"First, install the ","position":{"start":{"line":22,"column":1,"offset":966},"end":{"line":22,"column":20,"offset":985}}},{"type":"html","value":"<code class=\"language-text\">apollo-server-lambda</code>","position":{"start":{"line":22,"column":20,"offset":985},"end":{"line":22,"column":42,"offset":1007}}},{"type":"text","value":" package:","position":{"start":{"line":22,"column":42,"offset":1007},"end":{"line":22,"column":51,"offset":1016}}}],"position":{"start":{"line":22,"column":1,"offset":966},"end":{"line":22,"column":51,"offset":1016}}},{"type":"html","lang":"shell","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> apollo-server-lambda graphql</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>","position":{"start":{"line":24,"column":1,"offset":1018},"end":{"line":26,"column":4,"offset":1071}}},{"type":"paragraph","children":[{"type":"text","value":"Next, set up the schema's type definitions and resolvers, and pass them to the ","position":{"start":{"line":28,"column":1,"offset":1073},"end":{"line":28,"column":80,"offset":1152}}},{"type":"html","value":"<code class=\"language-text\">ApolloServer</code>","position":{"start":{"line":28,"column":80,"offset":1152},"end":{"line":28,"column":94,"offset":1166}}},{"type":"text","value":" constructor like normal. Here, ","position":{"start":{"line":28,"column":94,"offset":1166},"end":{"line":28,"column":126,"offset":1198}}},{"type":"html","value":"<code class=\"language-text\">ApolloServer</code>","position":{"start":{"line":28,"column":126,"offset":1198},"end":{"line":28,"column":140,"offset":1212}}},{"type":"text","value":" must be imported from ","position":{"start":{"line":28,"column":140,"offset":1212},"end":{"line":28,"column":163,"offset":1235}}},{"type":"html","value":"<code class=\"language-text\">apollo-server-lambda</code>","position":{"start":{"line":28,"column":163,"offset":1235},"end":{"line":28,"column":185,"offset":1257}}},{"type":"text","value":". It's also important to note that this file must be named ","position":{"start":{"line":28,"column":185,"offset":1257},"end":{"line":28,"column":244,"offset":1316}}},{"type":"html","value":"<code class=\"language-text\">graphql.js</code>","position":{"start":{"line":28,"column":244,"offset":1316},"end":{"line":28,"column":256,"offset":1328}}},{"type":"text","value":", as the config example in a later step depends on the filename.","position":{"start":{"line":28,"column":256,"offset":1328},"end":{"line":28,"column":320,"offset":1392}}}],"position":{"start":{"line":28,"column":1,"offset":1073},"end":{"line":28,"column":320,"offset":1392}}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token comment\">// graphql.js</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> ApolloServer<span class=\"token punctuation\">,</span> gql <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'apollo-server-lambda'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Construct a schema, using GraphQL schema language</span>\n<span class=\"token keyword\">const</span> typeDefs <span class=\"token operator\">=</span> gql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  type Query {\n    hello: String\n  }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Provide resolver functions for your schema fields</span>\n<span class=\"token keyword\">const</span> resolvers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">Query</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">hello</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'Hello world!'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> typeDefs<span class=\"token punctuation\">,</span> resolvers <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nexports<span class=\"token punctuation\">.</span>graphqlHandler <span class=\"token operator\">=</span> server<span class=\"token punctuation\">.</span><span class=\"token function\">createHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":30,"column":1,"offset":1394},"end":{"line":52,"column":4,"offset":1832}}},{"type":"paragraph","children":[{"type":"text","value":"Finally, ","position":{"start":{"line":54,"column":1,"offset":1834},"end":{"line":54,"column":10,"offset":1843}}},{"type":"strong","children":[{"type":"text","value":"pay close attention to the last line","position":{"start":{"line":54,"column":12,"offset":1845},"end":{"line":54,"column":48,"offset":1881}}}],"position":{"start":{"line":54,"column":10,"offset":1843},"end":{"line":54,"column":50,"offset":1883}}},{"type":"text","value":". This creates an export named ","position":{"start":{"line":54,"column":50,"offset":1883},"end":{"line":54,"column":81,"offset":1914}}},{"type":"html","value":"<code class=\"language-text\">graphqlHandler</code>","position":{"start":{"line":54,"column":81,"offset":1914},"end":{"line":54,"column":97,"offset":1930}}},{"type":"text","value":" with a Lambda function handler.","position":{"start":{"line":54,"column":97,"offset":1930},"end":{"line":54,"column":129,"offset":1962}}}],"position":{"start":{"line":54,"column":1,"offset":1834},"end":{"line":54,"column":129,"offset":1962}}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#deploying-with-the-serverless-framework","title":null,"children":[],"data":{"hProperties":{"aria-label":"deploying with the serverless framework permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Deploying with the Serverless Framework","position":{"start":{"line":56,"column":4,"offset":1967},"end":{"line":56,"column":43,"offset":2006}}}],"position":{"start":{"line":56,"column":1,"offset":1964},"end":{"line":56,"column":43,"offset":2006}},"data":{"id":"deploying-with-the-serverless-framework","htmlAttributes":{"id":"deploying-with-the-serverless-framework"},"hProperties":{"id":"deploying-with-the-serverless-framework","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://serverless.com","children":[{"type":"text","value":"Serverless","position":{"start":{"line":58,"column":2,"offset":2009},"end":{"line":58,"column":12,"offset":2019}}}],"position":{"start":{"line":58,"column":1,"offset":2008},"end":{"line":58,"column":37,"offset":2044}}},{"type":"text","value":" is a framework that makes deploying to services like AWS Lambda simpler.","position":{"start":{"line":58,"column":37,"offset":2044},"end":{"line":58,"column":110,"offset":2117}}}],"position":{"start":{"line":58,"column":1,"offset":2008},"end":{"line":58,"column":110,"offset":2117}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#configuring-the-serverless-framework","title":null,"children":[],"data":{"hProperties":{"aria-label":"configuring the serverless framework permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Configuring the Serverless Framework","position":{"start":{"line":60,"column":5,"offset":2123},"end":{"line":60,"column":41,"offset":2159}}}],"position":{"start":{"line":60,"column":1,"offset":2119},"end":{"line":60,"column":41,"offset":2159}},"data":{"id":"configuring-the-serverless-framework","htmlAttributes":{"id":"configuring-the-serverless-framework"},"hProperties":{"id":"configuring-the-serverless-framework","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Serverless uses a config file named ","position":{"start":{"line":62,"column":1,"offset":2161},"end":{"line":62,"column":37,"offset":2197}}},{"type":"html","value":"<code class=\"language-text\">serverless.yml</code>","position":{"start":{"line":62,"column":37,"offset":2197},"end":{"line":62,"column":53,"offset":2213}}},{"type":"text","value":" to determine what service to deploy to and where the handlers are.","position":{"start":{"line":62,"column":53,"offset":2213},"end":{"line":62,"column":120,"offset":2280}}}],"position":{"start":{"line":62,"column":1,"offset":2161},"end":{"line":62,"column":120,"offset":2280}}},{"type":"paragraph","children":[{"type":"text","value":"For the sake of this example, the following file can just be copied and pasted into the root of your project.","position":{"start":{"line":64,"column":1,"offset":2282},"end":{"line":64,"column":110,"offset":2391}}}],"position":{"start":{"line":64,"column":1,"offset":2282},"end":{"line":64,"column":110,"offset":2391}}},{"type":"html","lang":null,"meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\"># serverless.yml\n\nservice: apollo-lambda\nprovider:\n  name: aws\n  runtime: nodejs14.x\nfunctions:\n  graphql:\n    # this is formatted as &lt;FILENAME>.&lt;HANDLER>\n    handler: graphql.graphqlHandler\n    events:\n    - http:\n        path: /\n        method: post\n        cors: true\n    - http:\n        path: /\n        method: get\n        cors: true</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":66,"column":1,"offset":2393},"end":{"line":86,"column":4,"offset":2738}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#running-the-serverless-framework","title":null,"children":[],"data":{"hProperties":{"aria-label":"running the serverless framework permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Running the Serverless Framework","position":{"start":{"line":88,"column":5,"offset":2744},"end":{"line":88,"column":37,"offset":2776}}}],"position":{"start":{"line":88,"column":1,"offset":2740},"end":{"line":88,"column":37,"offset":2776}},"data":{"id":"running-the-serverless-framework","htmlAttributes":{"id":"running-the-serverless-framework"},"hProperties":{"id":"running-the-serverless-framework","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"After configuring the Serverless Framework, all you have to do to deploy is run ","position":{"start":{"line":90,"column":1,"offset":2778},"end":{"line":90,"column":81,"offset":2858}}},{"type":"html","value":"<code class=\"language-text\">serverless deploy</code>","position":{"start":{"line":90,"column":81,"offset":2858},"end":{"line":90,"column":100,"offset":2877}}}],"position":{"start":{"line":90,"column":1,"offset":2778},"end":{"line":90,"column":100,"offset":2877}}},{"type":"paragraph","children":[{"type":"text","value":"If successful, ","position":{"start":{"line":92,"column":1,"offset":2879},"end":{"line":92,"column":16,"offset":2894}}},{"type":"html","value":"<code class=\"language-text\">serverless</code>","position":{"start":{"line":92,"column":16,"offset":2894},"end":{"line":92,"column":28,"offset":2906}}},{"type":"text","value":" should output something similar to this example:","position":{"start":{"line":92,"column":28,"offset":2906},"end":{"line":92,"column":77,"offset":2955}}}],"position":{"start":{"line":92,"column":1,"offset":2879},"end":{"line":92,"column":77,"offset":2955}}},{"type":"html","lang":null,"meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">> serverless deploy\nServerless: Packaging service...\nServerless: Excluding development dependencies...\nServerless: Uploading CloudFormation file to S3...\nServerless: Uploading artifacts...\nServerless: Uploading service .zip file to S3 (27.07 MB)...\nServerless: Validating template...\nServerless: Updating Stack...\nServerless: Checking Stack update progress...\n..............\nServerless: Stack update finished...\nService Information\nservice: apollo-lambda\nstage: dev\nregion: us-east-1\nstack: apollo-lambda-dev\napi keys:\n  None\nendpoints:\n  POST - https://ujt89xxyn3.execute-api.us-east-1.amazonaws.com/dev/\n  GET - https://ujt89xxyn3.execute-api.us-east-1.amazonaws.com/dev/\nfunctions:\n  graphql: apollo-lambda-dev-graphql</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":94,"column":1,"offset":2957},"end":{"line":118,"column":4,"offset":3686}}},{"type":"heading","depth":4,"children":[{"type":"link","url":"#what-does-serverless-do","title":null,"children":[],"data":{"hProperties":{"aria-label":"what does serverless do permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"What does ","position":{"start":{"line":120,"column":6,"offset":3693},"end":{"line":120,"column":16,"offset":3703}}},{"type":"html","value":"<code class=\"language-text\">serverless</code>","position":{"start":{"line":120,"column":16,"offset":3703},"end":{"line":120,"column":28,"offset":3715}}},{"type":"text","value":" do?","position":{"start":{"line":120,"column":28,"offset":3715},"end":{"line":120,"column":32,"offset":3719}}}],"position":{"start":{"line":120,"column":1,"offset":3688},"end":{"line":120,"column":32,"offset":3719}},"data":{"id":"what-does-serverless-do","htmlAttributes":{"id":"what-does-serverless-do"},"hProperties":{"id":"what-does-serverless-do","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"First, it builds the functions, zips up the artifacts, and uploads the artifacts to a new S3 bucket. Then, it creates a Lambda function with those artifacts, and if successful, outputs the HTTP endpoint URLs to the console.","position":{"start":{"line":122,"column":1,"offset":3721},"end":{"line":122,"column":224,"offset":3944}}}],"position":{"start":{"line":122,"column":1,"offset":3721},"end":{"line":122,"column":224,"offset":3944}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#managing-the-resulting-services","title":null,"children":[],"data":{"hProperties":{"aria-label":"managing the resulting services permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Managing the resulting services","position":{"start":{"line":124,"column":5,"offset":3950},"end":{"line":124,"column":36,"offset":3981}}}],"position":{"start":{"line":124,"column":1,"offset":3946},"end":{"line":124,"column":36,"offset":3981}},"data":{"id":"managing-the-resulting-services","htmlAttributes":{"id":"managing-the-resulting-services"},"hProperties":{"id":"managing-the-resulting-services","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"The resulting S3 buckets and Lambda functions can be viewed and managed after logging in to the ","position":{"start":{"line":126,"column":1,"offset":3983},"end":{"line":126,"column":97,"offset":4079}}},{"type":"link","title":null,"url":"https://console.aws.amazon.com","children":[{"type":"text","value":"AWS Console","position":{"start":{"line":126,"column":98,"offset":4080},"end":{"line":126,"column":109,"offset":4091}}}],"position":{"start":{"line":126,"column":97,"offset":4079},"end":{"line":126,"column":142,"offset":4124}}},{"type":"text","value":".","position":{"start":{"line":126,"column":142,"offset":4124},"end":{"line":126,"column":143,"offset":4125}}}],"position":{"start":{"line":126,"column":1,"offset":3983},"end":{"line":126,"column":143,"offset":4125}}},{"type":"html","value":"<!-- cSpell:disable-next-line -->","position":{"start":{"line":128,"column":1,"offset":4127},"end":{"line":128,"column":34,"offset":4160}}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"To find the created S3 bucket, search the listed services for S3. For this example, the bucket created by Serverless was named ","position":{"start":{"line":129,"column":3,"offset":4163},"end":{"line":129,"column":130,"offset":4290}}},{"type":"html","value":"<code class=\"language-text\">apollo-lambda-dev-serverlessdeploymentbucket-1s10e00wvoe5f</code>","position":{"start":{"line":129,"column":130,"offset":4290},"end":{"line":129,"column":190,"offset":4350}}}],"position":{"start":{"line":129,"column":3,"offset":4163},"end":{"line":129,"column":190,"offset":4350}}}],"position":{"start":{"line":129,"column":1,"offset":4161},"end":{"line":129,"column":190,"offset":4350}}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"To find the created Lambda function, search the listed services for ","position":{"start":{"line":130,"column":3,"offset":4353},"end":{"line":130,"column":71,"offset":4421}}},{"type":"html","value":"<code class=\"language-text\">Lambda</code>","position":{"start":{"line":130,"column":71,"offset":4421},"end":{"line":130,"column":79,"offset":4429}}},{"type":"text","value":". If the list of Lambda functions is empty, or missing the newly created function, double check the region at the top right of the screen. The default region for Serverless deployments is ","position":{"start":{"line":130,"column":79,"offset":4429},"end":{"line":130,"column":267,"offset":4617}}},{"type":"html","value":"<code class=\"language-text\">us-east-1</code>","position":{"start":{"line":130,"column":267,"offset":4617},"end":{"line":130,"column":278,"offset":4628}}},{"type":"text","value":" (N. Virginia)","position":{"start":{"line":130,"column":278,"offset":4628},"end":{"line":130,"column":292,"offset":4642}}}],"position":{"start":{"line":130,"column":3,"offset":4353},"end":{"line":130,"column":292,"offset":4642}}}],"position":{"start":{"line":130,"column":1,"offset":4351},"end":{"line":130,"column":292,"offset":4642}}}],"position":{"start":{"line":129,"column":1,"offset":4161},"end":{"line":130,"column":292,"offset":4642}}},{"type":"paragraph","children":[{"type":"text","value":"If you changed your mind, you can remove everything from your AWS account with ","position":{"start":{"line":132,"column":1,"offset":4644},"end":{"line":132,"column":80,"offset":4723}}},{"type":"html","value":"<code class=\"language-text\">npx serverless remove</code>","position":{"start":{"line":132,"column":80,"offset":4723},"end":{"line":132,"column":103,"offset":4746}}},{"type":"text","value":".","position":{"start":{"line":132,"column":103,"offset":4746},"end":{"line":132,"column":104,"offset":4747}}}],"position":{"start":{"line":132,"column":1,"offset":4644},"end":{"line":132,"column":104,"offset":4747}}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#customizing-http-serving","title":null,"children":[],"data":{"hProperties":{"aria-label":"customizing http serving permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Customizing HTTP serving","position":{"start":{"line":134,"column":4,"offset":4752},"end":{"line":134,"column":28,"offset":4776}}}],"position":{"start":{"line":134,"column":1,"offset":4749},"end":{"line":134,"column":28,"offset":4776}},"data":{"id":"customizing-http-serving","htmlAttributes":{"id":"customizing-http-serving"},"hProperties":{"id":"customizing-http-serving","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">apollo-server-lambda</code>","position":{"start":{"line":136,"column":1,"offset":4778},"end":{"line":136,"column":23,"offset":4800}}},{"type":"text","value":" is built on top of ","position":{"start":{"line":136,"column":23,"offset":4800},"end":{"line":136,"column":43,"offset":4820}}},{"type":"html","value":"<code class=\"language-text\">apollo-server-express</code>","position":{"start":{"line":136,"column":43,"offset":4820},"end":{"line":136,"column":66,"offset":4843}}},{"type":"text","value":". It combines the HTTP server framework ","position":{"start":{"line":136,"column":66,"offset":4843},"end":{"line":136,"column":106,"offset":4883}}},{"type":"html","value":"<code class=\"language-text\">express</code>","position":{"start":{"line":136,"column":106,"offset":4883},"end":{"line":136,"column":115,"offset":4892}}},{"type":"text","value":" with a package called ","position":{"start":{"line":136,"column":115,"offset":4892},"end":{"line":136,"column":138,"offset":4915}}},{"type":"html","value":"<code class=\"language-text\">@vendia/serverless-express</code>","position":{"start":{"line":136,"column":138,"offset":4915},"end":{"line":136,"column":166,"offset":4943}}},{"type":"text","value":" that translates between Lambda events and Express requests. By default, this is entirely behind the scenes, but you can also provide your own express app with the ","position":{"start":{"line":136,"column":166,"offset":4943},"end":{"line":136,"column":330,"offset":5107}}},{"type":"html","value":"<code class=\"language-text\">expressAppFromMiddleware</code>","position":{"start":{"line":136,"column":330,"offset":5107},"end":{"line":136,"column":356,"offset":5133}}},{"type":"text","value":" option to ","position":{"start":{"line":136,"column":356,"offset":5133},"end":{"line":136,"column":367,"offset":5144}}},{"type":"html","value":"<code class=\"language-text\">createHandler</code>","position":{"start":{"line":136,"column":367,"offset":5144},"end":{"line":136,"column":382,"offset":5159}}},{"type":"text","value":":","position":{"start":{"line":136,"column":382,"offset":5159},"end":{"line":136,"column":383,"offset":5160}}}],"position":{"start":{"line":136,"column":1,"offset":4778},"end":{"line":136,"column":383,"offset":5160}}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> ApolloServer <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'apollo-server-lambda'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'express'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nexports<span class=\"token punctuation\">.</span>handler <span class=\"token operator\">=</span> server<span class=\"token punctuation\">.</span><span class=\"token function\">createHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token function\">expressAppFromMiddleware</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">middleware</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>someOtherMiddleware<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    app<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>middleware<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> app<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":138,"column":1,"offset":5162},"end":{"line":150,"column":4,"offset":5458}}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#configuring-the-underlying-express-integration","title":null,"children":[],"data":{"hProperties":{"aria-label":"configuring the underlying express integration permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Configuring the underlying Express integration","position":{"start":{"line":152,"column":4,"offset":5463},"end":{"line":152,"column":50,"offset":5509}}}],"position":{"start":{"line":152,"column":1,"offset":5460},"end":{"line":152,"column":50,"offset":5509}},"data":{"id":"configuring-the-underlying-express-integration","htmlAttributes":{"id":"configuring-the-underlying-express-integration"},"hProperties":{"id":"configuring-the-underlying-express-integration","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Because ","position":{"start":{"line":154,"column":1,"offset":5511},"end":{"line":154,"column":9,"offset":5519}}},{"type":"html","value":"<code class=\"language-text\">apollo-server-lambda</code>","position":{"start":{"line":154,"column":9,"offset":5519},"end":{"line":154,"column":31,"offset":5541}}},{"type":"text","value":" is built on top of ","position":{"start":{"line":154,"column":31,"offset":5541},"end":{"line":154,"column":51,"offset":5561}}},{"type":"html","value":"<code class=\"language-text\">apollo-server-express</code>","position":{"start":{"line":154,"column":51,"offset":5561},"end":{"line":154,"column":74,"offset":5584}}},{"type":"text","value":", you can specify the same options that ","position":{"start":{"line":154,"column":74,"offset":5584},"end":{"line":154,"column":114,"offset":5624}}},{"type":"html","value":"<code class=\"language-text\">apollo-server-express</code>","position":{"start":{"line":154,"column":114,"offset":5624},"end":{"line":154,"column":137,"offset":5647}}},{"type":"text","value":" accepts in ","position":{"start":{"line":154,"column":137,"offset":5647},"end":{"line":154,"column":149,"offset":5659}}},{"type":"html","value":"<code class=\"language-text\">getMiddleware</code>","position":{"start":{"line":154,"column":149,"offset":5659},"end":{"line":154,"column":164,"offset":5674}}},{"type":"text","value":" (or ","position":{"start":{"line":154,"column":164,"offset":5674},"end":{"line":154,"column":169,"offset":5679}}},{"type":"html","value":"<code class=\"language-text\">applyMiddleware</code>","position":{"start":{"line":154,"column":169,"offset":5679},"end":{"line":154,"column":186,"offset":5696}}},{"type":"text","value":", other than ","position":{"start":{"line":154,"column":186,"offset":5696},"end":{"line":154,"column":199,"offset":5709}}},{"type":"html","value":"<code class=\"language-text\">app</code>","position":{"start":{"line":154,"column":199,"offset":5709},"end":{"line":154,"column":204,"offset":5714}}},{"type":"text","value":") as the ","position":{"start":{"line":154,"column":204,"offset":5714},"end":{"line":154,"column":213,"offset":5723}}},{"type":"html","value":"<code class=\"language-text\">expressGetMiddlewareOptions</code>","position":{"start":{"line":154,"column":213,"offset":5723},"end":{"line":154,"column":242,"offset":5752}}},{"type":"text","value":" option to ","position":{"start":{"line":154,"column":242,"offset":5752},"end":{"line":154,"column":253,"offset":5763}}},{"type":"html","value":"<code class=\"language-text\">createHandler</code>","position":{"start":{"line":154,"column":253,"offset":5763},"end":{"line":154,"column":268,"offset":5778}}},{"type":"text","value":". The default value of this option is ","position":{"start":{"line":154,"column":268,"offset":5778},"end":{"line":154,"column":306,"offset":5816}}},{"type":"html","value":"<code class=\"language-text\">{path: '/'}</code>","position":{"start":{"line":154,"column":306,"offset":5816},"end":{"line":154,"column":319,"offset":5829}}},{"type":"text","value":" (and this value of ","position":{"start":{"line":154,"column":319,"offset":5829},"end":{"line":154,"column":339,"offset":5849}}},{"type":"html","value":"<code class=\"language-text\">path</code>","position":{"start":{"line":154,"column":339,"offset":5849},"end":{"line":154,"column":345,"offset":5855}}},{"type":"text","value":" will be used unless you explicitly override it). For example:","position":{"start":{"line":154,"column":345,"offset":5855},"end":{"line":154,"column":407,"offset":5917}}}],"position":{"start":{"line":154,"column":1,"offset":5511},"end":{"line":154,"column":407,"offset":5917}}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\">exports<span class=\"token punctuation\">.</span>handler <span class=\"token operator\">=</span> server<span class=\"token punctuation\">.</span><span class=\"token function\">createHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">expressGetMiddlewareOptions</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">disableHealthCheck</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":156,"column":1,"offset":5919},"end":{"line":162,"column":4,"offset":6040}}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#getting-request-info","title":null,"children":[],"data":{"hProperties":{"aria-label":"getting request info permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Getting request info","position":{"start":{"line":164,"column":4,"offset":6045},"end":{"line":164,"column":24,"offset":6065}}}],"position":{"start":{"line":164,"column":1,"offset":6042},"end":{"line":164,"column":24,"offset":6065}},"data":{"id":"getting-request-info","htmlAttributes":{"id":"getting-request-info"},"hProperties":{"id":"getting-request-info","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Your ApolloServer's ","position":{"start":{"line":166,"column":1,"offset":6067},"end":{"line":166,"column":21,"offset":6087}}},{"type":"html","value":"<code class=\"language-text\">context</code>","position":{"start":{"line":166,"column":21,"offset":6087},"end":{"line":166,"column":30,"offset":6096}}},{"type":"text","value":" function can read information about the current operation from both the original Lambda data structures and the Express request and response created by ","position":{"start":{"line":166,"column":30,"offset":6096},"end":{"line":166,"column":183,"offset":6249}}},{"type":"html","value":"<code class=\"language-text\">@vendia/serverless-express</code>","position":{"start":{"line":166,"column":183,"offset":6249},"end":{"line":166,"column":211,"offset":6277}}},{"type":"text","value":". These are provided to your ","position":{"start":{"line":166,"column":211,"offset":6277},"end":{"line":166,"column":240,"offset":6306}}},{"type":"html","value":"<code class=\"language-text\">context</code>","position":{"start":{"line":166,"column":240,"offset":6306},"end":{"line":166,"column":249,"offset":6315}}},{"type":"text","value":" function as ","position":{"start":{"line":166,"column":249,"offset":6315},"end":{"line":166,"column":262,"offset":6328}}},{"type":"html","value":"<code class=\"language-text\">event</code>","position":{"start":{"line":166,"column":262,"offset":6328},"end":{"line":166,"column":269,"offset":6335}}},{"type":"text","value":", ","position":{"start":{"line":166,"column":269,"offset":6335},"end":{"line":166,"column":271,"offset":6337}}},{"type":"html","value":"<code class=\"language-text\">context</code>","position":{"start":{"line":166,"column":271,"offset":6337},"end":{"line":166,"column":280,"offset":6346}}},{"type":"text","value":", and ","position":{"start":{"line":166,"column":280,"offset":6346},"end":{"line":166,"column":286,"offset":6352}}},{"type":"html","value":"<code class=\"language-text\">express</code>","position":{"start":{"line":166,"column":286,"offset":6352},"end":{"line":166,"column":295,"offset":6361}}},{"type":"text","value":" options.","position":{"start":{"line":166,"column":295,"offset":6361},"end":{"line":166,"column":304,"offset":6370}}}],"position":{"start":{"line":166,"column":1,"offset":6067},"end":{"line":166,"column":304,"offset":6370}}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":168,"column":1,"offset":6372},"end":{"line":168,"column":5,"offset":6376}}},{"type":"html","value":"<code class=\"language-text\">event</code>","position":{"start":{"line":168,"column":5,"offset":6376},"end":{"line":168,"column":12,"offset":6383}}},{"type":"text","value":" object contains the API Gateway event (HTTP headers, HTTP method, body, path, ...). The ","position":{"start":{"line":168,"column":12,"offset":6383},"end":{"line":168,"column":101,"offset":6472}}},{"type":"html","value":"<code class=\"language-text\">context</code>","position":{"start":{"line":168,"column":101,"offset":6472},"end":{"line":168,"column":110,"offset":6481}}},{"type":"text","value":" object (not to be confused with the ","position":{"start":{"line":168,"column":110,"offset":6481},"end":{"line":168,"column":147,"offset":6518}}},{"type":"html","value":"<code class=\"language-text\">context</code>","position":{"start":{"line":168,"column":147,"offset":6518},"end":{"line":168,"column":156,"offset":6527}}},{"type":"text","value":" function itself!) contains the current Lambda Context (Function Name, Function Version, awsRequestId, time remaining, ...). ","position":{"start":{"line":168,"column":156,"offset":6527},"end":{"line":168,"column":281,"offset":6652}}},{"type":"html","value":"<code class=\"language-text\">express</code>","position":{"start":{"line":168,"column":281,"offset":6652},"end":{"line":168,"column":290,"offset":6661}}},{"type":"text","value":" contains ","position":{"start":{"line":168,"column":290,"offset":6661},"end":{"line":168,"column":300,"offset":6671}}},{"type":"html","value":"<code class=\"language-text\">req</code>","position":{"start":{"line":168,"column":300,"offset":6671},"end":{"line":168,"column":305,"offset":6676}}},{"type":"text","value":" and ","position":{"start":{"line":168,"column":305,"offset":6676},"end":{"line":168,"column":310,"offset":6681}}},{"type":"html","value":"<code class=\"language-text\">res</code>","position":{"start":{"line":168,"column":310,"offset":6681},"end":{"line":168,"column":315,"offset":6686}}},{"type":"text","value":" fields with the Express request and response. The object returned from your ","position":{"start":{"line":168,"column":315,"offset":6686},"end":{"line":168,"column":392,"offset":6763}}},{"type":"html","value":"<code class=\"language-text\">context</code>","position":{"start":{"line":168,"column":392,"offset":6763},"end":{"line":168,"column":401,"offset":6772}}},{"type":"text","value":" function is provided to all of your schema resolvers in the third ","position":{"start":{"line":168,"column":401,"offset":6772},"end":{"line":168,"column":468,"offset":6839}}},{"type":"html","value":"<code class=\"language-text\">context</code>","position":{"start":{"line":168,"column":468,"offset":6839},"end":{"line":168,"column":477,"offset":6848}}},{"type":"text","value":" argument.","position":{"start":{"line":168,"column":477,"offset":6848},"end":{"line":168,"column":487,"offset":6858}}}],"position":{"start":{"line":168,"column":1,"offset":6372},"end":{"line":168,"column":487,"offset":6858}}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> ApolloServer<span class=\"token punctuation\">,</span> gql <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'apollo-server-lambda'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Construct a schema, using GraphQL schema language</span>\n<span class=\"token keyword\">const</span> typeDefs <span class=\"token operator\">=</span> gql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  type Query {\n    hello: String\n  }\n</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Provide resolver functions for your schema fields</span>\n<span class=\"token keyword\">const</span> resolvers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">Query</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function-variable function\">hello</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token string\">'Hello world!'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  typeDefs<span class=\"token punctuation\">,</span>\n  resolvers<span class=\"token punctuation\">,</span>\n  <span class=\"token function-variable function\">context</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> event<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> express <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">headers</span><span class=\"token operator\">:</span> event<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">functionName</span><span class=\"token operator\">:</span> context<span class=\"token punctuation\">.</span>functionName<span class=\"token punctuation\">,</span>\n    event<span class=\"token punctuation\">,</span>\n    context<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">expressRequest</span><span class=\"token operator\">:</span> express<span class=\"token punctuation\">.</span>req<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nexports<span class=\"token punctuation\">.</span>graphqlHandler <span class=\"token operator\">=</span> server<span class=\"token punctuation\">.</span><span class=\"token function\">createHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":170,"column":1,"offset":6860},"end":{"line":200,"column":4,"offset":7466}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":201,"column":1,"offset":7467}}}}