{"expireTime":9007200901520844000,"key":"transformer-remark-markdown-ast-e1cc44b64ce11c6794eafbf5639d1c0d-gatsby-remark-autolink-headersgatsby-remark-copy-linked-filesgatsby-remark-mermaidgatsby-remark-code-titlesgatsby-remark-prismjsgatsby-remark-rewrite-relative-linksgatsby-remark-check-links-","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"Health checks are often used by load balancers to determine if a server is available and ready to start serving traffic.","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":121,"offset":121}}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":121,"offset":121}}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#graphql-level-health-checks","title":null,"children":[],"data":{"hProperties":{"aria-label":"graphql level health checks permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"GraphQL-level health checks","position":{"start":{"line":4,"column":4,"offset":126},"end":{"line":4,"column":31,"offset":153}}}],"position":{"start":{"line":4,"column":1,"offset":123},"end":{"line":4,"column":31,"offset":153}},"data":{"id":"graphql-level-health-checks","htmlAttributes":{"id":"graphql-level-health-checks"},"hProperties":{"id":"graphql-level-health-checks","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"The most natural way to determine if your GraphQL server is healthy is to run a GraphQL operation!","position":{"start":{"line":6,"column":1,"offset":155},"end":{"line":6,"column":99,"offset":253}}}],"position":{"start":{"line":6,"column":1,"offset":155},"end":{"line":6,"column":99,"offset":253}}},{"type":"paragraph","children":[{"type":"text","value":"Every GraphQL server supports the trivial query that asks for the \"type name\" of the top-level query.  So you can run a health check as a GET against an URL like:","position":{"start":{"line":8,"column":1,"offset":255},"end":{"line":8,"column":163,"offset":417}}}],"position":{"start":{"line":8,"column":1,"offset":255},"end":{"line":8,"column":163,"offset":417}}},{"type":"html","lang":null,"meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">https://your.server/graphql?query=%7B__typename%7D</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>","position":{"start":{"line":10,"column":1,"offset":419},"end":{"line":12,"column":4,"offset":477}}},{"type":"paragraph","children":[{"type":"text","value":"This health check will run a real GraphQL operation, so if your server requires special headers or cookies in order to run any query, you'll need to provide that as well.","position":{"start":{"line":14,"column":1,"offset":479},"end":{"line":14,"column":171,"offset":649}}}],"position":{"start":{"line":14,"column":1,"offset":479},"end":{"line":14,"column":171,"offset":649}}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#http-level-health-checks","title":null,"children":[],"data":{"hProperties":{"aria-label":"http level health checks permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"HTTP-level health checks","position":{"start":{"line":16,"column":4,"offset":654},"end":{"line":16,"column":28,"offset":678}}}],"position":{"start":{"line":16,"column":1,"offset":651},"end":{"line":16,"column":28,"offset":678}},"data":{"id":"http-level-health-checks","htmlAttributes":{"id":"http-level-health-checks"},"hProperties":{"id":"http-level-health-checks","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Apollo Server also supports a simple HTTP-level health check. This is enabled by default and is served at the URL path ","position":{"start":{"line":18,"column":1,"offset":680},"end":{"line":18,"column":120,"offset":799}}},{"type":"html","value":"<code class=\"language-text\">/.well-known/apollo/server-health</code>","position":{"start":{"line":18,"column":120,"offset":799},"end":{"line":18,"column":155,"offset":834}}},{"type":"text","value":". This returns the 200 status code if the HTTP server is successfully serving. It does not invoke any of the GraphQL execution machinery. This means it may be better for your needs if your server's ","position":{"start":{"line":18,"column":155,"offset":834},"end":{"line":18,"column":353,"offset":1032}}},{"type":"link","title":null,"url":"/data/resolvers/#the-context-argument","children":[{"type":"text","value":"context function","position":{"start":{"line":18,"column":354,"offset":1033},"end":{"line":18,"column":370,"offset":1049}}}],"position":{"start":{"line":18,"column":353,"offset":1032},"end":{"line":18,"column":412,"offset":1091}}},{"type":"text","value":" requires you to be logged in, but it may be worse for your needs if you want your health check to test that your server's context function runs successfully.","position":{"start":{"line":18,"column":412,"offset":1091},"end":{"line":18,"column":570,"offset":1249}}}],"position":{"start":{"line":18,"column":1,"offset":680},"end":{"line":18,"column":570,"offset":1249}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#in-the-batteries-included-apollo-server-package","title":null,"children":[],"data":{"hProperties":{"aria-label":"in the batteries included apollo server package permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"In the batteries-included ","position":{"start":{"line":20,"column":5,"offset":1255},"end":{"line":20,"column":31,"offset":1281}}},{"type":"html","value":"<code class=\"language-text\">apollo-server</code>","position":{"start":{"line":20,"column":31,"offset":1281},"end":{"line":20,"column":46,"offset":1296}}},{"type":"text","value":" package","position":{"start":{"line":20,"column":46,"offset":1296},"end":{"line":20,"column":54,"offset":1304}}}],"position":{"start":{"line":20,"column":1,"offset":1251},"end":{"line":20,"column":54,"offset":1304}},"data":{"id":"in-the-batteries-included-apollo-server-package","htmlAttributes":{"id":"in-the-batteries-included-apollo-server-package"},"hProperties":{"id":"in-the-batteries-included-apollo-server-package","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"The batteries-included ","position":{"start":{"line":22,"column":1,"offset":1306},"end":{"line":22,"column":24,"offset":1329}}},{"type":"html","value":"<code class=\"language-text\">apollo-server</code>","position":{"start":{"line":22,"column":24,"offset":1329},"end":{"line":22,"column":39,"offset":1344}}},{"type":"text","value":" package doesn't provide you with direct access to your HTTP server, so we provide a few knobs to let you adjust the HTTP-level health check.","position":{"start":{"line":22,"column":39,"offset":1344},"end":{"line":22,"column":180,"offset":1485}}}],"position":{"start":{"line":22,"column":1,"offset":1306},"end":{"line":22,"column":180,"offset":1485}}},{"type":"paragraph","children":[{"type":"text","value":"You can pass a string ","position":{"start":{"line":24,"column":1,"offset":1487},"end":{"line":24,"column":23,"offset":1509}}},{"type":"html","value":"<code class=\"language-text\">healthCheckPath</code>","position":{"start":{"line":24,"column":23,"offset":1509},"end":{"line":24,"column":40,"offset":1526}}},{"type":"text","value":" to the ","position":{"start":{"line":24,"column":40,"offset":1526},"end":{"line":24,"column":48,"offset":1534}}},{"type":"html","value":"<code class=\"language-text\">ApolloServer</code>","position":{"start":{"line":24,"column":48,"offset":1534},"end":{"line":24,"column":62,"offset":1548}}},{"type":"text","value":" constructor to change the URL where the health check is served. You can also pass ","position":{"start":{"line":24,"column":62,"offset":1548},"end":{"line":24,"column":145,"offset":1631}}},{"type":"html","value":"<code class=\"language-text\">healthCheckPath: null</code>","position":{"start":{"line":24,"column":145,"offset":1631},"end":{"line":24,"column":168,"offset":1654}}},{"type":"text","value":" to disable the health check.","position":{"start":{"line":24,"column":168,"offset":1654},"end":{"line":24,"column":197,"offset":1683}}}],"position":{"start":{"line":24,"column":1,"offset":1487},"end":{"line":24,"column":197,"offset":1683}}},{"type":"paragraph","children":[{"type":"text","value":"If you'd like the health check to do more than just \"always return success\", you can pass an async function ","position":{"start":{"line":26,"column":1,"offset":1685},"end":{"line":26,"column":109,"offset":1793}}},{"type":"html","value":"<code class=\"language-text\">onHealthCheck</code>","position":{"start":{"line":26,"column":109,"offset":1793},"end":{"line":26,"column":124,"offset":1808}}},{"type":"text","value":" function to the ","position":{"start":{"line":26,"column":124,"offset":1808},"end":{"line":26,"column":141,"offset":1825}}},{"type":"html","value":"<code class=\"language-text\">ApolloServer</code>","position":{"start":{"line":26,"column":141,"offset":1825},"end":{"line":26,"column":155,"offset":1839}}},{"type":"text","value":" constructor. If defined, this ","position":{"start":{"line":26,"column":155,"offset":1839},"end":{"line":26,"column":186,"offset":1870}}},{"type":"html","value":"<code class=\"language-text\">onHealthCheck</code>","position":{"start":{"line":26,"column":186,"offset":1870},"end":{"line":26,"column":201,"offset":1885}}},{"type":"text","value":" async function should return if the server is deemed ","position":{"start":{"line":26,"column":201,"offset":1885},"end":{"line":26,"column":255,"offset":1939}}},{"type":"emphasis","children":[{"type":"text","value":"ready","position":{"start":{"line":26,"column":256,"offset":1940},"end":{"line":26,"column":261,"offset":1945}}}],"position":{"start":{"line":26,"column":255,"offset":1939},"end":{"line":26,"column":262,"offset":1946}}},{"type":"text","value":" or ","position":{"start":{"line":26,"column":262,"offset":1946},"end":{"line":26,"column":266,"offset":1950}}},{"type":"html","value":"<code class=\"language-text\">throw</code>","position":{"start":{"line":26,"column":266,"offset":1950},"end":{"line":26,"column":273,"offset":1957}}},{"type":"text","value":" if there is an error. Returning (resolving the ","position":{"start":{"line":26,"column":273,"offset":1957},"end":{"line":26,"column":321,"offset":2005}}},{"type":"html","value":"<code class=\"language-text\">Promise</code>","position":{"start":{"line":26,"column":321,"offset":2005},"end":{"line":26,"column":330,"offset":2014}}},{"type":"text","value":") will result in an HTTP status code of 200, which is generally desired by most health-check tooling (e.g. Kubernetes, AWS, etc.), while ","position":{"start":{"line":26,"column":330,"offset":2014},"end":{"line":26,"column":467,"offset":2151}}},{"type":"html","value":"<code class=\"language-text\">throw</code>","position":{"start":{"line":26,"column":467,"offset":2151},"end":{"line":26,"column":474,"offset":2158}}},{"type":"text","value":"ing (rejecting the ","position":{"start":{"line":26,"column":474,"offset":2158},"end":{"line":26,"column":493,"offset":2177}}},{"type":"html","value":"<code class=\"language-text\">Promise</code>","position":{"start":{"line":26,"column":493,"offset":2177},"end":{"line":26,"column":502,"offset":2186}}},{"type":"text","value":") will result in an HTTP status code of 503.","position":{"start":{"line":26,"column":502,"offset":2186},"end":{"line":26,"column":546,"offset":2230}}}],"position":{"start":{"line":26,"column":1,"offset":1685},"end":{"line":26,"column":546,"offset":2230}}},{"type":"html","lang":"js{10-17}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ApolloServer<span class=\"token punctuation\">,</span> gql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'apollo-server'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// Undefined for brevity.</span>\n<span class=\"token keyword\">const</span> typeDefs <span class=\"token operator\">=</span> gql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> resolvers <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  typeDefs<span class=\"token punctuation\">,</span>\n  resolvers<span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token keyword\">async</span> <span class=\"token function\">onHealthCheck</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">everythingLooksHealthy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Error</span><span class=\"token punctuation\">(</span><span class=\"token string\">'...'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> url <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">ðŸš€ Server ready at </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>\n    <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">Try your health check at: </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.well-known/apollo/server-health</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":28,"column":1,"offset":2232},"end":{"line":53,"column":4,"offset":2743}}},{"type":"paragraph","children":[{"type":"text","value":"Note that the ","position":{"start":{"line":55,"column":1,"offset":2745},"end":{"line":55,"column":15,"offset":2759}}},{"type":"html","value":"<code class=\"language-text\">healthCheckPath</code>","position":{"start":{"line":55,"column":15,"offset":2759},"end":{"line":55,"column":32,"offset":2776}}},{"type":"text","value":" and ","position":{"start":{"line":55,"column":32,"offset":2776},"end":{"line":55,"column":37,"offset":2781}}},{"type":"html","value":"<code class=\"language-text\">onHealthCheck</code>","position":{"start":{"line":55,"column":37,"offset":2781},"end":{"line":55,"column":52,"offset":2796}}},{"type":"text","value":"  options are ","position":{"start":{"line":55,"column":52,"offset":2796},"end":{"line":55,"column":66,"offset":2810}}},{"type":"emphasis","children":[{"type":"text","value":"only","position":{"start":{"line":55,"column":67,"offset":2811},"end":{"line":55,"column":71,"offset":2815}}}],"position":{"start":{"line":55,"column":66,"offset":2810},"end":{"line":55,"column":72,"offset":2816}}},{"type":"text","value":" accepted by the batteries-include ","position":{"start":{"line":55,"column":72,"offset":2816},"end":{"line":55,"column":107,"offset":2851}}},{"type":"html","value":"<code class=\"language-text\">apollo-server</code>","position":{"start":{"line":55,"column":107,"offset":2851},"end":{"line":55,"column":122,"offset":2866}}},{"type":"text","value":" constructor, not by other framework integration packages.","position":{"start":{"line":55,"column":122,"offset":2866},"end":{"line":55,"column":180,"offset":2924}}}],"position":{"start":{"line":55,"column":1,"offset":2745},"end":{"line":55,"column":180,"offset":2924}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#in-framework-integration-packages","title":null,"children":[],"data":{"hProperties":{"aria-label":"in framework integration packages permalink","class":"anchor before"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"In framework integration packages","position":{"start":{"line":57,"column":5,"offset":2930},"end":{"line":57,"column":38,"offset":2963}}}],"position":{"start":{"line":57,"column":1,"offset":2926},"end":{"line":57,"column":38,"offset":2963}},"data":{"id":"in-framework-integration-packages","htmlAttributes":{"id":"in-framework-integration-packages"},"hProperties":{"id":"in-framework-integration-packages","style":"position:relative;"}}},{"type":"paragraph","children":[{"type":"text","value":"Like ","position":{"start":{"line":59,"column":1,"offset":2965},"end":{"line":59,"column":6,"offset":2970}}},{"type":"html","value":"<code class=\"language-text\">apollo-server</code>","position":{"start":{"line":59,"column":6,"offset":2970},"end":{"line":59,"column":21,"offset":2985}}},{"type":"text","value":", framework integration packages like ","position":{"start":{"line":59,"column":21,"offset":2985},"end":{"line":59,"column":59,"offset":3023}}},{"type":"html","value":"<code class=\"language-text\">apollo-server-express</code>","position":{"start":{"line":59,"column":59,"offset":3023},"end":{"line":59,"column":82,"offset":3046}}},{"type":"text","value":" and ","position":{"start":{"line":59,"column":82,"offset":3046},"end":{"line":59,"column":87,"offset":3051}}},{"type":"html","value":"<code class=\"language-text\">apollo-server-lambda</code>","position":{"start":{"line":59,"column":87,"offset":3051},"end":{"line":59,"column":109,"offset":3073}}},{"type":"text","value":" also serve a health check at the URL path ","position":{"start":{"line":59,"column":109,"offset":3073},"end":{"line":59,"column":152,"offset":3116}}},{"type":"html","value":"<code class=\"language-text\">/.well-known/apollo/server-health</code>","position":{"start":{"line":59,"column":152,"offset":3116},"end":{"line":59,"column":187,"offset":3151}}},{"type":"text","value":" by default. Customizing this health check is done in the ","position":{"start":{"line":59,"column":187,"offset":3151},"end":{"line":59,"column":245,"offset":3209}}},{"type":"link","title":null,"url":"/api/apollo-server/#framework-specific-middleware-function","children":[{"type":"text","value":"framework-specific middleware function","position":{"start":{"line":59,"column":246,"offset":3210},"end":{"line":59,"column":284,"offset":3248}}}],"position":{"start":{"line":59,"column":245,"offset":3209},"end":{"line":59,"column":347,"offset":3311}}},{"type":"text","value":" such as ","position":{"start":{"line":59,"column":347,"offset":3311},"end":{"line":59,"column":356,"offset":3320}}},{"type":"html","value":"<code class=\"language-text\">applyMiddleware</code>","position":{"start":{"line":59,"column":356,"offset":3320},"end":{"line":59,"column":373,"offset":3337}}},{"type":"text","value":" or ","position":{"start":{"line":59,"column":373,"offset":3337},"end":{"line":59,"column":377,"offset":3341}}},{"type":"html","value":"<code class=\"language-text\">createHandler</code>","position":{"start":{"line":59,"column":377,"offset":3341},"end":{"line":59,"column":392,"offset":3356}}},{"type":"text","value":" rather than in the ","position":{"start":{"line":59,"column":392,"offset":3356},"end":{"line":59,"column":412,"offset":3376}}},{"type":"html","value":"<code class=\"language-text\">ApolloServer</code>","position":{"start":{"line":59,"column":412,"offset":3376},"end":{"line":59,"column":426,"offset":3390}}},{"type":"text","value":" constructor.","position":{"start":{"line":59,"column":426,"offset":3390},"end":{"line":59,"column":439,"offset":3403}}}],"position":{"start":{"line":59,"column":1,"offset":2965},"end":{"line":59,"column":439,"offset":3403}}},{"type":"paragraph","children":[{"type":"text","value":"To disable serving the health check endpoint, pass ","position":{"start":{"line":61,"column":1,"offset":3405},"end":{"line":61,"column":52,"offset":3456}}},{"type":"html","value":"<code class=\"language-text\">disableHealthCheck: true</code>","position":{"start":{"line":61,"column":52,"offset":3456},"end":{"line":61,"column":78,"offset":3482}}},{"type":"text","value":" to the framework-specific middleware function.","position":{"start":{"line":61,"column":78,"offset":3482},"end":{"line":61,"column":125,"offset":3529}}}],"position":{"start":{"line":61,"column":1,"offset":3405},"end":{"line":61,"column":125,"offset":3529}}},{"type":"paragraph","children":[{"type":"text","value":"These packages also support an ","position":{"start":{"line":63,"column":1,"offset":3531},"end":{"line":63,"column":32,"offset":3562}}},{"type":"html","value":"<code class=\"language-text\">onHealthCheck</code>","position":{"start":{"line":63,"column":32,"offset":3562},"end":{"line":63,"column":47,"offset":3577}}},{"type":"text","value":" function like ","position":{"start":{"line":63,"column":47,"offset":3577},"end":{"line":63,"column":62,"offset":3592}}},{"type":"html","value":"<code class=\"language-text\">apollo-server</code>","position":{"start":{"line":63,"column":62,"offset":3592},"end":{"line":63,"column":77,"offset":3607}}},{"type":"text","value":"; this function is passed to the framework-specific middleware function rather than to the ","position":{"start":{"line":63,"column":77,"offset":3607},"end":{"line":63,"column":168,"offset":3698}}},{"type":"html","value":"<code class=\"language-text\">ApolloServer</code>","position":{"start":{"line":63,"column":168,"offset":3698},"end":{"line":63,"column":182,"offset":3712}}},{"type":"text","value":" constructor. If you're using ","position":{"start":{"line":63,"column":182,"offset":3712},"end":{"line":63,"column":212,"offset":3742}}},{"type":"html","value":"<code class=\"language-text\">apollo-server-azure-functions</code>","position":{"start":{"line":63,"column":212,"offset":3742},"end":{"line":63,"column":243,"offset":3773}}},{"type":"text","value":" (which doesn't provide a general way to customize its HTTP serving behavior), this option may be helpful. For other integrations such as ","position":{"start":{"line":63,"column":243,"offset":3773},"end":{"line":63,"column":381,"offset":3911}}},{"type":"html","value":"<code class=\"language-text\">apollo-server-express</code>","position":{"start":{"line":63,"column":381,"offset":3911},"end":{"line":63,"column":404,"offset":3934}}},{"type":"text","value":", we don't recommend that you customize the health check via Apollo. Since you're already setting up your web framework, if you need to customize the behavior of the health check then it is probably more straightforward to simple define a health check handler yourself directly in your web framework (and pass ","position":{"start":{"line":63,"column":404,"offset":3934},"end":{"line":63,"column":714,"offset":4244}}},{"type":"html","value":"<code class=\"language-text\">disableHealthCheck: true</code>","position":{"start":{"line":63,"column":714,"offset":4244},"end":{"line":63,"column":740,"offset":4270}}},{"type":"text","value":" to disable Apollo Server's health check). A future major version of Apollo Server may change the health check feature to be specific to the \"batteries-included\" ","position":{"start":{"line":63,"column":740,"offset":4270},"end":{"line":63,"column":902,"offset":4432}}},{"type":"html","value":"<code class=\"language-text\">apollo-server</code>","position":{"start":{"line":63,"column":902,"offset":4432},"end":{"line":63,"column":917,"offset":4447}}},{"type":"text","value":" package rather than part of all framework integration packages. For similar reasons, you can't customize the health check path in framework integration packages; just disable the built-in health check and add your own at your preferred path.","position":{"start":{"line":63,"column":917,"offset":4447},"end":{"line":63,"column":1159,"offset":4689}}}],"position":{"start":{"line":63,"column":1,"offset":3531},"end":{"line":63,"column":1159,"offset":4689}}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":64,"column":1,"offset":4690}}}}