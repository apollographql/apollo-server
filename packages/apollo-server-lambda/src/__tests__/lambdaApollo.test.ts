import { ApolloServer } from '../ApolloServer';
import testSuite, {
  schema as Schema,
  CreateAppOptions,
} from 'apollo-server-integration-testsuite';
import { Config } from 'apollo-server-core';
import {createMockServer} from './mockServer';

const createLambda = async (options: CreateAppOptions = {}) => {
  const server = new ApolloServer(
    (options.graphqlOptions as Config) || { schema: Schema },
  );

  const handler = server.createHandler();

  return createMockServer(handler);
}

describe('integration:Lambda', () => {
  testSuite({createApp: createLambda, serverlessFramework: true});
});
